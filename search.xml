<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>typecho给后台admin界面添加图表分析</title>
      <link href="/2025/08/11/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/typecho%E7%BB%99%E5%90%8E%E5%8F%B0admin%E7%95%8C%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%9B%BE%E8%A1%A8%E5%88%86%E6%9E%90/"/>
      <url>/2025/08/11/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/typecho%E7%BB%99%E5%90%8E%E5%8F%B0admin%E7%95%8C%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%9B%BE%E8%A1%A8%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>觉得后台admin空荡荡的，索性加个图表自己魔改一下下。以下是完整的index.php</p><p><img src="/./assets/typecho%E7%BB%99%E5%90%8E%E5%8F%B0admin%E7%95%8C%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%9B%BE%E8%A1%A8%E5%88%86%E6%9E%90/1488753526.png" alt="网站概要-白荼日记-Powered-by-Typecho.png#B #S #R #60%"></p><p>感兴趣的可以直接下载index.php文件覆盖&#x2F;admin 下面的index.php文件</p><h2 id="下载地址："><a href="#下载地址：" class="headerlink" title="下载地址："></a>下载地址：</h2><p><a href="https://wonder1999.lanzouu.com/ikRiy32sfnah">https://wonder1999.lanzouu.com/ikRiy32sfnah</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;common.php&#x27;</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;header.php&#x27;</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;menu.php&#x27;</span>;</span><br><span class="line"><span class="variable">$stat</span> = <span class="title class_">\Widget\Stat</span>::<span class="title function_ invoke__">alloc</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://blog.iletter.top/usr/blog_img/chart.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 引入 Font Awesome 图标库 --&gt;</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css&quot;</span>&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"><span class="comment">/* 自定义美化样式 */</span></span><br><span class="line">.typecho-dashboard &#123;</span><br><span class="line">    padding: <span class="number">20</span>px <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.card &#123;</span><br><span class="line">    background-color: <span class="comment">#fff;</span></span><br><span class="line">    border-radius: <span class="number">8</span>px;</span><br><span class="line">    box-shadow: <span class="number">0</span> <span class="number">2</span>px <span class="number">4</span>px <span class="title function_ invoke__">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">    padding: <span class="number">20</span>px;</span><br><span class="line">    margin-bottom: <span class="number">20</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.card-title &#123;</span><br><span class="line">    margin-top: <span class="number">0</span>;</span><br><span class="line">    margin-bottom: <span class="number">15</span>px;</span><br><span class="line">    padding-bottom: <span class="number">10</span>px;</span><br><span class="line">    border-bottom: <span class="number">1</span>px solid <span class="comment">#eee;</span></span><br><span class="line">    color: <span class="comment">#333;</span></span><br><span class="line">    font-size: <span class="number">1.2</span>em;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 欢迎区域 */</span></span><br><span class="line">.welcome-card &#123;</span><br><span class="line">    background: linear-<span class="title function_ invoke__">gradient</span>(<span class="number">135</span>deg, #<span class="number">1</span>f1f20 <span class="number">0</span>%, #<span class="number">0076</span>bb <span class="number">100</span>%);</span><br><span class="line">    color: white;</span><br><span class="line">&#125;</span><br><span class="line">.welcome-card h3 &#123;</span><br><span class="line">    color: white;</span><br><span class="line">    margin-top: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.welcome-card p &#123;</span><br><span class="line">    font-size: <span class="number">1.1</span>em;</span><br><span class="line">    margin-bottom: <span class="number">20</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.welcome-card a &#123;</span><br><span class="line">    color: <span class="comment">#fff;</span></span><br><span class="line">    text-decoration: underline;</span><br><span class="line">&#125;</span><br><span class="line">.welcome-card a:hover &#123;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">    opacity: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 快捷链接 */</span></span><br><span class="line"><span class="comment">#start-link &#123;</span></span><br><span class="line">    <span class="keyword">list</span>-style: none;</span><br><span class="line">    padding: <span class="number">0</span>;</span><br><span class="line">    margin: <span class="number">0</span>;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    gap: <span class="number">10</span>px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#start-link li &#123;</span></span><br><span class="line">    margin: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#start-link a &#123;</span></span><br><span class="line">    display: inline-block;</span><br><span class="line">    padding: <span class="number">8</span>px <span class="number">16</span>px;</span><br><span class="line">    background-color: <span class="title function_ invoke__">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span><br><span class="line">    border-radius: <span class="number">4</span>px;</span><br><span class="line">    color: white !important;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">    transition: background-color <span class="number">0.3</span>s ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#start-link a:hover &#123;</span></span><br><span class="line">    background-color: <span class="title function_ invoke__">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#start-link .balloon &#123;</span></span><br><span class="line">    background-color: <span class="comment">#ff6b6b;</span></span><br><span class="line">    color: white;</span><br><span class="line">    border-radius: <span class="number">10</span>px;</span><br><span class="line">    padding: <span class="number">2</span>px <span class="number">6</span>px;</span><br><span class="line">    font-size: <span class="number">0.8</span>em;</span><br><span class="line">    margin-left: <span class="number">5</span>px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 统计卡片 */</span></span><br><span class="line">.stat-cards &#123;</span><br><span class="line">    display: grid;</span><br><span class="line">    grid-template-columns: <span class="title function_ invoke__">repeat</span>(auto-fit, <span class="title function_ invoke__">minmax</span>(<span class="number">200</span>px, <span class="number">1</span>fr));</span><br><span class="line">    gap: <span class="number">15</span>px;</span><br><span class="line">    margin-bottom: <span class="number">20</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.stat-card &#123;</span><br><span class="line">    background-color: <span class="comment">#f8f9fa;</span></span><br><span class="line">    border: <span class="number">1</span>px solid <span class="comment">#e9ecef;</span></span><br><span class="line">    border-radius: <span class="number">8</span>px;</span><br><span class="line">    padding: <span class="number">15</span>px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    transition: transform <span class="number">0.2</span>s ease, box-shadow <span class="number">0.2</span>s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.stat-icon &#123;</span><br><span class="line">    font-size: <span class="number">2</span>em;</span><br><span class="line">    margin-bottom: <span class="number">10</span>px;</span><br><span class="line">    color: <span class="comment">#000000; /* 可根据不同类型调整颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line">.stat-number &#123;</span><br><span class="line">    font-size: <span class="number">1.8</span>em;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    margin: <span class="number">5</span>px <span class="number">0</span>;</span><br><span class="line">    color: <span class="comment">#495057;</span></span><br><span class="line">&#125;</span><br><span class="line">.stat-label &#123;</span><br><span class="line">    font-size: <span class="number">0.9</span>em;</span><br><span class="line">    color: <span class="comment">#6c757d;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 最近列表 */</span></span><br><span class="line">.latest-link ul &#123;</span><br><span class="line">    <span class="keyword">list</span>-style: none;</span><br><span class="line">    padding: <span class="number">0</span>;</span><br><span class="line">    margin: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.latest-link li &#123;</span><br><span class="line">    padding: <span class="number">8</span>px <span class="number">0</span>;</span><br><span class="line">    border-bottom: <span class="number">1</span>px solid <span class="comment">#eee;</span></span><br><span class="line">&#125;</span><br><span class="line">.latest-link li:last-child &#123;</span><br><span class="line">    border-bottom: none;</span><br><span class="line">&#125;</span><br><span class="line">.latest-link .title &#123;</span><br><span class="line">    margin-left: <span class="number">5</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.latest-link span &#123;</span><br><span class="line">    color: <span class="comment">#6c757d;</span></span><br><span class="line">    font-size: <span class="number">0.9</span>em;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 图表区域 - 重新规划 */</span></span><br><span class="line">.chart-container &#123;</span><br><span class="line">    max-width: <span class="number">1200</span>px; <span class="comment">/* 限制图表区域最大宽度 */</span></span><br><span class="line">    margin: <span class="number">0</span> auto; <span class="comment">/* 水平居中 */</span></span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    gap: <span class="number">20</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.chart-row &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    gap: <span class="number">20</span>px;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">&#125;</span><br><span class="line">.chart-box &#123;</span><br><span class="line">    flex: <span class="number">1</span>;</span><br><span class="line">    min-width: <span class="number">250</span>px; <span class="comment">/* 调整最小宽度以适应更多屏幕 */</span></span><br><span class="line">    background-color: <span class="comment">#fff;</span></span><br><span class="line">    border-radius: <span class="number">8</span>px;</span><br><span class="line">    <span class="comment">/*box-shadow: 0 2px 4px rgba(0,0,0,0.1);*/</span></span><br><span class="line">    padding: <span class="number">15</span>px;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column; <span class="comment">/* 确保内部元素垂直排列 */</span></span><br><span class="line">&#125;</span><br><span class="line">.chart-box h4 &#123;</span><br><span class="line">    margin: <span class="number">0</span> <span class="number">0</span> <span class="number">10</span>px <span class="number">0</span>; <span class="comment">/* 调整标题边距 */</span></span><br><span class="line">    text-align: center;</span><br><span class="line">    color: <span class="comment">#333;</span></span><br><span class="line">    flex-shrink: <span class="number">0</span>; <span class="comment">/* 防止标题被压缩 */</span></span><br><span class="line">&#125;</span><br><span class="line">.chart-box canvas &#123;</span><br><span class="line">    width: <span class="number">100</span>% !important; <span class="comment">/* 确保画布宽度占满容器 */</span></span><br><span class="line">    max-height: <span class="number">300</span>px; <span class="comment">/* 限制图表最大高度 */</span></span><br><span class="line">    flex-grow: <span class="number">1</span>; <span class="comment">/* 画布占据剩余空间 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 响应式调整 */</span></span><br><span class="line">@<span class="title function_ invoke__">media</span> (max-<span class="attr">width</span>: <span class="number">768</span>px) &#123;</span><br><span class="line">    .stat-cards &#123;</span><br><span class="line">        grid-template-columns: <span class="title function_ invoke__">repeat</span>(<span class="number">2</span>, <span class="number">1</span>fr);</span><br><span class="line">    &#125;</span><br><span class="line">    .chart-row &#123;</span><br><span class="line">        flex-direction: column; <span class="comment">/* 小屏幕时堆叠 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    .chart-box &#123;</span><br><span class="line">        min-width: <span class="number">100</span>%; <span class="comment">/* 小屏幕时占满宽度 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#start-link &#123;</span></span><br><span class="line">        flex-direction: column;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 中等屏幕调整 - 让图表在中等屏幕也能两列显示 */</span></span><br><span class="line">@<span class="title function_ invoke__">media</span> (min-<span class="attr">width</span>: <span class="number">769</span>px) <span class="keyword">and</span> (max-width: <span class="number">1100</span>px) &#123;</span><br><span class="line">    .chart-row &#123;</span><br><span class="line">        <span class="comment">/* 在这个范围内，允许换行，但.chart-box的flex行为会使其尽可能并排 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    .chart-box &#123;</span><br><span class="line">        <span class="comment">/* 可以微调 min-width 来控制换行点 */</span></span><br><span class="line">        min-width: <span class="title function_ invoke__">calc</span>(<span class="number">50</span>% - <span class="number">10</span>px);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">main</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">container</span> <span class="title">typecho</span>-<span class="title">dashboard</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> <span class="title">include</span> &#x27;<span class="title">page</span>-<span class="title">title</span>.<span class="title">php</span>&#x27;; ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">row</span> <span class="title">typecho</span>-<span class="title">page</span>-<span class="title">main</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;!-- 欢迎卡片 --&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">mb</span>-12&quot; <span class="title">role</span>=&quot;<span class="title">main</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">card</span> <span class="title">welcome</span>-<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">h3</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;欢迎使用 <span class="title">Typecho</span>&#x27;); ?&gt;&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">p</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;目前有 &lt;<span class="title">em</span>&gt;%<span class="title">s</span>&lt;/<span class="title">em</span>&gt; 篇文章, 并有 &lt;<span class="title">em</span>&gt;%<span class="title">s</span>&lt;/<span class="title">em</span>&gt; 条关于你的评论在 &lt;<span class="title">em</span>&gt;%<span class="title">s</span>&lt;/<span class="title">em</span>&gt; 个分类中.&#x27;, $<span class="title">stat</span>-&gt;<span class="title">myPublishedPostsNum</span>, $<span class="title">stat</span>-&gt;<span class="title">myPublishedCommentsNum</span>, $<span class="title">stat</span>-&gt;<span class="title">categoriesNum</span>); ?&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">ul</span> <span class="title">id</span>=&quot;<span class="title">start</span>-<span class="title">link</span>&quot; <span class="title">class</span>=&quot;<span class="title">clearfix</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">user</span>-&gt;<span class="title">pass</span>(&#x27;<span class="title">contributor</span>&#x27;, <span class="title">true</span>)): ?&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">write</span>-<span class="title">post</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">pen</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;撰写新文章&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">user</span>-&gt;<span class="title">pass</span>(&#x27;<span class="title">editor</span>&#x27;, <span class="title">true</span>) &amp;&amp; &#x27;<span class="title">on</span>&#x27; == $<span class="title">request</span>-&gt;<span class="title">get</span>(&#x27;<span class="title">__typecho_all_comments</span>&#x27;) &amp;&amp; $<span class="title">stat</span>-&gt;<span class="title">waitingCommentsNum</span> &gt; 0): ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">comments</span>.<span class="title">php</span>?<span class="title">status</span>=<span class="title">waiting</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">comments</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;待审核的评论&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">balloon</span>&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">stat</span>-&gt;<span class="title">waitingCommentsNum</span>(); ?&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">elseif</span> ($<span class="title">stat</span>-&gt;<span class="title">myWaitingCommentsNum</span> &gt; 0): ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">comments</span>.<span class="title">php</span>?<span class="title">status</span>=<span class="title">waiting</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">comments</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;待审核评论&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">balloon</span>&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">stat</span>-&gt;<span class="title">myWaitingCommentsNum</span>(); ?&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">user</span>-&gt;<span class="title">pass</span>(&#x27;<span class="title">editor</span>&#x27;, <span class="title">true</span>) &amp;&amp; &#x27;<span class="title">on</span>&#x27; == $<span class="title">request</span>-&gt;<span class="title">get</span>(&#x27;<span class="title">__typecho_all_comments</span>&#x27;) &amp;&amp; $<span class="title">stat</span>-&gt;<span class="title">spamCommentsNum</span> &gt; 0): ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">comments</span>.<span class="title">php</span>?<span class="title">status</span>=<span class="title">spam</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">trash</span>-<span class="title">alt</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;垃圾评论&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">balloon</span>&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">stat</span>-&gt;<span class="title">spamCommentsNum</span>(); ?&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">elseif</span> ($<span class="title">stat</span>-&gt;<span class="title">mySpamCommentsNum</span> &gt; 0): ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">comments</span>.<span class="title">php</span>?<span class="title">status</span>=<span class="title">spam</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">trash</span>-<span class="title">alt</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;垃圾评论&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">balloon</span>&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">stat</span>-&gt;<span class="title">mySpamCommentsNum</span>(); ?&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">user</span>-&gt;<span class="title">pass</span>(&#x27;<span class="title">administrator</span>&#x27;, <span class="title">true</span>)): ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">posts</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">list</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;文章管理&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">plugins</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">plug</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;插件管理&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">options</span>-<span class="title">general</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">cog</span>&quot;&gt;&lt;/<span class="title">i</span>&gt; &lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;系统设置&#x27;); ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;!-- 统计卡片 --&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">mb</span>-12&quot;&gt;</span></span><br><span class="line"><span class="class">                 &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">cards</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">posts</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">icon</span>&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">file</span>-<span class="title">alt</span>&quot;&gt;&lt;/<span class="title">i</span>&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">number</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> $<span class="title">stat</span>-&gt;<span class="title">myPublishedPostsNum</span>; ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">label</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;文章&#x27;); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">comments</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">icon</span>&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">comment</span>&quot;&gt;&lt;/<span class="title">i</span>&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">number</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> $<span class="title">stat</span>-&gt;<span class="title">myPublishedCommentsNum</span>; ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">label</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;评论&#x27;); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">categories</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">icon</span>&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">folder</span>&quot;&gt;&lt;/<span class="title">i</span>&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">number</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> $<span class="title">stat</span>-&gt;<span class="title">categoriesNum</span>; ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">label</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;分类&#x27;); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">options</span>-&gt;<span class="title">adminUrl</span>(&#x27;<span class="title">manage</span>-<span class="title">tags</span>.<span class="title">php</span>&#x27;); ?&gt;&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">icon</span>&quot;&gt;&lt;<span class="title">i</span> <span class="title">class</span>=&quot;<span class="title">fas</span> <span class="title">fa</span>-<span class="title">tags</span>&quot;&gt;&lt;/<span class="title">i</span>&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">number</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">echo</span> $<span class="title">stat</span>-&gt;<span class="title">tagsNum</span>; ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">stat</span>-<span class="title">label</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;标签&#x27;); ?&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                         &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;!-- 可根据需要添加更多统计 --&gt;</span></span><br><span class="line"><span class="class">                 &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;!-- 左侧内容：最近文章 --&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">mb</span>-12 <span class="title">col</span>-<span class="title">tb</span>-6&quot; <span class="title">role</span>=&quot;<span class="title">complementary</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">h3</span> <span class="title">class</span>=&quot;<span class="title">card</span>-<span class="title">title</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;最近发布的文章&#x27;); ?&gt;&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;?<span class="title">php</span> \<span class="title">Widget</span>\<span class="title">Contents</span>\<span class="title">Post</span>\<span class="title">Recent</span>::<span class="title">alloc</span>(&#x27;<span class="title">pageSize</span>=10&#x27;)-&gt;<span class="title">to</span>($<span class="title">posts</span>); ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">latest</span>-<span class="title">link</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">posts</span>-&gt;<span class="title">have</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">while</span> ($<span class="title">posts</span>-&gt;<span class="title">next</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">span</span>&gt;&lt;?<span class="title">php</span> $<span class="title">posts</span>-&gt;<span class="title">date</span>(&#x27;<span class="title">n</span>.<span class="title">j</span>&#x27;); ?&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">posts</span>-&gt;<span class="title">permalink</span>(); ?&gt;&quot; <span class="title">class</span>=&quot;<span class="title">title</span>&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">posts</span>-&gt;<span class="title">title</span>(); ?&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">endwhile</span>; ?&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">li</span>&gt;&lt;<span class="title">em</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;暂时没有文章&#x27;); ?&gt;&lt;/<span class="title">em</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;!-- 右侧内容：最近评论 --&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">mb</span>-12 <span class="title">col</span>-<span class="title">tb</span>-6&quot; <span class="title">role</span>=&quot;<span class="title">complementary</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">h3</span> <span class="title">class</span>=&quot;<span class="title">card</span>-<span class="title">title</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;最近得到的回复&#x27;); ?&gt;&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">latest</span>-<span class="title">link</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> \<span class="title">Widget</span>\<span class="title">Comments</span>\<span class="title">Recent</span>::<span class="title">alloc</span>(&#x27;<span class="title">pageSize</span>=10&#x27;)-&gt;<span class="title">to</span>($<span class="title">comments</span>); ?&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">comments</span>-&gt;<span class="title">have</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">while</span> ($<span class="title">comments</span>-&gt;<span class="title">next</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">span</span>&gt;&lt;?<span class="title">php</span> $<span class="title">comments</span>-&gt;<span class="title">date</span>(&#x27;<span class="title">n</span>.<span class="title">j</span>&#x27;); ?&gt;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">                                    &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">comments</span>-&gt;<span class="title">permalink</span>(); ?&gt;&quot; <span class="title">class</span>=&quot;<span class="title">title</span>&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">comments</span>-&gt;<span class="title">author</span>(<span class="title">false</span>); ?&gt;&lt;/<span class="title">a</span>&gt;:</span></span><br><span class="line"><span class="class">                                    &lt;?<span class="title">php</span> $<span class="title">comments</span>-&gt;<span class="title">excerpt</span>(35, &#x27;...&#x27;); ?&gt;</span></span><br><span class="line"><span class="class">                                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;?<span class="title">php</span> <span class="title">endwhile</span>; ?&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">li</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;暂时没有回复&#x27;); ?&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;!-- 图表显示区域 --&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">mb</span>-12&quot; <span class="title">role</span>=&quot;<span class="title">complementary</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">card</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">h3</span> <span class="title">class</span>=&quot;<span class="title">card</span>-<span class="title">title</span>&quot; <span class="title">style</span>=&quot;<span class="title">color</span>: #333;&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;文章统计数据&#x27;); ?&gt;&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">chart</span>-<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">chart</span>-<span class="title">row</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;!-- 月度发布图表 --&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">chart</span>-<span class="title">box</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">h4</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;月度文章发布趋势&#x27;); ?&gt;&lt;/<span class="title">h4</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">canvas</span> <span class="title">id</span>=&quot;<span class="title">monthlyPostChart</span>&quot; <span class="title">height</span>=&quot;250&quot;&gt;&lt;/<span class="title">canvas</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;!-- 状态分布图表 --&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">chart</span>-<span class="title">box</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">h4</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;文章状态分布&#x27;); ?&gt;&lt;/<span class="title">h4</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">canvas</span> <span class="title">id</span>=&quot;<span class="title">statusChart</span>&quot; <span class="title">height</span>=&quot;250&quot;&gt;&lt;/<span class="title">canvas</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">chart</span>-<span class="title">row</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                            &lt;!-- 分类文章统计 --&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">chart</span>-<span class="title">box</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">h4</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;各分类文章数量&#x27;); ?&gt;&lt;/<span class="title">h4</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">canvas</span> <span class="title">id</span>=&quot;<span class="title">categoryChart</span>&quot; <span class="title">height</span>=&quot;250&quot;&gt;&lt;/<span class="title">canvas</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;!-- 标签文章统计 --&gt;</span></span><br><span class="line"><span class="class">                            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">chart</span>-<span class="title">box</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">h4</span>&gt;&lt;?<span class="title">php</span> <span class="title">_e</span>(&#x27;热门标签文章数量 (<span class="title">Top10</span>)&#x27;); ?&gt;&lt;/<span class="title">h4</span>&gt;</span></span><br><span class="line"><span class="class">                                &lt;<span class="title">canvas</span> <span class="title">id</span>=&quot;<span class="title">tagChart</span>&quot; <span class="title">height</span>=&quot;250&quot;&gt;&lt;/<span class="title">canvas</span>&gt;</span></span><br><span class="line"><span class="class">                            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class"><span class="title">include</span> &#x27;<span class="title">copyright</span>.<span class="title">php</span>&#x27;;</span></span><br><span class="line"><span class="class"><span class="title">include</span> &#x27;<span class="title">common</span>-<span class="title">js</span>.<span class="title">php</span>&#x27;;</span></span><br><span class="line"><span class="class">?&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="class">  $(<span class="title">document</span>).<span class="title">ready</span>(<span class="title">function</span>() </span>&#123;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">// ==================== PHP 数据计算部分 ====================</span></span><br><span class="line">    <span class="comment">// 1. 月度文章统计数据</span></span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">    <span class="comment">// 月度文章统计</span></span><br><span class="line">    <span class="variable">$select</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()</span><br><span class="line">        -&gt;<span class="keyword">from</span>(<span class="string">&#x27;table.contents&#x27;</span>)</span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type = ?&#x27;</span>, <span class="string">&#x27;post&#x27;</span>)</span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;status = ?&#x27;</span>, <span class="string">&#x27;publish&#x27;</span>);</span><br><span class="line">    <span class="variable">$posts</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$select</span>);</span><br><span class="line">    <span class="variable">$monthlyData</span> = [];</span><br><span class="line">    <span class="variable">$monthLabels</span> = [];</span><br><span class="line">    <span class="variable">$currentYear</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y&#x27;</span>);</span><br><span class="line">    <span class="variable">$currentMonth</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;n&#x27;</span>);</span><br><span class="line">    <span class="comment">// 初始化最近12个月的数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">11</span>; <span class="variable">$i</span> &gt;= <span class="number">0</span>; <span class="variable">$i</span>--) &#123;</span><br><span class="line">        <span class="variable">$year</span> = <span class="variable">$currentYear</span>;</span><br><span class="line">        <span class="variable">$month</span> = <span class="variable">$currentMonth</span> - <span class="variable">$i</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$month</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable">$month</span> += <span class="number">12</span>;</span><br><span class="line">            <span class="variable">$year</span>--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$key</span> = <span class="variable">$year</span> . <span class="string">&#x27;-&#x27;</span> . <span class="title function_ invoke__">str_pad</span>(<span class="variable">$month</span>, <span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>, STR_PAD_LEFT);</span><br><span class="line">        <span class="variable">$monthlyData</span>[<span class="variable">$key</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$monthLabels</span>[<span class="variable">$key</span>] = <span class="variable">$year</span> . <span class="string">&#x27;年&#x27;</span> . <span class="variable">$month</span> . <span class="string">&#x27;月&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 统计实际数据</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$posts</span> <span class="keyword">as</span> <span class="variable">$post</span>) &#123;</span><br><span class="line">        <span class="variable">$created</span> = <span class="variable">$post</span>[<span class="string">&#x27;created&#x27;</span>];</span><br><span class="line">        <span class="variable">$year</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y&#x27;</span>, <span class="variable">$created</span>);</span><br><span class="line">        <span class="variable">$month</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;m&#x27;</span>, <span class="variable">$created</span>);</span><br><span class="line">        <span class="variable">$key</span> = <span class="variable">$year</span> . <span class="string">&#x27;-&#x27;</span> . <span class="variable">$month</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$monthlyData</span>[<span class="variable">$key</span>])) &#123;</span><br><span class="line">            <span class="variable">$monthlyData</span>[<span class="variable">$key</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. 文章状态统计</span></span><br><span class="line">    <span class="variable">$published</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchObject</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&#x27;COUNT(*)&#x27;</span> =&gt; <span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">        -&gt;<span class="keyword">from</span>(<span class="string">&#x27;table.contents&#x27;</span>)</span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type = ?&#x27;</span>, <span class="string">&#x27;post&#x27;</span>)</span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;status = ?&#x27;</span>, <span class="string">&#x27;publish&#x27;</span>))-&gt;count;</span><br><span class="line">    <span class="variable">$draft</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchObject</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&#x27;COUNT(*)&#x27;</span> =&gt; <span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">        -&gt;<span class="keyword">from</span>(<span class="string">&#x27;table.contents&#x27;</span>)</span><br><span class="line">        -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type = ?&#x27;</span>, <span class="string">&#x27;post_draft&#x27;</span>) <span class="comment">// 注意：Typecho 草稿通常在 contents 表中 type 为 post_draft</span></span><br><span class="line">        <span class="comment">// -&gt;where(&#x27;status = ?&#x27;, &#x27;publish&#x27;) // 草稿状态通常不是 publish，可以省略或检查实际结构</span></span><br><span class="line">        )-&gt;count;</span><br><span class="line">    <span class="comment">// 3. 分类文章统计</span></span><br><span class="line">    <span class="variable">$categories</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span>(<span class="string">&#x27;table.metas&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type = ?&#x27;</span>, <span class="string">&#x27;category&#x27;</span>));</span><br><span class="line">    <span class="variable">$categoryData</span> = [];</span><br><span class="line">    <span class="variable">$categoryLabels</span> = [];</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$categories</span> <span class="keyword">as</span> <span class="variable">$category</span>) &#123;</span><br><span class="line">        <span class="variable">$count</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchObject</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&#x27;COUNT(*)&#x27;</span> =&gt; <span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">            -&gt;<span class="keyword">from</span>(<span class="string">&#x27;table.relationships&#x27;</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;mid = ?&#x27;</span>, <span class="variable">$category</span>[<span class="string">&#x27;mid&#x27;</span>]))-&gt;count;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$count</span> &gt; <span class="number">0</span>) &#123; <span class="comment">// 只显示有文章的分类</span></span><br><span class="line">            <span class="variable">$categoryLabels</span>[] = <span class="variable">$category</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">            <span class="variable">$categoryData</span>[] = (<span class="keyword">int</span>)<span class="variable">$count</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4. 标签文章统计 (取前10个)</span></span><br><span class="line">    <span class="variable">$tags</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="keyword">from</span>(<span class="string">&#x27;table.metas&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type = ?&#x27;</span>, <span class="string">&#x27;tag&#x27;</span>));</span><br><span class="line">    <span class="variable">$tagData</span> = [];</span><br><span class="line">    <span class="variable">$tagLabels</span> = [];</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$tags</span> <span class="keyword">as</span> <span class="variable">$tag</span>) &#123;</span><br><span class="line">        <span class="variable">$count</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchObject</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">select</span>([<span class="string">&#x27;COUNT(*)&#x27;</span> =&gt; <span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">            -&gt;<span class="keyword">from</span>(<span class="string">&#x27;table.relationships&#x27;</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;mid = ?&#x27;</span>, <span class="variable">$tag</span>[<span class="string">&#x27;mid&#x27;</span>]))-&gt;count;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$count</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable">$tagLabels</span>[] = <span class="variable">$tag</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">            <span class="variable">$tagData</span>[] = (<span class="keyword">int</span>)<span class="variable">$count</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 按数量排序，取前10个</span></span><br><span class="line">    <span class="title function_ invoke__">array_multisort</span>(<span class="variable">$tagData</span>, SORT_DESC, <span class="variable">$tagLabels</span>);</span><br><span class="line">    <span class="variable">$topTagLabels</span> = <span class="title function_ invoke__">array_slice</span>(<span class="variable">$tagLabels</span>, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="variable">$topTagData</span> = <span class="title function_ invoke__">array_slice</span>(<span class="variable">$tagData</span>, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="comment">// 准备图表数据</span></span><br><span class="line">    <span class="variable">$chartMonthlyData</span> = [</span><br><span class="line">        <span class="string">&#x27;labels&#x27;</span> =&gt; <span class="title function_ invoke__">array_values</span>(<span class="variable">$monthLabels</span>),</span><br><span class="line">        <span class="string">&#x27;values&#x27;</span> =&gt; <span class="title function_ invoke__">array_values</span>(<span class="variable">$monthlyData</span>)</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$chartStatusData</span> = [</span><br><span class="line">        <span class="string">&#x27;published&#x27;</span> =&gt; (<span class="keyword">int</span>)<span class="variable">$published</span>,</span><br><span class="line">        <span class="string">&#x27;draft&#x27;</span> =&gt; (<span class="keyword">int</span>)<span class="variable">$draft</span></span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$chartCategoryData</span> = [</span><br><span class="line">        <span class="string">&#x27;labels&#x27;</span> =&gt; <span class="variable">$categoryLabels</span>,</span><br><span class="line">        <span class="string">&#x27;values&#x27;</span> =&gt; <span class="variable">$categoryData</span></span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$chartTagData</span> = [</span><br><span class="line">        <span class="string">&#x27;labels&#x27;</span> =&gt; <span class="variable">$topTagLabels</span>,</span><br><span class="line">        <span class="string">&#x27;values&#x27;</span> =&gt; <span class="variable">$topTagData</span></span><br><span class="line">    ];</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">    <span class="comment">// ==================== JavaScript 图表渲染部分 ====================</span></span><br><span class="line">    <span class="comment">// 1. 月度文章图表</span></span><br><span class="line">    <span class="keyword">var</span> monthlyData = <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$chartMonthlyData</span>); <span class="meta">?&gt;</span>;</span><br><span class="line">    <span class="keyword">if</span> (monthlyData.labels &amp;&amp; monthlyData.labels.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> ctx1 = document.<span class="title function_ invoke__">getElementById</span>(<span class="string">&#x27;monthlyPostChart&#x27;</span>).<span class="title function_ invoke__">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx1, &#123;</span><br><span class="line">            type: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                labels: monthlyData.labels,</span><br><span class="line">                datasets: [&#123;</span><br><span class="line">                    label: <span class="string">&#x27;每月发文数&#x27;</span>,</span><br><span class="line">                    data: monthlyData.values,</span><br><span class="line">                    borderColor: <span class="string">&#x27;rgb(54, 162, 235)&#x27;</span>, <span class="comment">// 调整为蓝色系</span></span><br><span class="line">                    backgroundColor: <span class="string">&#x27;rgba(54, 162, 235, 0.1)&#x27;</span>,</span><br><span class="line">                    tension: <span class="number">0.3</span>, <span class="comment">// 稍微增加曲线张力</span></span><br><span class="line">                    fill: <span class="literal">true</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                responsive: <span class="literal">true</span>,</span><br><span class="line">                maintainAspectRatio: <span class="literal">false</span>,</span><br><span class="line">                scales: &#123;</span><br><span class="line">                    y: &#123;</span><br><span class="line">                        beginAtZero: <span class="literal">true</span>,</span><br><span class="line">                        ticks: &#123;</span><br><span class="line">                            precision: <span class="number">0</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        grid: &#123;</span><br><span class="line">                            color: <span class="string">&#x27;rgba(0, 0, 0, 0.05)&#x27;</span> <span class="comment">// 网格线颜色</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    x: &#123;</span><br><span class="line">                        grid: &#123;</span><br><span class="line">                            color: <span class="string">&#x27;rgba(0, 0, 0, 0.05)&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                plugins: &#123;</span><br><span class="line">                    legend: &#123;</span><br><span class="line">                        display: <span class="literal">false</span> <span class="comment">// 隐藏图例，因为只有一个数据集</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    tooltip: &#123;</span><br><span class="line">                        mode: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">                        intersect: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. 文章状态图表</span></span><br><span class="line">    <span class="keyword">var</span> statusData = <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$chartStatusData</span>); <span class="meta">?&gt;</span>;</span><br><span class="line">    <span class="keyword">if</span> (statusData) &#123;</span><br><span class="line">        <span class="keyword">var</span> ctx2 = document.<span class="title function_ invoke__">getElementById</span>(<span class="string">&#x27;statusChart&#x27;</span>).<span class="title function_ invoke__">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx2, &#123;</span><br><span class="line">            type: <span class="string">&#x27;doughnut&#x27;</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                labels: [<span class="string">&#x27;已发布&#x27;</span>, <span class="string">&#x27;草稿&#x27;</span>],</span><br><span class="line">                datasets: [&#123;</span><br><span class="line">                    data: [statusData.published, statusData.draft],</span><br><span class="line">                    backgroundColor: [</span><br><span class="line">                        <span class="string">&#x27;rgba(75, 192, 192, 0.8)&#x27;</span>, <span class="comment">// 已发布 - 青色</span></span><br><span class="line">                        <span class="string">&#x27;rgba(255, 205, 86, 0.8)&#x27;</span>,  <span class="comment">// 草稿 - 黄色</span></span><br><span class="line">                    ],</span><br><span class="line">                    borderWidth: <span class="number">1</span>,</span><br><span class="line">                    borderColor: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                responsive: <span class="literal">true</span>,</span><br><span class="line">                maintainAspectRatio: <span class="literal">false</span>,</span><br><span class="line">                plugins: &#123;</span><br><span class="line">                    legend: &#123;</span><br><span class="line">                        position: <span class="string">&#x27;bottom&#x27;</span>,</span><br><span class="line">                        labels: &#123;</span><br><span class="line">                            padding: <span class="number">15</span>,</span><br><span class="line">                            usePointStyle: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    tooltip: &#123;</span><br><span class="line">                        callbacks: &#123;</span><br><span class="line">                            label: <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">                                <span class="keyword">return</span> context.label + <span class="string">&#x27;: &#x27;</span> + context.raw;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                cutout: <span class="string">&#x27;60%&#x27;</span> <span class="comment">// 增加中间空心部分</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3. 分类文章图表</span></span><br><span class="line">    <span class="keyword">var</span> categoryData = <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$chartCategoryData</span>); <span class="meta">?&gt;</span>;</span><br><span class="line">    <span class="keyword">if</span> (categoryData.labels &amp;&amp; categoryData.labels.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> ctx3 = document.<span class="title function_ invoke__">getElementById</span>(<span class="string">&#x27;categoryChart&#x27;</span>).<span class="title function_ invoke__">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx3, &#123;</span><br><span class="line">            type: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                labels: categoryData.labels,</span><br><span class="line">                datasets: [&#123;</span><br><span class="line">                    label: <span class="string">&#x27;文章数量&#x27;</span>,</span><br><span class="line">                    data: categoryData.values,</span><br><span class="line">                    backgroundColor: <span class="string">&#x27;rgba(153, 102, 255, 0.7)&#x27;</span>, <span class="comment">// 紫色系</span></span><br><span class="line">                    borderColor: <span class="string">&#x27;rgba(153, 102, 255, 1)&#x27;</span>,</span><br><span class="line">                    borderWidth: <span class="number">1</span>,</span><br><span class="line">                    borderRadius: <span class="number">4</span>, <span class="comment">// 条形圆角</span></span><br><span class="line">                    barPercentage: <span class="number">0.7</span>, <span class="comment">// 调整条形宽度</span></span><br><span class="line">                    categoryPercentage: <span class="number">0.8</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                indexAxis: <span class="string">&#x27;x&#x27;</span>, <span class="comment">// 保持为垂直柱状图</span></span><br><span class="line">                responsive: <span class="literal">true</span>,</span><br><span class="line">                maintainAspectRatio: <span class="literal">false</span>,</span><br><span class="line">                scales: &#123;</span><br><span class="line">                    y: &#123;</span><br><span class="line">                        beginAtZero: <span class="literal">true</span>,</span><br><span class="line">                        ticks: &#123;</span><br><span class="line">                            precision: <span class="number">0</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        grid: &#123;</span><br><span class="line">                            color: <span class="string">&#x27;rgba(0, 0, 0, 0.05)&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    x: &#123;</span><br><span class="line">                        grid: &#123;</span><br><span class="line">                            display: <span class="literal">false</span> <span class="comment">// 隐藏 X 轴网格线</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                plugins: &#123;</span><br><span class="line">                    legend: &#123;</span><br><span class="line">                        display: <span class="literal">false</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    tooltip: &#123;</span><br><span class="line">                        mode: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">                        intersect: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4. 标签文章图表</span></span><br><span class="line">    <span class="keyword">var</span> tagData = <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$chartTagData</span>); <span class="meta">?&gt;</span>;</span><br><span class="line">    <span class="keyword">if</span> (tagData.labels &amp;&amp; tagData.labels.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> ctx4 = document.<span class="title function_ invoke__">getElementById</span>(<span class="string">&#x27;tagChart&#x27;</span>).<span class="title function_ invoke__">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Chart</span>(ctx4, &#123;</span><br><span class="line">            type: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                labels: tagData.labels,</span><br><span class="line">                datasets: [&#123;</span><br><span class="line">                    label: <span class="string">&#x27;文章数量&#x27;</span>,</span><br><span class="line">                    data: tagData.values,</span><br><span class="line">                    backgroundColor: <span class="string">&#x27;rgba(255, 159, 64, 0.7)&#x27;</span>, <span class="comment">// 橙色系</span></span><br><span class="line">                    borderColor: <span class="string">&#x27;rgba(255, 159, 64, 1)&#x27;</span>,</span><br><span class="line">                    borderWidth: <span class="number">1</span>,</span><br><span class="line">                    borderRadius: <span class="number">4</span>,</span><br><span class="line">                    barPercentage: <span class="number">0.7</span>,</span><br><span class="line">                    categoryPercentage: <span class="number">0.8</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;,</span><br><span class="line">            options: &#123;</span><br><span class="line">                indexAxis: <span class="string">&#x27;x&#x27;</span>,</span><br><span class="line">                responsive: <span class="literal">true</span>,</span><br><span class="line">                maintainAspectRatio: <span class="literal">false</span>,</span><br><span class="line">                scales: &#123;</span><br><span class="line">                    y: &#123;</span><br><span class="line">                        beginAtZero: <span class="literal">true</span>,</span><br><span class="line">                        ticks: &#123;</span><br><span class="line">                            precision: <span class="number">0</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        grid: &#123;</span><br><span class="line">                            color: <span class="string">&#x27;rgba(0, 0, 0, 0.05)&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    x: &#123;</span><br><span class="line">                        grid: &#123;</span><br><span class="line">                            display: <span class="literal">false</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                plugins: &#123;</span><br><span class="line">                     legend: &#123;</span><br><span class="line">                        display: <span class="literal">false</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    tooltip: &#123;</span><br><span class="line">                        mode: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">                        intersect: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">$(document).<span class="title function_ invoke__">ready</span>(function () &#123;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">&#x27;footer.php&#x27;</span>; <span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其他插件推荐：<br>[post cid&#x3D;”405” &#x2F;]</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> typecho </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为typecho博客添加Gotify插件通知</title>
      <link href="/2025/08/11/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E4%B8%BAtypecho%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0Gotify%E6%8F%92%E4%BB%B6%E9%80%9A%E7%9F%A5/"/>
      <url>/2025/08/11/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E4%B8%BAtypecho%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0Gotify%E6%8F%92%E4%BB%B6%E9%80%9A%E7%9F%A5/</url>
      
        <content type="html"><![CDATA[<p>受限于typecho博客没有通知，自己写了一个博客有评论就通知的gotify插件，脚本使用之前的python改的。这是效果</p><img src="./assets/%E4%B8%BAtypecho%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0Gotify%E6%8F%92%E4%BB%B6%E9%80%9A%E7%9F%A5/3793921614.jpg" width=30% /><h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p>插件+app+docker部署</p><p><a href="https://wonder1999.lanzouu.com/iB6DK32mdwcf">https://wonder1999.lanzouu.com/iB6DK32mdwcf</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">TypechoPlugin</span>\<span class="title class_">GotifyNotify</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Typecho</span>\<span class="title">Plugin</span>\<span class="title">PluginInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Typecho</span>\<span class="title">Widget</span>\<span class="title">Helper</span>\<span class="title">Form</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Typecho</span>\<span class="title">Widget</span>\<span class="title">Helper</span>\<span class="title">Form</span>\<span class="title">Element</span>\<span class="title">Text</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Widget</span>\<span class="title">Options</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Typecho</span>\<span class="title">Plugin</span>\<span class="title">Exception</span> <span class="keyword">as</span> <span class="title">PluginException</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Typecho</span>\<span class="title">Widget</span>\<span class="title">Exception</span> <span class="keyword">as</span> <span class="title">WidgetException</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Typecho</span>\<span class="title">Db</span>\<span class="title">Exception</span> <span class="keyword">as</span> <span class="title">DbException</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Utils</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">defined</span>(<span class="string">&#x27;__TYPECHO_ROOT_DIR__&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 当用户评论时通过 Gotify 发送通知</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span> GotifyNotify</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 白荼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.3.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@link</span> https://gotify.net</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Plugin</span> <span class="keyword">implements</span> <span class="title">PluginInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 激活插件方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@access</span> public</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> PluginException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">activate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="title class_">\Typecho\Plugin</span>::<span class="title function_ invoke__">factory</span>(<span class="string">&#x27;Widget_Feedback&#x27;</span>)-&gt;finishComment = <span class="keyword">__CLASS__</span> . <span class="string">&#x27;::requestService&#x27;</span>;</span><br><span class="line">        <span class="title class_">\Typecho\Plugin</span>::<span class="title function_ invoke__">factory</span>(<span class="string">&#x27;Widget_Comments_Edit&#x27;</span>)-&gt;finishComment = <span class="keyword">__CLASS__</span> . <span class="string">&#x27;::requestService&#x27;</span>;</span><br><span class="line">        <span class="title class_">\Typecho\Plugin</span>::<span class="title function_ invoke__">factory</span>(<span class="string">&#x27;Widget_Service&#x27;</span>)-&gt;sendGotify = <span class="keyword">__CLASS__</span> . <span class="string">&#x27;::sendGotify&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 禁用插件方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@access</span> public</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> PluginException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">deactivate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 通常不需要显式移除</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取插件配置面板</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Form $form 配置面板</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@access</span> public</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">config</span>(<span class="params">Form <span class="variable">$form</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// Gotify 服务器地址</span></span><br><span class="line">        <span class="variable">$serverUrl</span> = <span class="keyword">new</span> <span class="title class_">Text</span>(<span class="string">&#x27;serverUrl&#x27;</span>, <span class="literal">NULL</span>, <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;Gotify 服务器地址&#x27;</span>), <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;例如: http://your-gotify-server.com&#x27;</span>));</span><br><span class="line">        <span class="variable">$form</span>-&gt;<span class="title function_ invoke__">addInput</span>(<span class="variable">$serverUrl</span>-&gt;<span class="title function_ invoke__">addRule</span>(<span class="string">&#x27;required&#x27;</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;Gotify 服务器地址不能为空&#x27;</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 应用 Token</span></span><br><span class="line">        <span class="variable">$appToken</span> = <span class="keyword">new</span> <span class="title class_">Text</span>(<span class="string">&#x27;appToken&#x27;</span>, <span class="literal">NULL</span>, <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;应用 Token&#x27;</span>), <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;在 Gotify 中创建应用后获得的 Token&#x27;</span>));</span><br><span class="line">        <span class="variable">$form</span>-&gt;<span class="title function_ invoke__">addInput</span>(<span class="variable">$appToken</span>-&gt;<span class="title function_ invoke__">addRule</span>(<span class="string">&#x27;required&#x27;</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;应用 Token 不能为空&#x27;</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 通知标题</span></span><br><span class="line">        <span class="variable">$title</span> = <span class="keyword">new</span> <span class="title class_">Text</span>(<span class="string">&#x27;title&#x27;</span>, <span class="literal">NULL</span>, <span class="string">&#x27;博客有新评论&#x27;</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;通知标题&#x27;</span>), <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;收到新评论时的推送标题&#x27;</span>));</span><br><span class="line">        <span class="variable">$form</span>-&gt;<span class="title function_ invoke__">addInput</span>(<span class="variable">$title</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 消息优先级 (Priority) - 使用 Text 输入框</span></span><br><span class="line">        <span class="variable">$priority</span> = <span class="keyword">new</span> <span class="title class_">Text</span>(<span class="string">&#x27;priority&#x27;</span>, <span class="literal">NULL</span>, <span class="string">&#x27;1&#x27;</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;消息优先级&#x27;</span>), <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;设置 Gotify 消息的优先级 (自己在Gorify定义的Priority)&#x27;</span>));</span><br><span class="line">        <span class="variable">$form</span>-&gt;<span class="title function_ invoke__">addInput</span>(<span class="variable">$priority</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 个人用户的配置面板</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Form $form</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@access</span> public</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">personalConfig</span>(<span class="params">Form <span class="variable">$form</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 个人配置通常为空</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 评论通知回调 - 触发异步服务</span></span><br><span class="line"><span class="comment">     * 这个方法在评论完成后被调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@access</span> public</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $comment (Widget_Comments_Edit 或 Widget_Feedback 的实例)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> PluginException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">requestService</span>(<span class="params"><span class="variable">$comment</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 检查评论对象是否有效</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$comment</span>-&gt;coid) || !<span class="variable">$comment</span>-&gt;<span class="title function_ invoke__">have</span>()) &#123;</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: Invalid comment object received in requestService.&quot;</span>);</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$coid</span> = <span class="variable">$comment</span>-&gt;coid;</span><br><span class="line">        <span class="variable">$options</span> = <span class="title class_">Options</span>::<span class="title function_ invoke__">alloc</span>()-&gt;<span class="title function_ invoke__">plugin</span>(<span class="string">&#x27;GotifyNotify&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检查必要配置</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$options</span>-&gt;serverUrl) || <span class="keyword">empty</span>(<span class="variable">$options</span>-&gt;appToken)) &#123;</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: Missing server URL or app token, skipping notification for comment ID <span class="subst">&#123;$coid&#125;</span>.&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用 Widget_Service 中注册的异步方法</span></span><br><span class="line">        <span class="comment">// 将评论 ID 传递给异步服务</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: Calling async service for comment ID <span class="subst">&#123;$coid&#125;</span>.&quot;</span>);</span><br><span class="line">            <span class="title class_">Utils\Helper</span>::<span class="title function_ invoke__">requestService</span>(<span class="string">&#x27;sendGotify&#x27;</span>, <span class="variable">$coid</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (\<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: Failed to call async service for comment ID <span class="subst">&#123;$coid&#125;</span>. Error: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 异步发送 Gotify 通知</span></span><br><span class="line"><span class="comment">     * 这个方法由 Widget_Service 调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> integer $coid 评论ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@access</span> public</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> WidgetException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DbException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sendGotify</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$coid</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">         <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Starting to process comment ID <span class="subst">&#123;$coid&#125;</span>.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取插件配置</span></span><br><span class="line">        <span class="variable">$options</span> = <span class="title class_">Options</span>::<span class="title function_ invoke__">alloc</span>()-&gt;<span class="title function_ invoke__">plugin</span>(<span class="string">&#x27;GotifyNotify&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 移除了对 $options-&gt;enable 的检查，插件默认启用</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 重新获取评论对象</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$commentWidget</span> = <span class="title class_">Utils\Helper</span>::<span class="title function_ invoke__">widgetById</span>(<span class="string">&#x27;comments&#x27;</span>, <span class="variable">$coid</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (WidgetException <span class="variable">$e</span>) &#123;</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Failed to get comment widget for ID <span class="subst">&#123;$coid&#125;</span>. Error: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable">$commentWidget</span>-&gt;<span class="title function_ invoke__">have</span>()) &#123;</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Comment widget is empty for ID <span class="subst">&#123;$coid&#125;</span>.&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检查必要配置</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$options</span>-&gt;serverUrl) || <span class="keyword">empty</span>(<span class="variable">$options</span>-&gt;appToken)) &#123;</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Missing configuration for comment ID <span class="subst">&#123;$coid&#125;</span>.&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 构造通知内容</span></span><br><span class="line">            <span class="variable">$title</span> = <span class="variable">$options</span>-&gt;title ?: <span class="string">&#x27;博客有新评论&#x27;</span>;</span><br><span class="line">            <span class="variable">$message</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">buildMessage</span>(<span class="variable">$commentWidget</span>); <span class="comment">// 传入 widget 对象</span></span><br><span class="line">            <span class="comment">// 获取优先级设置</span></span><br><span class="line">            <span class="variable">$priority</span> = <span class="variable">$options</span>-&gt;priority ?? <span class="string">&#x27;1&#x27;</span>; <span class="comment">// 默认优先级为 1</span></span><br><span class="line"></span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Prepared message for comment ID <span class="subst">&#123;$coid&#125;</span>. Title: <span class="subst">&#123;$title&#125;</span>, Priority: <span class="subst">&#123;$priority&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 发送通知，传入优先级</span></span><br><span class="line">            <span class="built_in">self</span>::<span class="title function_ invoke__">sendGotifyMessage</span>(<span class="variable">$options</span>-&gt;serverUrl, <span class="variable">$options</span>-&gt;appToken, <span class="variable">$title</span>, <span class="variable">$message</span>, <span class="variable">$priority</span>);</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Successfully sent notification for comment ID <span class="subst">&#123;$coid&#125;</span>.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (\<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="comment">// 记录详细错误信息</span></span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Failed to send notification for comment ID <span class="subst">&#123;$coid&#125;</span>. Error: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify Service: Stack trace: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getTraceAsString</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造通知消息内容</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> \Widget\Base\Comments $comment 评论对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string 消息内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">buildMessage</span>(<span class="params"><span class="variable">$comment</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$content</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">is_object</span>(<span class="variable">$comment</span>) &amp;&amp; <span class="variable">$comment</span>-&gt;<span class="title function_ invoke__">have</span>()) &#123;</span><br><span class="line">            <span class="comment">// 从评论对象获取信息</span></span><br><span class="line">            <span class="variable">$author</span> = <span class="variable">$comment</span>-&gt;author ?? <span class="string">&#x27;匿名用户&#x27;</span>;</span><br><span class="line">            <span class="variable">$mail</span> = <span class="variable">$comment</span>-&gt;mail ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="variable">$url</span> = <span class="variable">$comment</span>-&gt;url ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="variable">$text</span> = <span class="variable">$comment</span>-&gt;text ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="comment">// $ip = $comment-&gt;ip ?? &#x27;&#x27;; // Widget\Base\Comments 通常不直接暴露 IP</span></span><br><span class="line"></span><br><span class="line">            <span class="variable">$content</span> = <span class="string">&quot;作者: <span class="subst">&#123;$author&#125;</span>\n&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$mail</span>)) &#123;</span><br><span class="line">                <span class="variable">$content</span> .= <span class="string">&quot;邮箱: <span class="subst">&#123;$mail&#125;</span>\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$url</span>)) &#123;</span><br><span class="line">                <span class="variable">$content</span> .= <span class="string">&quot;网站: <span class="subst">&#123;$url&#125;</span>\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// if (!empty($ip)) &#123;</span></span><br><span class="line">            <span class="comment">//     $content .= &quot;IP: &#123;$ip&#125;\n&quot;;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            <span class="variable">$content</span> .= <span class="string">&quot;内容: <span class="subst">&#123;$text&#125;</span>\n&quot;</span>;</span><br><span class="line">            <span class="variable">$content</span> .= <span class="string">&quot;时间: &quot;</span> . <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>, <span class="variable">$comment</span>-&gt;created) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 使用评论创建时间</span></span><br><span class="line">            <span class="variable">$content</span> .= <span class="string">&quot;文章: &quot;</span> . <span class="variable">$comment</span>-&gt;title . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 文章标题</span></span><br><span class="line">            <span class="variable">$content</span> .= <span class="string">&quot;链接: &quot;</span> . <span class="variable">$comment</span>-&gt;permalink . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 评论链接</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 兼容其他情况</span></span><br><span class="line">            <span class="variable">$content</span> = <span class="string">&quot;收到新评论，请登录后台查看 (评论ID: &quot;</span> . (<span class="variable">$comment</span>-&gt;coid ?? <span class="string">&#x27;unknown&#x27;</span>) . <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$content</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送 Gotify 消息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $serverUrl Gotify 服务器地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $appToken 应用 Token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $title 消息标题</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $message 消息内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $priority 消息优先级</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> \Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sendGotifyMessage</span>(<span class="params"><span class="variable">$serverUrl</span>, <span class="variable">$appToken</span>, <span class="variable">$title</span>, <span class="variable">$message</span>, <span class="variable">$priority</span> = <span class="string">&#x27;1&#x27;</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 清理 URL</span></span><br><span class="line">        <span class="variable">$serverUrl</span> = <span class="title function_ invoke__">rtrim</span>(<span class="variable">$serverUrl</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构造请求 URL (使用查询参数传递 token)</span></span><br><span class="line">        <span class="variable">$url</span> = <span class="variable">$serverUrl</span> . <span class="string">&#x27;/message&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 准备表单数据，包含 priority</span></span><br><span class="line">        <span class="variable">$data</span> = [</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span> =&gt; <span class="variable">$title</span>,</span><br><span class="line">            <span class="string">&#x27;message&#x27;</span> =&gt; <span class="variable">$message</span>,</span><br><span class="line">            <span class="string">&#x27;priority&#x27;</span> =&gt; <span class="variable">$priority</span> <span class="comment">// 使用传入的优先级</span></span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 准备查询参数</span></span><br><span class="line">        <span class="variable">$params</span> = [<span class="string">&#x27;token&#x27;</span> =&gt; <span class="variable">$appToken</span>];</span><br><span class="line">        <span class="variable">$fullUrl</span> = <span class="variable">$url</span> . <span class="string">&#x27;?&#x27;</span> . <span class="title function_ invoke__">http_build_query</span>(<span class="variable">$params</span>);</span><br><span class="line"></span><br><span class="line">         <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: Sending request to <span class="subst">&#123;$fullUrl&#125;</span>&quot;</span>);</span><br><span class="line">         <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: POST data: &quot;</span> . <span class="title function_ invoke__">print_r</span>(<span class="variable">$data</span>, <span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 cURL 发送请求</span></span><br><span class="line">        <span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$fullUrl</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_POST, <span class="literal">true</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="variable">$data</span>);  <span class="comment">// 发送表单数据</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HTTPHEADER, [</span><br><span class="line">            <span class="string">&#x27;Accept: application/json&#x27;</span></span><br><span class="line">        ]);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="literal">true</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_TIMEOUT, <span class="number">10</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">false</span>); <span class="comment">// 根据你的服务器 SSL 配置调整</span></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_USERAGENT, <span class="string">&#x27;Typecho GotifyNotify Plugin/1.3.0&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$response</span> = <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="variable">$httpCode</span> = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$ch</span>, CURLINFO_HTTP_CODE);</span><br><span class="line">        <span class="variable">$error</span> = <span class="title function_ invoke__">curl_error</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line"></span><br><span class="line">         <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: cURL Response Code: <span class="subst">&#123;$httpCode&#125;</span>&quot;</span>);</span><br><span class="line">         <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: cURL Response Body: <span class="subst">&#123;$response&#125;</span>&quot;</span>);</span><br><span class="line">         <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: cURL Error (if any): <span class="subst">&#123;$error&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检查响应</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$response</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">\Exception</span>(<span class="string">&#x27;cURL error: &#x27;</span> . <span class="variable">$error</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$httpCode</span> &gt;= <span class="number">200</span> &amp;&amp; <span class="variable">$httpCode</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">            <span class="comment">// 成功</span></span><br><span class="line">             <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: Message sent successfully.&quot;</span>);</span><br><span class="line">            <span class="comment">// 可以进一步检查返回的 JSON</span></span><br><span class="line">            <span class="variable">$result</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$response</span>, <span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable">$result</span>) &#123;</span><br><span class="line">                 <span class="title function_ invoke__">error_log</span>(<span class="string">&quot;GotifyNotify: Warning - Could not decode JSON response, but HTTP status was OK.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// 成功返回</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 失败</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">\Exception</span>(<span class="string">&#x27;HTTP error: &#x27;</span> . <span class="variable">$httpCode</span> . <span class="string">&#x27;, response: &#x27;</span> . <span class="variable">$response</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> typecho </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu-services挂载外置硬盘</title>
      <link href="/2025/07/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/ubuntu-services%E6%8C%82%E8%BD%BD%E5%A4%96%E7%BD%AE%E7%A1%AC%E7%9B%98/"/>
      <url>/2025/07/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/ubuntu-services%E6%8C%82%E8%BD%BD%E5%A4%96%E7%BD%AE%E7%A1%AC%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<p>软件包升级<br>sudo apt upgrade</p><p>lsblk命令用于列出所有可用的存储设备及其分区信息</p><p>df -h 查看挂载点、文件系统类型、已用空间、可用空间等。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@dellevin-ubuntu:/# lsblk</span><br><span class="line">NAME                      MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">loop0                       7:0    0  63.9M  1 loop /snap/core20/2318</span><br><span class="line">loop1                       7:1    0    87M  1 loop /snap/lxd/29351</span><br><span class="line">loop2                       7:2    0  38.8M  1 loop /snap/snapd/21759</span><br><span class="line">sda                         8:0    0 119.2G  0 disk </span><br><span class="line">├─sda1                      8:1    0     1M  0 part </span><br><span class="line">├─sda2                      8:2    0     2G  0 part /boot</span><br><span class="line">└─sda3                      8:3    0 117.2G  0 part </span><br><span class="line">  └─ubuntu--vg-ubuntu--lv 253:0    0 117.2G  0 lvm  /</span><br><span class="line">sdb                         8:16   0 465.8G  0 disk </span><br><span class="line">└─sdb1                      8:17   0 465.8G  0 part </span><br><span class="line"></span><br><span class="line">root@dellevin-ubuntu:/# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem                         Size  Used Avail Use% Mounted on</span><br><span class="line">tmpfs                              578M  1.2M  577M   1% /run</span><br><span class="line">/dev/mapper/ubuntu--vg-ubuntu--lv  115G  7.1G  102G   7% /</span><br><span class="line">tmpfs                              2.9G     0  2.9G   0% /dev/shm</span><br><span class="line">tmpfs                              5.0M     0  5.0M   0% /run/lock</span><br><span class="line">/dev/sda2                          2.0G  130M  1.7G   8% /boot</span><br><span class="line">tmpfs                              578M  4.0K  578M   1% /run/user/1000</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>可以看到sdb并没有挂载</p><p><code>sudo mkfs.ext4 /dev/sdb1</code> 将这块硬盘格式<br>化为 <code>ext4</code> 文件系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@dellevin-ubuntu:/mnt# <span class="built_in">sudo</span> mkfs.ext4 /dev/sdb1</span><br><span class="line">mke2fs 1.46.5 (30-Dec-2021)</span><br><span class="line">/dev/sdb1 contains a ntfs file system labelled <span class="string">&#x27;系统&#x27;</span></span><br><span class="line">Proceed anyway? (y,N) y</span><br><span class="line">Creating filesystem with 122096000 4k blocks and 30531584 inodes</span><br><span class="line">Filesystem UUID: 86424462-d372-4894-89b2-3186bb52b237</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br><span class="line">102400000</span><br><span class="line"></span><br><span class="line">Allocating group tables: <span class="keyword">done</span>                            </span><br><span class="line">Writing inode tables: <span class="keyword">done</span>                            </span><br><span class="line">Creating journal (262144 blocks): </span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">Writing superblocks and filesystem accounting information: <span class="keyword">done</span>   </span><br></pre></td></tr></table></figure><p><code>sudo mount /dev/sdb1 /mnt/500Data</code> 创建挂载点并挂载硬盘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@dellevin-ubuntu:/mnt# <span class="built_in">mkdir</span> 500Data</span><br><span class="line">root@dellevin-ubuntu:/mnt# <span class="built_in">ls</span></span><br><span class="line">500Data</span><br><span class="line">root@dellevin-ubuntu:/mnt# <span class="built_in">sudo</span> mount /dev/sdb1 /mnt/500Data</span><br><span class="line">root@dellevin-ubuntu:/mnt# <span class="built_in">df</span> -h | grep sdb1</span><br><span class="line">/dev/sdb1                          458G   28K  435G   1% /mnt/500Data</span><br><span class="line">root@dellevin-ubuntu:/mnt# <span class="built_in">df</span> -h </span><br><span class="line">Filesystem                         Size  Used Avail Use% Mounted on</span><br><span class="line">tmpfs                              578M  1.2M  577M   1% /run</span><br><span class="line">/dev/mapper/ubuntu--vg-ubuntu--lv  115G  7.1G  102G   7% /</span><br><span class="line">tmpfs                              2.9G     0  2.9G   0% /dev/shm</span><br><span class="line">tmpfs                              5.0M     0  5.0M   0% /run/lock</span><br><span class="line">/dev/sda2                          2.0G  130M  1.7G   8% /boot</span><br><span class="line">tmpfs                              578M  4.0K  578M   1% /run/user/1000</span><br><span class="line">/dev/sdb1                          458G   28K  435G   1% /mnt/500Data</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>设置开机自动挂载</p><p><code>sudo blkid | grep /dev/sdb1</code> 查看硬盘UUID</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@dellevin-ubuntu:/mnt/500Data# <span class="built_in">sudo</span> blkid | grep /dev/sdb1</span><br><span class="line">/dev/sdb1: UUID=<span class="string">&quot;86424462-d372-4894-89b2-3186bb52b237&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;1ea79eea-01&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>vim /etc/fstab</code> 然后编辑 <code>fstab</code>  添加一行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UUID=86424462-d372-4894-89b2-3186bb52b237  /mnt/500Data   ext4   defaults   0   2</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows server 2019安装docker</title>
      <link href="/2025/07/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/windows-server-2019%E5%AE%89%E8%A3%85docker/"/>
      <url>/2025/07/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/windows-server-2019%E5%AE%89%E8%A3%85docker/</url>
      
        <content type="html"><![CDATA[<h1 id="windows-server-2019-docker安装"><a href="#windows-server-2019-docker安装" class="headerlink" title="windows server 2019 docker安装"></a>windows server 2019 docker安装</h1><p>最近把家里的旧服务器搬到出租屋里面来了，准备当服务器用来着，二十年前的老机器了。想着用微信hook的功能，所以选择的windows server。配置好一些环境之后开始配置docker环境除了一些问题。</p><h2 id="启用Hyper-V和Containers功能"><a href="#启用Hyper-V和Containers功能" class="headerlink" title="启用Hyper-V和Containers功能"></a>启用Hyper-V和Containers功能</h2><blockquote><p>运行管理员权限powershell</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-WindowsFeature -Name Hyper-V,Containers -IncludeAllSubFeature -IncludeManagementTools -Verbose</span><br></pre></td></tr></table></figure><h2 id="配置安装源"><a href="#配置安装源" class="headerlink" title="配置安装源"></a>配置安装源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-Module -Name DockerMsftProvider -Repository PSGallery -Verbose</span><br></pre></td></tr></table></figure><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><blockquote><p>运行管理员权限powershell，国内安装可能会因为网络原因失败，可以尝试手动安装，如果按照成功这下面步骤不用进行了</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-Package -Name docker -ProviderName DockerMsftProvider -Verbose</span><br></pre></td></tr></table></figure><h2 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\Administrator\Desktop&gt; Invoke-WebRequest -UseBasicParsing -OutFile D:\docker-28.3.2.zip https://download.docker.com/win/static/stable/x86_64/docker-28.3.2.zip</span><br></pre></td></tr></table></figure><h3 id="文件下载地址"><a href="#文件下载地址" class="headerlink" title="文件下载地址"></a>文件下载地址</h3><p><a href="https://download.docker.com/win/static/stable/x86_64/">https://download.docker.com/win/static/stable/x86_64/</a></p><h2 id="配置系统环境变量Path"><a href="#配置系统环境变量Path" class="headerlink" title="配置系统环境变量Path"></a>配置系统环境变量Path</h2><h2 id="注册为系统服务"><a href="#注册为系统服务" class="headerlink" title="注册为系统服务"></a>注册为系统服务</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dockerd --register-service -H npipe:// -H tcp://0.0.0.0:2375 --config-file <span class="string">&quot;D:\Env\docker\config\daemon.json&quot;</span></span><br></pre></td></tr></table></figure><h3 id="配置文件内容"><a href="#配置文件内容" class="headerlink" title="配置文件内容"></a>配置文件内容</h3><p>D:\Env\docker\config\daemon.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dns&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;114.114.114.114&quot;</span><span class="punctuation">,</span> <span class="string">&quot;8.8.8.8&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data-root&quot;</span><span class="punctuation">:</span>  <span class="string">&quot;D:\\Env\\docker\\data&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;https://registry.docker-cn.com&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><p>设置Docker开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Service -Name docker -StartupType Automatic</span><br></pre></td></tr></table></figure><p>启动 Docker 服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Start-Service docker</span><br></pre></td></tr></table></figure><p>重启 Docker 服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Restart-Service Docker -Force</span><br></pre></td></tr></table></figure><p>停止 Docker 服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stop-Service Docker</span><br></pre></td></tr></table></figure><h3 id="docker-compose下载"><a href="#docker-compose下载" class="headerlink" title="docker-compose下载"></a>docker-compose下载</h3><p><a href="https://github.com/docker/compose/releases">https://github.com/docker/compose/releases</a></p><p>1.下载适用于 Windows 的 docker-compose-Windows-x86_64.exe 文件。</p><p>2.将文件重命名为 docker-compose.exe 并移动到 Docker 安装目录（如 D:\Env\docker）</p><p>ps：安装完了我才发现，windows server 2019的docker不支持linux的容器，要想弄，还要一个wsl支持，或者升级机器配置。想想还是算了，直接换ubuntu 的server版了</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
            <tag> windows </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>科技创新型企业爬虫与提醒导入</title>
      <link href="/2025/07/06/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/python/%E7%A7%91%E6%8A%80%E5%88%9B%E6%96%B0%E5%9E%8B%E4%BC%81%E4%B8%9A%E7%88%AC%E8%99%AB%E4%B8%8E%E6%8F%90%E9%86%92%E5%AF%BC%E5%85%A5/"/>
      <url>/2025/07/06/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/python/%E7%A7%91%E6%8A%80%E5%88%9B%E6%96%B0%E5%9E%8B%E4%BC%81%E4%B8%9A%E7%88%AC%E8%99%AB%E4%B8%8E%E6%8F%90%E9%86%92%E5%AF%BC%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<p><strong>1.每日爬取数据后，将爬取的公告通知，同步到数据库</strong></p><p><strong>2.检索当日的公告信息，查看是否有科技创新企业，如果有则提醒通知（提醒未写，简单完善数据）</strong></p><p><strong>取的关键词模糊搜索+排除词排除掉无关条目，来查找响应数据</strong></p><h2 id="检索是否有科技创新企业的公告-通知"><a href="#检索是否有科技创新企业的公告-通知" class="headerlink" title="检索是否有科技创新企业的公告&#x2F;通知"></a>检索是否有科技创新企业的公告&#x2F;通知</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查当日数据是否有科创企业名录</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> gxt_spider <span class="keyword">import</span> get_industry</span><br><span class="line"><span class="keyword">from</span> kjt_spider <span class="keyword">import</span> get_sci_kjt</span><br><span class="line"><span class="keyword">from</span> sdszf_spider <span class="keyword">import</span> get_sci_sdszf</span><br><span class="line"><span class="keyword">from</span> jinja2 <span class="keyword">import</span> Template</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">connect_to_database</span>():</span><br><span class="line">    connection = pymysql.connect(</span><br><span class="line">         host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">         user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">         password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">        database=<span class="string">&#x27;my_database_test&#x27;</span>,</span><br><span class="line">        charset=<span class="string">&#x27;utf8mb4&#x27;</span>,</span><br><span class="line">         cursorclass=pymysql.cursors.DictCursor</span><br><span class="line">     )</span><br><span class="line">     <span class="keyword">return</span> connection</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">query_today_kc_enterprises</span>():</span><br><span class="line">    keywords = [</span><br><span class="line">        <span class="string">&quot;科技型中小企业&quot;</span>,</span><br><span class="line">        <span class="string">&quot;高新技术企业&quot;</span>,</span><br><span class="line">        <span class="string">&quot;众创空间&quot;</span>,</span><br><span class="line">        <span class="string">&quot;科技领军企业&quot;</span>,</span><br><span class="line">        <span class="string">&quot;技术先进型服务企业&quot;</span>,</span><br><span class="line">        <span class="string">&quot;技术创新示范企业&quot;</span>,</span><br><span class="line">        <span class="string">&quot;专精特新&quot;</span>,</span><br><span class="line">        <span class="string">&quot;科技企业&quot;</span>,</span><br><span class="line">        <span class="string">&quot;瞪羚&quot;</span>,</span><br><span class="line">        <span class="string">&quot;独角兽&quot;</span>,</span><br><span class="line">        <span class="string">&quot;科技小巨人企业&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;小巨人&#x27;</span>]</span><br><span class="line">    not_contain_keywords = [<span class="string">&quot;取消&quot;</span>,<span class="string">&quot;组织申报&quot;</span>,<span class="string">&quot;认定和复核&quot;</span>,<span class="string">&quot;申报&quot;</span>,<span class="string">&quot;补助名单&quot;</span>,<span class="string">&quot;绩效评价&quot;</span>]</span><br><span class="line">    sql = build_sql_query(keywords, not_contain_keywords)</span><br><span class="line"></span><br><span class="line">    connection = connect_to_database()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            cursor.execute(sql)</span><br><span class="line">            results = cursor.fetchall()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&quot;total&quot;</span>: <span class="built_in">len</span>(results),</span><br><span class="line">                <span class="string">&quot;list&quot;</span>: results</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_sql_query</span>(<span class="params">keywords, not_contain_keywords</span>):</span><br><span class="line">    like_conditions = <span class="string">&quot; OR &quot;</span>.join([<span class="string">f&quot;title LIKE &#x27;%<span class="subst">&#123;keyword&#125;</span>%&#x27;&quot;</span> <span class="keyword">for</span> keyword <span class="keyword">in</span> keywords])</span><br><span class="line">    not_like_conditions = <span class="string">&quot; and &quot;</span>.join([<span class="string">f&quot;title NOT LIKE &#x27;%<span class="subst">&#123;not_contain_keyword&#125;</span>%&#x27;&quot;</span> <span class="keyword">for</span> not_contain_keyword <span class="keyword">in</span> not_contain_keywords])</span><br><span class="line">    sql = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        SELECT </span></span><br><span class="line"><span class="string">        CASE type</span></span><br><span class="line"><span class="string">            WHEN &#x27;1&#x27; THEN &#x27;山东省科学技术厅&#x27;</span></span><br><span class="line"><span class="string">            WHEN &#x27;2&#x27; THEN &#x27;山东省工业和技术化厅&#x27;</span></span><br><span class="line"><span class="string">            WHEN &#x27;3&#x27; THEN &#x27;山东省人民政府&#x27;</span></span><br><span class="line"><span class="string">            ELSE &#x27;未知类型&#x27;</span></span><br><span class="line"><span class="string">        END AS type_name,date,title,url FROM `sci_spider`</span></span><br><span class="line"><span class="string">        WHERE (<span class="subst">&#123;like_conditions&#125;</span>) </span></span><br><span class="line"><span class="string">        AND (<span class="subst">&#123;not_like_conditions&#125;</span>)</span></span><br><span class="line"><span class="string">        AND DATE(create_date) = DATE(NOW())</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> sql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mail_sender</span>(<span class="params">content</span>):</span><br><span class="line">    <span class="keyword">import</span> smtplib</span><br><span class="line">    <span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line">    <span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line">    <span class="comment"># 第三方 SMTP 服务</span></span><br><span class="line">    mail_host = <span class="string">&quot;smtp.163.com&quot;</span>  <span class="comment"># 设置服务器</span></span><br><span class="line">    mail_user = <span class="string">&quot;18631839859@163.com&quot;</span>  <span class="comment"># 用户名</span></span><br><span class="line">    mail_pass = <span class="string">&quot;GENGs7dM45TJDH6y&quot;</span>  <span class="comment"># 口令</span></span><br><span class="line">    sender = <span class="string">&#x27;18631839859@163.com&#x27;</span></span><br><span class="line">    receivers = [<span class="string">&#x27;wonder1999@126.com&#x27;</span>]  <span class="comment"># 接收邮件，可设置为你的QQ邮箱或者其他邮箱</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># message = MIMEText(content, &#x27;plain&#x27;, &#x27;utf-8&#x27;)</span></span><br><span class="line">    message = MIMEText(content, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    message[<span class="string">&#x27;From&#x27;</span>] = Header(<span class="string">&quot;科技型中小企业通知&quot;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    message[<span class="string">&#x27;To&#x27;</span>] = Header(<span class="string">&quot;科技型中小企业&quot;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    subject = <span class="string">&#x27;科技型中小企业通知&#x27;</span></span><br><span class="line">    message[<span class="string">&#x27;Subject&#x27;</span>] = Header(subject, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        smtpObj = smtplib.SMTP()</span><br><span class="line">        smtpObj.connect(mail_host, <span class="number">25</span>)  <span class="comment"># 25 为 SMTP 端口号</span></span><br><span class="line">        smtpObj.login(mail_user, mail_pass)</span><br><span class="line">        smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;邮件发送成功&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> smtplib.SMTPException:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Error: 无法发送邮件&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wx_web_hook</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    通过企业微信Webhook发送Markdown格式的消息</span></span><br><span class="line"><span class="string">    :param data: 包含通知数据的字典，结构应包含&#x27;total&#x27;和&#x27;list&#x27;键</span></span><br><span class="line"><span class="string">    :return: None</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Webhook地址（请替换为你的实际Key）</span></span><br><span class="line">    webhook_url = <span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=ef84945d-2247-4f09-ac0b-be7a6607c24e&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 构造Markdown内容</span></span><br><span class="line">    content = <span class="string">f&quot;**找到 <span class="subst">&#123;data[<span class="string">&#x27;total&#x27;</span>]&#125;</span> 条疑似符合条件的记录：**\n&quot;</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> data[<span class="string">&#x27;list&#x27;</span>]:</span><br><span class="line">        content += (</span><br><span class="line">            <span class="string">f&quot;- [<span class="subst">&#123;row[<span class="string">&#x27;title&#x27;</span>]&#125;</span>](<span class="subst">&#123;row[<span class="string">&#x27;url&#x27;</span>]&#125;</span>) &quot;</span></span><br><span class="line">            <span class="string">f&quot;&lt;font color=\&quot;comment\&quot;&gt;<span class="subst">&#123;row[<span class="string">&#x27;date&#x27;</span>]&#125;</span>&lt;/font&gt; &quot;</span></span><br><span class="line">            <span class="string">f&quot;&lt;font color=\&quot;warning\&quot;&gt;<span class="subst">&#123;row[<span class="string">&#x27;type_name&#x27;</span>]&#125;</span>&lt;/font&gt;\n&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 构建请求体</span></span><br><span class="line">    payload = &#123;</span><br><span class="line">        <span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;markdown&quot;</span>,</span><br><span class="line">        <span class="string">&quot;markdown&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: content</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 发送请求并处理响应</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.post(webhook_url, json=payload)</span><br><span class="line">        response.raise_for_status()  <span class="comment"># 抛出HTTP错误</span></span><br><span class="line">        result = response.json()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> result.get(<span class="string">&quot;errcode&quot;</span>) == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;✅ 消息发送成功&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;❌ 消息发送失败: <span class="subst">&#123;result.get(<span class="string">&#x27;errmsg&#x27;</span>)&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> requests.exceptions.RequestException <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;⚠️ 请求异常: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    get_industry(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    get_sci_kjt(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    get_sci_sdszf(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    data = query_today_kc_enterprises()</span><br><span class="line">    title = <span class="string">f&quot;找到 <span class="subst">&#123;data[<span class="string">&#x27;total&#x27;</span>]&#125;</span> 条疑似符合条件的记录：&quot;</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> data[<span class="string">&#x27;list&#x27;</span>]:</span><br><span class="line">        <span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&#x27;total&#x27;</span>] &gt; <span class="number">0</span>:</span><br><span class="line">        wx_web_hook(data)</span><br><span class="line">        <span class="comment"># mail_sender(&#x27;测试消息&#x27;)</span></span><br></pre></td></tr></table></figure><h2 id="工信厅爬虫"><a href="#工信厅爬虫" class="headerlink" title="工信厅爬虫"></a>工信厅爬虫</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库链接</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect_to_database</span>():</span><br><span class="line">    connection = pymysql.connect(</span><br><span class="line">        host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">        database=<span class="string">&#x27;my_database_test&#x27;</span>,</span><br><span class="line">        charset=<span class="string">&#x27;utf8mb4&#x27;</span>,</span><br><span class="line">        cursorclass=pymysql.cursors.DictCursor</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> connection</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_new_date</span>():</span><br><span class="line">    connection = connect_to_database()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            sql = <span class="string">&quot;SELECT date FROM `sci_spider` WHERE type = &#x27;2&#x27; ORDER BY DATE(date) DESC LIMIT 0,1&quot;</span></span><br><span class="line">            cursor.execute(sql)</span><br><span class="line">            results = cursor.fetchall()</span><br><span class="line">            <span class="keyword">return</span> results[<span class="number">0</span>][<span class="string">&#x27;date&#x27;</span>]</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        connection.close()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_industry</span>(<span class="params">page_num, <span class="built_in">type</span></span>):</span><br><span class="line">    url = (<span class="string">f&#x27;http://gxt.shandong.gov.cn/col/col15201/index.html?uid=586830&amp;pageNum=<span class="subst">&#123;page_num&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    user_Agent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Referer&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: user_Agent</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = requests.get(url=url, headers=headers)</span><br><span class="line">            response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">            response = response.text</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请求失败，尝试睡眠一会(半小时)&quot;</span>)</span><br><span class="line">            sleep_time = <span class="number">60</span> * <span class="number">30</span></span><br><span class="line">            time.sleep(sleep_time)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;睡眠结束，继续运行...&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    da = re.findall(<span class="string">r&#x27;&lt;div class=&quot;bottom&quot;&gt;            &lt;span&gt;                (.*?)            &lt;/span&gt;&#x27;</span>, response)</span><br><span class="line">    in_url = re.findall(<span class="string">r&#x27;target=&quot;_blank&quot; href=&quot;(.*?)&quot;&gt;&#x27;</span>, response)</span><br><span class="line">    content = re.findall(<span class="string">r&#x27;&lt;a title=&quot;(.*?)&quot; target=&quot;_blank&quot;&#x27;</span>, response)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(da)):</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(i+<span class="number">1</span>) + <span class="string">&#x27; : &#x27;</span> + da[i][<span class="number">0</span>:<span class="number">10</span>] + <span class="string">&#x27; : &#x27;</span>+content[i]+ <span class="string">&#x27; : &#x27;</span> + in_url[i])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(da)*<span class="number">2</span> != <span class="built_in">len</span>(in_url) <span class="keyword">or</span> <span class="built_in">len</span>(da)*<span class="number">2</span> != <span class="built_in">len</span>(content):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;数据不完整，跳过插入&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    new_date = find_new_date()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> new_date <span class="keyword">or</span> new_date == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        new_date = <span class="string">&#x27;1970-01-01&#x27;</span>  <span class="comment"># 默认最小日期</span></span><br><span class="line"></span><br><span class="line">    connection = connect_to_database()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            sql = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">               INSERT INTO `my_database_test`.`sci_spider` </span></span><br><span class="line"><span class="string">               (`title`, `url`, `date`, `type`, `create_date`) </span></span><br><span class="line"><span class="string">               VALUES (%s, %s, %s, %s, NOW())</span></span><br><span class="line"><span class="string">               &quot;&quot;&quot;</span></span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(da)):</span><br><span class="line">                <span class="keyword">if</span> da[i][<span class="number">0</span>:<span class="number">10</span>] &gt; new_date:</span><br><span class="line">                    count = count + <span class="number">1</span></span><br><span class="line">                    cursor.execute(sql, (content[i], in_url[i], da[i][<span class="number">0</span>:<span class="number">10</span>], <span class="built_in">type</span>))</span><br><span class="line"></span><br><span class="line">        connection.commit()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;已成功插入 <span class="subst">&#123;count&#125;</span> 条数据&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;插入数据失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        connection.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    get_industry(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="科技厅爬虫"><a href="#科技厅爬虫" class="headerlink" title="科技厅爬虫"></a>科技厅爬虫</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect_to_database</span>():</span><br><span class="line">    connection = pymysql.connect(</span><br><span class="line">        host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">        database=<span class="string">&#x27;my_database_test&#x27;</span>,</span><br><span class="line">        charset=<span class="string">&#x27;utf8mb4&#x27;</span>,</span><br><span class="line">        cursorclass=pymysql.cursors.DictCursor</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> connection</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_new_date</span>():</span><br><span class="line">    connection = connect_to_database()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            sql = <span class="string">&quot;SELECT date FROM `sci_spider` WHERE type = &#x27;1&#x27; ORDER BY DATE(date) DESC LIMIT 0,1&quot;</span></span><br><span class="line">            cursor.execute(sql)</span><br><span class="line">            results = cursor.fetchall()</span><br><span class="line">            <span class="keyword">return</span> results[<span class="number">0</span>][<span class="string">&#x27;date&#x27;</span>]</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        connection.close()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sci_kjt</span>(<span class="params">page_num, <span class="built_in">type</span></span>):</span><br><span class="line">    url = (<span class="string">f&#x27;http://kjt.shandong.gov.cn/col/col13360/index.html?uid=85651&amp;pageNum=<span class="subst">&#123;page_num&#125;</span>&#x27;</span>)</span><br><span class="line">    user_Agent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Referer&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: user_Agent</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = requests.get(url=url, headers=headers)</span><br><span class="line">            response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">            response = response.text</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请求失败，尝试睡眠一会(半小时)&quot;</span>)</span><br><span class="line">            sleep_time = <span class="number">60</span> * <span class="number">30</span></span><br><span class="line">            time.sleep(sleep_time)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;睡眠结束，继续运行...&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    da = re.findall(<span class="string">r&#x27;&lt;span class=&quot;pull-right&quot;&gt;(.*?)&lt;/span&gt;&#x27;</span>, response)</span><br><span class="line">    sci_url = re.findall(<span class="string">r&#x27;href=&quot;(.*?)&quot; class=&quot;ellipsis-line-clamp&quot;&gt;&#x27;</span>, response)</span><br><span class="line">    content = re.findall(<span class="string">r&#x27;&lt;s&gt;&lt;/s&gt;(.*?)&lt;/a&gt;&lt;/li&gt;&#x27;</span>, response)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(da)):</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(i+<span class="number">1</span>) + <span class="string">&#x27; : &#x27;</span> + da[i][<span class="number">0</span>:<span class="number">10</span>] + <span class="string">&#x27; : &#x27;</span>+content[i]+ <span class="string">&#x27; : &#x27;</span> + sci_url[i])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(da) != <span class="built_in">len</span>(sci_url) <span class="keyword">or</span> <span class="built_in">len</span>(da) != <span class="built_in">len</span>(content):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;数据不完整，跳过插入&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    new_date = find_new_date()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> new_date <span class="keyword">or</span> new_date == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        new_date = <span class="string">&#x27;1970-01-01&#x27;</span>  <span class="comment"># 默认最小日期</span></span><br><span class="line"></span><br><span class="line">    connection = connect_to_database()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            sql = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            INSERT INTO `my_database_test`.`sci_spider` </span></span><br><span class="line"><span class="string">            (`title`, `url`, `date`, `type`, `create_date`) </span></span><br><span class="line"><span class="string">            VALUES (%s, %s, %s, %s, NOW())</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(da)):</span><br><span class="line">                <span class="keyword">if</span> da[i] &gt; new_date:</span><br><span class="line">                    count = count + <span class="number">1</span></span><br><span class="line">                    cursor.execute(sql, (content[i], sci_url[i], da[i], <span class="built_in">type</span>))</span><br><span class="line"></span><br><span class="line">        connection.commit()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;已成功插入 <span class="subst">&#123;count&#125;</span> 条数据&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;插入数据失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        connection.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    get_sci_kjt(<span class="number">1</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="山东省人民政府爬虫"><a href="#山东省人民政府爬虫" class="headerlink" title="山东省人民政府爬虫"></a>山东省人民政府爬虫</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect_to_database</span>():</span><br><span class="line">    connection = pymysql.connect(</span><br><span class="line">        host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">        database=<span class="string">&#x27;my_database_test&#x27;</span>,</span><br><span class="line">        charset=<span class="string">&#x27;utf8mb4&#x27;</span>,</span><br><span class="line">        cursorclass=pymysql.cursors.DictCursor</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> connection</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_new_date</span>():</span><br><span class="line">    connection = connect_to_database()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            sql = <span class="string">&quot;SELECT date FROM `sci_spider` WHERE type = &#x27;3&#x27; ORDER BY DATE(date) DESC LIMIT 0,1&quot;</span></span><br><span class="line">            cursor.execute(sql)</span><br><span class="line">            results = cursor.fetchall()</span><br><span class="line">            <span class="keyword">return</span> results[<span class="number">0</span>][<span class="string">&#x27;date&#x27;</span>]</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        connection.close()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sci_sdszf</span>(<span class="params">page_num, <span class="built_in">type</span></span>):</span><br><span class="line">    url = (<span class="string">f&#x27;http://www.shandong.gov.cn/col/col94237/index.html?uid=633233&amp;pageNum=<span class="subst">&#123;page_num&#125;</span>&#x27;</span>)</span><br><span class="line">    user_Agent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Referer&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: user_Agent</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = requests.get(url=url, headers=headers)</span><br><span class="line">            response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">            response = response.text</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请求失败，尝试睡眠一会(半小时)&quot;</span>)</span><br><span class="line">            sleep_time = <span class="number">60</span> * <span class="number">30</span></span><br><span class="line">            time.sleep(sleep_time)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;睡眠结束，继续运行...&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 提取日期</span></span><br><span class="line">    da = re.findall(<span class="string">r&#x27;&lt;span&gt;\s*(\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;)\s*&lt;/span&gt;&#x27;</span>, response)</span><br><span class="line">    <span class="comment"># 提取链接</span></span><br><span class="line">    sci_url = re.findall(<span class="string">r&#x27;href=&quot;(.*?)&quot;\s+target=&quot;_blank&quot;\s+title=&quot;&#x27;</span>, response)</span><br><span class="line">    <span class="comment"># 提取标题（title 属性）</span></span><br><span class="line">    content = re.findall(<span class="string">r&#x27;\s+target=&quot;_blank&quot;\s+title=&quot;(.*?)&quot;&#x27;</span>, response)</span><br><span class="line">    <span class="comment"># return</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(da), <span class="built_in">len</span>(sci_url), <span class="built_in">len</span>(content))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(da)):</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(i+<span class="number">1</span>) + <span class="string">&#x27; : &#x27;</span> + da[i][<span class="number">0</span>:<span class="number">10</span>] + <span class="string">&#x27; : &#x27;</span>+content[i]+ <span class="string">&#x27; : &#x27;</span> + sci_url[i])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(da) != <span class="built_in">len</span>(sci_url) <span class="keyword">or</span> <span class="built_in">len</span>(da) != <span class="built_in">len</span>(content):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;数据不完整，跳过插入&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    new_date = find_new_date()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> new_date <span class="keyword">or</span> new_date == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        new_date = <span class="string">&#x27;1970-01-01&#x27;</span>  <span class="comment"># 默认最小日期</span></span><br><span class="line"></span><br><span class="line">    connection = connect_to_database()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            sql = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            INSERT INTO `my_database_test`.`sci_spider` </span></span><br><span class="line"><span class="string">            (`title`, `url`, `date`, `type`, `create_date`) </span></span><br><span class="line"><span class="string">            VALUES (%s, %s, %s, %s, NOW())</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(da)):</span><br><span class="line">                <span class="keyword">if</span> da[i] &gt; new_date:</span><br><span class="line">                    count = count + <span class="number">1</span></span><br><span class="line">                    cursor.execute(sql, (content[i], sci_url[i], da[i], <span class="built_in">type</span>))</span><br><span class="line"></span><br><span class="line">        connection.commit()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;已成功插入 <span class="subst">&#123;count&#125;</span> 条数据&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;插入数据失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        connection.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    get_sci_sdszf(<span class="number">1</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信hook消息接收</title>
      <link href="/2025/03/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/%E5%BE%AE%E4%BF%A1hook%E6%B6%88%E6%81%AF%E6%8E%A5%E6%94%B6/"/>
      <url>/2025/03/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/%E5%BE%AE%E4%BF%A1hook%E6%B6%88%E6%81%AF%E6%8E%A5%E6%94%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="微信hook消息接收"><a href="#微信hook消息接收" class="headerlink" title="微信hook消息接收"></a>微信hook消息接收</h1><p>微信版本：3.9.12.45</p><p>账号：两个微信账号，大号用来发消息，小号用来测试</p><p>工具：微信、CE修改器、x64dbg</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309003334045-1e0690b0565a4ac7.png" alt="微信版本"></p><h2 id="定位消息地址"><a href="#定位消息地址" class="headerlink" title="定位消息地址"></a>定位消息地址</h2><p>选择微信进程</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309003531575-3171e299997e05f4.png" alt="选择微信进程"></p><p>大号给小号发送消息，扫描类型选择字符串，数值填写消息内容</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309003620823-a13866681e4ccca7.png" alt="请输入图片描述"></p><p>重复之上的步骤，不断重复，直到无法定位的时候（我这里有三个），一个个查看浏览器内存区域</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309003732156-eee67b615e97541b.png" alt="请输入图片描述"></p><p>找到带着wxid和xml格式的就是内存地址</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309003822510-0b3f593cb2a5cf42.png" alt="请输入图片描述"></p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309003849742-ab262aba4d231bb3.png" alt="请输入图片描述"></p><h2 id="x64dbg断点"><a href="#x64dbg断点" class="headerlink" title="x64dbg断点"></a>x64dbg断点</h2><p>记录一下当前的微信地址1B6555E11BD，关闭CE修改器，打开x64dbg，附加微信，按住alt+e选择wechatwin.dll</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309004019740-4301f41492653928.png" alt="请输入图片描述"></p><p>点进去，再内存窗口搜索刚才记录的地址</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309004100009-66329857e390bcd6.png" alt="请输入图片描述"></p><p>设置写入断点</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309004143152-eadc4cb88c8ab207.png" alt="请输入图片描述"></p><p>此时微信大号给小号发送消息，查看堆栈信息</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309004234591-a3767d090afe3769.png" alt="请输入图片描述"></p><p>找到有个db的那个（这一步骤是再写入微信数据库之前定位call）</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309004706481-eafbc57a883b57ab.png" alt="请输入图片描述"></p><p>选择，右键“在反汇编中转到指定QWORD”</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309004725335-7a33d88a7336f02c.png" alt="请输入图片描述"></p><p>跳转之后，先取消上一个断点</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309005220343-045264296ceac140.png" alt="请输入图片描述"></p><p>然后针对跳转的位置，找到上一个call位置，在call处进行断点</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309005128733-21c091d7a313ed5c.png" alt="请输入图片描述"></p><p>发送消息，断点到了，查看RDI</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309010931157-fab1462ef601f496.png" alt="请输入图片描述"></p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309011204653-ea9d10ce34e3925f.png" alt="请输入图片描述"></p><p>在地址栏的第一个双击一下</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309011236859-9e03af3b54260e11.png" alt="请输入图片描述"></p><p>这样我们可以得出</p><p>0x48 是 微信id</p><p>0x88 是 微信消息的内容</p><h2 id="计算偏移"><a href="#计算偏移" class="headerlink" title="计算偏移"></a>计算偏移</h2><p>找到断点位置，复制文件偏移</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309011722845-95d13f5bb63dc359.png" alt="请输入图片描述"></p><p>然后打开计算器那个图标，用偏移地址+C00</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309011752005-264a3cfd2ef4f65e.png" alt="请输入图片描述"></p><p>得出结果250AEA7</p><h2 id="验证结果"><a href="#验证结果" class="headerlink" title="验证结果"></a>验证结果</h2><p>找到断点位置，复制地址</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309011838272-52a67f9b5aa08450.png" alt="请输入图片描述"></p><p>然后按住ALT+E，找到复制wechatwin.dll的基址</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309011932459-3970cea94ebdeb8e.png" alt="请输入图片描述"></p><p>用计算器两者相减得出结果250AEA7</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309011945192-39dd644fd5625635.png" alt="请输入图片描述"></p><p>结果是对的，此时编写frida脚本</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> wechatWin = <span class="title class_">Module</span>.<span class="title function_">findBaseAddress</span>(<span class="string">&quot;WeChatWin.dll&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!wechatWin) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;WeChatWin.dll模块未找到！&quot;</span>);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;模块未找到&quot;</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> hookAddress = wechatWin.<span class="title function_">add</span>(<span class="number">0x250AEA7</span>);</span><br><span class="line"><span class="title class_">Interceptor</span>.<span class="title function_">attach</span>(hookAddress, &#123;</span><br><span class="line">    <span class="attr">onEnter</span>: <span class="keyword">function</span> (<span class="params">args</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> timestamp = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">rdi</span>.<span class="title function_">add</span>(<span class="number">0x44</span>).<span class="title function_">readInt</span>();</span><br><span class="line">        <span class="keyword">var</span> wxid = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">rdi</span>.<span class="title function_">add</span>(<span class="number">0x48</span>).<span class="title function_">readPointer</span>().<span class="title function_">readUtf16String</span>();</span><br><span class="line">        <span class="keyword">var</span> msg  = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">rdi</span>.<span class="title function_">add</span>(<span class="number">0x88</span>).<span class="title function_">readPointer</span>().<span class="title function_">readUtf16String</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;[++++] &quot;</span>+ timestamp +<span class="string">&quot;    &quot;</span>+ wxid +<span class="string">&quot;  :  &quot;</span>+msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hook已安装，等待接收消息...&quot;</span>);</span><br></pre></td></tr></table></figure><p>运行脚本</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309012259323-6d1b833fa6adea79.png" alt="请输入图片描述"></p><p>发送消息测试</p><p><img src="https://img.ittoolman.com/2025/2025-03-09/image-20250309012350422-daf56983822c35d1.png" alt="请输入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 软件逆向 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>火锅随记</title>
      <link href="/2025/01/29/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E7%81%AB%E9%94%85%E9%9A%8F%E8%AE%B0/"/>
      <url>/2025/01/29/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E7%81%AB%E9%94%85%E9%9A%8F%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p><strong>日期：2025年1月28日</strong></p><p>今日无事，除夕本应该回家的，但是不记得多久之前和父母的争吵，回家似乎成了一个很陌生的词汇。在这陌生的城市，只有我和女友熟知，那种独在异乡为异客的感觉油然而生，我似乎不属于这天地的任何一角，我好似乱世旅人，死亡才是我真正的归宿。</p><p>我本意是不想出门的，也许是我的疲惫，也许是我的懒惰，我想一个人好好的休息，但是女友很饿，家里多是零食，便想着去外面找些吃食碰碰运气。找了许久没有心仪的地方，便想着去上次的火锅店看看。一路上，看着关闭的店铺，心中只能自私的祈求还在开门，因为这样才能让我饥饿的肠胃不至于落空。万幸，店老板和老板娘一家没有回家过年，而且热情的招待了我们，操着一口东北的口音，热情程度让我难以抵挡（不免让我想起了大学中东北的舍友）。那是忽然想起高中老师和我说过的一句话“在异乡，找到一个和自己有着一丝关系的人都会觉得倍感亲切。”。店面很干净，这是第二次去了，再也没有了第一次去对汤底的失望。里面贴着很多港片的壁纸，房顶吊着王勃的《滕王阁序》。老板说话客客气气，好像喝了酒，但是没有酒气，吐字磕磕绊绊的，想必也是一个文青吧，要不然怎么会选择如此的设计风格。有时候挺想和老板说一句“嘿！哥，你也看港片？”可惜我社恐，女友比我还社恐，两人吃过火锅之后，便草草离去。</p><p>随后去大明湖溜达了一圈，此时没有了平时的人声鼎沸，稀疏的人群和凌冽的寒风，仿佛在驱赶着人群“嘿，别在外面溜达了，回家吃饭去？”。其实在等出租的时候我就在想，人们为什么对家的观念这么看重，仔细想想，这似乎是千百年来的血脉传承。不过这种传承，随着社会的变迁，家与国都开始模糊了起来。（再次不得不佩服大刘的黑暗森林的一个片段“ “不会吧，我从历史课上知道，你们那时婚姻家庭就已经开始解体了，有很大一部分人不愿受束缚，要过自由的生活。”她又提到了历史课。”）临走时买了三盒拼图，外加四本书《云边有个小卖部》其实已经看过了，拿回来做收藏而已，看着这些书的出版，我在五六年前的时候就见过他们，一本本书籍好像正在慢慢的被时间遗忘，埋藏在短视频的深深大雪之下，无人问津。</p><p>回去的路上，女友问我为什么这几天看起来心情都不是很好，其实我也没注意到这些，或许是我的疏于对她的关心，也或许是我最近的心情真的很低迷。望着车外的风景，我还是唉声叹气的说了一句“为生而活的人和为活而生的人本就是两种不同的人生”我不知道这句话哪里来的，突然进入我的脑海，这句话像是对她说，也像是在质问着我。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7设置swap内存大小</title>
      <link href="/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E8%AE%BE%E7%BD%AEswap%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F/"/>
      <url>/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E8%AE%BE%E7%BD%AEswap%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="创建和配置-2GB-Swap-文件"><a href="#创建和配置-2GB-Swap-文件" class="headerlink" title="创建和配置 2GB Swap 文件"></a><strong>创建和配置 2GB Swap 文件</strong></h3><ol><li><p><strong>创建一个空文件作为交换空间</strong>： 使用 <code>dd</code> 命令来创建一个指定大小的文件。我们将创建一个 2GB 的文件 <code>/swapfile</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1M count=2048</span><br></pre></td></tr></table></figure></li><li><p><strong>设置适当的权限</strong>： 设置正确的文件权限以确保安全，防止非授权访问。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 600 /swapfile</span><br></pre></td></tr></table></figure></li><li><p><strong>初始化交换文件</strong>： 使用 <code>mkswap</code> 命令来设置这个文件为交换空间。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> mkswap /swapfile</span><br></pre></td></tr></table></figure></li><li><p><strong>激活交换文件</strong>： 使用 <code>swapon</code> 命令来启用新的交换空间。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> swapon /swapfile</span><br></pre></td></tr></table></figure></li><li><p><strong>验证交换空间</strong>： 再次使用 <code>free -h</code> 或者 <code>swapon --show</code> 来确认交换空间已经正确添加。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">sudo</span> swapon --show</span><br></pre></td></tr></table></figure></li><li><p><strong>使更改永久生效</strong>： 编辑 <code>/etc/fstab</code> 文件，添加一行以确保在系统重启后仍然可以使用新创建的交换空间。 打开 <code>/etc/fstab</code> 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vi /etc/fstab</span><br></pre></td></tr></table></figure><p>在文件末尾添加如下行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/swapfile none swap sw 0 0</span><br></pre></td></tr></table></figure></li><li><p><strong>调整 Swappiness 参数（可选）</strong>： 如果你想要调整内核对 swap 的使用倾向，可以通过编辑 <code>/etc/sysctl.conf</code> 文件来设置 <code>vm.swappiness</code> 参数。例如，将其设置为 10 可能是一个合理的选择。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;vm.swappiness=10&#x27;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/sysctl.conf</span><br><span class="line"><span class="built_in">sudo</span> sysctl -p</span><br></pre></td></tr></table></figure></li></ol><p>完成以上步骤后，系统应该已经有了 2GB 的 swap 空间，并且它会在每次启动时自动加载。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7部署maven环境</title>
      <link href="/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%83%A8%E7%BD%B2maven%E7%8E%AF%E5%A2%83/"/>
      <url>/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%83%A8%E7%BD%B2maven%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h2 id="1、maven-官网下载安装包"><a href="#1、maven-官网下载安装包" class="headerlink" title="1、maven 官网下载安装包"></a><strong>1、maven 官网下载安装包</strong></h2><p>maven 官网地址：<a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a></p><p>下载完成后，上传到 linux</p><h2 id="2、安装-maven"><a href="#2、安装-maven" class="headerlink" title="2、安装 maven"></a><strong>2、安装 maven</strong></h2><p>创建 maven 文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /usr/local/maven</span><br></pre></td></tr></table></figure><p>解压 maven 安装包到 maven 文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-maven-3.8.5-bin.tar.gz -C /usr/local/maven</span><br></pre></td></tr></table></figure><p>进入maven 目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/maven/apache-maven-3.8.5/</span><br></pre></td></tr></table></figure><p>进入 conf 目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> conf/</span><br></pre></td></tr></table></figure><p>创建 maven 资源库目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /m2/respository</span><br></pre></td></tr></table></figure><p>编辑 settings.xml 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim settings.xml</span><br></pre></td></tr></table></figure><p>设置指定的存放位置为</p><p><code>&lt;localRepository&gt;/m2/repository&lt;/localRepository&gt;</code></p><p>更改镜像源</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span>  </span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>&lt;http://maven.aliyun.com/nexus/content/groups/public/&gt;<span class="tag">&lt;/<span class="name">url</span>&gt;</span>  </span><br><span class="line">       <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>          </span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3、添加环境变量"><a href="#3、添加环境变量" class="headerlink" title="3、添加环境变量"></a><strong>3、添加环境变量</strong></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>添加 maven 环境变量内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MAVEN_HOME=/usr/local/maven/apache-maven-3.8.5</span><br><span class="line">PATH=$MAVEN_HOME/bin:$PATH</span><br><span class="line">export MAVEN_HOME PATH</span><br></pre></td></tr></table></figure><p>重新加载配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p>测试查看版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -version</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7部署redis</title>
      <link href="/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%83%A8%E7%BD%B2redis/"/>
      <url>/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%83%A8%E7%BD%B2redis/</url>
      
        <content type="html"><![CDATA[<h3 id="下载Redis"><a href="#下载Redis" class="headerlink" title="下载Redis"></a><strong>下载Redis</strong></h3><p>进入官网找到下载地址 <a href="https://redis.io/download">https://redis.io/download</a></p><p>右键Download按钮，选择复制链接。</p><p>进入到Xshell控制台(默认当前是root根目录)，输入wget 将上面复制的下载链接粘贴上，如下命令:</p><p><code>wget &lt;http://download.redis.io/releases/redis-5.0.7.tar.gz</code>&gt;</p><p>下载完成后进行解压</p><p><code>tar -zvxf redis-5.0.7.tar.gz</code></p><p><strong>移动redis目录</strong></p><p>一般都会将redis目录放置到 &#x2F;usr&#x2F;local&#x2F;redis目录，所以这里输入下面命令将目前在&#x2F;root目录下的redis-5.0.7文件夹更改目录，同时更改文件夹名称为redis。</p><p><code>mv /root/redis-5.0.7 /usr/local/redis</code></p><p><strong>编译</strong></p><p>cd到&#x2F;usr&#x2F;local&#x2F;redis目录，输入命令make执行编译命令，接下来控制台会输出各种编译过程中输出的内容。</p><p><code>make</code></p><p><strong>安装</strong></p><p>输入以下命令<code>make PREFIX=/usr/local/redis install</code></p><p>这里多了一个关键字 <strong><code>PREFIX=</code></strong> 这个关键字的作用是编译的时候用于指定程序存放的路径。比如我们现在就是指定了redis必须存放在&#x2F;usr&#x2F;local&#x2F;redis目录。假设不添加该关键字Linux会将可执行文件存放在&#x2F;usr&#x2F;local&#x2F;bin目录，</p><p>库文件会存放在&#x2F;usr&#x2F;local&#x2F;lib目录。配置文件会存放在&#x2F;usr&#x2F;local&#x2F;etc目录。其他的资源文件会存放在usr&#x2F;local&#x2F;share目录。这里指定号目录也方便后续的卸载，后续直接rm -rf &#x2F;usr&#x2F;local&#x2F;redis 即可删除redis。</p><h3 id="启动redis"><a href="#启动redis" class="headerlink" title="启动redis"></a><strong>启动redis</strong></h3><p>根据上面的操作已经将redis安装完成了。在目录&#x2F;usr&#x2F;local&#x2F;redis 输入下面命令启动redis</p><p><strong>后台启动（在配置文件设置了daemonize属性为yes则跟后台进程方式启动其实一样)</strong></p><p><code>./bin/redis-server&amp; ./redis.conf</code></p><p><strong>显示启动方式</strong></p><p><code>./bin/redis-server ./redis.conf</code></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7部署jenkins2.164安装</title>
      <link href="/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%83%A8%E7%BD%B2jenkins2-164%E5%AE%89%E8%A3%85/"/>
      <url>/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%83%A8%E7%BD%B2jenkins2-164%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>centos安装的是java8根据jenkins的提示，所以选择2.164</p><hr><p>You will need to explicitly install a Java runtime environment, because Oracle’s Java RPMs are incorrect and fail to register as providing a java dependency. Thus, adding an explicit dependency requirement on Java would force installation of the OpenJDK JVM.</p><ul><li>2.164 (2019-02) and newer: Java 8 or Java 11</li><li>2.54 (2017-04) and newer: Java 8</li><li>1.612 (2015-05) and newer: Java 7</li></ul><hr><p>本文采用rpm形式安装，下载网址</p><p><a href="https://archives.jenkins-ci.org/redhat-stable/">https://archives.jenkins-ci.org/redhat-stable/</a></p><p><strong>rpm安装：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh jenkins-2.164.1-1.1.noarch.rpm</span><br></pre></td></tr></table></figure><p><strong>配置jenkis的端口:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/jenkins</span><br></pre></td></tr></table></figure><p>找到修改端口号：</p><p>JENKINS_PORT&#x3D;”8080” 修改此端口号</p><p><strong>新版Jenkins配置文件需要在启动service里面更改</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/jenkins.service</span><br></pre></td></tr></table></figure><p>编辑更改这一行</p><p><code>Environment=&quot;JENKINS_PORT=7998”</code></p><p><strong>启动jenkins</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service jenkins start</span><br><span class="line">service jenkins stop</span><br><span class="line">service jenkins restart</span><br></pre></td></tr></table></figure><p>启动失败日志：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@iZuefw6wnv6uycZ ~]# systemctl status jenkins.service</span><br><span class="line">● jenkins.service - LSB: Jenkins Automation Server</span><br><span class="line">   Loaded: loaded (/etc/rc.d/init.d/jenkins; bad; vendor preset: disabled)</span><br><span class="line">   Active: failed (Result: exit-code) since Tue 2024-12-10 13:35:05 CST; 12s ago</span><br><span class="line">     Docs: man:systemd-sysv-generator(8)</span><br><span class="line">  Process: 15057 ExecStart=/etc/rc.d/init.d/jenkins start (code=exited, status=1/FAILURE)</span><br><span class="line"></span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ systemd[1]: Starting LSB: Jenkins Automation Server...</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ runuser[15062]: pam_unix(runuser:session): session opened <span class="keyword">for</span> user jenkins by (uid=0)</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ jenkins[15057]: Starting Jenkins bash: /usr/bin/java: No such file or directory</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ runuser[15062]: pam_unix(runuser:session): session closed <span class="keyword">for</span> user jenkins</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ jenkins[15057]: [FAILED]</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ systemd[1]: jenkins.service: control process exited, code=exited status=1</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ systemd[1]: Failed to start LSB: Jenkins Automation Server.</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ systemd[1]: Unit jenkins.service entered failed state.</span><br><span class="line">Dec 10 13:35:05 iZuefw6wnv6uycZ systemd[1]: jenkins.service failed.</span><br></pre></td></tr></table></figure><p>可以查看到这里面<code>Starting Jenkins bash: /usr/bin/java: No such file or directory</code> 表示在<code>/usr/bin/java</code> 找到不到java环境，但我是配置了的。所以这里需要配置到对应路径的软连接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /home/env/java/jdk1.8.0_431/bin/java /usr/bin/java</span><br></pre></td></tr></table></figure><p><strong>再次启动则启动成功</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@iZuefw6wnv6uycZ ~]# service jenkins start</span><br><span class="line">Starting jenkins (via systemctl):                          [  OK  ]</span><br><span class="line">[root@iZuefw6wnv6uycZ ~]# systemctl status jenkins.service</span><br><span class="line">● jenkins.service - LSB: Jenkins Automation Server</span><br><span class="line">   Loaded: loaded (/etc/rc.d/init.d/jenkins; bad; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Tue 2024-12-10 13:39:59 CST; 6s ago</span><br><span class="line">     Docs: man:systemd-sysv-generator(8)</span><br><span class="line">  Process: 15095 ExecStart=/etc/rc.d/init.d/jenkins start (code=exited, status=0/SUCCESS)</span><br><span class="line">   CGroup: /system.slice/jenkins.service</span><br><span class="line">           └─15114 /usr/bin/java -Dcom.sun.akuma.Daemon=daemonized -Djava.awt.headless=<span class="literal">true</span> -DJENKINS_HOME=/var/lib/jenkins -jar /usr/lib/jenkins/jenkins....</span><br><span class="line"></span><br><span class="line">Dec 10 13:39:58 iZuefw6wnv6uycZ systemd[1]: Starting LSB: Jenkins Automation Server...</span><br><span class="line">Dec 10 13:39:58 iZuefw6wnv6uycZ runuser[15100]: pam_unix(runuser:session): session opened <span class="keyword">for</span> user jenkins by (uid=0)</span><br><span class="line">Dec 10 13:39:59 iZuefw6wnv6uycZ runuser[15100]: pam_unix(runuser:session): session closed <span class="keyword">for</span> user jenkins</span><br><span class="line">Dec 10 13:39:59 iZuefw6wnv6uycZ systemd[1]: Started LSB: Jenkins Automation Server.</span><br><span class="line">Dec 10 13:39:59 iZuefw6wnv6uycZ jenkins[15095]: Starting Jenkins [  OK  ]</span><br></pre></td></tr></table></figure><h2 id="打开jenkins"><a href="#打开jenkins" class="headerlink" title="打开jenkins"></a><strong>打开jenkins</strong></h2><p>在浏览器中访问<code>ip:端口</code>  ， 首次进入会要求输入初始密码，</p><p>初始密码在：&#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;secrets&#x2F;initialAdminPassword</p><p>查看密码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iZuefw6wnv6uycZ ~]# <span class="built_in">cat</span> /var/lib/jenkins/secrets/initialAdminPassword</span><br><span class="line">e912eae446234c02bdc5a8aea1de6b04</span><br></pre></td></tr></table></figure><p>接下来选择“Install suggested plugins”安装默认的插件，Jenkins就下载相关的插件进行安装，有时候因为访问外网原因，可以选择手动安装，进入界面自己选择安装。</p><p>然后在世配置管理员命令和密码即可</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7配置java环境</title>
      <link href="/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%85%8D%E7%BD%AEjava%E7%8E%AF%E5%A2%83/"/>
      <url>/2024/12/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/Centos7%E9%85%8D%E7%BD%AEjava%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<p>下载：<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p><p><strong>解压文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u431-linux-x64.tar.gz -C /home/env/java/</span><br></pre></td></tr></table></figure><p><strong>设置环境变量</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>在文件最末尾加上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/env/java/jdk1.8.0_431</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>使环境变量生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p>配置软连接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /home/env/java/jdk1.8.0_431/bin/java /usr/bin/java</span><br></pre></td></tr></table></figure><p>检查</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p><strong>删除软连接并重新配置</strong></p><p>确认现有软连接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /usr/bin/java</span><br></pre></td></tr></table></figure><p>删除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> /usr/bin/java</span><br></pre></td></tr></table></figure><p>重新配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /env/java/jdk-21.0.3/bin/java /usr/bin/java</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>超星网页字体解密</title>
      <link href="/2024/11/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/%E8%B6%85%E6%98%9F%E7%BD%91%E9%A1%B5%E5%AD%97%E4%BD%93%E8%A7%A3%E5%AF%86/"/>
      <url>/2024/11/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/%E8%B6%85%E6%98%9F%E7%BD%91%E9%A1%B5%E5%AD%97%E4%BD%93%E8%A7%A3%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<p>右键网页检查</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/4010382065.png" alt="右键网页检查"></p><p>搜索页面和这个相关的从而定位到引入文件</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/4042939915.png" alt="定位到引入文件"></p><p>查找，一眼Base64编码的字体文件，通过这个编码数据解码获得原字体文件</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/1290355690.png" alt="Base64编码的字体文件"></p><p>找到之后进去查看</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/1424610815.png" alt="查看"></p><p>找到了，把里面内容复制下来，掐头去尾，是这样的数据</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/1302646586.png" alt="base64编码"></p><p>编写脚本进行解码，引号内填写base64编码数据去掉<code>data:application/font-ttf;charset=utf-8;base64,</code>的开头声明”</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/2059868567.png" alt="进行解码"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="comment"># Base64编码的字符串</span></span><br><span class="line">base64_string = <span class="string">&quot;这里填写base64编码数据去掉data:application/font-ttf;charset=utf-8;base64,的开头声明&quot;</span></span><br><span class="line"><span class="comment"># 解码Base64字符串</span></span><br><span class="line">decoded_data = base64.b64decode(base64_string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存为.ttf文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;chaoxing_font.ttf&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(decoded_data)</span><br></pre></td></tr></table></figure><p>获得到base64的ttf文件结果</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/3750168171.png" alt="获得到base64的ttf文件结果"></p><p>使用字体查看器查看字体 <a href="https://www.bejson.com/ui/font/">https://www.bejson.com/ui/font/</a></p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/2285548012.png" alt="查看字体"></p><p>接下来将ttf文件转换成xml文件(python需要安装fontTools)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fontTools.ttLib <span class="keyword">import</span> TTFont</span><br><span class="line"></span><br><span class="line"><span class="comment"># TTF 文件路径</span></span><br><span class="line">ttf_path = <span class="string">r&quot;D:\UserData\Desktop\chaoxing_font.ttf&quot;</span></span><br><span class="line">xml_output_path = <span class="string">r&quot;D:\UserData\Desktop\chaoxing_font.xml&quot;</span></span><br><span class="line"><span class="comment"># 加载字体文件</span></span><br><span class="line">font = TTFont(ttf_path)</span><br><span class="line"><span class="comment"># 保存为 XML 文件</span></span><br><span class="line">font.saveXML(xml_output_path)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;解析完毕&quot;</span>)</span><br></pre></td></tr></table></figure><p>抽选字体对比一下映射结果对不对（超星的加密是修改了此字体图元数据，显示成未加密的字）</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/540202573.png" alt="抽选字体"></p><p>下载原来的字体文件（非超星加密后的文件）</p><p>源字体文件对应</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/3303999258.png" alt="源字体文件对应"></p><p>超星加密后字体</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/2476204657.png" alt="超星加密后字体"></p><p>也就是说原来的5148对应着57C3</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/2517124149.png" alt="对应"></p><p>编写对比代码进行测试</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_glyphs</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    解析字体文件中的 TTGlyph 信息</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    tree = ET.parse(file_path)</span><br><span class="line">    root = tree.getroot()</span><br><span class="line"></span><br><span class="line">    glyphs = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> glyph <span class="keyword">in</span> root.findall(<span class="string">&quot;.//TTGlyph&quot;</span>):</span><br><span class="line">        name = glyph.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        points = []</span><br><span class="line">        <span class="keyword">for</span> pt <span class="keyword">in</span> glyph.findall(<span class="string">&quot;.//pt&quot;</span>):</span><br><span class="line">            x = pt.get(<span class="string">&quot;x&quot;</span>)</span><br><span class="line">            y = pt.get(<span class="string">&quot;y&quot;</span>)</span><br><span class="line">            on = pt.get(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">            points.append(<span class="string">f&quot;<span class="subst">&#123;x&#125;</span><span class="subst">&#123;y&#125;</span><span class="subst">&#123;on&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 生成轮廓的唯一哈希值</span></span><br><span class="line">        hash_value = hashlib.md5(<span class="string">&quot;&quot;</span>.join(points).encode(<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 截取哈希值的 25-32 位来作为唯一标识</span></span><br><span class="line">        truncated_hash = hash_value[<span class="number">24</span>:<span class="number">32</span>]</span><br><span class="line"></span><br><span class="line">        glyphs[truncated_hash] = name  <span class="comment"># 使用截取后的哈希值作为键</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> glyphs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_unicode_character</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    根据 glyph 名称（如 uni5148）获取对应汉字</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> name.startswith(<span class="string">&quot;uni&quot;</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            unicode_value = <span class="built_in">int</span>(name[<span class="number">3</span>:], <span class="number">16</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">chr</span>(unicode_value)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_mapping</span>(<span class="params">xml_old_path, xml_cx_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    建立思源黑体和超星字体的对照关系</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    old_glyphs = parse_glyphs(xml_old_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(old_glyphs))</span><br><span class="line">    cx_glyphs = parse_glyphs(xml_cx_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(cx_glyphs))</span><br><span class="line"></span><br><span class="line">    mapping = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> cx_hash, cx_name <span class="keyword">in</span> cx_glyphs.items():</span><br><span class="line">        <span class="keyword">if</span> cx_hash <span class="keyword">in</span> old_glyphs:</span><br><span class="line">            old_name = old_glyphs[cx_hash]</span><br><span class="line">            character = get_unicode_character(old_name)</span><br><span class="line">            <span class="keyword">if</span> character:  <span class="comment"># 确保是有效汉字</span></span><br><span class="line">                mapping.append(&#123;</span><br><span class="line">                    <span class="string">&quot;chaoxing&quot;</span>: cx_name,</span><br><span class="line">                    <span class="string">&quot;si_yuan&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;siyuan_name&quot;</span>: old_name,</span><br><span class="line">                        <span class="string">&quot;siyuan_name_value&quot;</span>: character</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mapping</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    xml_old_path = <span class="string">r&quot;D:\UserData\Desktop\思源黑体.xml&quot;</span></span><br><span class="line">    xml_cx_path = <span class="string">r&quot;D:\UserData\Desktop\chaoxing_font.xml&quot;</span></span><br><span class="line"></span><br><span class="line">    result = build_mapping(xml_old_path, xml_cx_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输出到文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;glyph_mapping.json&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        json.dump(result, f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印部分结果</span></span><br><span class="line">    <span class="comment"># print(json.dumps(result[:5], ensure_ascii=False, indent=4))</span></span><br></pre></td></tr></table></figure><p>生成结果</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chaoxing&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni57C2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;si_yuan&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni2FAF&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name_value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;⾯&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chaoxing&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni57E0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;si_yuan&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni5584&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name_value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;善&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chaoxing&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni580F&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;si_yuan&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni4E16&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name_value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;世&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chaoxing&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni581D&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;si_yuan&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni5BB3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name_value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;害&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;chaoxing&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni900B&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;si_yuan&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni2F83&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;siyuan_name_value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;⾃&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>我采用的字符串是</p><p>超星：<code>下埂关于“好好埃生”的埄埆哪埇不埁准埅？</code></p><p>思源：<code>下面关于“好好先生”的描述哪项不太准确？</code></p><p>结合对照表显示，发现字体字形数据并对不上，查看字体数据，针对“下“字进行分析，发现两边结果并对不上，结果是超星对于字体字形进行了更改，并不是简单的对比字符哈希值就可以对比出来的了。</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/2342157308.png" alt="对比效果1"></p><p>查看对比效果</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/2835537070.png" alt="对比效果2"></p><p>左侧为原版字体，右侧为学习通字体</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/3077639853.webp" alt="对比效果3"></p><p>百度到” I Am I“大佬的文章”从学习通复制文字乱码看前端版权保护“找到一定的思路是假设字符的边距是唯一的，好的，那么我们就拼接边距距离。得出以下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_glyphs</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    解析字体文件中的 TTGlyph 信息，使用 xMin, yMin, xMax, yMax 作为唯一标识</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    tree = ET.parse(file_path)</span><br><span class="line">    root = tree.getroot()</span><br><span class="line"></span><br><span class="line">    glyphs = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> glyph <span class="keyword">in</span> root.findall(<span class="string">&quot;.//TTGlyph&quot;</span>):</span><br><span class="line">        name = glyph.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 获取 xMin, yMin, xMax, yMax</span></span><br><span class="line">        xMin = glyph.get(<span class="string">&quot;xMin&quot;</span>)</span><br><span class="line">        yMin = glyph.get(<span class="string">&quot;yMin&quot;</span>)</span><br><span class="line">        xMax = glyph.get(<span class="string">&quot;xMax&quot;</span>)</span><br><span class="line">        yMax = glyph.get(<span class="string">&quot;yMax&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 使用这四个值拼接成唯一标识符</span></span><br><span class="line">        <span class="keyword">if</span> xMin <span class="keyword">and</span> yMin <span class="keyword">and</span> xMax <span class="keyword">and</span> yMax:</span><br><span class="line">            unique_key = <span class="string">f&quot;<span class="subst">&#123;xMin&#125;</span><span class="subst">&#123;yMin&#125;</span><span class="subst">&#123;xMax&#125;</span><span class="subst">&#123;yMax&#125;</span>&quot;</span></span><br><span class="line">            glyphs[unique_key] = name  <span class="comment"># 用四个边界值作为唯一键，值为glyph名称</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> glyphs</span><br><span class="line"><span class="comment"># def parse_glyphs(file_path):</span></span><br><span class="line"><span class="comment">#     &quot;&quot;&quot;</span></span><br><span class="line"><span class="comment">#     解析字体文件中的 TTGlyph 信息</span></span><br><span class="line"><span class="comment">#     &quot;&quot;&quot;</span></span><br><span class="line"><span class="comment">#     tree = ET.parse(file_path)</span></span><br><span class="line"><span class="comment">#     root = tree.getroot()</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     glyphs = &#123;&#125;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     for glyph in root.findall(&quot;.//TTGlyph&quot;):</span></span><br><span class="line"><span class="comment">#         name = glyph.get(&quot;name&quot;)</span></span><br><span class="line"><span class="comment">#         points = []</span></span><br><span class="line"><span class="comment">#         for pt in glyph.findall(&quot;.//pt&quot;):</span></span><br><span class="line"><span class="comment">#             x = pt.get(&quot;x&quot;)</span></span><br><span class="line"><span class="comment">#             y = pt.get(&quot;y&quot;)</span></span><br><span class="line"><span class="comment">#             on = pt.get(&quot;on&quot;)</span></span><br><span class="line"><span class="comment">#             points.append(f&quot;&#123;x&#125;&#123;y&#125;&#123;on&#125;&quot;)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#         # 生成轮廓的唯一哈希值</span></span><br><span class="line"><span class="comment">#         hash_value = hashlib.md5(&quot;&quot;.join(points).encode(&#x27;utf-8&#x27;)).hexdigest()</span></span><br><span class="line"><span class="comment">#         glyphs[hash_value] = name  # 哈希值对应 glyph 名称</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     return glyphs</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_unicode_character</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    根据 glyph 名称（如 uni5148）获取对应汉字</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> name.startswith(<span class="string">&quot;uni&quot;</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            unicode_value = <span class="built_in">int</span>(name[<span class="number">3</span>:], <span class="number">16</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">chr</span>(unicode_value)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_mapping</span>(<span class="params">xml_old_path, xml_cx_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    建立思源黑体和超星字体的对照关系</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    old_glyphs = parse_glyphs(xml_old_path)</span><br><span class="line">    <span class="comment"># print(len(old_glyphs))</span></span><br><span class="line">    cx_glyphs = parse_glyphs(xml_cx_path)</span><br><span class="line">    <span class="comment"># print(len(cx_glyphs))</span></span><br><span class="line">    <span class="comment"># print(cx_glyphs)</span></span><br><span class="line">    mapping = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> cx_hash, cx_name <span class="keyword">in</span> cx_glyphs.items():</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> cx_hash <span class="keyword">in</span> old_glyphs:</span><br><span class="line">            old_name = old_glyphs[cx_hash]</span><br><span class="line">            character = get_unicode_character(old_name)</span><br><span class="line">            <span class="keyword">if</span> cx_name == <span class="string">&#x27;uni5814&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(cx_hash)</span><br><span class="line">                <span class="built_in">print</span>(old_name)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> character:  <span class="comment"># 确保是有效汉字</span></span><br><span class="line">                mapping.append(&#123;</span><br><span class="line">                    <span class="string">&quot;chaoxing&quot;</span>: cx_name,</span><br><span class="line">                    <span class="string">&quot;si_yuan&quot;</span> : &#123;</span><br><span class="line">                        <span class="string">&quot;siyuan_name&quot;</span>: old_name,</span><br><span class="line">                        <span class="string">&quot;siyuan_name_value&quot;</span>: character</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mapping</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    xml_old_path = <span class="string">r&quot;D:\UserData\Desktop\思源黑体.xml&quot;</span></span><br><span class="line">    xml_cx_path = <span class="string">r&quot;D:\UserData\Desktop\chaoxing_font.xml&quot;</span></span><br><span class="line"></span><br><span class="line">    result = build_mapping(xml_old_path, xml_cx_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输出到文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;glyph_mapping.json&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        json.dump(result, f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印部分结果</span></span><br><span class="line">    <span class="comment"># print(json.dumps(result[:5], ensure_ascii=False, indent=4))</span></span><br></pre></td></tr></table></figure><p>再通过匹配结果进行查看数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取json</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_mapping</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">return</span> json.load(f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取字符对应的 uni 名称</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_uni_name</span>(<span class="params">character, mapping</span>):</span><br><span class="line">    unicode_name = <span class="string">f&quot;uni<span class="subst">&#123;<span class="built_in">ord</span>(character):X&#125;</span>&quot;</span></span><br><span class="line">    <span class="comment"># print(unicode_name)</span></span><br><span class="line">    <span class="keyword">for</span> entry <span class="keyword">in</span> mapping:</span><br><span class="line">        <span class="keyword">if</span> entry[<span class="string">&quot;chaoxing&quot;</span>] == unicode_name:</span><br><span class="line">            <span class="keyword">return</span> entry</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解析字符串</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_code</span>(<span class="params">code, mapping</span>):</span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> code:</span><br><span class="line">        mapping_entry = get_uni_name(char, mapping)</span><br><span class="line">        <span class="keyword">if</span> mapping_entry:</span><br><span class="line">            result.append(&#123;</span><br><span class="line">                <span class="string">&quot;char&quot;</span>: char,</span><br><span class="line">                <span class="string">&quot;message&quot;</span>: mapping_entry[<span class="string">&quot;si_yuan&quot;</span>][<span class="string">&#x27;siyuan_name_value&#x27;</span>]</span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result.append(&#123;</span><br><span class="line">                <span class="string">&quot;char&quot;</span>: char,</span><br><span class="line">                <span class="string">&quot;message&quot;</span>: char</span><br><span class="line">            &#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试代码</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 读取字形映射</span></span><br><span class="line">    glyph_mapping_file = <span class="string">&quot;glyph_mapping.json&quot;</span></span><br><span class="line">    mapping = load_mapping(glyph_mapping_file)</span><br><span class="line">    <span class="comment"># 示例字符串</span></span><br><span class="line">    code = <span class="string">&#x27;下埂关于“好好埃生”的埄埆哪埇不埁准埅？&#x27;</span></span><br><span class="line">    <span class="comment"># 解析字符串</span></span><br><span class="line">    parsed_result = parse_code(code, mapping)</span><br><span class="line">    <span class="comment"># 输出解析结果</span></span><br><span class="line">    <span class="comment"># for item in parsed_result:</span></span><br><span class="line">    <span class="comment">#     print(item)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;超星字体：<span class="subst">&#123;code&#125;</span>&#x27;</span>)</span><br><span class="line">    siyuan_font = <span class="string">&#x27;&#x27;</span>.join([item[<span class="string">&#x27;message&#x27;</span>] <span class="keyword">for</span> item <span class="keyword">in</span> parsed_result])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;思源字体：<span class="subst">&#123;siyuan_font&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><p>得出结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">超星字体：下埂关于“好好埃生”的埄埆哪埇不埁准埅？</span><br><span class="line">思源字体：下⾯关于“好好先生”的描述哪项不太准确？</span><br></pre></td></tr></table></figure><p>在大佬的测试中，是可以确定90%左右的字符数据的。如果您不想看了，到这里就可以了，基本满足所有的效果了。</p><p>然后由于最近领导给我一些任务就是比较两个字符串的相似度，通过这个启发就想通过xy向量计算字符字形的相似度。得出以下代码，首先针对”下”字进行数据测试</p><ol><li><p><strong>归一化</strong>：将所有点归一化到相同的尺度。（如果不归一，DTW有要求长度一样，会报错）</p><p><strong>归一化点集</strong>（Normalization of points）是指将原始点集中的每个点的坐标变换到一个特定的标准范围，以消除由于坐标范围不同而引起的差异，从而使得数据的比较更加公正和一致。具体而言，在这段代码中，归一化的目标是将每个点的坐标缩放到 <code>[0, 1]</code> 的范围内。</p><p><strong>为什么要进行归一化？</strong></p><p>在计算点集之间的相似度时（如使用动态时间规整 DTW），不同的点集可能有不同的坐标范围或单位。如果不进行归一化，可能会因为坐标差异较大，导致计算出的相似度偏差较大。归一化的过程能够消除这种影响，让两个点集具有相同的尺度，从而公平地比较它们之间的相似性。</p><p><strong>举个例子：</strong></p><p>假设有一个点集：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">points = [(<span class="number">10</span>, <span class="number">20</span>), (<span class="number">30</span>, <span class="number">40</span>), (<span class="number">50</span>, <span class="number">60</span>), (<span class="number">70</span>, <span class="number">80</span>)]</span><br></pre></td></tr></table></figure><p>经过归一化处理后：</p><ul><li>最小值：<code>min_x = 10</code>, <code>min_y = 20</code></li><li>最大值：<code>max_x = 70</code>, <code>max_y = 80</code></li></ul><p>每个点将会变成：</p><ul><li><code>(10, 20)</code> 变成 <code>(0, 0)</code></li><li><code>(30, 40)</code> 变成 <code>(0.333, 0.333)</code></li><li><code>(50, 60)</code> 变成 <code>(0.666, 0.666)</code></li><li><code>(70, 80)</code> 变成 <code>(1, 1)</code></li></ul><p>最终，这些点就会被归一化到 <code>[0, 1]</code> 的范围内，这样它们的尺度是一致的，适合用于后续的相似度计算。归一化的目的是消除不同点集之间的坐标尺度差异，使得不同的点集可以在相同的尺度下进行比较。通过这种方式，我们可以更加公平地计算它们之间的相似度，而不会因为坐标的差异导致错误的比较结果。</p></li><li><p><strong>使用DTW进行点对齐</strong>：保持原有的DTW对齐方法。</p><p>这里计算两个点集的相似度分数，通过DTW距离计算得出一个0~1的相似度分数。1完全相似，0完全不一样。</p><p>函数使用 <code>fastdtw</code> 函数计算归一化后的两个点集之间的 <strong>DTW 距离</strong>。DTW 是一种衡量两组时间序列相似度的算法，常用于处理不等长、速度不同的序列数据。在这里，它也可以用于比较两个二维点集的相似度。</p></li><li><p><strong>计算相似度</strong>：基于对齐后的点集计算相似度。</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> fastdtw <span class="keyword">import</span> fastdtw</span><br><span class="line"><span class="keyword">from</span> scipy.spatial.distance <span class="keyword">import</span> euclidean</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设我们已经有了两个字形的数据</span></span><br><span class="line">ttglyph_superstar = [</span><br><span class="line">    (<span class="number">515</span>, <span class="number">695</span>), (<span class="number">515</span>, <span class="number">517</span>), (<span class="number">526</span>, <span class="number">530</span>), (<span class="number">749</span>, <span class="number">421</span>), (<span class="number">884</span>, <span class="number">320</span>),</span><br><span class="line">    (<span class="number">838</span>, <span class="number">259</span>), (<span class="number">731</span>, <span class="number">347</span>), (<span class="number">515</span>, <span class="number">461</span>), (<span class="number">515</span>, -<span class="number">72</span>), (<span class="number">445</span>, -<span class="number">72</span>),</span><br><span class="line">    (<span class="number">445</span>, <span class="number">695</span>), (<span class="number">59</span>, <span class="number">695</span>), (<span class="number">59</span>, <span class="number">762</span>), (<span class="number">942</span>, <span class="number">762</span>), (<span class="number">942</span>, <span class="number">695</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">ttglyph_sourcehan = [</span><br><span class="line">    (<span class="number">515</span>, <span class="number">695</span>), (<span class="number">515</span>, <span class="number">517</span>), (<span class="number">526</span>, <span class="number">530</span>), (<span class="number">618</span>, <span class="number">485</span>), (<span class="number">720</span>, <span class="number">426</span>),</span><br><span class="line">    (<span class="number">825</span>, <span class="number">364</span>), (<span class="number">884</span>, <span class="number">320</span>), (<span class="number">838</span>, <span class="number">259</span>), (<span class="number">788</span>, <span class="number">300</span>), (<span class="number">694</span>, <span class="number">359</span>),</span><br><span class="line">    (<span class="number">606</span>, <span class="number">413</span>), (<span class="number">515</span>, <span class="number">461</span>), (<span class="number">515</span>, -<span class="number">72</span>), (<span class="number">445</span>, -<span class="number">72</span>), (<span class="number">445</span>, <span class="number">695</span>),</span><br><span class="line">    (<span class="number">59</span>, <span class="number">695</span>), (<span class="number">59</span>, <span class="number">762</span>), (<span class="number">942</span>, <span class="number">762</span>), (<span class="number">942</span>, <span class="number">695</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换为numpy数组</span></span><br><span class="line">points1 = np.array(ttglyph_superstar)</span><br><span class="line">points2 = np.array(ttglyph_sourcehan)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">normalize_points</span>(<span class="params">points</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    归一化点集</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(points) == <span class="number">0</span>:  <span class="comment"># 检查点集是否为空</span></span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    points = np.array(points)  <span class="comment"># 将点集转换为NumPy数组</span></span><br><span class="line">    min_x, min_y = np.<span class="built_in">min</span>(points, axis=<span class="number">0</span>)</span><br><span class="line">    max_x, max_y = np.<span class="built_in">max</span>(points, axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 防止除以零</span></span><br><span class="line">    <span class="keyword">if</span> max_x == min_x:</span><br><span class="line">        max_x = min_x + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> max_y == min_y:</span><br><span class="line">        max_y = min_y + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    normalized_points = (points - [min_x, min_y]) / [max_x - min_x, max_y - min_y]</span><br><span class="line">    <span class="keyword">return</span> normalized_points</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_similarity</span>(<span class="params">points1, points2</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    使用DTW计算两个点集之间的相似度</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    points1_normalized = normalize_points(points1)</span><br><span class="line">    points2_normalized = normalize_points(points2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(points1_normalized) == <span class="number">0</span> <span class="keyword">or</span> <span class="built_in">len</span>(points2_normalized) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.0</span>  <span class="comment"># 如果任一点集为空，相似度为0</span></span><br><span class="line">    <span class="comment">#distance 是 DTW 算法计算出来的总距离，表示两个点集的整体差异。</span></span><br><span class="line">    <span class="comment">#path 是 DTW 算法找到的最佳对齐路径，指示了如何从 points1 映射到 points2。</span></span><br><span class="line">    distance, path = fastdtw(points1_normalized, points2_normalized, dist=euclidean)</span><br><span class="line">    <span class="comment"># DTW 算法会计算出一组“对齐”路径，通过这个路径可以重新排列两个点集，使它们更好地对齐。根据 path 的内容，分别从 points1_normalized 和 points2_normalized 中提取对齐后的点集。</span></span><br><span class="line">    aligned_points1 = [points1_normalized[i] <span class="keyword">for</span> i, _ <span class="keyword">in</span> path]</span><br><span class="line">    aligned_points2 = [points2_normalized[j] <span class="keyword">for</span> _, j <span class="keyword">in</span> path]</span><br><span class="line">    <span class="comment"># 计算对齐点之间的欧几里得距离，在最佳对齐下，每对点之间的差异。np.linalg.norm 计算的是两点之间的欧几里得距离</span></span><br><span class="line">    distances = [np.linalg.norm(np.array(p1) - np.array(p2)) <span class="keyword">for</span> p1, p2 <span class="keyword">in</span> <span class="built_in">zip</span>(aligned_points1, aligned_points2)]</span><br><span class="line">    <span class="comment"># 算出所有欧氏距离去平局书，得出平均欧氏距距离</span></span><br><span class="line">    average_distance = np.mean(distances)</span><br><span class="line"></span><br><span class="line">    similarity_score = <span class="number">1</span> / (<span class="number">1</span> + average_distance)</span><br><span class="line">    <span class="keyword">return</span> similarity_score</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Similarity score: <span class="subst">&#123;calculate_similarity(points2,points1)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>得出结果</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Similarity score: 0.975700703557036</span><br></pre></td></tr></table></figure><p>发现相似度还是很高的，这里是需要忽略字体的风格的，和笔画的这些。</p><p>好的，可以通过这种相似度算法去核对超星字体对应的元数据了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> fastdtw <span class="keyword">import</span> fastdtw</span><br><span class="line"><span class="keyword">from</span> scipy.spatial.distance <span class="keyword">import</span> euclidean</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_glyphs</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    解析字体文件中的 TTGlyph 信息</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    tree = ET.parse(file_path)</span><br><span class="line">    root = tree.getroot()</span><br><span class="line"></span><br><span class="line">    glyphs = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> glyph <span class="keyword">in</span> root.findall(<span class="string">&quot;.//TTGlyph&quot;</span>):</span><br><span class="line">        name = glyph.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        points = []</span><br><span class="line">        <span class="keyword">for</span> pt <span class="keyword">in</span> glyph.findall(<span class="string">&quot;.//pt&quot;</span>):</span><br><span class="line">            x = <span class="built_in">int</span>(pt.get(<span class="string">&quot;x&quot;</span>))</span><br><span class="line">            y = <span class="built_in">int</span>(pt.get(<span class="string">&quot;y&quot;</span>))</span><br><span class="line">            on = <span class="built_in">int</span>(pt.get(<span class="string">&quot;on&quot;</span>, <span class="number">0</span>))  <span class="comment"># 默认值为0，如果不存在则设为0</span></span><br><span class="line">            points.append((x, y))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 将点集转换为字符串，作为字典的键</span></span><br><span class="line">        key = <span class="built_in">str</span>(points)</span><br><span class="line">        glyphs[key] = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> glyphs</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_unicode_character</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    根据 glyph 名称（如 uni5148）获取对应汉字</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> name.startswith(<span class="string">&quot;uni&quot;</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            unicode_value = <span class="built_in">int</span>(name[<span class="number">3</span>:], <span class="number">16</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">chr</span>(unicode_value)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">normalize_points</span>(<span class="params">points</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    归一化点集</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> points:  <span class="comment"># 检查点集是否为空</span></span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    points = np.array(points)  <span class="comment"># 将点集转换为NumPy数组</span></span><br><span class="line">    min_x, min_y = np.<span class="built_in">min</span>(points, axis=<span class="number">0</span>)</span><br><span class="line">    max_x, max_y = np.<span class="built_in">max</span>(points, axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 防止除以零</span></span><br><span class="line">    <span class="keyword">if</span> max_x == min_x:</span><br><span class="line">        max_x = min_x + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> max_y == min_y:</span><br><span class="line">        max_y = min_y + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    normalized_points = (points - [min_x, min_y]) / [max_x - min_x, max_y - min_y]</span><br><span class="line">    <span class="keyword">return</span> normalized_points</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_similarity</span>(<span class="params">points1, points2</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    使用DTW计算两个点集之间的相似度</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    points1_normalized = normalize_points(points1)</span><br><span class="line">    points2_normalized = normalize_points(points2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(points1_normalized) == <span class="number">0</span> <span class="keyword">or</span> <span class="built_in">len</span>(points2_normalized) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.0</span>  <span class="comment"># 如果任一点集为空，相似度为0</span></span><br><span class="line"></span><br><span class="line">    distance, path = fastdtw(points1_normalized, points2_normalized, dist=euclidean)</span><br><span class="line"></span><br><span class="line">    aligned_points1 = [points1_normalized[i] <span class="keyword">for</span> i, _ <span class="keyword">in</span> path]</span><br><span class="line">    aligned_points2 = [points2_normalized[j] <span class="keyword">for</span> _, j <span class="keyword">in</span> path]</span><br><span class="line"></span><br><span class="line">    distances = [np.linalg.norm(np.array(p1) - np.array(p2)) <span class="keyword">for</span> p1, p2 <span class="keyword">in</span> <span class="built_in">zip</span>(aligned_points1, aligned_points2)]</span><br><span class="line">    average_distance = np.mean(distances)</span><br><span class="line"></span><br><span class="line">    similarity_score = <span class="number">1</span> / (<span class="number">1</span> + average_distance)</span><br><span class="line">    <span class="keyword">return</span> similarity_score</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_mapping</span>(<span class="params">xml_old_path, xml_cx_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    建立思源黑体和超星字体的对照关系</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    old_glyphs = parse_glyphs(xml_old_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;思源字体：<span class="subst">&#123;<span class="built_in">len</span>(old_glyphs)&#125;</span>&#x27;</span>)</span><br><span class="line">    cx_glyphs = parse_glyphs(xml_cx_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;超星字体：<span class="subst">&#123;<span class="built_in">len</span>(cx_glyphs)&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    mapping = []</span><br><span class="line"></span><br><span class="line">    total_combinations = <span class="built_in">len</span>(old_glyphs) * <span class="built_in">len</span>(cx_glyphs)</span><br><span class="line">    <span class="keyword">with</span> tqdm(total=total_combinations, desc=<span class="string">&quot;Processing&quot;</span>) <span class="keyword">as</span> pbar:</span><br><span class="line">        <span class="keyword">for</span> old_key, old_name <span class="keyword">in</span> old_glyphs.items():</span><br><span class="line">            <span class="keyword">for</span> cx_key, cx_name <span class="keyword">in</span> cx_glyphs.items():</span><br><span class="line">                similarity = calculate_similarity(<span class="built_in">eval</span>(old_key), <span class="built_in">eval</span>(cx_key))</span><br><span class="line">                <span class="keyword">if</span> similarity &gt;= <span class="number">0.9</span>:</span><br><span class="line">                    mapping.append(&#123;</span><br><span class="line">                        <span class="string">&quot;chaoxing&quot;</span>: &#123;</span><br><span class="line">                            <span class="string">&quot;cx_name&quot;</span>: cx_name,</span><br><span class="line">                            <span class="string">&quot;cx_character&quot;</span>: get_unicode_character(cx_name)</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="string">&quot;si_yuan&quot;</span>: &#123;</span><br><span class="line">                            <span class="string">&quot;sy_name&quot;</span>: old_name,</span><br><span class="line">                            <span class="string">&quot;sy_character&quot;</span>: get_unicode_character(old_name)</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="string">&quot;similarity&quot;</span>: similarity</span><br><span class="line">                    &#125;)</span><br><span class="line">                pbar.update(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mapping</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    xml_old_path = <span class="string">r&quot;D:\UserData\Desktop\思源黑体.xml&quot;</span></span><br><span class="line">    xml_cx_path = <span class="string">r&quot;D:\UserData\Desktop\chaoxing_font.xml&quot;</span></span><br><span class="line"></span><br><span class="line">    result = build_mapping(xml_old_path, xml_cx_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输出到文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;glyph_mapping2.json&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        json.dump(result, f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># print(json.dumps(result[:5], ensure_ascii=False, indent=4))</span></span><br></pre></td></tr></table></figure><p>但是运行效果不如人意</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/11/409476519.png" alt="运行效果"></p><p>这么长的时间肯定是不能忍的，所有采用多线程的处理方式，cpu就应该忙起来了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ProcessPoolExecutor, as_completed</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> fastdtw <span class="keyword">import</span> fastdtw</span><br><span class="line"><span class="keyword">from</span> scipy.spatial.distance <span class="keyword">import</span> euclidean</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其他函数不变，保持之前的代码</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_similarity</span>(<span class="params">points1, points2</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    使用DTW计算两个点集之间的相似度</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    points1_normalized = normalize_points(points1)</span><br><span class="line">    points2_normalized = normalize_points(points2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(points1_normalized) == <span class="number">0</span> <span class="keyword">or</span> <span class="built_in">len</span>(points2_normalized) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.0</span>  <span class="comment"># 如果任一点集为空，相似度为0</span></span><br><span class="line"></span><br><span class="line">    distance, path = fastdtw(points1_normalized, points2_normalized, dist=euclidean)</span><br><span class="line"></span><br><span class="line">    aligned_points1 = [points1_normalized[i] <span class="keyword">for</span> i, _ <span class="keyword">in</span> path]</span><br><span class="line">    aligned_points2 = [points2_normalized[j] <span class="keyword">for</span> _, j <span class="keyword">in</span> path]</span><br><span class="line"></span><br><span class="line">    distances = [np.linalg.norm(np.array(p1) - np.array(p2)) <span class="keyword">for</span> p1, p2 <span class="keyword">in</span> <span class="built_in">zip</span>(aligned_points1, aligned_points2)]</span><br><span class="line">    average_distance = np.mean(distances)</span><br><span class="line"></span><br><span class="line">    similarity_score = <span class="number">1</span> / (<span class="number">1</span> + average_distance)</span><br><span class="line">    <span class="keyword">return</span> similarity_score</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">normalize_points</span>(<span class="params">points</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    归一化点集</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> points:  <span class="comment"># 检查点集是否为空</span></span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    points = np.array(points)  <span class="comment"># 将点集转换为NumPy数组</span></span><br><span class="line">    min_x, min_y = np.<span class="built_in">min</span>(points, axis=<span class="number">0</span>)</span><br><span class="line">    max_x, max_y = np.<span class="built_in">max</span>(points, axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 防止除以零</span></span><br><span class="line">    <span class="keyword">if</span> max_x == min_x:</span><br><span class="line">        max_x = min_x + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> max_y == min_y:</span><br><span class="line">        max_y = min_y + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    normalized_points = (points - [min_x, min_y]) / [max_x - min_x, max_y - min_y]</span><br><span class="line">    <span class="keyword">return</span> normalized_points</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parallel_calculate_similarity</span>(<span class="params">old_key, old_name, cx_glyphs</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    并行计算相似度</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    results = []</span><br><span class="line">    <span class="keyword">for</span> cx_key, cx_name <span class="keyword">in</span> cx_glyphs.items():</span><br><span class="line">        similarity = calculate_similarity(<span class="built_in">eval</span>(old_key), <span class="built_in">eval</span>(cx_key))</span><br><span class="line">        <span class="keyword">if</span> similarity &gt;= <span class="number">0.9</span>:</span><br><span class="line">            results.append(&#123;</span><br><span class="line">                <span class="string">&quot;chaoxing&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;cx_name&quot;</span>: cx_name,</span><br><span class="line">                    <span class="string">&quot;cx_character&quot;</span>: get_unicode_character(cx_name)</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;si_yuan&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;sy_name&quot;</span>: old_name,</span><br><span class="line">                    <span class="string">&quot;sy_character&quot;</span>: get_unicode_character(old_name)</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;similarity&quot;</span>: similarity</span><br><span class="line">            &#125;)</span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_unicode_character</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    根据 glyph 名称（如 uni5148）获取对应汉字</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> name.startswith(<span class="string">&quot;uni&quot;</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            unicode_value = <span class="built_in">int</span>(name[<span class="number">3</span>:], <span class="number">16</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">chr</span>(unicode_value)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_glyphs</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    解析字体文件中的 TTGlyph 信息</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    tree = ET.parse(file_path)</span><br><span class="line">    root = tree.getroot()</span><br><span class="line"></span><br><span class="line">    glyphs = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> glyph <span class="keyword">in</span> root.findall(<span class="string">&quot;.//TTGlyph&quot;</span>):</span><br><span class="line">        name = glyph.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        points = []</span><br><span class="line">        <span class="keyword">for</span> pt <span class="keyword">in</span> glyph.findall(<span class="string">&quot;.//pt&quot;</span>):</span><br><span class="line">            x = <span class="built_in">int</span>(pt.get(<span class="string">&quot;x&quot;</span>))</span><br><span class="line">            y = <span class="built_in">int</span>(pt.get(<span class="string">&quot;y&quot;</span>))</span><br><span class="line">            on = <span class="built_in">int</span>(pt.get(<span class="string">&quot;on&quot;</span>, <span class="number">0</span>))  <span class="comment"># 默认值为0，如果不存在则设为0</span></span><br><span class="line">            points.append((x, y))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 将点集转换为字符串，作为字典的键</span></span><br><span class="line">        key = <span class="built_in">str</span>(points)</span><br><span class="line">        glyphs[key] = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> glyphs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_mapping_parallel</span>(<span class="params">xml_old_path, xml_cx_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    并行建立思源黑体和超星字体的对照关系</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    old_glyphs = parse_glyphs(xml_old_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;思源字体：<span class="subst">&#123;<span class="built_in">len</span>(old_glyphs)&#125;</span>&#x27;</span>)</span><br><span class="line">    cx_glyphs = parse_glyphs(xml_cx_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;超星字体：<span class="subst">&#123;<span class="built_in">len</span>(cx_glyphs)&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    mapping = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用进程池进行并行处理</span></span><br><span class="line">    <span class="keyword">with</span> ProcessPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">        futures = []</span><br><span class="line">        <span class="comment"># 为每个思源字体字形提交任务</span></span><br><span class="line">        <span class="keyword">for</span> old_key, old_name <span class="keyword">in</span> old_glyphs.items():</span><br><span class="line">            futures.append(executor.submit(parallel_calculate_similarity, old_key, old_name, cx_glyphs))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 通过 as_completed 获取计算结果</span></span><br><span class="line">        <span class="keyword">for</span> future <span class="keyword">in</span> tqdm(as_completed(futures), total=<span class="built_in">len</span>(futures), desc=<span class="string">&quot;Processing&quot;</span>):</span><br><span class="line">            mapping.extend(future.result())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> mapping</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    xml_old_path = <span class="string">r&quot;D:\UserData\Desktop\思源黑体.xml&quot;</span></span><br><span class="line">    xml_cx_path = <span class="string">r&quot;D:\UserData\Desktop\chaoxing_font.xml&quot;</span></span><br><span class="line"></span><br><span class="line">    result = build_mapping_parallel(xml_old_path, xml_cx_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输出到文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;glyph_mapping_parallel.json&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        json.dump(result, f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印部分结果</span></span><br><span class="line">    <span class="built_in">print</span>(json.dumps(result[:<span class="number">5</span>], ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>))</span><br></pre></td></tr></table></figure><p>这样处理时间来到了半小时（不过cpu要满了），因为我要求把大于0.9的数据全弄出来了，所以会有很多重复的字形数据。这里还需要取出相似度最高的那一个字形数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取保存的结果文件并生成包含所有相似度最高数据的 high.json 文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_most_similar_for_all</span>(<span class="params">result_file=<span class="string">&quot;glyph_mapping_parallel.json&quot;</span>, output_file=<span class="string">&quot;high.json&quot;</span></span>):</span><br><span class="line">    <span class="comment"># 读取 JSON 数据</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(result_file, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = json.load(f)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 用于存储每个 chaoxing 对应的最相似的 si_yuan 对照项</span></span><br><span class="line">    highest_similarity_entries = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 遍历所有条目，找出每个 chaoxing 字符对应的最相似的 si_yuan 对照项</span></span><br><span class="line">    <span class="keyword">for</span> entry <span class="keyword">in</span> data:</span><br><span class="line">        cx_name = entry[<span class="string">&quot;chaoxing&quot;</span>][<span class="string">&quot;cx_name&quot;</span>]</span><br><span class="line">        similarity = entry[<span class="string">&quot;similarity&quot;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果该 cx_name 没有出现过，或者当前相似度更高，更新最相似的条目</span></span><br><span class="line">        <span class="keyword">if</span> cx_name <span class="keyword">not</span> <span class="keyword">in</span> highest_similarity_entries <span class="keyword">or</span> similarity &gt; highest_similarity_entries[cx_name][<span class="string">&quot;similarity&quot;</span>]:</span><br><span class="line">            highest_similarity_entries[cx_name] = entry</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(len(highest_similarity_entries))</span></span><br><span class="line">    <span class="comment"># 将结果保存到 high.json 文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(output_file, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        json.dump(<span class="built_in">list</span>(highest_similarity_entries.values()), f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;已将结果保存到 <span class="subst">&#123;output_file&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数，生成 high.json 文件</span></span><br><span class="line">find_most_similar_for_all()</span><br></pre></td></tr></table></figure><p>至此，我们以及彻底完成了映射表的制作。然后拿数据跑一下进行测试</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取 high.json 文件并加载数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_high_json</span>(<span class="params">file_path=<span class="string">&quot;high.json&quot;</span></span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">return</span> json.load(f)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据 high.json 匹配字符串中的每个字符，返回结果字符串</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">match_string_with_high_json</span>(<span class="params">code, high_json_data</span>):</span><br><span class="line">    result = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> code:</span><br><span class="line">        <span class="comment"># 遍历 high.json 中的所有项，查找匹配的 cx_character</span></span><br><span class="line">        matched = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> entry <span class="keyword">in</span> high_json_data:</span><br><span class="line">            <span class="keyword">if</span> entry[<span class="string">&quot;chaoxing&quot;</span>][<span class="string">&quot;cx_character&quot;</span>] == char:</span><br><span class="line">                <span class="comment"># 根据需要将匹配的结果拼接成字符串</span></span><br><span class="line">                result.append(entry[<span class="string">&quot;si_yuan&quot;</span>][<span class="string">&quot;sy_character&quot;</span>])  <span class="comment"># 使用 si_yuan 对应的字符</span></span><br><span class="line">                matched = <span class="literal">True</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> matched:</span><br><span class="line">            <span class="comment"># 如果没有找到匹配的项，保留原字符</span></span><br><span class="line">            result.append(char)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将匹配结果列表合并成一个字符串</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例字符串</span></span><br><span class="line">code = <span class="string">&#x27;下埂关于“好好埃生”的埄埆哪埇不埁准埅？&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载 high.json 数据</span></span><br><span class="line">high_json_data = load_high_json()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配字符串</span></span><br><span class="line">result_string = match_string_with_high_json(code, high_json_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;超星字体：<span class="subst">&#123;code&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;思源字体：<span class="subst">&#123;result_string&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><p>得出结果</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">超星字体：下埂关于“好好埃生”的埄埆哪埇不埁准埅？</span><br><span class="line">思源字体：下⾯关于“好好先生”的描述哪项不太准确？</span><br></pre></td></tr></table></figure><p>好的，已经可以了，这里关于超星字体的时候，有个疑问就是为什么每个页面加载页面的字体，不能拿到全部的，我这个不知道咋弄，很困扰我，希望有大佬可以帮忙解释一下。</p><p>至此，文章彻底结束。</p><p>参考文章：</p><p>关于超星学习通网页版字体加密分析 ：<a href="https://www.52pojie.cn/thread-1631357-4-1.html">https://www.52pojie.cn/thread-1631357-4-1.html</a></p><p>从学习通复制文字乱码看前端版权保护：<a href="https://5ime.cn/xxt_font.html">https://5ime.cn/xxt_font.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
            <tag> python </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python查找md文件中包含图片的文件</title>
      <link href="/2024/11/19/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/python/python%E6%9F%A5%E6%89%BEmd%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8C%85%E5%90%AB%E5%9B%BE%E7%89%87%E7%9A%84%E6%96%87%E4%BB%B6/"/>
      <url>/2024/11/19/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/python/python%E6%9F%A5%E6%89%BEmd%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8C%85%E5%90%AB%E5%9B%BE%E7%89%87%E7%9A%84%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>博客要从gridea改成hexo的，但是要涉及到好多的图片显示，hexo又不支持相对路径，这让我很困扰，索性尽量少些图片的文章，但是之前那些还要去更改。一个个手动改太过于麻烦，所以写了个python脚本用于查询。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 常见图片格式</span></span><br><span class="line">IMAGE_PATTERN = re.<span class="built_in">compile</span>(<span class="string">r&#x27;!\[.*?\]\((.*?\.(?:png|jpe?g|gif|bmp|svg))\)&#x27;</span>, re.IGNORECASE)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 路径</span></span><br><span class="line">base_path = <span class="string">r&quot;D:\oneDrive\Note\blog\source&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_md_with_images</span>(<span class="params">base_path</span>):</span><br><span class="line">    md_files_with_images = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> root, _, files <span class="keyword">in</span> os.walk(base_path):</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> file.endswith(<span class="string">&#x27;.md&#x27;</span>):</span><br><span class="line">                file_path = os.path.join(root, file)</span><br><span class="line">                <span class="comment"># 检查文件内容是否包含图片</span></span><br><span class="line">                <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                    content = f.read()</span><br><span class="line">                    <span class="keyword">if</span> IMAGE_PATTERN.search(content):</span><br><span class="line">                        md_files_with_images.append(file_path)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> md_files_with_images</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找并打印结果</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    result = find_md_with_images(base_path)</span><br><span class="line">    <span class="keyword">if</span> result:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;包含图片的Markdown文件(<span class="subst">&#123;<span class="built_in">len</span>(result)&#125;</span>个)：&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> md_file <span class="keyword">in</span> result:</span><br><span class="line">            <span class="built_in">print</span>(md_file)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;未找到包含图片的Markdown文件。&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次windows服务tomcat服务器ssl签发证书之路</title>
      <link href="/2024/11/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-11-13-%E8%AE%B0%E4%B8%80%E6%AC%A1windows%E6%9C%8D%E5%8A%A1tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8ssl%E7%AD%BE%E5%8F%91%E8%AF%81%E4%B9%A6%E4%B9%8B%E8%B7%AF/"/>
      <url>/2024/11/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-11-13-%E8%AE%B0%E4%B8%80%E6%AC%A1windows%E6%9C%8D%E5%8A%A1tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8ssl%E7%AD%BE%E5%8F%91%E8%AF%81%E4%B9%A6%E4%B9%8B%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="操作记录："><a href="#操作记录：" class="headerlink" title="操作记录："></a>操作记录：</h2><p>certbot，用于申请ssl证书和自动续期<br>网站：<a href="https://certbot.eff.org/">https://certbot.eff.org</a></p><p>openssl，用于pem证书类型的转换<br>网站：<a href="https://slproweb.com/products/Win32OpenSSL.html">https://slproweb.com/products/Win32OpenSSL.html</a></p><h3 id="使用certbot申请ssl证书"><a href="#使用certbot申请ssl证书" class="headerlink" title="使用certbot申请ssl证书"></a><strong>使用certbot申请ssl证书</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot certonly --webroot -w D:\apache-tomcat-8.5.94\webapps\ROOT -d www.xxxx.com</span><br></pre></td></tr></table></figure><h3 id="生成路径："><a href="#生成路径：" class="headerlink" title="生成路径："></a><strong>生成路径：</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Saving debug <span class="built_in">log</span> to C:\Certbot\<span class="built_in">log</span>\letsencrypt.log</span><br><span class="line">Requesting a certificate <span class="keyword">for</span> www.xxxx.com</span><br><span class="line"></span><br><span class="line">Successfully received certificate.</span><br><span class="line">Certificate is saved at: C:\Certbot\live\www.xxxx.com-0002\fullchain.pem</span><br><span class="line">Key is saved at:         C:\Certbot\live\www.xxxx.com-0002\privkey.pem</span><br><span class="line">This certificate expires on 2025-02-11.</span><br><span class="line">These files will be updated when the certificate renews.</span><br><span class="line">Certbot has <span class="built_in">set</span> up a scheduled task to automatically renew this certificate <span class="keyword">in</span> the background.</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">If you like Certbot, please consider supporting our work by:</span><br><span class="line"></span><br><span class="line">* Donating to ISRG / Let<span class="string">&#x27;s Encrypt:   https://letsencrypt.org/donate</span></span><br><span class="line"><span class="string">* Donating to EFF:                    https://eff.org/donate-le</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">---</span></span><br></pre></td></tr></table></figure><h3 id="证书转换并导出到相应路径"><a href="#证书转换并导出到相应路径" class="headerlink" title="证书转换并导出到相应路径"></a><strong>证书转换并导出到相应路径</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="built_in">export</span> -out D:\apache-tomcat-8.5.94\conf\cert\www.xxxx.com.pfx  -inkey C:\Certbot\live\www.xxxx.com-0002\privkey.pem -<span class="keyword">in</span> C:\Certbot\live\www.xxxx.com-0002\fullchain.pem -name tomcat</span><br></pre></td></tr></table></figure><p>设置密码(默认使用原密码)：xxxx</p><h3 id="重启tomcat"><a href="#重启tomcat" class="headerlink" title="重启tomcat"></a><strong>重启tomcat</strong></h3><p>D:\apache-tomcat-8.5.94\bin 路径内<br>关闭<code>shutdown.bat</code></p><p>打开<code>startup.bat</code></p><p><strong>注意：</strong> 这里有个小tips，运行这俩bat的时候必须去那个bin路径下面运行，别整花活，什么快捷方式和命令行，这样会无法检查到那些东西的。。。这玩意只会检查当前运行目录下的东西。</p><h2 id="自动续订脚本"><a href="#自动续订脚本" class="headerlink" title="自动续订脚本"></a>自动续订脚本</h2><h3 id="创建文件renew-certificates-bat"><a href="#创建文件renew-certificates-bat" class="headerlink" title="创建文件renew_certificates.bat"></a><strong>创建文件renew_certificates.bat</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">cd</span> C:\Certbot</span><br><span class="line">certbot renew &gt;&gt; C:\Users\Administrator\Desktop\续订日志.<span class="built_in">log</span> 2&gt;&amp;1</span><br></pre></td></tr></table></figure><h3 id="配置windows任务"><a href="#配置windows任务" class="headerlink" title="配置windows任务"></a><strong>配置windows任务</strong></h3><p>win+r输入taskschd.msc，打开任务并设置添加ssl自动续订的任务，在每月的1号检查并续订ssl</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nvm命令自查（node版本管理）</title>
      <link href="/2024/11/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-11-10-nvm%E5%91%BD%E4%BB%A4%E8%87%AA%E6%9F%A5%EF%BC%88node%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%EF%BC%89/"/>
      <url>/2024/11/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-11-10-nvm%E5%91%BD%E4%BB%A4%E8%87%AA%E6%9F%A5%EF%BC%88node%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>nvm 命令</th><th>命令解释</th></tr></thead><tbody><tr><td>nvm –help</td><td>展示帮助</td></tr><tr><td>nvm –version</td><td>已安装的nvm版本</td></tr><tr><td>nvm install version</td><td>下载对应的 node 版本(version)</td></tr><tr><td>mvn install –reinstall-packages-from&#x3D;</td><td>重新安装对应的 node 版本</td></tr><tr><td>nvm install –lts</td><td>仅从LTS版本中选择安装</td></tr><tr><td>nvm install –lts&#x3D;</td><td>仅从特定LTS系列的版本中选择</td></tr><tr><td>nvm install –skip-default-packages</td><td>跳过默认软件包文件</td></tr><tr><td>nvm install –latest-npm</td><td>安装后，在给定的节点版本上升级到最新的npm</td></tr><tr><td>nvm install –no-progress</td><td>没有下载进度条</td></tr><tr><td>nvm uninstall</td><td>卸载对应的 node 版本</td></tr><tr><td>nvm uninstall –lts</td><td>卸载LTS版本</td></tr><tr><td>nvm uninstall –lts&#x3D;</td><td>卸载指定的LTS 版本</td></tr><tr><td>nvm use</td><td>使用对应的 node 版本</td></tr><tr><td>nvm use –lts</td><td>使用LTS 版本</td></tr><tr><td>nvm use –lts&#x3D;</td><td>使用指定的LTS 版本</td></tr><tr><td>nvm list</td><td>展示安装的 node 版本(可以简写为nvm ls)</td></tr><tr><td>nvm current</td><td>显示当前节点的激活版本</td></tr><tr><td>nvm version</td><td>展示当前的 node 版本</td></tr><tr><td>nvm exec [–silent] []</td><td>使用指定的 版本运行 command命令</td></tr><tr><td>nvm run [–silent] []</td><td>使用指定的版本运行 args</td></tr><tr><td>nvm alias</td><td>对 version 版本设置一个别名</td></tr><tr><td>nvm unalias</td><td>删除这个别名</td></tr><tr><td>nvm install-latest-npm</td><td>在当前node 版本上升级最新的npm版本</td></tr><tr><td>nvm reinstall-packages</td><td>将version版本中的全局安装包安装到当前版本中</td></tr><tr><td>nvm unload</td><td>从shell中卸载nvm</td></tr><tr><td>nvm on</td><td>开启node版本管理</td></tr><tr><td>nvm off</td><td>关闭node版本管理</td></tr><tr><td>nvm node_mirror [url]</td><td>设置node镜像</td></tr><tr><td>nvm npm_mirror [url]</td><td>设置npm 镜像</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>巧用nginx自建cdn加速服务器</title>
      <link href="/2024/11/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2024-11-10-%E5%B7%A7%E7%94%A8nginx%E8%87%AA%E5%BB%BAcdn%E5%8A%A0%E9%80%9F%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2024/11/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2024-11-10-%E5%B7%A7%E7%94%A8nginx%E8%87%AA%E5%BB%BAcdn%E5%8A%A0%E9%80%9F%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>之前使用cloudflare加速网站的时候，虽然是负加速把。。。但好歹能用啊。结果周五早上，看网站的时候忽然死掉了。去cloudflare查看，结果解析的界面一直404所以没办法，就很绝望。想到自己有一台国内的服务器，便想着自建cdn服务器。</p><p>CDN 就是内容分发网络的意思，其英文全称为 Content Delivery Network。<strong>简单地说，CDN 可以提前把数据存在离用户最近的数据节点，从而避免长途跋涉经过长途骨干网，最终达到减少骨干网负担、提高访问速度的目的。</strong>其实很好理解，就是你访问网站的时候数据如果经过的那个cdn，就会有个缓存，如果你再次访问的时候，就会读取那个cdn的缓存，就不用再跑很远去找你的服务器了。</p><p>好了，闲话不多说，现在开始实操。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>一台国外服务器10.0.0.1 绑定域名 <a href="http://www.ittoolman.com/">www.ittoolman.com</a></p><p>一台国内服务器10.0.0.2</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h3><p>需要在所有CDN服务器节点安装Nginx。也就是链接10.0.0.2，给这台服务器安装nginx，这里我是用的是xiaoz的一键Nginx安装包。如果想自己用的话可以自己设置nginx。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/helloxz/nginx-cdn/master/nginx.sh</span><br><span class="line"><span class="built_in">chmod</span> +x nginx.sh &amp;&amp; ./nginx.sh</span><br></pre></td></tr></table></figure><h3 id="反向代理配置"><a href="#反向代理配置" class="headerlink" title="反向代理配置"></a>反向代理配置</h3><p>反向代在这里你把它理解成CDN节点就行了</p><ul><li>源站服务器: 10.0.0.1，就是网站数据真实存放的地方</li><li>CDN服务器: 10.0.0.2</li></ul><p>在10.0.0.2上编辑hosts，这样做的目的就是告知服务器从哪里去获取网站数据，也就是回源地址，需要在CDN上做如下修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line">10.0.0.1   www.ittoolman.com</span><br></pre></td></tr></table></figure><p>配置一下各种目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建缓存目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /data/wwwroot/caches/www.ittoolman.com</span><br><span class="line"><span class="comment">#设置缓存目录权限</span></span><br><span class="line"><span class="built_in">chown</span> -R www:www /data/wwwroot/caches/www.ittoolman.com</span><br><span class="line"><span class="comment">#如果网站是https创建证书路径</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /data/wwwssl/www.ittoolman.com</span><br><span class="line"><span class="comment">#创建配置文件</span></span><br><span class="line">vi /usr/local/nginx/conf/vhost/ittoolman.com.conf</span><br></pre></td></tr></table></figure><p>在<code>ittoolman.com.conf</code>中添加下面的内容，缓存目录&#x2F;缓存时间请根据实际情况调整，详细参数和含义请自行百度。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">proxy_cache_path /data/wwwroot/caches/www.ittoolman.com levels=1:2 keys_zone=ittoolman:50m inactive=30m max_size=50m;</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTP 请求重定向到 HTTPS（可选）</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.ittoolman.com;</span><br><span class="line">    <span class="built_in">return</span> 301 https://$host<span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTPS 配置</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    server_name www.ittoolman.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置 SSL 证书和私钥路径</span></span><br><span class="line">    ssl_certificate /data/wwwssl/www.ittoolman.com/fullchain.pem;</span><br><span class="line">    ssl_certificate_key /data/wwwssl/www.ittoolman.com/privkey.pem;</span><br><span class="line">    <span class="comment"># 优化ssl配置</span></span><br><span class="line">    ssl_session_timeout 1d;</span><br><span class="line">    ssl_session_cache <span class="built_in">builtin</span>:1000 shared:SSL:10m;</span><br><span class="line">    ssl_stapling on;</span><br><span class="line">    ssl_stapling_verify on;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">    access_log /data/wwwlogs/www.ittoolman.com_nginx.log combined;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 自定义 Server 头</span></span><br><span class="line">    server_tokens off;</span><br><span class="line">    add_header Server ittoolmanCDN;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 启用缓存</span></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_ssl_verify off;</span><br><span class="line">     proxy_pass https://www.ittoolman.com;</span><br><span class="line">        proxy_set_header Accept-Encoding <span class="string">&quot;&quot;</span>;</span><br><span class="line">        proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"></span><br><span class="line">        proxy_cache ittoolman;</span><br><span class="line">        proxy_cache_valid 200 304 30m;</span><br><span class="line">        proxy_cache_valid 301 24h;</span><br><span class="line">        proxy_cache_valid 500 502 503 504 0s;</span><br><span class="line">        proxy_cache_valid any 1s;</span><br><span class="line">        proxy_cache_min_uses 1;</span><br><span class="line"></span><br><span class="line">        expires 12h;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>nginx整体配置为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">user  www www;</span><br><span class="line">worker_processes  auto;</span><br><span class="line">worker_rlimit_nofile 50000;</span><br><span class="line">error_log  logs/error.log;</span><br><span class="line"><span class="comment">#error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    use epoll;</span><br><span class="line">    worker_connections 51200;</span><br><span class="line">    <span class="comment">#worker_connections  1024;</span></span><br><span class="line">    multi_accept on;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    server_names_hash_bucket_size 128;</span><br><span class="line">    client_header_buffer_size 32k;</span><br><span class="line">    large_client_header_buffers 4 32k;</span><br><span class="line">    client_max_body_size 1024m;</span><br><span class="line">    client_body_buffer_size 10m;</span><br><span class="line">    sendfile on;</span><br><span class="line">    tcp_nopush on;</span><br><span class="line">    keepalive_timeout 120;</span><br><span class="line">    server_tokens off;</span><br><span class="line">    tcp_nodelay on;</span><br><span class="line">  proxy_headers_hash_max_size 51200;</span><br><span class="line">  proxy_headers_hash_bucket_size 6400;</span><br><span class="line">    <span class="comment">#开启Brotli压缩</span></span><br><span class="line">    brotli on;</span><br><span class="line">  brotli_comp_level 6;</span><br><span class="line">  <span class="comment">#最小长度</span></span><br><span class="line">  brotli_min_length   512;</span><br><span class="line">  brotli_types text/plain text/javascript text/css text/xml text/x-component application/javascript application/x-javascript application/xml application/json application/xhtml+xml application/rss+xml application/atom+xml application/x-font-ttf application/vnd.ms-fontobject image/svg+xml image/x-icon font/opentype;</span><br><span class="line">  brotli_static       always;</span><br><span class="line"></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_buffers 16 8k;</span><br><span class="line">    gzip_comp_level 6;</span><br><span class="line">    gzip_http_version 1.1;</span><br><span class="line">    gzip_min_length 256;</span><br><span class="line">    gzip_proxied any;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    gzip_types</span><br><span class="line">    text/xml application/xml application/atom+xml application/rss+xml application/xhtml+xml image/svg+xml</span><br><span class="line">    text/javascript application/javascript application/x-javascript</span><br><span class="line">    text/x-json application/json application/x-web-app-manifest+json</span><br><span class="line">    text/css text/plain text/x-component</span><br><span class="line">    font/opentype application/x-font-ttf application/vnd.ms-fontobject</span><br><span class="line">    image/x-icon;</span><br><span class="line">    gzip_disable <span class="string">&quot;MSIE [1-6]\.(?!.*SV1)&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#If you have a lot of static files to serve through Nginx then caching of the files&#x27; metadata (not the actual files&#x27; contents) can save some latency.</span></span><br><span class="line">  open_file_cache max=1000 inactive=20s;</span><br><span class="line">  open_file_cache_valid 30s;</span><br><span class="line">  open_file_cache_min_uses 2;</span><br><span class="line">  open_file_cache_errors on;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#limit connection</span></span><br><span class="line">  limit_conn_zone <span class="variable">$binary_remote_addr</span> zone=addr:10m;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  include cdn/*.conf;</span><br><span class="line">  include vhost/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>所有配置写完之后，需要检测文件是否写的正确，以及重载nginx配置让配置生效。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查文件是否正确，如果是正确的，会有个successful提示</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -t</span><br><span class="line"><span class="comment"># 重载nginx配置</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br></pre></td></tr></table></figure><h2 id="dns解析"><a href="#dns解析" class="headerlink" title="dns解析"></a>dns解析</h2><p>在腾讯云&#x2F;阿里云&#x2F;cloudflare等dns服务商上面添加a解析</p><p>主机记录：www</p><p>记录类型：A</p><p>记录值：10.0.0.2</p><p>做完之后，等待一段时间让其生效，再次访问网站查看消息头里面server是否有<code>ittoolmanCDN</code>这个，如果有表示已经弄好了。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typecho的handsome主题微调</title>
      <link href="/2024/11/06/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-11-06-typecho%E7%9A%84handsome%E4%B8%BB%E9%A2%98%E5%BE%AE%E8%B0%83/"/>
      <url>/2024/11/06/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-11-06-typecho%E7%9A%84handsome%E4%B8%BB%E9%A2%98%E5%BE%AE%E8%B0%83/</url>
      
        <content type="html"><![CDATA[<p>用国typecho和wordpress之后，个人还是比较中意typecho这个，handsome主题相对全面，所以就选择使用它了。但是总有一些自己小瑕疵需要自己去调整，比如归档页面的文章目录等等，handsome版本: 9.2.1（个人是php菜鸡，没学过，一边百度一边改。）</p><h3 id="取消归档页面的文章目录"><a href="#取消归档页面的文章目录" class="headerlink" title="取消归档页面的文章目录"></a>取消归档页面的文章目录</h3><p>找到主题文件下面的sidebar.php然后打开编辑，搜索到<code>&lt;!--非文章页面--&gt;</code>这个之后，然后会看到<code>&lt;?php echo PostContent::returnTOC($this-&gt;is(&#39;page&#39;),false) ?&gt;</code>这个代码，这个就是非文章界面的文章目录显示。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--非文章页面--&gt;</span><br><span class="line">      <span class="meta">&lt;?php</span> <span class="keyword">if</span> (!(<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">&#x27;post&#x27;</span>))) : <span class="meta">?&gt;</span></span><br><span class="line">      &lt;section id=<span class="string">&quot;tag_cloud&quot;</span> <span class="class"><span class="keyword">class</span>=&quot;<span class="title">widget</span> <span class="title">widget_tag_cloud</span> <span class="title">wrapper</span>-<span class="title">md</span> <span class="title">padder</span>-<span class="title">v</span>-<span class="title">none</span> <span class="title">clear</span>&quot;&gt;</span></span><br><span class="line"><span class="class">       &lt;<span class="title">h5</span> <span class="title">class</span>=&quot;<span class="title">widget</span>-<span class="title">title</span> <span class="title">m</span>-<span class="title">t</span>-<span class="title">none</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_me</span>(&quot;标签云&quot;) ?&gt;&lt;/<span class="title">h5</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">tags</span> <span class="title">l</span>-<span class="title">h</span>-2<span class="title">x</span> <span class="title">panel</span> <span class="title">wrapper</span>-<span class="title">sm</span> <span class="title">padder</span>-<span class="title">v</span>-<span class="title">ssm</span>&quot;&gt;</span></span><br><span class="line"><span class="class">              &lt;?<span class="title">php</span> <span class="title">Typecho_Widget</span>::<span class="title">widget</span>(&#x27;<span class="title">Widget_Metas_Tag_Cloud</span>&#x27;,&#x27;<span class="title">ignoreZeroCount</span>=1&amp;<span class="title">limit</span>=30&#x27;)-&gt;<span class="title">to</span>($<span class="title">tags</span>); ?&gt;</span></span><br><span class="line"><span class="class">              &lt;?<span class="title">php</span> <span class="title">if</span>($<span class="title">tags</span>-&gt;<span class="title">have</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                  &lt;?<span class="title">php</span> <span class="title">while</span> ($<span class="title">tags</span>-&gt;<span class="title">next</span>()): ?&gt;</span></span><br><span class="line"><span class="class">                      &lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">tags</span>-&gt;<span class="title">permalink</span>();?&gt;&quot; <span class="title">class</span>=&quot;<span class="title">label</span> <span class="title">badge</span>&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">tags</span>-&gt;<span class="title">name</span>(); ?&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;?<span class="title">php</span> <span class="title">endwhile</span>; ?&gt;</span></span><br><span class="line"><span class="class">              &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">          &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">section</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">        &lt;!--&lt;?<span class="title">php</span> <span class="title">echo</span> <span class="title">PostContent</span>::<span class="title">returnTOC</span>($<span class="title">this</span>-&gt;<span class="title">is</span>(&#x27;<span class="title">page</span>&#x27;),<span class="title">false</span>) ?&gt;--&gt;</span></span><br><span class="line"><span class="class">        &lt;?<span class="title">php</span> </span></span><br><span class="line"><span class="class">            // 获取当前页面的路径</span></span><br><span class="line"><span class="class">            $<span class="title">currentUrlPath</span> = <span class="title">parse_url</span>($<span class="title">this</span>-&gt;<span class="title">permalink</span>, <span class="title">PHP_URL_PATH</span>);</span></span><br><span class="line"><span class="class">            // 判断是否为页面，且 <span class="title">URL</span> 中不包含 &quot;<span class="title">archive</span>&quot;</span></span><br><span class="line"><span class="class">            <span class="title">if</span> ($<span class="title">this</span>-&gt;<span class="title">is</span>(&#x27;<span class="title">page</span>&#x27;) &amp;&amp; <span class="title">substr</span>($<span class="title">currentUrlPath</span>, -12) !== &#x27;<span class="title">archive</span>.<span class="title">html</span>&#x27; ) </span>&#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="title class_">PostContent</span>::<span class="title function_ invoke__">returnTOC</span>(<span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">          </span><br><span class="line">      </span><br><span class="line">      <span class="meta">&lt;?php</span> <span class="keyword">else</span>: <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>如果你想对具体方法进行操作，可以找到<code>libs/content/PostContent.php</code> 这个就是相应的右侧边栏的一些用到的方法。</p><h3 id="去除掉友情链接的内页链接"><a href="#去除掉友情链接的内页链接" class="headerlink" title="去除掉友情链接的内页链接"></a>去除掉友情链接的内页链接</h3><p>友情链接嘛，就是links，那我们就在主题文件夹下搜索links</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul <span class="class"><span class="keyword">class</span>=&quot;<span class="title">nav</span> <span class="title">no</span>-<span class="title">padder</span> <span class="title">b</span>-<span class="title">b</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">item</span> <span class="title">active</span>&quot;&gt;&lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">link</span>&quot; <span class="title">href</span> <span class="title">data</span>-<span class="title">toggle</span>=&quot;<span class="title">tab</span>&quot; <span class="title">data</span>-<span class="title">target</span>=&quot;#<span class="title">my</span>-<span class="title">info</span>&quot;&gt;&lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class">                            <span class="title">_me</span>(&quot;申请友链&quot;)</span></span><br><span class="line"><span class="class">                            ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;!--&lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">item</span>&quot;&gt;&lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">link</span>&quot; <span class="title">href</span> <span class="title">data</span>-<span class="title">toggle</span>=&quot;<span class="title">tab</span>&quot; <span class="title">data</span>-<span class="title">target</span>=&quot;#<span class="title">tab_2</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_me</span>(&quot;内页链接&quot;) ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;--&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">item</span>&quot;&gt;&lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">link</span>&quot; <span class="title">href</span> <span class="title">data</span>-<span class="title">toggle</span>=&quot;<span class="title">tab</span>&quot; <span class="title">data</span>-<span class="title">target</span>=&quot;#<span class="title">tab_4</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_me</span>(&quot;全站链接&quot;) ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">item</span>&quot;&gt;&lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">nav</span>-<span class="title">link</span>&quot; <span class="title">href</span> <span class="title">data</span>-<span class="title">toggle</span>=&quot;<span class="title">tab</span>&quot; <span class="title">data</span>-<span class="title">target</span>=&quot;#<span class="title">tab_3</span>&quot;&gt;&lt;?<span class="title">php</span> <span class="title">_me</span>(&quot;推荐链接&quot;) ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这里就是对链接的显示，注释掉你不喜欢的就可以了。</p><p>注释完毕后，如果你有强迫症的话，可以想我一样进行接下来的更改。针对后台管理的友情链接的操作。找到插件里面的handsome插件，找到Plugin.php这个文件，里面有个form函数，就是他，你若找到的话可以看到该函数下面有一部分的代码。注释掉你不喜欢的就可以了。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sort</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Select</span>(<span class="string">&#x27;sort&#x27;</span>, <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;ten&#x27;</span> =&gt; <span class="string">&#x27;全站链接，首页左侧边栏显示&#x27;</span>,</span><br><span class="line">            <span class="comment">// &#x27;one&#x27; =&gt; &#x27;内页链接，在独立页面中显示（需要新建独立页面&lt;a href=&quot;https://handsome2.ihewro.com/#/plugin&quot; target=&quot;_blank&quot;&gt;友情链接&lt;/a&gt;）&#x27;,</span></span><br><span class="line">            <span class="string">&#x27;good&#x27;</span> =&gt; <span class="string">&#x27;推荐链接，在独立页面中显示&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;others&#x27;</span> =&gt; <span class="string">&#x27;失效链接，不置输出，标注暂时失效的友链&#x27;</span></span><br><span class="line">        ), <span class="string">&#x27;ten&#x27;</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;链接输出位置*&#x27;</span>), <span class="string">&#x27;选择友情链接输出的位置&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="左侧边栏导航-配置"><a href="#左侧边栏导航-配置" class="headerlink" title="左侧边栏导航 配置"></a>左侧边栏导航 配置</h3><p>打开主题的后台，可以参考本博客的配置进行修改,左侧边栏的图标用的是feather图标，点击链接跳转查看，<a href="%5Bhttps://%5D(https://feathericons.com/)">https://feathericons.com/</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;云盘&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cloud&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://alist.ittoolman.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_blank&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;图床&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;inbox&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://img.ittoolman.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_blank&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;相册&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/category/image/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;分类&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;layout&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;sub&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;随笔&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;edit&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/category/sui-bi/&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;技术笔记&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;monitor&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/category/ji-shu-bi-ji/&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;文章收藏&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;scissors&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/category/wen-zhang/&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;归档&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;archive&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/archive.html&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;时光机&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;clock&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/cross.html&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;友人帐&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;users&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/links.html&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;关于我&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;feather&quot;</span><span class="punctuation">:</span> <span class="string">&quot;coffee&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.ittoolman.com/index.php/start-page.html&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_self&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>虚假的觉醒</title>
      <link href="/2024/11/04/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-11-04-%E8%99%9A%E5%81%87%E7%9A%84%E8%A7%89%E9%86%92/"/>
      <url>/2024/11/04/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-11-04-%E8%99%9A%E5%81%87%E7%9A%84%E8%A7%89%E9%86%92/</url>
      
        <content type="html"><![CDATA[<p>以我的角度去观社会，我发现现在年轻人所谓的觉醒就是个笑话。</p><p>我上大学的时候，以为我只要努力，我只要有成就，我就有能力去改变社会，有能力去改变身边的一切。后来我发现，一切的腐朽并不是所谓的努力就去能改变的，它像根植于垂死病人的癌症，深入骨髓。后来我开始厌恶这种腐朽，觉得年轻的一代需要觉醒。</p><p>当我有“觉醒”的想法出现的时候，我发现并不是只有我一个人这样，我身边的挚友，素未蒙面的网友，等等，都意识到了自己需要“觉醒”了。反抗“天价彩礼”、“不婚不育”、“及时行乐”、“不买房”、“反对田园女权”……等等，当我们看到出台了彩礼的相关政策、国家生育率下降、房价暴跌……事情发生后，我们觉得是我们的”觉醒”带来了这些。却忘了历史的必然性和人性。</p><p>然而所谓的数据随便一个号称专业的机构捏造就可以出，随便一个营销号随便说说便有大把人相信。那一刻我明白了，社会之间的差距是人为制造出来的所谓的觉醒也是人为制造出来的，他们给了你想看到的一切，你以为自己获胜了，其只是变相的走向了另外一条被社会安排好的道路，然而这条新的道路是未知的是需要有人去吃螃蟹的。那一刻我仿佛看到了当年父亲严重的无奈，他当时是不是就是因为看到了社会的现实之后变得麻木呢？</p><p>我和我的挚友谈起我高中毕业不上学的同学。当时我和挚友有着一样的理想，充满的热血，充满着对未来的幻想，那一次我们一起喝酒，那个提前步入社会的同学，看着我们的样子只是笑笑不说话，那种笑是很苦涩的笑，笑得很难，也很痛。</p><p>后来，我在看视频的时候，改变了自己的思路，先看视频大概内容，再看该博主的总体内容朝向，最终再去看评论区舆论方向。很有幸，这种方式让我过滤掉很多煽动情绪的视频，煽动男女对立的视频，最后，这种方式，过滤掉的也有视频的本身……</p><p>快节奏的生活，短视频成为了舆论的另一个阵地。相比于真枪实弹的战争，这种舆论战更能击垮一个民族的精气神，腐蚀一个国家的栋梁。但是我们又怎么能去改变呢，意识到自己平庸之后，告诉自己的只有四个字——和光同尘。</p><p>落笔，早已是血泪盈襟。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cloudflare实现网站加速</title>
      <link href="/2024/10/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-10-24-cloudflare%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%AB%99%E5%8A%A0%E9%80%9F/"/>
      <url>/2024/10/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-10-24-cloudflare%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%AB%99%E5%8A%A0%E9%80%9F/</url>
      
        <content type="html"><![CDATA[<p>前几天刚把服务器换上，给同学展示后，他说“你这网站访问速度有些慢啊”。这时候我才反应过来，腾讯域名+国外服务器，最终解析还是在国外的服务器上面。慢还是慢。。。于是想到了cdn加速。</p><p>但是又遇到了一个问题，由于我本人懒得备案，导致又拍云，腾讯云的cdn解析都没办法使用，毕竟都需要备案才能使用（可恶啊）。看了几篇帖子之后，他们说阿里云国外版可以cdn国内加速，我申请了一下，但是需要手机号。。。好的，还是pass了。最后还是选择了免费的cloudflare的加速。</p><p>先是添加网站，然后再域名提供商填写上cloudflare的ns解析值。等一会就验证过了。好了，这样就配置好了。。。但是，毕竟是国外的加速，用在国内cdn加速还是一坨屎，完全随缘了属于是。。。。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>不是悲观，而是索然</title>
      <link href="/2024/10/23/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-10-23-%E4%B8%8D%E6%98%AF%E6%82%B2%E8%A7%82%EF%BC%8C%E8%80%8C%E6%98%AF%E7%B4%A2%E7%84%B6/"/>
      <url>/2024/10/23/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-10-23-%E4%B8%8D%E6%98%AF%E6%82%B2%E8%A7%82%EF%BC%8C%E8%80%8C%E6%98%AF%E7%B4%A2%E7%84%B6/</url>
      
        <content type="html"><![CDATA[<p><strong>文｜西坡</strong></p><p>“活着挺好，死了也行。”最近在网上频繁看到这句话，年轻人用来描述自己的心态。我理解，他们不是要寻死觅活，只是这么一说。如果用一种动物来代表这种精神状态，那就是水豚，有吃的就吃，没吃的就呆着，有人来也能一起玩，没人来也不想谁，偶尔有动物爬自己身上，便给它们当个坐骑。</p><p>关于死亡，加缪有个吓人的说法，“真正严肃的哲学问题只有一个，那就是自杀”。给胆小的人解释一下，这其实是一种蕴含着积极力量的思想实验，可以想想那些“置之死地而后生”的历史典故。</p><p>韩信背水一战，赢了之后跟诸将解释，自己麾下这些兵将是新得的，并没有旧恩，就好比“驱市人而战之”，除非置之死地，让每个人为自己而战，如果是在开阔的“生地”作战，都特么跑光了。我们和自己的生命之间，也常常如客将领骄兵，只有制造一些险境，才能激活休眠已久的潜能。记得以前爬山的时候，每遇到陡峭恐怖的路段，心里都会冒出孔子被围攻时说的那种话，假如上天拿我还有点用处的话，就不会让我死在这儿。随后果然会收获值得腿疼几天的美景和奇遇。</p><p>但是我想“活着挺好，死了也行”跟“置之死地而后生”还是不一样的。水豚是一种被动的生物，水豚的流行背后，或许有点值得思考的东西。</p><p>如果要调查当前的社会心态，“你对未来是悲观还是乐观”这样的问题是没多少意义的，因为很多人的答案不管是什么，都笼罩着一层磨砂玻璃，真实的自己跟真实的世界隔了一层，这层玻璃用文雅一点的词来说，叫做索然。</p><p>柳永晚年有一首词《少年游》：</p><p>长安古道马迟迟。高柳乱蝉嘶。夕阳鸟外，秋风原上，目断四天垂。</p><p>归云一去无踪迹，何处是前期。狎兴生疏，酒徒萧索，不似少年时。</p><p>读到这首词的时候，我是有些意外的。因为我们都知道柳永是怎样的倚红偎翠、风流无度，我们也都熟记柳永死后歌妓们怎么给他办葬礼的传说。假如柳永写的是仕途坎坷生计艰难，我们是有心理预期的，但柳永写的是另外一种失败。不是求而不得，而是欲求本身的消退。年华老去，无论对于女人还是对于酒，都失去了当年的意兴。这就是索然。</p><p>索然，比寻常意义上的失败更无解，更难以摆脱。假如诗人是想找女人找不到，想喝酒喝不着，于是发牢骚、失态，哪怕被人嘲笑辱骂，他都可以感到一种自得，因为他还能感受到这些欲望。我经常会想，将来要做怎样的老头，在我的愿望清单上，排在最前边的就是情感丰富这一条。一个可以愤怒可以忧伤的老头，该是多么诱人。</p><p>人与人最令人绝望的差距，是生命能量的差距。段义孚在自传中写道：“生命力是一种天赋，一些人多，一些人少。智力也是一种生命力。当然，伟大的科学家、文学家都具备超凡的思想，但他们的思想并不是装在头脑里的一台精密仪器，而是一股原始的力量——人性的潜质——充满了整个身体。”“生命力也是一种优势。或者说，生命力可以让某些优势得以从容地发挥出来——就像精神的广博或人格的豪迈——因为从容，而显得自然；亦因自然，而显出魅力，令人尊重。”</p><p>人的天赋不仅体现在能不能把一件事做好，更体现在能不能不断鼓起一种冲动，从失败的地方再开始一次。把生命当成一块电池来看，每个人的电池容量和预置的充放电次数都是不一样的。年轻的时候，我们大都感受不到容量的极限，稍有缺电，睡一觉哭一场就充满了。但人到中年之后，每个人所负电池的质量便一目了然了。一个规律，人会朝向电量充足的人聚集，能量比道德更有说服力，你会发现有的人好像很混蛋，但就是有很多人愿意跟他玩，而有的人好像没什么毛病，但你跟他聊两句就觉得自己又亏了一格电，时间一长便敬而远之了。</p><p>唯有勃勃生机不接受反驳。而最可悲的莫过于未老先衰。现在的年轻人看上世纪八九十年代的老照片，羡慕以前国人头顶上的发量。从前的国人生活更幸福？不见得。但现在的年轻人过早陷入衰颓，是很明显的。</p><p>东亚模式是一种透支型的现代化，而被透支掉的，从本质上讲，是一代乃至数代的生命力。太多看不见的东西，被从地底下抽出来，燃烧，锻造，转化成令人炫目的力的形式。还嫌不够，还要质押出去，加上几倍杠杆。当盛大的烟火从空中消散，人们才留意到地面上一处处的塌陷。不要问奇迹何时复现，当紧的是保护生命的水源。</p><p>索然二字，还是太轻了些。</p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>朝花夕拾-我的博客重启之路</title>
      <link href="/2024/10/23/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-10-23-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF%E4%B9%8B%E8%B7%AF/"/>
      <url>/2024/10/23/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-10-23-%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE-%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF%E4%B9%8B%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<p>2020年2月2日，当时上大学的我怀着忐忑的心情买了人生第一台服务器。当时我还是一瓶子不满半瓶子晃荡的状态，什么都会但什么都只会一点点。从那天之后，我开始了自建博客，自建服务，nextcloud，网易云代理，bitwarden，docker……等等，各种搭建，各种报错，用自己浅薄的知识去百度去一点点查询。</p><p>那时候，我开始了写笔记，我爱上了文字，爱上了这种全身心投入的感觉。我在自己的博客，在自己一片天地批评着世间的不公、羡慕着他人能力的出众。</p><p>如今我也变成了自己想变成的人，但是，笔记很少写了，日记很少写了。我知道，是我自己变了，变的懒惰不堪，变得浮于表面。</p><p>于是，我决定重启博客，脱离我这混乱不堪的生活。。。。。。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Window10 安装软件时报错：Called RunScript when not marked in progress</title>
      <link href="/2024/10/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-10-13-Window10_%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%97%B6%E6%8A%A5%E9%94%99%EF%BC%9ACalled_RunScript_when_not_marked_in_progress/"/>
      <url>/2024/10/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-10-13-Window10_%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%97%B6%E6%8A%A5%E9%94%99%EF%BC%9ACalled_RunScript_when_not_marked_in_progress/</url>
      
        <content type="html"><![CDATA[<p>Window10 安装软件时报错：Called RunScript when not marked in progress</p><p><strong>解决办法：</strong></p><ol><li><p>进入 C:\Windows</p></li><li><p>找到”temp”文件夹  —- 右键“属性” — “高级”  — “更改”</p></li><li><p>然后点击 “高级”<br>输入电脑当前用户的姓名，进行搜索</p></li><li><p>勾选“替换子容器和对象所有者”</p></li><li><p>勾选“使用可从此对象继承的权限项目替换所有子对象的权限项目”</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 故障 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git、npm、yarn常用设置和命令（查阅）</title>
      <link href="/2024/10/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-10-09-git%E3%80%81npm%E3%80%81yarn%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE%E5%92%8C%E5%91%BD%E4%BB%A4%EF%BC%88%E6%9F%A5%E9%98%85%EF%BC%89/"/>
      <url>/2024/10/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-10-09-git%E3%80%81npm%E3%80%81yarn%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE%E5%92%8C%E5%91%BD%E4%BB%A4%EF%BC%88%E6%9F%A5%E9%98%85%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><h3 id="创建仓库命令"><a href="#创建仓库命令" class="headerlink" title="创建仓库命令"></a>创建仓库命令</h3><table><thead><tr><th align="left">命令</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><code>git init</code></td><td align="left">初始化仓库</td></tr><tr><td align="left"><code>git clone</code></td><td align="left">拷贝一份远程仓库，也就是下载一个项目。</td></tr></tbody></table><h3 id="提交与修改"><a href="#提交与修改" class="headerlink" title="提交与修改"></a>提交与修改</h3><table><thead><tr><th align="left">命令</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><code>git add</code></td><td align="left">添加文件到暂存区</td></tr><tr><td align="left"><code>git status</code></td><td align="left">查看仓库当前的状态，显示有变更的文件。</td></tr><tr><td align="left"><code>git diff</code></td><td align="left">比较文件的不同，即暂存区和工作区的差异。</td></tr><tr><td align="left"><code>git difftool</code></td><td align="left">使用外部差异工具查看和比较文件的更改。</td></tr><tr><td align="left"><code>git range-diff</code></td><td align="left">比较两个提交范围之间的差异。</td></tr><tr><td align="left"><code>git commit</code></td><td align="left">提交暂存区到本地仓库。</td></tr><tr><td align="left"><code>git reset</code></td><td align="left">回退版本。</td></tr><tr><td align="left"><code>git rm</code></td><td align="left">将文件从暂存区和工作区中删除。</td></tr><tr><td align="left"><code>git mv</code></td><td align="left">移动或重命名工作区文件。</td></tr><tr><td align="left"><code>git notes</code></td><td align="left">添加注释。</td></tr><tr><td align="left"><code>git checkout</code></td><td align="left">分支切换。</td></tr><tr><td align="left"><code>git switch （Git 2.23 版本引入）</code></td><td align="left">更清晰地切换分支。</td></tr><tr><td align="left"><code>git restore （Git 2.23 版本引入）</code></td><td align="left">恢复或撤销文件的更改。</td></tr><tr><td align="left"><code>git show</code></td><td align="left">显示 Git 对象的详细信息。</td></tr></tbody></table><h3 id="远程操作"><a href="#远程操作" class="headerlink" title="远程操作"></a>远程操作</h3><table><thead><tr><th align="left">命令</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><code>git remote</code></td><td align="left">远程仓库操作</td></tr><tr><td align="left"><code>git fetch</code></td><td align="left">从远程获取代码库</td></tr><tr><td align="left"><code>git pull</code></td><td align="left">下载远程代码并合并</td></tr><tr><td align="left"><code>git push</code></td><td align="left">上传远程代码并合并</td></tr><tr><td align="left"><code>git submodule</code></td><td align="left">管理包含其他 Git 仓库的项目</td></tr></tbody></table><h3 id="git-代理设置"><a href="#git-代理设置" class="headerlink" title="git 代理设置"></a>git 代理设置</h3><p>设置</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global https.proxy 代理地址</span><br><span class="line">git config --global http.proxy 代理地址</span><br></pre></td></tr></table></figure><p>查看</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global  --get https.proxy</span><br><span class="line">git config --global  --get https.proxy</span><br></pre></td></tr></table></figure><blockquote><p>查询的时候没有打印任何东西证明没有设置代理</p></blockquote><p>取消</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure><h2 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h2><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><table><thead><tr><th align="left">命令</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><code>npm install</code></td><td align="left">安装新的包(全局范围内安装一个包，可以使用<code>-g</code>或<code>--global</code>标志)</td></tr><tr><td align="left"><code>npm uninstall</code></td><td align="left">从项目中移除依赖包。它会从<code>package.json</code>文件中删除指定的包，并卸载它</td></tr><tr><td align="left"><code>npm update</code></td><td align="left">用于更新项目中的依赖包。它可以更新所有依赖包，也可以指定更新某个特定的包</td></tr><tr><td align="left"><code>npm cache</code></td><td align="left">管理npm的缓存（npm cache clean –force）</td></tr><tr><td align="left"><code>npm config</code></td><td align="left">设置或查看npm的配置选项（查看配置：npm config list）</td></tr></tbody></table><h3 id="NPM设置代理"><a href="#NPM设置代理" class="headerlink" title="NPM设置代理"></a>NPM设置代理</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> proxy http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">10808</span></span><br><span class="line">npm confit <span class="built_in">set</span> https-proxy http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">10809</span></span><br></pre></td></tr></table></figure><p>取消代理</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config delete proxy</span><br><span class="line">npm config delete https-proxy</span><br></pre></td></tr></table></figure><p>设置源（官方）</p> <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org/</span><br></pre></td></tr></table></figure><p>设置源（淘宝）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure><p>查看源</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm get registry </span><br></pre></td></tr></table></figure><p>删除源</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config delete registry</span><br></pre></td></tr></table></figure><h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h2><h3 id="常用命令-1"><a href="#常用命令-1" class="headerlink" title="常用命令"></a>常用命令</h3><table><thead><tr><th>命令</th><th>操作</th><th>参数</th><th>标签</th></tr></thead><tbody><tr><td>yarn add</td><td>添加依赖包</td><td>包名</td><td>–dev&#x2F;-D</td></tr><tr><td>yarn bin</td><td>显示yarn安装目录</td><td>无</td><td>无</td></tr><tr><td>yarn cache</td><td>显示缓存</td><td>列出缓存包：<code>ls</code>，打出缓存目录路径：<code>dir</code>，清除缓存：<code>clean</code></td><td>无</td></tr><tr><td>yarn check</td><td>检查包</td><td></td><td></td></tr><tr><td>yarn clean</td><td>清理不需要的依赖文件</td><td></td><td></td></tr><tr><td>yarn config</td><td>配置</td><td>设置：<code>set &lt;key&gt; &lt;value&gt;</code>， 删除：<code>delete</code>， 列出：<code>list</code></td><td>[-g | –global]</td></tr><tr><td>yarn generate-lock-entry</td><td>生成锁定文件</td><td>无</td><td>无</td></tr><tr><td>yarn global</td><td>全局安装依赖包</td><td>yarn global &lt;add&#x2F;bin&#x2F;ls&#x2F;remove&#x2F;upgrade&gt; [–prefix]</td><td>–prefix 包路径前缀</td></tr><tr><td>yarn info</td><td>显示依赖包的信息</td><td>包名</td><td>–json：json格式显示结果</td></tr><tr><td>yarn init</td><td>互动式创建&#x2F;更新package.json文件</td><td>无</td><td>–yes&#x2F;-y：以默认值生成package.json文件</td></tr><tr><td>yarn install</td><td>安装所有依赖包</td><td></td><td>–flat：只安装一个版本；–force：强制重新下载安装；–har：输出安装时网络性能日志；–no-lockfile：不生成yarn.lock文件；–production：生产模式安装（不安装devDependencies中的依赖）</td></tr><tr><td>yarn list</td><td>列出已安装依赖包</td><td></td><td>–depth&#x3D;0：列表深度，从0开始</td></tr><tr><td>yarn outdated</td><td>检查过时的依赖包</td><td>包名</td><td></td></tr><tr><td>yarn pack</td><td>给包的依赖打包</td><td>–filename</td><td></td></tr><tr><td>yarn publish</td><td>将包发布到npm</td><td></td><td>–tag：版本标签；–access：公开（public）还是限制的（restricted）</td></tr><tr><td>yarn remove</td><td>卸载包，更新package.json和yarn.lock</td><td>包名</td><td></td></tr><tr><td>yarn upgrade</td><td>升级依赖包</td><td></td><td></td></tr><tr><td>yarn version</td><td>管理当前项目的版本号</td><td>–new-version ：直接记录版本号；–no-git-tag-version：不生成git标签</td><td></td></tr></tbody></table><h3 id="yarn设置代理"><a href="#yarn设置代理" class="headerlink" title="yarn设置代理"></a>yarn设置代理</h3><p>设置源（淘宝）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure><p>设置源（官方）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> registry https://registry.yarnpkg.com</span><br></pre></td></tr></table></figure><p>删除源</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config delete registry</span><br></pre></td></tr></table></figure><p>查看代理</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config list</span><br></pre></td></tr></table></figure><p>设置</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> proxy  http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">10809</span></span><br><span class="line">yarn config <span class="built_in">set</span> https-proxy http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">10808</span></span><br></pre></td></tr></table></figure><p>取消</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn config delete proxy</span><br><span class="line">yarn config delete https-proxy</span><br></pre></td></tr></table></figure><h2 id="rimraf快速删除node-modules文件夹"><a href="#rimraf快速删除node-modules文件夹" class="headerlink" title="rimraf快速删除node_modules文件夹"></a>rimraf快速删除node_modules文件夹</h2><p>全局安装：<code>npm install -g rimraf</code></p><p>进行删除：<code>rimraf node_modules</code></p><h2 id="ESLint-自动修复"><a href="#ESLint-自动修复" class="headerlink" title="ESLint 自动修复"></a>ESLint 自动修复</h2><p><code>npm run lint -- --fix</code> 或者<code>yarn lint --fix</code></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> bash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows搭建nginx服务并配置</title>
      <link href="/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-09-26-windows%E6%90%AD%E5%BB%BAnginx%E6%9C%8D%E5%8A%A1%E5%B9%B6%E9%85%8D%E7%BD%AE/"/>
      <url>/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-09-26-windows%E6%90%AD%E5%BB%BAnginx%E6%9C%8D%E5%8A%A1%E5%B9%B6%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>下载直接去官网 <a href="https://www.cnblogs.com/taiyonghai/p/nginx.org">nginx.org</a> ,选择windows版本进行下载</p><p>下载完成后，放到服务器指定路径，并开启cmd窗口进行命令行格式的运行。</p><p><strong>启动</strong></p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">start</span> nginx</span><br></pre></td></tr></table></figure><p><strong>查看任务进程是否存在</strong></p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist /fi &quot;imagename eq nginx.exe&quot;</span><br></pre></td></tr></table></figure><p><strong>重新加载</strong></p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p><strong>快速停止</strong></p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop</span><br></pre></td></tr></table></figure><h2 id="简单配置："><a href="#简单配置：" class="headerlink" title="简单配置："></a>简单配置：</h2><p>首先正常启动是80端口，如果是阿里云服务器需要去安全组放行端口。</p><p>再然后是443端口，这里如果需要用到多个的话，我建议是加一个 ‘&#x2F;’ 用来区分端口例如如下配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#user  nobody;</span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">#error_log  logs/error.<span class="property">log</span>;</span><br><span class="line">#error_log  logs/error.<span class="property">log</span>  notice;</span><br><span class="line">#error_log  logs/error.<span class="property">log</span>  info;</span><br><span class="line"></span><br><span class="line">#pid        logs/nginx.<span class="property">pid</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.<span class="property">types</span>;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">    #                  <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">    #                  <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    #access_log  logs/access.<span class="property">log</span>  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  <span class="number">0</span>;</span><br><span class="line">    keepalive_timeout  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.<span class="property">access</span>.<span class="property">log</span>  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.<span class="property">html</span> index.<span class="property">htm</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  <span class="number">404</span>              /<span class="number">404.</span>html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the <span class="keyword">static</span> page /50x.<span class="property">html</span></span><br><span class="line">        #</span><br><span class="line">        error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.<span class="property">html</span>;</span><br><span class="line">        location = /50x.<span class="property">html</span> &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       <span class="number">8000</span>;</span><br><span class="line">    #    listen       <span class="attr">somename</span>:<span class="number">8080</span>;</span><br><span class="line">    #    server_name  somename  alias  another.<span class="property">alias</span>;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.<span class="property">html</span> index.<span class="property">htm</span>;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">   server &#123;</span><br><span class="line">        listen       <span class="number">443</span> ssl;</span><br><span class="line">        server_name  <span class="number">47.121</span><span class="number">.199</span><span class="number">.144</span>;</span><br><span class="line"></span><br><span class="line">        ssl_certificate         <span class="attr">C</span>:<span class="regexp">/dev/</span>nginx/nginx-<span class="number">1.26</span><span class="number">.2</span>/nginx-<span class="number">1.26</span><span class="number">.2</span>/<span class="number">443</span>/certificate.<span class="property">crt</span>;</span><br><span class="line">        ssl_certificate_key     <span class="attr">C</span>:<span class="regexp">/dev/</span>nginx/nginx-<span class="number">1.26</span><span class="number">.2</span>/nginx-<span class="number">1.26</span><span class="number">.2</span>/<span class="number">443</span>/private.<span class="property">key</span>;</span><br><span class="line"></span><br><span class="line">        ssl_session_cache    <span class="attr">shared</span>:<span class="attr">SSL</span>:1m;</span><br><span class="line">        ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">        ssl_ciphers  <span class="attr">HIGH</span>:!<span class="attr">aNULL</span>:!<span class="title class_">MD5</span>;</span><br><span class="line">        ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">        location /<span class="number">8081</span>/ &#123;</span><br><span class="line">            proxy_pass <span class="attr">http</span>:<span class="comment">//47.121.199.144:8081/;</span></span><br><span class="line">            proxy_set_header <span class="title class_">Host</span> $host;</span><br><span class="line">            proxy_set_header X-<span class="title class_">Real</span>-<span class="variable constant_">IP</span> $remote_addr;</span><br><span class="line">            proxy_set_header X-<span class="title class_">Forwarded</span>-<span class="title class_">For</span> $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_set_header X-<span class="title class_">Forwarded</span>-<span class="title class_">Proto</span> $scheme;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中这里的意思就是</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location /<span class="number">8081</span>/ <span class="punctuation">&#123;</span></span><br><span class="line">           proxy_pass http<span class="punctuation">:</span><span class="comment">//47.121.199.144:8081/;</span></span><br><span class="line">           proxy_set_header Host $host;</span><br><span class="line">           proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">           proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">       <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>将<a href="http://47.121.199.144:8081/%E8%BF%99%E4%B8%AA%E7%BD%91%E5%9D%80%E6%8C%87%E5%90%91https://47.121.199.144/8081/">http://47.121.199.144:8081/这个网址指向https://47.121.199.144/8081/</a></p><h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><p>1.在这里需要注意<code>C:/dev/nginx/nginx-1.26.2/nginx-1.26.2/443/certificate.crt;</code>的&#x2F; 是向右的。路径使用双反斜杠（\）或正斜杠（&#x2F;）</p><p>2.在与zerossl.com交互的时候，涉及到地址验证的问题，其中需要创建<code>.well-known</code>文件夹，如果是简单的windows环境是无法创建的，会提示你“必须键入文件名”，这时候需要mkdir创建了，即<code>mkdir .well-known</code></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java项目引入resources下面的文件</title>
      <link href="/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2024-09-26-java%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5resources%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%87%E4%BB%B6/"/>
      <url>/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2024-09-26-java%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5resources%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>好久没写java，差点都忘了。。。</p><p>起因是一个资源文件在resources目录下面，转换后的地址类型是string类型不是file，于是用类加载器获取文件资源路径</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">dbPath</span> <span class="operator">=</span> GetIpAddr.class.getClassLoader().getResource(<span class="string">&quot;ip2region/ip2region.xdb&quot;</span>).getPath();</span><br></pre></td></tr></table></figure><p>但是这样在编译部署完毕后会报错</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Generating unique operation named: userInfoUsingGET_1</span><br><span class="line"><span class="number">2024</span>-09-<span class="number">26</span> <span class="number">17</span>:<span class="number">15</span>:<span class="number">40.345</span>  INFO <span class="number">3992</span> --- [nio-<span class="number">8081</span>-exec-<span class="number">1</span>] o.a.c.c.C.[.[localhost].[/sys_api]       : Initializing Spring DispatcherServlet <span class="string">&#x27;dispatcherServlet&#x27;</span></span><br><span class="line">failed to load vector index from file:/C:/Users/Administrator/Desktop/jar/api.jar!/BOOT-INF/classes!/ip2region/ip2region.xdb: java.io.FileNotFoundException: file:\C:\Users\Administrator\Desktop\jar\api.jar!\BOOT-INF\classes!\ip2region\ip2region.xdb (文件名、目录名或卷标语法不正确。)</span><br><span class="line"><span class="number">2024</span>-09-<span class="number">26</span> <span class="number">17</span>:<span class="number">15</span>:<span class="number">40.664</span> ERROR <span class="number">3992</span> --- [nio-<span class="number">8081</span>-exec-<span class="number">1</span>] i.d.exception.RenExceptionHandler        :</span><br><span class="line">### Error updating database.  Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too <span class="type">long</span> <span class="keyword">for</span> column <span class="string">&#x27;ip_addr&#x27;</span> at row <span class="number">1</span></span><br><span class="line">### The error may exist in URL [jar:file:/C:/Users/Administrator/Desktop/jar/api.jar!/BOOT-INF/classes!/mapper/MarkVisiter.xml]</span><br><span class="line">### The error may involve io.dellevin.dao.MarkVisiterDao.insertVisitRecord-Inline</span><br><span class="line">### The error occurred <span class="keyword">while</span> setting parameters</span><br><span class="line">### SQL: INSERT INTO <span class="title function_">mark_visiter</span>             <span class="params">( visit_url, ip, ip_addr, create_time)</span>         VALUES             (                  ?, ?, ?, NOW()             )</span><br><span class="line">### Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too <span class="type">long</span> <span class="keyword">for</span> column <span class="string">&#x27;ip_addr&#x27;</span> at row <span class="number">1</span></span><br><span class="line">; Data truncation: Data too <span class="type">long</span> <span class="keyword">for</span> column <span class="string">&#x27;ip_addr&#x27;</span> at row <span class="number">1</span>; nested exception is com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too <span class="type">long</span> <span class="keyword">for</span> column <span class="string">&#x27;ip_addr&#x27;</span> at row <span class="number">1</span></span><br><span class="line"></span><br><span class="line">org.springframework.dao.DataIntegrityViolationException:</span><br></pre></td></tr></table></figure><p>只能用流方式加载文件，于是采用如下方式：可以使用一个临时文件来处理这个问题。首先读取输入流，然后将其写入一个临时文件，最后将该临时文件的路径作为 <code>dbPath</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">dbPath</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1、从 dbPath 中预先加载 VectorIndex 缓存</span></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> GetIpAddr.class.getClassLoader().getResourceAsStream(<span class="string">&quot;ip2region/ip2region.xdb&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (inputStream == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileNotFoundException</span>(<span class="string">&quot;Resource not found: ip2region/ip2region.xdb&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建临时文件</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">tempFile</span> <span class="operator">=</span> Files.createTempFile(<span class="string">&quot;ip2region&quot;</span>, <span class="string">&quot;.xdb&quot;</span>).toFile();</span><br><span class="line">            <span class="keyword">try</span> (<span class="type">FileOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(tempFile)) &#123;</span><br><span class="line">                <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                <span class="type">int</span> bytesRead;</span><br><span class="line">                <span class="keyword">while</span> ((bytesRead = inputStream.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    outputStream.write(buffer, <span class="number">0</span>, bytesRead);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取临时文件路径</span></span><br><span class="line">            dbPath = tempFile.getAbsolutePath();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;failed to load vector index: %s\n&quot;</span>, e);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;failed to load vector index: &quot;</span> + e + <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DAIL-SQL开源sql转换调试模型-chatgpt改为百度ERNIE-Speed-128K模型</title>
      <link href="/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2024-09-26-DAIL-SQL%E5%BC%80%E6%BA%90sql%E8%BD%AC%E6%8D%A2%E8%B0%83%E8%AF%95%E6%A8%A1%E5%9E%8B-chatgpt%E6%94%B9%E4%B8%BA%E7%99%BE%E5%BA%A6ERNIE-Speed-128K%E6%A8%A1%E5%9E%8B/"/>
      <url>/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2024-09-26-DAIL-SQL%E5%BC%80%E6%BA%90sql%E8%BD%AC%E6%8D%A2%E8%B0%83%E8%AF%95%E6%A8%A1%E5%9E%8B-chatgpt%E6%94%B9%E4%B8%BA%E7%99%BE%E5%BA%A6ERNIE-Speed-128K%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>最近领导要求我带一带他手下的研究生，课题是关于<code>DAIL-SQL</code>这个开源模型调试的。研究生说他已经完成了项目的搭建和gpt模型的调试。接下来要改成百度千帆的模型，却遇到了难题。</p><p>其实很简单，根据项目的框架走就可以了。正常部署环境过后（再次会遇到依赖安装不上，版本不匹配等诸多问题，按照报错排错修改即可）。根据readme生成数据模型之后。接下来就该调试ask_llm.py这一步开始了正式的模型修改了。</p><p>首先更改一下init方式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化百度千帆的api</span></span><br><span class="line">    init_qianfan(args.QIANFAN_ACCESS_KEY, args.QIANFAN_SECRET_KEY, args.model)</span><br></pre></td></tr></table></figure><p>然后查看到init方法是自己写的chatgpt的接口解析，我们就需要模仿人家的写法写一个百度千帆的，根据ERNIE_Speed_128K接口模型进行调试更改</p><p><a href="https://cloud.baidu.com/doc/WENXINWORKSHOP/s/6ltgkzya5">https://cloud.baidu.com/doc/WENXINWORKSHOP/s/6ltgkzya5</a></p><p>之后得出了如下的脚本qianfan.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json.decoder</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> qianfan</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> utils.enums <span class="keyword">import</span> LLM</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init_qianfan</span>(<span class="params">QIANFAN_ACCESS_KEY, QIANFAN_SECRET_KEY,model</span>):</span><br><span class="line">    os.environ[<span class="string">&quot;QIANFAN_ACCESS_KEY&quot;</span>] = QIANFAN_ACCESS_KEY</span><br><span class="line">    os.environ[<span class="string">&quot;QIANFAN_SECRET_KEY&quot;</span>] = QIANFAN_SECRET_KEY</span><br><span class="line"></span><br><span class="line"><span class="comment"># def init_qianfan(QIANFAN_ACCESS_KEY, QIANFAN_SECRET_KEY, model):</span></span><br><span class="line"><span class="comment">#     qianfan.AccessKey(QIANFAN_ACCESS_KEY)</span></span><br><span class="line"><span class="comment">#     qianfan.SecretKey(QIANFAN_SECRET_KEY)</span></span><br><span class="line">    <span class="comment"># os.environ[&quot;QIANFAN_ACCESS_KEY&quot;] = QIANFAN_ACCESS_KEY</span></span><br><span class="line">    <span class="comment"># os.environ[&quot;QIANFAN_SECRET_KEY&quot;] = QIANFAN_SECRET_KEY</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理单轮对话的completion任务</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_completion</span>(<span class="params">model, batch, temperature</span>):</span><br><span class="line">    completion = qianfan.Completion()</span><br><span class="line">    response = completion.do(</span><br><span class="line">        model=model,</span><br><span class="line">        prompt=batch,  <span class="comment"># 这是当前问题</span></span><br><span class="line">        temperature=temperature,</span><br><span class="line">        max_output_tokens=<span class="number">200</span>,  <span class="comment"># 最大输出token数量，根据需要调整</span></span><br><span class="line">        top_p=<span class="number">1</span>,</span><br><span class="line">        frequency_penalty=<span class="number">0</span>,</span><br><span class="line">        presence_penalty=<span class="number">0</span>,</span><br><span class="line">        stop=[<span class="string">&quot;;&quot;</span>]</span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 提取response中的结果部分</span></span><br><span class="line">    response_clean = [response[<span class="string">&quot;result&quot;</span>]]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span>(</span><br><span class="line">        response=response_clean,</span><br><span class="line">        prompt_tokens=response[<span class="string">&quot;usage&quot;</span>][<span class="string">&quot;prompt_tokens&quot;</span>],</span><br><span class="line">        completion_tokens=response[<span class="string">&quot;usage&quot;</span>][<span class="string">&quot;completion_tokens&quot;</span>],</span><br><span class="line">        total_tokens=response[<span class="string">&quot;usage&quot;</span>][<span class="string">&quot;total_tokens&quot;</span>]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理多轮对话的任务</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_chat</span>(<span class="params">model, messages: <span class="built_in">list</span>, temperature, n</span>):</span><br><span class="line">    chat_completion = qianfan.ChatCompletion()</span><br><span class="line">    response = chat_completion.do(</span><br><span class="line">        model=model,</span><br><span class="line">        messages=messages,  <span class="comment"># messages 是带有历史对话的消息列表</span></span><br><span class="line">        temperature=temperature,</span><br><span class="line">        max_output_tokens=<span class="number">200</span>  <span class="comment"># 最大输出token数量，根据需要调整</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 提取返回的消息内容</span></span><br><span class="line">    response_clean = [response[<span class="string">&quot;result&quot;</span>]]</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        response_clean = response_clean[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span>(</span><br><span class="line">        response=response_clean,</span><br><span class="line">        prompt_tokens=response[<span class="string">&quot;usage&quot;</span>][<span class="string">&quot;prompt_tokens&quot;</span>],</span><br><span class="line">        completion_tokens=response[<span class="string">&quot;usage&quot;</span>][<span class="string">&quot;completion_tokens&quot;</span>],</span><br><span class="line">        total_tokens=response[<span class="string">&quot;usage&quot;</span>][<span class="string">&quot;total_tokens&quot;</span>]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用对话请i去函数，p判断ask_completion/ask_chat</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_llm</span>(<span class="params">model: <span class="built_in">str</span>, batch: <span class="built_in">list</span>, temperature: <span class="built_in">float</span>, n: <span class="built_in">int</span></span>):</span><br><span class="line">    n_repeat = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> model <span class="keyword">in</span> LLM.TASK_COMPLETIONS:  <span class="comment"># completion任务</span></span><br><span class="line">                <span class="keyword">assert</span> n == <span class="number">1</span></span><br><span class="line">                response = ask_completion(model, batch, temperature)</span><br><span class="line">            <span class="keyword">elif</span> model <span class="keyword">in</span> LLM.TASK_CHAT:  <span class="comment"># chat任务</span></span><br><span class="line">                <span class="keyword">assert</span> <span class="built_in">len</span>(batch) == <span class="number">1</span>, <span class="string">&quot;batch must be 1 in this mode&quot;</span></span><br><span class="line">                messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: batch[<span class="number">0</span>]&#125;]</span><br><span class="line">                response = ask_chat(model, messages, temperature, n)</span><br><span class="line">                response[<span class="string">&#x27;response&#x27;</span>] = [response[<span class="string">&#x27;response&#x27;</span>]]</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span> json.decoder.JSONDecodeError:</span><br><span class="line">            n_repeat += <span class="number">1</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Repeat for the <span class="subst">&#123;n_repeat&#125;</span> times for JSONDecodeError&quot;</span>, end=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            n_repeat += <span class="number">1</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Repeat for the <span class="subst">&#123;n_repeat&#125;</span> times for exception: <span class="subst">&#123;e&#125;</span>&quot;</span>, end=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure><p>接下来你如果运行会发现在ask_llm的时候异常会报错，这是因为异常不匹配，我没有细察qianfan的异常有那些，就直接抛出Exception</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">               res = ask_llm(args.model, batch, args.temperature, args.n)</span><br><span class="line">           <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">               <span class="built_in">print</span>(<span class="string">f&quot;The <span class="subst">&#123;i&#125;</span>-th question has too much tokens! Return \&quot;SELECT\&quot; instead&quot;</span>)</span><br><span class="line">               <span class="comment"># res = &quot;&quot;</span></span><br><span class="line">               res = &#123;<span class="string">&quot;response&quot;</span>: [<span class="string">&quot;&quot;</span>], <span class="string">&quot;total_tokens&quot;</span>: <span class="number">0</span>&#125;</span><br></pre></td></tr></table></figure><p>因为二者模型不一样，还需要对结果集进行数据的搜集更改，我这里没做处理，其实只需要一个简单的正则表达式就可以,在如下更改就可以了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> sqls, db_id <span class="keyword">in</span> <span class="built_in">zip</span>(res[<span class="string">&quot;response&quot;</span>], cur_db_ids):</span><br><span class="line">    processed_sqls = []</span><br><span class="line">    <span class="keyword">for</span> sql <span class="keyword">in</span> sqls:</span><br><span class="line">        sql = <span class="string">&quot; &quot;</span>.join(sql.replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot; &quot;</span>).split())</span><br><span class="line">        sql = process_duplication(sql)</span><br><span class="line">        <span class="keyword">if</span> sql.startswith(<span class="string">&quot;SELECT&quot;</span>):</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">elif</span> sql.startswith(<span class="string">&quot; &quot;</span>):</span><br><span class="line">            sql = <span class="string">&quot;SELECT&quot;</span> + sql</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            sql = <span class="string">&quot;SELECT &quot;</span> + sql</span><br><span class="line">        processed_sqls.append(sql)</span><br></pre></td></tr></table></figure><p>由于我没做更改，只得在后续生成的文件中进行数据提取，采用如下方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">extract_sql</span>(<span class="params">content</span>):</span><br><span class="line">    <span class="comment"># 匹配```sql开头 ```结尾</span></span><br><span class="line">    pattern = <span class="string">r&#x27;```sql(.*?)```&#x27;</span></span><br><span class="line">    sql_blocks = re.findall(pattern, content, re.DOTALL)</span><br><span class="line">    sql_statements = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> sql <span class="keyword">in</span> sql_blocks:</span><br><span class="line">        cleaned_sql = <span class="string">&quot; &quot;</span>.join(sql.split()) </span><br><span class="line">        sql_statements.append(cleaned_sql)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sql_statements</span><br></pre></td></tr></table></figure><p>同时还需要再enmus脚本中添加对应的模型来识别</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LLM</span>:</span><br><span class="line">    <span class="comment"># openai LLMs</span></span><br><span class="line">    TEXT_DAVINCI_003 = <span class="string">&quot;text-davinci-003&quot;</span></span><br><span class="line">    CODE_DAVINCI_002 = <span class="string">&quot;code-davinci-002&quot;</span></span><br><span class="line">    GPT_35_TURBO = <span class="string">&quot;gpt-3.5-turbo&quot;</span></span><br><span class="line">    GPT_35_TURBO_0613 = <span class="string">&quot;gpt-3.5-turbo-0613&quot;</span></span><br><span class="line">    GPT_35_TURBO_16K = <span class="string">&quot;gpt-3.5-turbo-16k&quot;</span></span><br><span class="line">    GPT_35_TURBO_0301 = <span class="string">&quot;gpt-3.5-turbo-0301&quot;</span></span><br><span class="line">    GPT_4 = <span class="string">&quot;gpt-4&quot;</span></span><br><span class="line">    ERNIE_Speed_128K = <span class="string">&#x27;ERNIE-Speed-128K&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># LLMs that use openai completion api</span></span><br><span class="line">    TASK_COMPLETIONS = [</span><br><span class="line">        TEXT_DAVINCI_003,</span><br><span class="line">        CODE_DAVINCI_002</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># LLMs that use openai chat api</span></span><br><span class="line">    TASK_CHAT = [</span><br><span class="line">        GPT_35_TURBO,</span><br><span class="line">        GPT_35_TURBO_0613,</span><br><span class="line">        GPT_35_TURBO_16K,</span><br><span class="line">        GPT_35_TURBO_0301,</span><br><span class="line">        GPT_4,</span><br><span class="line">        ERNIE_Speed_128K</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><p>脚本ask_llm输入的命令行修改为类似如下的方式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&quot;--question&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--QIANFAN_ACCESS_KEY&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--QIANFAN_SECRET_KEY&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line"><span class="comment"># parser.add_argument(&quot;--openai_api_key&quot;, type=str)</span></span><br><span class="line"><span class="comment"># parser.add_argument(&quot;--openai_group_id&quot;, type=str, default=&quot;org-ktBefi7n9aK7sZjwc2R9G1Wo&quot;)</span></span><br><span class="line">parser.add_argument(<span class="string">&quot;--model&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, choices=[LLM.TEXT_DAVINCI_003, </span><br><span class="line">                                                  LLM.GPT_35_TURBO,</span><br><span class="line">                                                  LLM.GPT_35_TURBO_0613,</span><br><span class="line">                                                  <span class="comment"># LLM.TONG_YI_QIAN_WEN,</span></span><br><span class="line">                                                  LLM.GPT_35_TURBO_16K,</span><br><span class="line">                                                  LLM.GPT_4,</span><br><span class="line">                                                  LLM.ERNIE_Speed_128K],</span><br><span class="line">                    default=LLM.ERNIE_Speed_128K)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--start_index&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">0</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--end_index&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">1000000</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--temperature&quot;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0</span>) <span class="comment"># qianfan  (0, 1.0]</span></span><br><span class="line">parser.add_argument(<span class="string">&quot;--mini_index_path&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&quot;&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--batch_size&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">1</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--n&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">5</span>, <span class="built_in">help</span>=<span class="string">&quot;Size of self-consistent set&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--db_dir&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&quot;dataset/spider/database&quot;</span>)</span><br></pre></td></tr></table></figure><p>注意千帆的temperature是 (0, 1.0]和gpt的还不一样</p><p>至此已经完全修改完毕。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows 上运行 Stanford CoreNLP 服务</title>
      <link href="/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-09-26-Windows_%E4%B8%8A%E8%BF%90%E8%A1%8C_Stanford_CoreNLP_%E6%9C%8D%E5%8A%A1/"/>
      <url>/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-09-26-Windows_%E4%B8%8A%E8%BF%90%E8%A1%8C_Stanford_CoreNLP_%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p><strong><strong>在 Windows 上运行 Stanford CoreNLP 服务的</strong></strong></p><p>在 Windows 上运行 Stanford CoreNLP 服务的步骤如下：</p><h3 id="1-下载-Stanford-CoreNLP"><a href="#1-下载-Stanford-CoreNLP" class="headerlink" title="1. 下载 Stanford CoreNLP"></a>1. <strong>下载 Stanford CoreNLP</strong></h3><ul><li>访问 Stanford CoreNLP 的下载页面。</li><li>下载最新的 <code>stanford-corenlp-full</code> 压缩包文件。</li><li>解压该文件到一个合适的目录，例如 <code>C:\stanford-corenlp-full-2023-06-18</code>。</li></ul><h3 id="2-启动-Stanford-CoreNLP-服务器"><a href="#2-启动-Stanford-CoreNLP-服务器" class="headerlink" title="2. 启动 Stanford CoreNLP 服务器"></a>2. <strong>启动 Stanford CoreNLP 服务器</strong></h3><p>你可以通过命令行启动 CoreNLP 服务器，确保你已经安装并配置好了 Java 环境。</p><ul><li><p>打开命令提示符（CMD），导航到解压的 CoreNLP 目录：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd C:\stanford-corenlp-full-2023-06-18</span><br></pre></td></tr></table></figure></li><li><p>启动服务器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -mx4g -cp &quot;*&quot; edu.stanford.nlp.pipeline.StanfordCoreNLPServer -port 9000 -timeout 15000</span><br></pre></td></tr></table></figure><p>这里，<code>-mx4g</code> 代表分配 4GB 内存给服务器，你可以根据实际需求调整此值。默认服务器会在 <code>http://localhost:9000</code> 运行。</p></li></ul><h3 id="3-测试服务器"><a href="#3-测试服务器" class="headerlink" title="3. 测试服务器"></a>3. <strong>测试服务器</strong></h3><ul><li>在浏览器中访问 <code>http://localhost:9000</code>，查看是否服务器已经启动并运行。</li></ul><p>或者你可以通过发送 HTTP 请求来测试，例如使用 <code>curl</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --data &#x27;The quick brown fox jumps over the lazy dog.&#x27; &#x27;http://localhost:9000/?properties=&#123;&quot;annotators&quot;:&quot;tokenize,ssplit,pos,lemma,ner,parse,depparse&quot;,&quot;outputFormat&quot;:&quot;json&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure><p>成功后，服务器会返回 NLP 分析结果。</p><h3 id="4-常见问题"><a href="#4-常见问题" class="headerlink" title="4. 常见问题"></a>4. <strong>常见问题</strong></h3><ul><li>如果遇到内存不足错误，可以尝试增加 <code>-mx</code> 后的内存值，比如 <code>-mx8g</code>。</li><li>服务器默认在 9000 端口运行。如果此端口被占用，你可以使用 <code>-port</code> 参数指定其他端口。</li></ul><p>这样，就可以在 Windows 环境下运行 Stanford CoreNLP 服务了。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IP申请ssl证书</title>
      <link href="/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-09-26-IP%E7%94%B3%E8%AF%B7ssl%E8%AF%81%E4%B9%A6/"/>
      <url>/2024/09/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2024-09-26-IP%E7%94%B3%E8%AF%B7ssl%E8%AF%81%E4%B9%A6/</url>
      
        <content type="html"><![CDATA[<p>实现方式是通过 <a href="https://zerossl.com/">https://zerossl.com</a> 来申请免费的ssl证书的，有效期为90天，90天之后还需要自行申请</p><p>1.进入到ZeroSSL官网，注册一个账号，然后点击免费 SSL 证书申请。</p><p>2.填写你的IP地址，然后选择免费SSL证书时长。(90-Day Certificate)</p><p>3.中间那个步骤三个都不选然后进行下一步，选择自动生成CSR(Auto-Generate CSR)</p><p>4.验证域名，ZeroSSL免费SSL证书提供了两种域名验证方式，最简单的就是Web验证，但是前提是你要让你的IP地址实现Web访问。如果没有，你可以选择使用域名DNS添加TXT记录验证。</p><p>5.选择网站Web访问的话，直接下载验证文件，然后上传到IP地址默认的Web目录下，用你的浏览器打开IP，保证可以访问到验证文件。</p><p>6.最后，回到ZeroSSL验证页面，点击完成验证。</p><p>7.下载证书文件，ZeroSSL证书验证成功后，就可以下载证书文件了。ZeroSSL SSL证书提供了多种形式，包括了Nginx、Apache等。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>爱一个人是什么感觉呢？</title>
      <link href="/2024/09/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-09-13-%E7%88%B1%E4%B8%80%E4%B8%AA%E4%BA%BA%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%9F%E8%A7%89%E5%91%A2%EF%BC%9F/"/>
      <url>/2024/09/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-09-13-%E7%88%B1%E4%B8%80%E4%B8%AA%E4%BA%BA%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%9F%E8%A7%89%E5%91%A2%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<p>爱一个人是什么感觉呢？</p><p>很久之前，我以为我对爱情看的很透彻，写过很多文字，姑且算是文字吧，说文章，真是对我自己的恭维了。在那些文字里面，充斥着对爱的不信任，对纯洁美好爱情的向往，还有觉得自以为是那种孤芳自赏的清高，最后总是用一句唏嘘作为收尾。</p><p>现在看看，真的很好笑呀。</p><p>爱一个人是什么感觉呢？怎么该描述呢？我也不知道。我会对她的一举一动细心观察。自己冷了觉得她也会冷，自己热了觉得她也会热，会把开心的不开心的汇报给她，会把自己的好都给她，给他展现出自己的好与坏，会为了她而改变。真的是很像一个小孩子呢。可是，这正是我需要的。</p><p>很奇怪，我的控制欲是不是强的离谱，想和她时时刻刻在身边，想融为一体，想水乳交融。</p><p>我好怕有一天她会离开我，之前的我信誓旦旦的说“世界上没有什么可以打动我了”，现在她的一句“早安‘我就感觉心要融化了。我又变成了那个患得患失，矫揉造作的我，我可是个男孩子啊。</p><p>一定要小心翼翼的经营下去啊。即便懂得了再多，到她面前，一切理论都会崩溃。以前的自己真的好可笑呀。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>少年赠我红玫瑰</title>
      <link href="/2024/06/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-06-10-%E5%B0%91%E5%B9%B4%E8%B5%A0%E6%88%91%E7%BA%A2%E7%8E%AB%E7%91%B0/"/>
      <url>/2024/06/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-06-10-%E5%B0%91%E5%B9%B4%E8%B5%A0%E6%88%91%E7%BA%A2%E7%8E%AB%E7%91%B0/</url>
      
        <content type="html"><![CDATA[<p>人终将会被少年不可得之物困其一生。</p><p>少年的我，喜欢电脑，奈何家里没有，便四处去有电脑的人家蹭，去同学家，去弟弟家，还好当时是小学，去网吧成了奢望。每次听着同班同学说玩了什么游戏，看了什么电视，我都装作毫不在意，其实竖耳倾听电脑世界的神奇。从那时起，便对电脑产生了浓厚的热情，可惜家境贫寒。这份热情甚至一度超过了父母，从那时起执念深深的埋在了小学。奈何家境贫寒。</p><p>说起感情，我不知道自己为什么会对另一半的依恋很强。强到让人厌烦的地步。可是这个强依恋止步在了上一段感情之中。三番四次的背叛让我对感情彻底的失望。把自己困在一个只有纯真爱情的乌托邦。别人进不来，我也出不去。</p><p>如今的我，有了三四台电脑，却没有当年的欢乐，没有人分享，我也不知道干什么。能激起我乐趣的，也就在网络上帮别人解决问题，发帖子带来的成就感让我提起兴趣。自己一个人单身了七八年，每时每刻都在告诉自己“喂！张昊洋！做一个拯救自己的英雄吧！”每当听到自己劝慰自己的话，我都想打了鸡血一样，从混乱中重生，从黎明中绽放。</p><p>至于年少的我，早就死在了七年前六月十日的清晨。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uni-app微信小程序属性为0</title>
      <link href="/2024/06/04/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-06-04-uni-app%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B1%9E%E6%80%A7%E4%B8%BA0/"/>
      <url>/2024/06/04/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2024-06-04-uni-app%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B1%9E%E6%80%A7%E4%B8%BA0/</url>
      
        <content type="html"><![CDATA[<p>前几日在封装一个组件的时候，接收数据的时候遇到一个属性等于0，但是，前端死活不显示</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/733349366.png"></p><p>这里是有值的，但</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/39264648.png"></p><p>到了前端就没有了，卧槽，太神奇了是不是。打印一下看看</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/2044229928.png"></p><p>打印出来传入值竟然是undefined而不是0，一定是闹鬼了。。。</p><p>最后再不断定位错误的时候，发现是这里的毛病</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post: item.post || &#x27;&#x27;, // 添加 post 属性，默认值为空字符串</span><br></pre></td></tr></table></figure><p>原因是当数值为0的时候自己就默认是false</p><p>0在布尔上下文中被认为是假值，因此 <code>item.post||‘’</code>  会在 <code>item.post </code> 为 0 时返回空字符串。所以说为了保留0，需要改成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">item.post !== undefined ? item.post : &#x27;&#x27;</span><br></pre></td></tr></table></figure><p>来确保仅在 <code>item.post</code> 是 <code>undefined</code> 时返回空字符串。</p><p>下面贴一下源代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;view&gt;</span><br><span class="line">    &lt;!-- 绑定个人信息 --&gt;</span><br><span class="line">    &lt;u-popup :show=&quot;localBindCompShow&quot; @close=&quot;onClickOverlayClose&quot; @open=&quot;localBindCompShow =true&quot; mode=&quot;center&quot;</span><br><span class="line">      round=&quot;20&quot; :closeOnClickOverlay=&quot;true&quot;&gt;</span><br><span class="line">      &lt;view class=&quot;bindCompCard&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;view class=&quot;header-container&quot;&gt;</span><br><span class="line">          &lt;view class=&#x27;header-button&#x27;&gt;</span><br><span class="line">            &lt;u-button type=&quot;info&quot; size=&quot;5&quot; icon=&quot;close&quot; @click=&quot;onClickOverlayClose&quot; :plain=&quot;true&quot;</span><br><span class="line">              :hairline=&quot;true&quot;&gt;&lt;/u-button&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">          &lt;view class=&quot;header-text&quot;&gt;绑定企业信息&lt;/view&gt;</span><br><span class="line">          &lt;u-tabs :list=&quot;bindCompTabList&quot; @click=&quot;selectTab&quot; class=&quot;tabs&quot;&gt;&lt;/u-tabs&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">        &lt;view v-if=&quot;!bindCompNewShow&quot;&gt;</span><br><span class="line">          &lt;view class=&quot;supplier-container&quot;&gt;</span><br><span class="line">            &lt;view v-for=&quot;(item, index) in itemsToDisplay&quot; :key=&quot;index&quot; class=&quot;supplier-card&quot;&gt;</span><br><span class="line">              &lt;view class=&quot;supplier-details&quot;&gt;</span><br><span class="line">                &lt;view class=&quot;company-name&quot;&gt;&#123;&#123; item.companyName &#125;&#125;&lt;/view&gt;</span><br><span class="line">                &lt;view class=&quot;supplier-name&quot;&gt;政采账号：&#123;&#123; item.supplierAccessName &#125;&#125;&lt;/view&gt;</span><br><span class="line">              &lt;/view&gt;</span><br><span class="line">              &lt;view class=&quot;bind-button&quot;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;view v-if=&quot;!item.isShow&quot;&gt;</span><br><span class="line">                  &lt;view class=&quot;post-select&quot;&gt;</span><br><span class="line">                    &#123;&#123; getPostText(item.post) &#125;&#125;</span><br><span class="line">                  &lt;/view&gt;</span><br><span class="line">                  &lt;button size=&quot;default&quot; type=&quot;default&quot;</span><br><span class="line">                    style=&quot;margin-top: 20rpx;color:#ffffff;background-color:#189f33;border-color:#ffffff;border-radius: 40rpx;height: 60rpx;display: flex;align-items: center;justify-content: center;&quot;&gt;已绑定&lt;/button&gt;</span><br><span class="line">                &lt;/view&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &lt;view v-if=&quot;item.isShow&quot;&gt;</span><br><span class="line">                  &lt;view class=&quot;post-select&quot; v-if=&quot;item.isShow&quot;&gt;</span><br><span class="line">                    &lt;uni-data-select v-model=&quot;item.post&quot; :localdata=&quot;postList&quot;</span><br><span class="line">                      placeholder=&quot;选择职位&quot;&gt;&lt;/uni-data-select&gt;</span><br><span class="line">                  &lt;/view&gt;</span><br><span class="line">                  &lt;button size=&quot;default&quot; type=&quot;default&quot; @click=&quot;submitBindCompCard(item)&quot;</span><br><span class="line">                    style=&quot;margin-top: 20rpx;color:#ffffff;background-color:#4874cb;border-color:#ffffff;border-radius: 40rpx;height: 60rpx;display: flex;align-items: center;justify-content: center;&quot;&gt;提交绑定&lt;/button&gt;</span><br><span class="line">                &lt;/view&gt;</span><br><span class="line">              &lt;/view&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">        &lt;view v-if=&quot;bindCompNewShow&quot;&gt;</span><br><span class="line">          &lt;u--form labelPosition=&quot;left&quot; :model=&quot;formBindComp&quot;&gt;</span><br><span class="line">            &lt;u-form-item label=&quot;政采网账号&quot; prop=&quot;formBindComp.supplierAccessName&quot; borderBottom labelWidth=&#x27;200&#x27;&gt;</span><br><span class="line">              &lt;u--input v-model=&quot;formBindComp.supplierAccessName&quot; border=&quot;none&quot;&gt;&lt;/u--input&gt;</span><br><span class="line">            &lt;/u-form-item&gt;</span><br><span class="line">            &lt;u-form-item label=&quot;职位&quot; prop=&quot;formBindComp.post&quot; borderBottom labelWidth=&#x27;200&#x27;&gt;</span><br><span class="line">              &lt;uni-data-select v-model=&quot;formBindComp.post&quot; :localdata=&quot;postList&quot;</span><br><span class="line">                placeholder=&quot;选择职位&quot;&gt;&lt;/uni-data-select&gt;</span><br><span class="line">            &lt;/u-form-item&gt;</span><br><span class="line">          &lt;/u--form&gt;</span><br><span class="line"></span><br><span class="line">          &lt;!-- &lt;u-button type=&quot;success&quot;&gt;提交&lt;/u-button&gt; --&gt;</span><br><span class="line">          &lt;button size=&quot;default&quot; type=&quot;default&quot; @click=&quot;submitBindComp&quot;</span><br><span class="line">            style=&quot;margin-top: 40rpx;color:#ffffff;background-color:#4874cb;border-color:#ffffff;border-radius: 40rpx;height: 60rpx;display: flex;align-items: center;justify-content: center;&quot;&gt;提交绑定&lt;/button&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/u-popup&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123;</span><br><span class="line">    mapState,</span><br><span class="line">    mapMutations</span><br><span class="line">  &#125; from &#x27;vuex&#x27;;</span><br><span class="line">  import &#123;</span><br><span class="line">    getFieldList,</span><br><span class="line">    postBindEnterprise,</span><br><span class="line">    getUserBindComp,</span><br><span class="line">    getUserHaveBindComp,</span><br><span class="line">  &#125; from &quot;@/api/user.js&quot;;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;BindComp&#x27;,</span><br><span class="line">    props: &#123;</span><br><span class="line">      bindCompShow: &#123;</span><br><span class="line">        type: Boolean,</span><br><span class="line">        default: true</span><br><span class="line">      &#125;,</span><br><span class="line">      userId: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">      &#125;,</span><br><span class="line">      itemList: &#123;</span><br><span class="line">        type: Array,</span><br><span class="line">        default: () =&gt; []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      ...mapState(&quot;user&quot;, [&quot;token&quot;, &quot;tokenExpire&quot;, &quot;userInfo&quot;]),</span><br><span class="line">      localBindCompShow: &#123;</span><br><span class="line">        get() &#123;</span><br><span class="line">          return this.bindCompShow;</span><br><span class="line">        &#125;,</span><br><span class="line">        set(val) &#123;</span><br><span class="line">          this.$emit(&#x27;update:bindCompShow&#x27;, val)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      itemsToDisplay() &#123;</span><br><span class="line">        let list = this.itemList.length &gt; 0 ? this.itemList : this.supplierList;</span><br><span class="line">        // 处理 list，添加 post 和 isShow 属性</span><br><span class="line">        let processedList = list.map(item =&gt; (&#123;</span><br><span class="line">            ...item,</span><br><span class="line">            post: item.post !== undefined ? item.post : &#x27;&#x27;, // 添加 post 属性，保留原值或默认值为空字符串</span><br><span class="line">            isShow: item.isShow !== undefined ? item.isShow : true // 添加 isShow 属性，默认值为 true</span><br><span class="line">        &#125;));</span><br><span class="line">        return processedList;    </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        supplierList: [],</span><br><span class="line">        bindCompNewShow: false,</span><br><span class="line">        bindCompTabList: [&#123;</span><br><span class="line">            name: &#x27;政采企业信息绑定&#x27;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            name: &#x27;绑定其他企业&#x27;,</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        postList: [],</span><br><span class="line">        formBindComp: &#123;</span><br><span class="line">          supplierAccessName: &#x27;&#x27;,</span><br><span class="line">          post: &#x27;&#x27;,</span><br><span class="line">          userId: &#x27;&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      this.fieldListGet();</span><br><span class="line">      if (this.userInfo.id != undefined) &#123;</span><br><span class="line">        this.userBindCompGet();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      ...mapMutations(&quot;user&quot;, [&quot;setUserInfo&quot;]),</span><br><span class="line">      async submitBindComp() &#123;</span><br><span class="line">        this.formBindComp.userId = this.userId</span><br><span class="line">        if (!this.formBindComp.userId) &#123;</span><br><span class="line">          this.formBindComp.userId = this.userInfo.id</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (this.formBindComp.userId == &quot;&quot;) &#123;</span><br><span class="line">          uni.$u.toast(&#x27;绑定失败，请尝试重新登陆后绑定！&#x27;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        if (this.formBindComp.supplierAccessName === &quot;&quot;) &#123;</span><br><span class="line">          uni.$u.toast(&#x27;政采网账号不能为空！&#x27;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        if (this.formBindComp.post === &quot;&quot;) &#123;</span><br><span class="line">          uni.$u.toast(&#x27;职位信息不能为空！&#x27;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        const &#123;</span><br><span class="line">          code,</span><br><span class="line">          msg,</span><br><span class="line">          data</span><br><span class="line">        &#125; = await postBindEnterprise(this.formBindComp);</span><br><span class="line"></span><br><span class="line">        if (code === 0) &#123;</span><br><span class="line">          // console.log(data)</span><br><span class="line">          uni.$u.toast(&#x27;绑定企业成功！&#x27;);</span><br><span class="line">          setTimeout(() =&gt; &#123;</span><br><span class="line">            this.$emit(&#x27;close-popup&#x27;);</span><br><span class="line">            uni.reLaunch(&#123;</span><br><span class="line">              url: &#x27;/pages/index/index&#x27;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;, 1000);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">      async submitBindCompCard(item) &#123;</span><br><span class="line">        if (item.post === undefined || item.post === &quot;&quot;) &#123;</span><br><span class="line">          uni.$u.toast(&#x27;企业职位不能为空！&#x27;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        let userID = this.userId;</span><br><span class="line">        if (!userID) &#123;</span><br><span class="line">          userID = this.userInfo.id</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        const params = &#123;</span><br><span class="line">          supplierAccessName: item.supplierAccessName,</span><br><span class="line">          post: item.post,</span><br><span class="line">          userId: userID,</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(params)</span><br><span class="line">        const &#123;</span><br><span class="line">          code,</span><br><span class="line">          msg,</span><br><span class="line">          data</span><br><span class="line">        &#125; = await postBindEnterprise(params);</span><br><span class="line">        if (code === 0) &#123;</span><br><span class="line">          // console.log(data)</span><br><span class="line">          // 更新 item 的 isShow 属性</span><br><span class="line">          this.$set(item, &#x27;isShow&#x27;, false);</span><br><span class="line">          uni.$u.toast(&#x27;绑定&#x27; + item.companyName + &#x27;成功！&#x27;);</span><br><span class="line">          // 更新绑定企业</span><br><span class="line">          this.userBindCompGet();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      onClickOverlayClose() &#123;</span><br><span class="line">        this.$emit(&#x27;close-popup&#x27;);</span><br><span class="line">      &#125;,</span><br><span class="line">      //获取用户下面的政采企业信息</span><br><span class="line">      async userBindCompGet() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">          // 如果resBindComp里面包含resHaveBind的数据,那么就设置该企业已经绑定好了</span><br><span class="line">          const resHaveBind = await getUserHaveBindComp();</span><br><span class="line">          const resBindComp = await getUserBindComp();</span><br><span class="line">          if (resHaveBind.code === 0 &amp;&amp; resBindComp.code === 0) &#123;</span><br><span class="line"></span><br><span class="line">            const haveBindMap = new Map();</span><br><span class="line">            resHaveBind.data.forEach(item =&gt; &#123;</span><br><span class="line">              haveBindMap.set(item.supplierId, item.post);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            this.supplierList = resBindComp.data.map(item =&gt; &#123;</span><br><span class="line">              if (haveBindMap.has(item.supplierId)) &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                  ...item,</span><br><span class="line">                  post: haveBindMap.get(item.supplierId),</span><br><span class="line">                  isShow: false</span><br><span class="line">                &#125;;</span><br><span class="line">              &#125;</span><br><span class="line">              return item;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            console.log(this.supplierList);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; catch (error) &#123;</span><br><span class="line">          console.error(&#x27;获取用户绑定企业信息失败&#x27;, error);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">      //获取职位信息</span><br><span class="line">      async fieldListGet() &#123;</span><br><span class="line">        const &#123;</span><br><span class="line">          code,</span><br><span class="line">          msg,</span><br><span class="line">          data</span><br><span class="line">        &#125; = await getFieldList(&#123;</span><br><span class="line">          fieldName: &quot;register_post&quot;</span><br><span class="line">        &#125;);</span><br><span class="line">        if (code === 0 &amp;&amp; data) &#123;</span><br><span class="line">          // console.log(data)</span><br><span class="line">          this.postList = data.map(post =&gt; &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">              value: post.dictCode,</span><br><span class="line">              text: post.dictName</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">          // console.log(this.postList)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      getPostText(postValue) &#123;</span><br><span class="line">        const postItem = this.postList.find(post =&gt; post.value === postValue);</span><br><span class="line">        // console.log(postValue, postItem)</span><br><span class="line">        return postItem ? postItem.text : &#x27;未知职位&#x27;;</span><br><span class="line">      &#125;,</span><br><span class="line">      selectTab(item) &#123;</span><br><span class="line">        // console.log(item.name)</span><br><span class="line">        if (item.name == &quot;绑定其他企业&quot;) &#123;</span><br><span class="line">          this.bindCompNewShow = true;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          this.bindCompNewShow = false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  .bindCompCard &#123;</span><br><span class="line">    width: 650rpx;</span><br><span class="line">    padding: 20rpx;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .header-container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    align-items: center;</span><br><span class="line">    width: 100%;</span><br><span class="line">    margin-bottom: 20rpx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .header-button &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 80rpx;</span><br><span class="line">    top: 0;</span><br><span class="line">    right: 5px;</span><br><span class="line">    margin: 10rpx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .header-text &#123;</span><br><span class="line">    font-size: 36rpx;</span><br><span class="line">    margin-bottom: 10rpx;</span><br><span class="line">    text-align: center;</span><br><span class="line">    width: 100%;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .tabs &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ------------------------</span><br><span class="line">  .supplier-container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    gap: 20rpx;</span><br><span class="line">    padding: 20rpx;</span><br><span class="line">    height: 600rpx;</span><br><span class="line">    overflow: auto;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .supplier-card &#123;</span><br><span class="line">    background: #fff;</span><br><span class="line">    border-radius: 10rpx;</span><br><span class="line">    box-shadow: 0 2rpx 5rpx rgba(0, 0, 0, 0.1);</span><br><span class="line">    padding: 20rpx;</span><br><span class="line">    display: flex;</span><br><span class="line">    // flex-direction: column;</span><br><span class="line">    gap: 10rpx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .supplier-details &#123;</span><br><span class="line">    margin-top: 27rpx;</span><br><span class="line">    width: 360rpx;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    gap: 10rpx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .company-name,</span><br><span class="line">  .supplier-name &#123;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">    width: 100%;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .company-name &#123;</span><br><span class="line">    font-size: 32rpx;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    color: #333;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .supplier-name &#123;</span><br><span class="line">    font-size: 32rpx;</span><br><span class="line">    color: #666;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .post-select &#123;</span><br><span class="line">    margin-top: 10rpx;</span><br><span class="line">    width: 222rpx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .bind-button &#123;</span><br><span class="line">    margin-left: 10rpx;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql-explain的用法及返回字段的含义</title>
      <link href="/2024/05/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2024-05-15-mysql-explain%E7%9A%84%E7%94%A8%E6%B3%95%E5%8F%8A%E8%BF%94%E5%9B%9E%E5%AD%97%E6%AE%B5%E7%9A%84%E5%90%AB%E4%B9%89/"/>
      <url>/2024/05/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2024-05-15-mysql-explain%E7%9A%84%E7%94%A8%E6%B3%95%E5%8F%8A%E8%BF%94%E5%9B%9E%E5%AD%97%E6%AE%B5%E7%9A%84%E5%90%AB%E4%B9%89/</url>
      
        <content type="html"><![CDATA[<h4 id="一-explain都用在哪："><a href="#一-explain都用在哪：" class="headerlink" title="一 . explain都用在哪："></a>一 . explain都用在哪：</h4><ol><li>explain语句提供有关mysql如何执行语句的信息，可以处理select、delete、insert、replact和update语句。</li><li>explain执行select语句中使用的每个表返回一行信息，是按照mysql在处理语句时读取他们顺序列输出中的表。</li><li>对应select语句，explain会生成扩展信息，这些信息可以在explain之后通过“show warnings”查看。</li></ol><h4 id="二-explain返回参数详解："><a href="#二-explain返回参数详解：" class="headerlink" title="二 . explain返回参数详解："></a>二 . explain返回参数详解：</h4><h4 id="1-id-列数字"><a href="#1-id-列数字" class="headerlink" title="1. id : 列数字"></a>1. id : 列数字</h4><p>   越大越先执行，如果说数字一样大，那么就从上往下依次执行，id列为null的就表是这是一个结果集，不需要使用它来进行查询。</p><h4 id="2-select-type列-常见的有："><a href="#2-select-type列-常见的有：" class="headerlink" title="2. select_type列,常见的有："></a>2. select_type列,常见的有：</h4><p>  <strong>1）simple</strong>：表示不需要union操作或者不包含子查询的简单select查询。有连接查询时，外层的查询为simple，且只有一个</p><p>  <strong>2）primary</strong>：一个需要union操作或含有子查询的select，位于最外层的单位查询的select_type即为primary。且只有一个</p><p>  <strong>3）union</strong>：union连接的两个select查询，第一个查询是dervied派生表，除了第一个表外，第二个以后的表select_type都是union</p><p>  <strong>4）dependent union</strong>：与union一样，出现在union 或union all语句中，但是这个查询要受到外部查询的影响</p><p>  <strong>5）union result</strong>：包含union的结果集，在union和union all语句中,因为它不需要参与查询，所以id字段为null</p><p>  <strong>6）subquery</strong>：除了from句中包含的子查询外，其他地方出现的子查询都可能是subquery</p><p>  <strong>7）dependent subquery</strong>：与dependent union类似，表示这个subquery的查询要受到外部表查询的影响</p><p>  <strong>8）derived</strong>：from字句中出现的子查询，也叫做派生表，其他数据库中可能叫做内联视图或嵌套select</p><h4 id="3-table-表名"><a href="#3-table-表名" class="headerlink" title="3. table : 表名"></a>3. table : 表名</h4><p>   显示的查询表名，如果查询使用了别名，那么这里显示的是别名，如果不涉及对数据表的操作，那么这显示为null，如果显示为尖括号括起来的就表示这个是临时表，后边的N就是执行计划中的id，表示结果来自于这个查询产生。如果是尖括号括起来的&lt;union M,N&gt;，与类似，也是一个临时表，表示这个结果来自于union查询的id为M,N的结果集。</p><h4 id="4-type-访问类型"><a href="#4-type-访问类型" class="headerlink" title="4 . type : 访问类型"></a>4 . type : 访问类型</h4><p>   依次从好到差：system，const，eq_ref，ref，fulltext，ref_or_null，unique_subquery，index_subquery，range，index_merge，index，ALL，除了all之外，其他的type都可以使用到索引，除了index_merge之外，其他的type只可以用到一个索引</p><p>  <strong>1) system：</strong> 表中只有一行数据或者是空表，且只能用于myisam和memory表。如果是Innodb引擎表，type列在这个情况通常都是all或者index</p><p>  <strong>2) const：</strong> 使用唯一索引或者主键，返回记录一定是1行记录的等值where条件时，通常type是const。其他数据库也叫做唯一索引扫描</p><p>  <strong>3) eq_ref：</strong> 出现在要连接过个表的查询计划中，驱动表只返回一行数据，且这行数据是第二个表的主键或者唯一索引，且必须为not null，唯一索引和主键是多列时，只有所有的列都用作比较时才会出现eq_ref</p><p>  <strong>4) ref：</strong> 不像eq_ref那样要求连接顺序，也没有主键和唯一索引的要求，只要使用相等条件检索时就可能出现，常见与辅助索引的等值查找。或者多列主键、唯一索引中，使用第一个列之外的列作为等值查找也会出现，总之，返回数据不唯一的等值查找就可能出现。</p><p>  <strong>5) fulltext：</strong> 全文索引检索，要注意，全文索引的优先级很高，若全文索引和普通索引同时存在时，mysql不管代价，优先选择使用全文索引</p><p>  <strong>6) ref_or_null：</strong> 与ref方法类似，只是增加了null值的比较。实际用的不多。</p><p>  <strong>7) unique_subquery：</strong> 用于where中的in形式子查询，子查询返回不重复值唯一值</p><p>  <strong>8) index_subquery：</strong> 用于in形式子查询使用到了辅助索引或者in常数列表，子查询可能返回重复值，可以使用索引将子查询去重。</p><p>  <strong>9) range：</strong> 索引范围扫描，常见于使用&gt;,&lt;,is null,between ,in ,like等运算符的查询中。</p><p>  <strong>10) index_merge：</strong> 表示查询使用了两个以上的索引，最后取交集或者并集，常见and ，or的条件使用了不同的索引，官方排序这个在ref_or_null之后，但是实际上由于要读取所个索引，性能可能大部分时间都不如range</p><p>  <strong>11) index：</strong> 索引全表扫描，把索引从头到尾扫一遍。出现index是sql使用了索引但是没用通过索引进行过滤，一般是使用了覆盖索引或者是利用索引进行了排序分组。</p><p>  <strong>12) all :</strong>  这个就是全表扫描数据文件，然后再在server层进行过滤返回符合要求的记录。（这一般比较糟糕，应该尽量避免）</p><h4 id="5-possible-keys"><a href="#5-possible-keys" class="headerlink" title="5 . possible_keys:"></a>5 . possible_keys:</h4><p>  查询可能使用到的索引都会在这里列出来,但不一 定被查询实际使用。</p><h4 id="6-key"><a href="#6-key" class="headerlink" title="6 . key :"></a>6 . key :</h4><p>   查询真正使用到的索引，select_type为index_merge时，这里可能出现两个以上的索引，其他的select_type这里只会出现一个。如果为NULL，则没有使用索引。</p><h4 id="7-key-len"><a href="#7-key-len" class="headerlink" title="7 . key_len :"></a>7 . key_len :</h4><p>   表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度。 key_len 字段能够帮你检查是否充分的 利用上了索引。ken_len 越长，说明索引使用的越充分。</p><h4 id="8-ref"><a href="#8-ref" class="headerlink" title="8 . ref :"></a>8 . ref :</h4><p>   如果是使用的常数等值查询，这里会显示const，如果是连接查询，被驱动表的执行计划这里会显示驱动表的关联字段，如果是条件使用了表达式或者函数，或者条件列发生了内部隐式转换，这里可能显示为func</p><h4 id="9-rows"><a href="#9-rows" class="headerlink" title="9 . rows :"></a>9 . rows :</h4><p>  这里是执行计划中估算的扫描行数，不是精确值</p><h4 id="10-extra"><a href="#10-extra" class="headerlink" title="10 . extra :"></a>10 . extra :</h4><p>  重点关注：using filesort和using temporary</p><p>   <strong>1) distinct：</strong> 在select部分使用了distinc关键字</p><p>   <strong>2) no tables used：</strong> 不带from字句的查询或者From dual查询</p><p>   <strong>3) using filesort：</strong> 排序时无法使用到索引时，就会出现这个。常见于order by和group by语句中。（看到这个的时候，查询就需要优化了）</p><p>   <strong>4) using index：</strong> 查询时不需要回表查询，直接通过索引就可以获取查询的数据。</p><p>   <strong>5) using join buffer（block nested loop），using join buffer（batched key accss）：</strong> 5.6.x之后的版本优化关联查询的BNL，BKA特性。主要是减少内表的循环数量以及比较顺序地扫描查询。</p><p>  <strong>6) using sort_union，using_union，using intersect，using sort_intersection：</strong></p><p>​     <strong>A:</strong>  using intersect：表示使用and的各个索引的条件时，该信息表示是从处理结果获取交集</p><p>​     <strong>B:</strong>  using union：表示使用or连接各个使用索引的条件时，该信息表示从处理结果获取并集</p><p>​     <strong>C:</strong>  using sort_union和using sort_intersection：与前面两个对应的类似，只是他们是出现在用and和or查询信息量大时，先查询主键，然后进行排序合并后，才能读取记录并返回。</p><p>   <strong>7) using temporary：</strong> 表示使用了临时表存储中间结果。临时表可以是内存临时表和磁盘临时表，执行计划中看不出来，需要查看status变量，used_tmp_table，used_tmp_disk_table才能看出来。这通常发生在对不同的列集进行ORDER BY上，而不是GROUP BY上。（看到这个的时候，查询需要优化了）</p><p>   <strong>8) using where：</strong>  表示存储引擎返回的记录并不是所有的都满足查询条件，需要在server层进行过滤。查询条件中分为限制条件和检查条件，5.6之前，存储引擎只能根据限制条件扫描数据并返回，然后server层根据检查条件进行过滤再返回真正符合查询的数据。5.6.x之后支持ICP特性，可以把检查条件也下推到存储引擎层，不符合检查条件和限制条件的数据，直接不读取，这样就大大减少了存储引擎扫描的记录数量。extra列显示using index condition</p><p>  <strong>9) firstmatch(tb_name)：</strong> 5.6.x开始引入的优化子查询的新特性之一，常见于where字句含有in()类型的子查询。如果内表的数据量比较大，就可能出现这个</p><p>   <strong>10) loosescan(m…n)：</strong> 5.6.x之后引入的优化子查询的新特性之一，在in()类型的子查询中，子查询返回的可能有重复记录时，就可能出现这个</p><p>  <strong>11）no exists :</strong> MYSQL优化了LEFT JOIN，一旦它找到了匹配LEFT JOIN标准的行，就不再搜索了</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我，一条新时代的裹脚布</title>
      <link href="/2024/05/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-05-15-%E6%88%91%EF%BC%8C%E4%B8%80%E6%9D%A1%E6%96%B0%E6%97%B6%E4%BB%A3%E7%9A%84%E8%A3%B9%E8%84%9A%E5%B8%83/"/>
      <url>/2024/05/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-05-15-%E6%88%91%EF%BC%8C%E4%B8%80%E6%9D%A1%E6%96%B0%E6%97%B6%E4%BB%A3%E7%9A%84%E8%A3%B9%E8%84%9A%E5%B8%83/</url>
      
        <content type="html"><![CDATA[<p><strong>我，一条新时代的裹脚布，在这个纵欲的社会坚守着自己的底线。在追求金钱的世界苟活着。</strong></p><p>事情起因源自于前几天和学姐的聊天。偶然间谈到了渣男渣女，因为和她聊天让我有种奇怪的感觉。最后果然不出我所料，她和我说，自己和前男友在清明的时候上床了，而且不止一次，之前还有很多次。我的脑中宛如炸雷，想到这种靡乱就在我的身边时时刻刻的发生着，我就难免耳脸赤红。分手了，和前男友？如果这不算是炸裂的，和她继续聊天后，她和我说疼，我本以为是哪里磕到了，结果她和我说“下面觉撕裂了”我真的很愤怒，我想骂她“你要真寂寞了，可以拿根黄瓜”，可是我没这么说。不过我还是难以接受这种反差感，那一刻所有的美好幻想都在我的梦中破裂，一个清新青春的学姐和我说出这种话，很难接受。宛若天上的仙子堕入凡尘，多了些许的烟火气。这就是爱情给人带来的改变吗？真的太可怕了。我的思想还停留在择一人终一生的围成当中，可是我这些思想在她的眼中就像一个小孩认真说着未来的梦想，幼稚而又可笑。</p><p>我承认我是有些清高了，但我还是继续这样。我对感情的不信任对感情的失望，源自于我本身的经历。被绿过好几次，被误会过，在那之后也骗过其他人，我一直认为自己不是个好人，但我会坚守我的底线绝不动摇，但是能坚持多久呢？能活多久呢？我明白我未来终会向现实低头的。我相信一个人能克制自己的欲望，那这个人是强大的。但是在物欲横流的社会，有几人能坚持呢？“乱花渐欲迷人眼”。进去了，再脱身就难了。我还是希望我能坚持自己的思想，卑微而又伟大，做一个拯救自己的英雄。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单优化-针对大数据查询的一些小思路</title>
      <link href="/2024/04/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2024-04-10-%E7%AE%80%E5%8D%95%E4%BC%98%E5%8C%96-%E9%92%88%E5%AF%B9%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%80%9D%E8%B7%AF/"/>
      <url>/2024/04/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2024-04-10-%E7%AE%80%E5%8D%95%E4%BC%98%E5%8C%96-%E9%92%88%E5%AF%B9%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%80%9D%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<p>我的member_user里面有352599条数据，gp_project里面有1211974条数据，请问该如何优化这个sql的查询效率 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT gp.*, mu.linkmanName , mu.linkmanPhone, mu.legalPersonName, mu.legalPersonPhone, mu.address, mu.registerArea FROM gp_project gp LEFT JOIN member_user mu ON mu.supplierId = gp.supplier_id WHERE DATE(gp.publicity_time) &gt;= &#x27;2024-04-03&#x27; AND DATE(gp.publicity_time) &lt;= &#x27;2024-04-07&#x27; and mu.deleted = 0</span><br></pre></td></tr></table></figure><p> 针对这样的数据，我的数据表里面数据太多，导致了查询需要512秒的时间，而且这仅仅是两个表的关联，之后还需要关联四五个表组成一条查询语句，如果仅在mysql里面查，未免有些太为难服务器了。因为平常找数据用的sql里面的in语法比较多，所以尝试了一下用关联字段in数据的情况，突然发现，这样还挺快，主要是因为关联字段是索引，所以比较快，通过单表查出数据，然后将关键字段提取出来，in到另一个表里面快速查询，最后拼接字段，来实现数据的查询结果。</p><p>另外因为涉及到多个循环，如果仅仅遵循  循环的外小内大原则，这样未免要写多个循环，降低了程序的运行效率多个O(n^2)的程序跑的，这样未免太致命了。改用map的key和value对照关系这样通过一个循环+map的方式降低时间复杂度为O(1)  ，这样就会快很多</p><p>下面是操作案例</p><p><strong>mybaits部分</strong>（单个案例）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  </span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;  </span><br><span class="line">  </span><br><span class="line">&lt;mapper namespace=&quot;com.xyjq.mapper.db1.LoginMemberUserDao&quot;&gt;  </span><br><span class="line">  </span><br><span class="line">    &lt;!--根据供应商id判断是否为注册用户 --&gt;  </span><br><span class="line">    &lt;select id=&quot;isRegisterSupplier&quot; resultType=&quot;com.xyjq.entity.db1.LoginMemberUserEntity&quot;&gt;  </span><br><span class="line">        SELECT supplierId,createTime FROM `login_member_user` WHERE supplierId in  </span><br><span class="line">        &lt;foreach collection=&quot;supplierIdList&quot; item=&quot;supplierId&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;  </span><br><span class="line">            #&#123;supplierId&#125;  </span><br><span class="line">        &lt;/foreach&gt;  </span><br><span class="line">    &lt;/select&gt;  </span><br><span class="line">  </span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>业务层部分</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">List&lt;GpProjectEntity&gt; list = baseDao.queryList(params);  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 提取查询结果里面的supplierID的set集合  </span></span><br><span class="line">Set&lt;Integer&gt; supplierIdList =  list.stream()  </span><br><span class="line">                            .map(GpProjectEntity::getSupplierId)  </span><br><span class="line">                            .filter(Objects::nonNull)  </span><br><span class="line">                            .collect(Collectors.toSet());  </span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">inputFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMddHHmmss&quot;</span>);  </span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);  </span><br><span class="line"><span class="comment">// 以下遍历中防止嵌套for循环O(n^2)，使用map对象存储降低时间复杂度为O(1)  </span></span><br><span class="line"><span class="comment">// 优化设置供应商信息  </span></span><br><span class="line">Map&lt;String, MemberUserEntity&gt; memberUserInfoMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();  </span><br><span class="line">memberUserDao.getMemberUserInfo(supplierIdList).forEach(memberUser -&gt; memberUserInfoMap.put(memberUser.getSupplierId().toString(), memberUser));  </span><br><span class="line"><span class="comment">// 设置供应商的工商地址信息  </span></span><br><span class="line">Map&lt;String, SupplierBussinessInformationEntity&gt; supplierBusinessInfoMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();  </span><br><span class="line">supplierBussinessInformationDao.getSupplierBusinessInfo(supplierIdList).forEach(supplierBusinessInfo -&gt; supplierBusinessInfoMap.put(supplierBusinessInfo.getSupplierId().toString(), supplierBusinessInfo));  </span><br><span class="line"><span class="comment">// 设置是否是注册用户  </span></span><br><span class="line">Map&lt;String, LoginMemberUserEntity&gt; loginMemberUserMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();  </span><br><span class="line">loginMemberUserDao.isRegisterSupplier(supplierIdList).forEach(loginMemberUser -&gt; loginMemberUserMap.put(loginMemberUser.getSupplierId().toString(), loginMemberUser));  </span><br><span class="line"><span class="comment">// 设置是否有融资需求  </span></span><br><span class="line">Map&lt;String, String&gt; financingNeedsMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();  </span><br><span class="line"><span class="comment">// 根据搜索结果，如果key一样就拼接value  </span></span><br><span class="line">financingNeedsDao.getCompFinancingNeeds(supplierIdList).forEach(financingNeeds -&gt; &#123;  </span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> financingNeeds.getSupplierId();  </span><br><span class="line">    <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> FinancingStatus.getDescriptionByCode(financingNeeds.getFinancingProgress()) + <span class="string">&quot;(&quot;</span> + financingNeeds.getCreateTime() + <span class="string">&quot;)&quot;</span>;  </span><br><span class="line">    financingNeedsMap.merge(key, value, (oldValue, newValue) -&gt; oldValue + <span class="string">&quot;, &quot;</span> + newValue);  </span><br><span class="line">&#125;);  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">for</span> (GpProjectEntity project : list) &#123;  </span><br><span class="line">    <span class="comment">// 设置项目名称  </span></span><br><span class="line">    <span class="keyword">if</span> (project.getAgName() != <span class="literal">null</span> &amp;&amp; !project.getAgName().isEmpty()) &#123;  </span><br><span class="line">        project.setProjectNameMergeAgBid(project.getAgName());  </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (project.getJatTpProName() != <span class="literal">null</span> &amp;&amp; !project.getJatTpProName().isEmpty()) &#123;  </span><br><span class="line">        project.setProjectNameMergeAgBid(project.getJatTpProName());  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// 设置项目金额  </span></span><br><span class="line">    <span class="keyword">if</span> (project.getAgTotalMoney() != <span class="literal">null</span>) &#123;  </span><br><span class="line">        project.setProjectMoneyMergeAgBid(project.getAgTotalMoney());  </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">        project.setProjectMoneyMergeAgBid(project.getWinPriceRevised());  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// 设置项目的日期  </span></span><br><span class="line">    <span class="keyword">if</span> (project.getAgSignDate() != <span class="literal">null</span>) &#123;  </span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            date = inputFormat.parse(project.getAgSignDate());  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;  </span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  </span><br><span class="line">        &#125;  </span><br><span class="line">        project.setProjectDateMergeAgBid(dateFormat.format(date));  </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">        project.setProjectDateMergeAgBid( dateFormat.format(project.getJatWinTime()) );  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="type">String</span> <span class="variable">supplierId</span> <span class="operator">=</span> project.getSupplierId().toString();  </span><br><span class="line">    <span class="comment">// 设置供应商信息  </span></span><br><span class="line">    <span class="type">MemberUserEntity</span> <span class="variable">memberUser</span> <span class="operator">=</span> memberUserInfoMap.get(supplierId);  </span><br><span class="line">    <span class="keyword">if</span> (memberUser != <span class="literal">null</span>) &#123;  </span><br><span class="line">        project.setProjectLinkManName(memberUser.getLinkmanName());  </span><br><span class="line">        project.setProjectLinkManPhone(memberUser.getLinkmanPhone());  </span><br><span class="line">        project.setProjectLegalPersonName(memberUser.getLegalPersonName());  </span><br><span class="line">        project.setProjectLegalPersonPhone(memberUser.getLegaPersonPhone());  </span><br><span class="line">        project.setProjectAddress(memberUser.getAddress());  </span><br><span class="line">        project.setProjectRegisterArea(memberUser.getRegisterArea());  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// 设置工商信息省市区  </span></span><br><span class="line">    <span class="type">SupplierBussinessInformationEntity</span> <span class="variable">supplierBussinessInformation</span> <span class="operator">=</span> supplierBusinessInfoMap.get(supplierId);  </span><br><span class="line">    <span class="keyword">if</span> (supplierBussinessInformation != <span class="literal">null</span>) &#123;  </span><br><span class="line">        project.setProjectProvince(supplierBussinessInformation.getProvince());  </span><br><span class="line">        project.setProjectCity(supplierBussinessInformation.getCity());  </span><br><span class="line">        project.setProjectDistrict(supplierBussinessInformation.getDistrict());  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// 设置是否是注册用户  </span></span><br><span class="line">    <span class="type">LoginMemberUserEntity</span> <span class="variable">loginMemberUser</span> <span class="operator">=</span> loginMemberUserMap.get(supplierId);  </span><br><span class="line">    <span class="keyword">if</span> (loginMemberUser != <span class="literal">null</span>) &#123;  </span><br><span class="line">        project.setProjectIsRegisterSupplier(<span class="string">&quot;已注册（&quot;</span> + dateFormat.format(loginMemberUser.getCreateTime()) + <span class="string">&quot;)&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// 设置融资历史记录  </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">financingNeeds</span> <span class="operator">=</span> financingNeedsMap.get(supplierId);  </span><br><span class="line">    <span class="keyword">if</span> (financingNeeds != <span class="literal">null</span>) &#123;  </span><br><span class="line">        project.setProjectFinancingNeeds(financingNeeds);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将同一层级下面的国标行业分类转换成父包含子的形式</title>
      <link href="/2024/02/22/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/python/2024-02-22-%E5%B0%86%E5%90%8C%E4%B8%80%E5%B1%82%E7%BA%A7%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%9B%BD%E6%A0%87%E8%A1%8C%E4%B8%9A%E5%88%86%E7%B1%BB%E8%BD%AC%E6%8D%A2%E6%88%90%E7%88%B6%E5%8C%85%E5%90%AB%E5%AD%90%E7%9A%84%E5%BD%A2%E5%BC%8F/"/>
      <url>/2024/02/22/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/python/2024-02-22-%E5%B0%86%E5%90%8C%E4%B8%80%E5%B1%82%E7%BA%A7%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%9B%BD%E6%A0%87%E8%A1%8C%E4%B8%9A%E5%88%86%E7%B1%BB%E8%BD%AC%E6%8D%A2%E6%88%90%E7%88%B6%E5%8C%85%E5%90%AB%E5%AD%90%E7%9A%84%E5%BD%A2%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>这是一开始的形式（部分）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;农、林、牧、渔业&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;本门类包括 01～05 大类&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A01&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;农业&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;指对各种农作物的种植&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;谷物种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A01&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;指以收获籽实为主的农作物的种植，包括稻 谷、小麦、玉米等农作物的种植和作为饲料和工业原料的谷物的种植&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A0111&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;稻谷种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A0112&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;小麦种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A0113&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;玉米种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A0119&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;其他谷物种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A012&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;豆类、油料和薯类种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A01&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>然后将他们转换成这种形式</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;农、林、牧、渔业&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;本门类包括 01～05 大类&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A01&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;农业&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;指对各种农作物的种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;谷物种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A01&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;指以收获籽实为主的农作物的种植，包括稻 谷、小麦、玉米等农作物的种植和作为饲料和工业原料的谷物的种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;children&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A0111&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;稻谷种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A0112&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;小麦种植&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A011&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>下面是python代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 划分同一个数据下面的各种类别</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文件并解析 JSON 数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_json_file</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        data = json.load(file)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入到 JSON 文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write_json_file</span>(<span class="params">data, file_path</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        json.dump(data, file, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_hierarchy</span>(<span class="params">categories</span>):</span><br><span class="line">    <span class="comment"># 创建一个空的字典列表，用于存储最终结果</span></span><br><span class="line">    result = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建字典，用于将分类按照 id 分组</span></span><br><span class="line">    category_map = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> category <span class="keyword">in</span> categories:</span><br><span class="line">        category_map[category[<span class="string">&#x27;id&#x27;</span>]] = category</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 遍历分类列表，构建分类树</span></span><br><span class="line">    <span class="keyword">for</span> category <span class="keyword">in</span> categories:</span><br><span class="line">        <span class="comment"># 如果当前分类的 pid 为空，则将其视为一级分类</span></span><br><span class="line">        <span class="keyword">if</span> category[<span class="string">&#x27;pid&#x27;</span>] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            result.append(category)</span><br><span class="line">        <span class="comment"># 否则，将当前分类添加到其父分类的 children 列表中</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            parent_id = category[<span class="string">&#x27;pid&#x27;</span>]</span><br><span class="line">            parent_category = category_map.get(parent_id)</span><br><span class="line">            <span class="keyword">if</span> parent_category <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">if</span> <span class="string">&#x27;children&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> parent_category:</span><br><span class="line">                    parent_category[<span class="string">&#x27;children&#x27;</span>] = []</span><br><span class="line">                parent_category[<span class="string">&#x27;children&#x27;</span>].append(category)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">categories = read_json_file(<span class="string">&#x27;D:\ALL_Proj\PyCharm_Proj\pythonProjectDemo01\无标题.json&#x27;</span>)</span><br><span class="line"><span class="comment"># 构建分类树</span></span><br><span class="line">result = build_hierarchy(categories)</span><br><span class="line"><span class="comment"># 写入数据</span></span><br><span class="line">write_json_file(result, <span class="string">&#x27;D:\ALL_Proj\PyCharm_Proj\pythonProjectDemo01\Aresult.json&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;文件写入成功&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>爱一个人真的好难</title>
      <link href="/2024/02/19/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-02-19-%E7%88%B1%E4%B8%80%E4%B8%AA%E4%BA%BA%E7%9C%9F%E7%9A%84%E5%A5%BD%E9%9A%BE/"/>
      <url>/2024/02/19/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2024-02-19-%E7%88%B1%E4%B8%80%E4%B8%AA%E4%BA%BA%E7%9C%9F%E7%9A%84%E5%A5%BD%E9%9A%BE/</url>
      
        <content type="html"><![CDATA[<p>当我经历了一份全身心都投入的失败感情后，突然间发现，我好像失去了爱一个人的能力。或许是哀莫大于心死，我生活的一切都伴随着我的心变得枯燥乏味。我像一个机器人一样的活着，每天执行着三点一线的指令。胖了，丑了，似乎活着的意义只剩下了让自己开心 。以前我是为她而活，昂扬向上，努力刻苦。现在为自己而活，我好像好像失去了动力一样。</p><p>我不断的努力去尝试爱一个人，喜欢一个人，可是到头来却发现，我喜欢的只是她们的外表。从未触及她们的灵魂，我是卑鄙的，挺喜欢的名义坠入声色犬马的世界。</p><p>好想爱一个人，去灵魂的触碰，去心与心的相拥，想去试试那种奋不顾身的感觉，粉身碎骨也无所谓了。。。可是，我又怎么该劝自己呢？</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端实现div的高度拖拽改变</title>
      <link href="/2023/11/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-11-03-%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0div%E7%9A%84%E9%AB%98%E5%BA%A6%E6%8B%96%E6%8B%BD%E6%94%B9%E5%8F%98/"/>
      <url>/2023/11/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-11-03-%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0div%E7%9A%84%E9%AB%98%E5%BA%A6%E6%8B%96%E6%8B%BD%E6%94%B9%E5%8F%98/</url>
      
        <content type="html"><![CDATA[<p>实现代码</p><h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;contactPerson_bottom_div&quot; id=&quot;fuDiv&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;dragDiv&quot; @mousedown=&quot;dragEagle&quot; &gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;SemiSelect /&gt;&lt;/el-icon&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="script"><a href="#script" class="headerlink" title="script"></a>script</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">dragEagle</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> targetDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;fuDiv&#x27;</span>);</span><br><span class="line">            <span class="comment">//得到点击时该地图容器的宽高：</span></span><br><span class="line">            <span class="keyword">var</span> targetDivHeight = targetDiv.<span class="property">offsetHeight</span>;</span><br><span class="line">            <span class="keyword">var</span> startX = e.<span class="property">clientX</span>;</span><br><span class="line">            <span class="keyword">var</span> startY = e.<span class="property">clientY</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">                e.<span class="title function_">preventDefault</span>();</span><br><span class="line">                <span class="comment">//得到鼠标拖动的宽高距离：取绝对值</span></span><br><span class="line">                <span class="keyword">var</span> distY = <span class="title class_">Math</span>.<span class="title function_">abs</span>(e.<span class="property">clientY</span> - startY);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//往上方拖动：</span></span><br><span class="line">                <span class="keyword">if</span> (e.<span class="property">clientY</span> &lt; startY) &#123;</span><br><span class="line">                    targetDiv.<span class="property">style</span>.<span class="property">height</span> = (targetDivHeight + distY) + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//往下方拖动：</span></span><br><span class="line">                <span class="keyword">if</span> (e.<span class="property">clientX</span> &lt; startX &amp;&amp; e.<span class="property">clientY</span> &gt; startY) &#123;</span><br><span class="line">                    targetDiv.<span class="property">style</span>.<span class="property">height</span> = targetDivHeight - distY + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">parseInt</span>(targetDiv.<span class="property">style</span>.<span class="property">height</span>) &gt;= <span class="number">800</span>) &#123;</span><br><span class="line">                    targetDiv.<span class="property">style</span>.<span class="property">height</span> = <span class="number">800</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">parseInt</span>(targetDiv.<span class="property">style</span>.<span class="property">height</span>) &lt;= <span class="number">320</span>) &#123;</span><br><span class="line">                    targetDiv.<span class="property">style</span>.<span class="property">height</span> = <span class="number">320</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">onmouseup</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure><h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.contactPerson_bottom_div</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-top-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-color</span>: black;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">320px</span>;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;<span class="comment">/* 允许垂直滚动 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dragDiv</span>&#123;</span><br><span class="line">   <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex; </span><br><span class="line">    <span class="attribute">align-items</span>: center; </span><br><span class="line">    <span class="attribute">justify-content</span>: center;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dragDiv</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="comment">/* background-color: #666; */</span></span><br><span class="line">    <span class="attribute">cursor</span>: pointer;<span class="comment">/* 在hover的时候，鼠标指针变成手 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先针对需要设置的div添加一个id，再通过getElementById获取到目标div。</p><p>然后在内部添加一个div，可以设置成自己想要的形式，做明显的标记使用。针对这个div设置操作活动@mousedown。也就是当鼠标按下去的时候调用此dragEagle方法，在此之前一定要传入对象参数e。</p><p><code>var targetDivHeight = targetDiv.offsetHeight;</code>: 这行代码获取了目标 <code>div</code> 元素的当前高度，并将其存储在 <code>targetDivHeight</code> 变量中。</p><p><code>var startX = e.clientX;</code> 和 <code>var startY = e.clientY;</code>: 这两行代码分别记录了鼠标点击位置的横坐标（X坐标）和纵坐标（Y坐标），用于后续计算鼠标拖动的距离。</p><p><code>document.onmousemove = function (e) &#123; ... &#125;</code>: 这是一个鼠标移动事件处理程序，当用户按住鼠标左键并移动时，会触发这个事件处理程序。在这个处理程序中，计算了鼠标拖动的距离，并根据拖动的方向来改变目标 <code>div</code> 元素的高度。</p><ul><li><code>e.preventDefault();</code>: 这一行代码用于防止浏览器默认的拖拽行为，确保我们自己的逻辑生效。</li><li>通过比较鼠标当前的 <code>e.clientY</code> 和初始点击时的 <code>startY</code> 来计算垂直方向上的拖动距离 <code>distY</code>。</li><li>接下来的条件判断分别处理向上拖动和向下拖动的情况。如果鼠标向上拖动，就增加目标 <code>div</code> 的高度，如果鼠标向下拖动，就减小目标 <code>div</code> 的高度。这样可以实现调整高度的效果。</li><li>最后的两个条件判断用于限制目标 <code>div</code> 的最小和最大高度，以避免高度超出一定范围</li></ul><p><code>document.onmouseup = function () &#123; ... &#125;</code>: 这是鼠标释放事件处理程序，在鼠标左键释放时触发。它用于清除鼠标移动事件处理程序，即当鼠标释放后停止拖动。</p><p>在这之中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">parseInt</span>(targetDiv.<span class="property">style</span>.<span class="property">height</span>) &gt;= <span class="number">800</span>) &#123;</span><br><span class="line">    targetDiv.<span class="property">style</span>.<span class="property">height</span> = <span class="number">800</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">parseInt</span>(targetDiv.<span class="property">style</span>.<span class="property">height</span>) &lt;= <span class="number">320</span>) &#123;</span><br><span class="line">    targetDiv.<span class="property">style</span>.<span class="property">height</span> = <span class="number">320</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这一段是限制div拖动的最大高度和最小高度</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql的连接函数</title>
      <link href="/2023/11/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-11-03-mysql%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%87%BD%E6%95%B0/"/>
      <url>/2023/11/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-11-03-mysql%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>今天遇到了一个简单的场景，需要sql连接两个字段显示。</p><p>语法是这样的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT_WS(&#x27; &#x27;,snh.userneeds, snh.beizhu) AS connect_info  ,snh.createTime, lmu.createTime as regTime</span><br><span class="line">FROM  `supplier_needs_history` as snh</span><br><span class="line">LEFT JOIN member_user as mu</span><br><span class="line">ON snh.userId = mu.id</span><br><span class="line">LEFT JOIN login_member_user as lmu</span><br><span class="line">on mu.companyCode  = lmu.companyCode</span><br><span class="line">WHERE mu.companyName =&#x27;诚润建工集团有限公司&#x27;</span><br><span class="line">ORDER BY snh.createTime DESC</span><br><span class="line">LIMIT 3;</span><br></pre></td></tr></table></figure><p>一开始用的是CONCA函数，但是当时出现了一个奇怪的情况，后来查询才知道，当我连接的两个字段里面其中一个为null的时候，拼接后的结果也是null</p><p>在查询之后使用了CONCAT_WS函数</p><ol><li><p><code>CONCAT()</code>: <code>CONCAT()</code> 函数用于拼接两个或多个字符串。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(first_name, <span class="string">&#x27; &#x27;</span>, last_name) <span class="keyword">AS</span> full_name <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure></li><li><p><code>CONCAT_WS()</code>: <code>CONCAT_WS()</code> 函数用于拼接字符串，并在每个字符串之间插入指定的分隔符。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT_WS(<span class="string">&#x27;, &#x27;</span>, last_name, first_name) <span class="keyword">AS</span> full_name <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure></li><li><p><code>CONCAT_NULL_YIELDS_NULL</code>: 这是 MySQL 的系统变量，用于控制拼接操作的行为。如果设置为 <code>ON</code>（默认值），当任何一个操作数为 <code>NULL</code> 时，拼接结果将为 <code>NULL</code>。如果设置为 <code>OFF</code>，则不会将 <code>NULL</code> 视为 <code>NULL</code>。</p></li><li><p>字符串运算符 (<code>||</code>): MySQL 支持标准 SQL 中的字符串拼接运算符 <code>||</code>。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name <span class="operator">||</span> <span class="string">&#x27; &#x27;</span> <span class="operator">||</span> last_name <span class="keyword">AS</span> full_name <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure></li></ol><p>这些函数和运算符允许您在 SQL 查询中执行字符串拼接操作。您可以根据自己的需求选择适当的函数或运算符。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WPS-excel向下选中指定行数并填充根据公式计算好的数据</title>
      <link href="/2023/10/22/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-10-22-WPS-excel%E5%90%91%E4%B8%8B%E9%80%89%E4%B8%AD%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E5%B9%B6%E5%A1%AB%E5%85%85%E6%A0%B9%E6%8D%AE%E5%85%AC%E5%BC%8F%E8%AE%A1%E7%AE%97%E5%A5%BD%E7%9A%84%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/10/22/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-10-22-WPS-excel%E5%90%91%E4%B8%8B%E9%80%89%E4%B8%AD%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E5%B9%B6%E5%A1%AB%E5%85%85%E6%A0%B9%E6%8D%AE%E5%85%AC%E5%BC%8F%E8%AE%A1%E7%AE%97%E5%A5%BD%E7%9A%84%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>工作中用到了数据库和excel相结合的用法，来针对我这种mysql和excle都半斤八两的人。在mysql中针对数据字段的拼接，用的还不是很熟悉，所以结合了一下excel，但是数据量又很大，在网上找了好多办法，终于找到一个相对适应于自己的使用场景的。</p><p>先从MySQL中搜索到对应的数据条目</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">snh.id,</span><br><span class="line">mu.companyName AS &#x27;企业名&#x27;,mu.supplierId AS &#x27;供应商id&#x27;</span><br><span class="line">,snh.userneeds AS &#x27;用户需求&#x27; , snh.refuse AS &#x27;拒绝原因&#x27; ,snh.beizhu AS &#x27;备注&#x27;, snh.createTime AS &#x27;创建时间&#x27;</span><br><span class="line">,au.`name` AS &#x27;创建者&#x27;</span><br><span class="line">FROM `表名` as snh </span><br><span class="line">LEFT JOIN member_user AS mu ON snh.userId = mu.id</span><br><span class="line">LEFT JOIN admin_user AS au on snh.createUser = au.id</span><br><span class="line">ORDER BY snh.createTime DESC</span><br></pre></td></tr></table></figure><p>然后用navicate导出excel表</p><p>导出之后新建字段，拼入自己的excle的函数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=CONCAT(<span class="string">&quot;用户需求:&quot;</span>, IF(D2&lt;&gt;<span class="string">&quot;&quot;</span>, D2, <span class="string">&quot;无&quot;</span>), <span class="string">&quot; - 拒绝原因:&quot;</span>, IF(E2&lt;&gt;<span class="string">&quot;&quot;</span>, E2, <span class="string">&quot;无&quot;</span>), <span class="string">&quot; - 备注:&quot;</span>, IF(F2&lt;&gt;<span class="string">&quot;&quot;</span>, F2, <span class="string">&quot;无&quot;</span>))</span><br></pre></td></tr></table></figure><p><strong>在左上角选择自己需要到的行数</strong></p><p><strong>选中之后，按住ctrl+enter（回车）</strong></p><p><strong>按住ctrl+D 即可填充好计算的结果</strong></p><p>然后就可以填充完毕了，当然在小数据量的时候直接下拉就行，这种方式适合数据量相对大一丢i都的。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FRP内网穿透的使用</title>
      <link href="/2023/07/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-07-30-FRP%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/07/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-07-30-FRP%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>今天还好，算是吧frp搞明白了些许，有些时候，一些知识搞不懂， 也许睡醒了就能搞明白了</p><p>现在简单记录一下frp的简单使用</p><h2 id="frp是什么"><a href="#frp是什么" class="headerlink" title="frp是什么"></a>frp是什么</h2><p>简单地说，frp就是一个反向代理软件，它体积轻量但功能很强大，可以<strong>使处于内网或防火墙后的设备对外界提供服务</strong>，它支持HTTP、TCP、UDP等众多协议。我们今天仅讨论TCP和UDP相关的内容。</p><p>项目地址：<a href="https://github.com/fatedier/frp">https://github.com/fatedier/frp</a></p><p>其中frps是服务端的配置，frpc是客户端的配置，每个都有三个文件，服务端只保留服务端的三个，客户端只保留客户端的三个即可。</p><p><strong>Windows客户端启动方式</strong>，打开当前文件夹，输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frpc -c ./frpc.ini</span><br></pre></td></tr></table></figure><p><strong>Linux服务端启动方式</strong>，打开当前文件夹，输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure><h2 id="通过ip穿透"><a href="#通过ip穿透" class="headerlink" title="通过ip穿透"></a>通过ip穿透</h2><p>这种情况只需要拥有一台服务器就可以了。</p><h3 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置"></a>服务端配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 6001</span><br><span class="line">dashboard_port = 6002</span><br><span class="line">token = 12345678</span><br><span class="line">dashboard_user = admin</span><br><span class="line">dashboard_pwd = admin</span><br><span class="line">vhost_http_port = 6003</span><br></pre></td></tr></table></figure><p>现在解释一下服务端配置的一些</p><ol><li><code>bind_port</code>: FRP 服务端或客户端绑定的端口号。服务端用于接收来自客户端的请求，客户端用于连接服务端。（可自定义）</li><li><code>dashboard_port</code>: FRP 的仪表盘（Dashboard）端口号。通过这个端口，您可以使用 Web 界面来查看 FRP 的状态和运行情况。（可自定义）</li><li><code>token</code>: FRP 鉴权的 Token。Token 是客户端连接到服务端时进行验证的凭据，用于确保只有具有正确 Token 的客户端可以连接到服务端。（可自定义）</li><li><code>dashboard_user</code>: FRP 仪表盘v的用户名。（可自定义）</li><li><code>dashboard_pwd</code>: FRP 仪表盘的密码。（可自定义）</li><li><code>vhost_http_port</code>: 虚拟主机 HTTP 端口。如果您启用了虚拟主机功能，这个端口将用于 HTTP 请求。（可自定义）</li></ol><p>当然这里我之打开了http端口，如果你还想的话可以打开https，socket，tcp等各种链接的端口，这些都是可以自定义的</p><h3 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 101.42.5.22</span><br><span class="line">server_port = 6001</span><br><span class="line">token = 12345678</span><br><span class="line"></span><br><span class="line">[web] </span><br><span class="line"><span class="built_in">type</span> = http</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 4000</span><br><span class="line">remote_port = 6003</span><br><span class="line">custom_domains = 101.42.5.22</span><br></pre></td></tr></table></figure><ol><li><code>[common]</code> 部分：<ul><li><code>server_addr</code>: FRP 服务端的 IP 地址或域名。</li><li><code>server_port</code>: FRP 服务端的端口号。</li><li><code>token</code>: FRP 鉴权的 Token，与服务端配置中的 Token 要一致。</li></ul></li><li><code>[web]</code> 部分：<ul><li><code>type</code>: 代理类型，这里是 http 类型，用于配置 HTTP 代理。</li><li><code>local_ip</code>: 要代理的本地 IP 地址，这里设置为 <code>127.0.0.1</code> 表示代理本地。</li><li><code>local_port</code>: 要代理的本地端口号，这里设置为 <code>4000</code>。</li><li><code>remote_port</code>: 服务端映射的端口号，客户端请求该端口时将被代理到本地的 <code>local_port</code> 上。</li><li><code>custom_domains</code>: 自定义域名，这里设置为 <code>101.42.5.22</code>。</li></ul></li></ol><p>其中<code>[web]</code>可以自定义但是要注意名称不能重复</p><h2 id="通过域名穿透"><a href="#通过域名穿透" class="headerlink" title="通过域名穿透"></a>通过域名穿透</h2><p>这种情况需要配置好域名，服务器的解析，做好解析后才能开始配置。一些服务器提供厂商的还需要再控制台释放对应端口（比如腾讯云，阿里云）。</p><h3 id="服务端配置-1"><a href="#服务端配置-1" class="headerlink" title="服务端配置"></a>服务端配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 6001</span><br><span class="line">dashboard_port = 6002</span><br><span class="line">token = 12345678</span><br><span class="line">dashboard_user = admin</span><br><span class="line">dashboard_pwd = admin</span><br><span class="line">vhost_http_port = 6003</span><br><span class="line">subdomain_host = twoitmen.club</span><br></pre></td></tr></table></figure><p>相同配置不做赘述，这里多出来一个<code>subdomain_host</code>，在这里<code>subdomain_host</code>的作用是自定义子域名的主机名。比如我的服务器绑定的域名是twoitmen.club（我解析的时候喜欢用*做解析，一次配置，随便使用）。那我我在这里填写twoitmen.club就可以了。</p><h3 id="客户端配置-1"><a href="#客户端配置-1" class="headerlink" title="客户端配置"></a>客户端配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 101.42.5.22</span><br><span class="line">server_port = 6001</span><br><span class="line">token = 12345678</span><br><span class="line"></span><br><span class="line">[web] </span><br><span class="line"><span class="built_in">type</span> = http</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 4000</span><br><span class="line">remote_port = 6003</span><br><span class="line">subdomain = frp</span><br></pre></td></tr></table></figure><p>相同配置不做赘述，这里多出来一个<code>subdomain</code>，在这里<code>subdomain</code>的作用是子域名，用于标识代理服务。也就是说，我要访问frp.twoitmen.club:6003就是我穿透完毕后的域名地址。</p><h3 id="nginx配置"><a href="#nginx配置" class="headerlink" title="nginx配置"></a>nginx配置</h3><p>在这里多出来一个nginx配置，它是用来反向代理的，就是省略后面端口号的书写</p><h4 id="通过域名穿透的方式的nginx配置"><a href="#通过域名穿透的方式的nginx配置" class="headerlink" title="通过域名穿透的方式的nginx配置"></a>通过域名穿透的方式的nginx配置</h4><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#user  nobody;</span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    include /home/conf/*.conf;</span><br><span class="line">    keepalive_timeout  <span class="number">65</span>;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    location /memos &#123;</span><br><span class="line">    proxy_pass  http://<span class="number">101</span>.<span class="number">42</span>.<span class="number">5</span>.<span class="number">22</span>:<span class="number">6060</span>; # 转发规则</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">        error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /<span class="number">50</span>x.html;</span><br><span class="line">        location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name  frp.twoitmen.club;</span><br><span class="line">          location / &#123;</span><br><span class="line">      proxy_pass http://frp.twoitmen.club:<span class="number">6003</span>/;</span><br><span class="line">      proxy_set_header Host $host;</span><br><span class="line">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在这里只是多出来一个server，这里简单讲述一下多出来的server配置</p><ol><li><code>listen 80;</code>: 监听来自端口 80 的 HTTP 请求。</li><li><code>server_name frp.twoitmen.club;</code>: 指定该服务器块的域名为 <code>frp.twoitmen.club</code>。</li><li><code>location / &#123; ... &#125;</code>: 这是一个代理规则，它会将来自 <code>/</code> 路径的请求转发到 <code>http://frp.twoitmen.club:6003/</code> 上。</li><li><code>proxy_pass http://frp.twoitmen.club:6003/;</code>: 它指定了要转发到的目标地址为 <code>http://frp.twoitmen.club:6003/</code>。</li><li><code>proxy_set_header Host $host;</code>: 在转发请求时，设置了 <code>Host</code> 请求头为原始请求的主机名。</li><li><code>proxy_set_header X-Real-IP $remote_addr;</code>: 在转发请求时，设置了 <code>X-Real-IP</code> 请求头为原始请求的客户端 IP 地址。</li></ol><h2 id="将frps命令写入system"><a href="#将frps命令写入system" class="headerlink" title="将frps命令写入system"></a>将frps命令写入system</h2><p>输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /lib/systemd/system/frps.service</span><br></pre></td></tr></table></figure><p>写入配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=frps service</span><br><span class="line">After=network.target syslog.target</span><br><span class="line">Wants=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line"><span class="comment"># 启动服务的命令（此处写你的frps的实际安装目录）</span></span><br><span class="line"><span class="comment"># ExecStart=/your/path/frps -c /your/path/frps.ini</span></span><br><span class="line">ExecStart=/home/zhang/frpServer/frps -c /home/zhang/frpServerfrps.ini</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3无关系组件之间的方法调用</title>
      <link href="/2023/07/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-07-30-vue3%E6%97%A0%E5%85%B3%E7%B3%BB%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/"/>
      <url>/2023/07/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-07-30-vue3%E6%97%A0%E5%85%B3%E7%B3%BB%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>要实现在第一个页面中的方法 <code>onClick</code> 调用第二个页面中的 <code>updateBankToUser</code> 方法，我们可以使用事件总线来实现跨组件通信。在Vue 3中，我们可以使用 <code>mitt</code> 库来创建事件总线。</p><p>首先，安装 <code>mitt</code> 库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mitt</span><br></pre></td></tr></table></figure><p>然后，我们可以创建一个全局的事件总线，并在第二个页面中将 <code>updateBankToUser</code> 方法注册为一个事件处理程序，然后在第一个页面的 <code>onClick</code> 方法中触发这个事件，从而调用第二个页面中的方法。</p><p>以下是示例代码：</p><p><strong>创建全局事件总线 bus.ts：</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bus.ts</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> bus = <span class="title function_">mitt</span>();</span><br></pre></td></tr></table></figure><p><strong>第二个页面 user.vue：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- ...其他代码... --&gt;</span><br><span class="line">    &lt;el-button @click=&quot;updateBankToUser&quot;&gt;更新银行的用户&lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; bus &#125; from &#x27;./bus&#x27;;</span><br><span class="line"></span><br><span class="line">const updateBankToUser = async () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;更新银行的用户&#x27;);</span><br><span class="line">  // 在这里执行您的业务逻辑</span><br><span class="line">&#125;</span><br><span class="line">bus.on(&#x27;callUpdateBankToUser&#x27;, updateBankToUser);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>第一个页面 parent.vue：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-button @click=&quot;onClick&quot;&gt;点击调用第二个页面的方法&lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; bus &#125; from &#x27;./bus&#x27;;</span><br><span class="line"></span><br><span class="line">const onClick = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;调用第二个页面的方法&#x27;);</span><br><span class="line">  // 在这里执行您的业务逻辑</span><br><span class="line">  bus.emit(&#x27;callUpdateBankToUser&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>在这个示例中，我们在 bus.ts 中创建了一个全局事件总线 <code>bus</code>。然后在第二个页面 user.vue 中，我们将 <code>updateBankToUser</code> 方法注册为名为 ‘callUpdateBankToUser’ 的事件处理程序。在第一个页面 parent.vue 中的 <code>onClick</code> 方法中，我们使用 <code>bus.emit</code> 触发了 ‘callUpdateBankToUser’ 事件，从而调用了第二个页面中的 <code>updateBankToUser</code> 方法。</p><p>通过这种方式，您可以在不直接引用第二个页面的情况下，实现跨组件调用其中的方法。</p><h2 id="什么是全局事件总线bus-ts-import-mitt-from-‘mitt’-export-const-bus-mitt-两行的作用是啥"><a href="#什么是全局事件总线bus-ts-import-mitt-from-‘mitt’-export-const-bus-mitt-两行的作用是啥" class="headerlink" title="什么是全局事件总线bus.ts import mitt from ‘mitt’; export const bus &#x3D; mitt(); 两行的作用是啥"></a>什么是全局事件总线bus.ts import mitt from ‘mitt’; export const bus &#x3D; mitt(); 两行的作用是啥</h2><p>在这里，<code>bus.ts</code> 文件中的两行代码用来创建全局事件总线。全局事件总线是一个简单的事件管理器，它可以用于在应用程序中实现组件之间的通信，特别是当组件之间没有直接父子关系时。</p><p>具体来说，这两行代码的作用是：</p><ol><li><p><code>import mitt from &#39;mitt&#39;;</code>: 这里我们导入了 <code>mitt</code> 库，它是一个简单、小巧的 JavaScript 事件库。<code>mitt</code> 库允许我们创建事件总线，以便在应用程序的任何地方都可以访问该事件总线。</p></li><li><p><code>export const bus = mitt();</code>: 在这里，我们创建了一个全局的事件总线 <code>bus</code> 并将其导出。通过 <code>mitt()</code> 调用，我们创建了一个新的事件总线实例，可以用来管理事件的注册、触发和取消。</p></li></ol><p>总结起来，<code>bus.ts</code> 文件中的这两行代码的目的是创建一个全局的事件总线，以便在应用程序的任何地方都可以使用它进行组件之间的通信。通过这个全局事件总线，我们可以在不直接引用其他组件的情况下，实现组件之间的方法调用和数据传递。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql中like的查询效率</title>
      <link href="/2023/07/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-07-25-mysql%E4%B8%ADlike%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87/"/>
      <url>/2023/07/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-07-25-mysql%E4%B8%ADlike%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87/</url>
      
        <content type="html"><![CDATA[<p>like %索引%和like   索引%的区别</p><p>在 MySQL 中，当使用 <code>LIKE</code> 条件进行字符串匹配时，如果在索引列上使用 <code>LIKE %索引%</code> 和 <code>LIKE 索引%</code> 这两种形式，会有不同的查询性能和结果。</p><ol><li><p><code>LIKE %索引%</code>：<br>这种情况下，<code>%</code> 通配符位于搜索字符串的开头和结尾，表示可以匹配任意字符。例如，假设索引列是 <code>column_name</code>，我们执行以下查询：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> column_name <span class="keyword">LIKE</span> <span class="string">&#x27;%索引%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>这将查找 <code>column_name</code> 列中包含有 <code>索引</code> 子字符串的所有行。</p></li><li><p><code>LIKE 索引%</code>：<br>这种情况下，<code>%</code> 通配符仅位于搜索字符串的结尾，表示只匹配以指定字符串开头的值。例如，假设索引列仍然是 <code>column_name</code>，我们执行以下查询：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> column_name <span class="keyword">LIKE</span> <span class="string">&#x27;索引%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>这将查找 <code>column_name</code> 列中以 <code>索引</code> 开头的所有行。</p></li></ol><p>区别：</p><ul><li><code>LIKE %索引%</code> 的查询可能会涉及全表扫描，因为通配符 <code>%</code> 出现在搜索字符串的开头和结尾，导致无法利用索引。</li><li><code>LIKE 索引%</code> 的查询可以利用索引，因为通配符 <code>%</code> 仅出现在搜索字符串的结尾，允许数据库引擎使用索引的前缀部分进行匹配，从而提高查询性能。</li></ul><p>通常情况下，如果可能，应尽量避免使用 <code>LIKE %索引%</code> 这种形式，特别是对于大型数据表，因为它可能导致较慢的查询性能。如果只需要查找以某个字符串开头的值，应该使用 <code>LIKE 索引%</code> 形式，以便利用索引优化查询。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用windows定时器实现每天数据库的备份</title>
      <link href="/2023/07/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-07-25-%E5%88%A9%E7%94%A8windows%E5%AE%9A%E6%97%B6%E5%99%A8%E5%AE%9E%E7%8E%B0%E6%AF%8F%E5%A4%A9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD/"/>
      <url>/2023/07/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-07-25-%E5%88%A9%E7%94%A8windows%E5%AE%9A%E6%97%B6%E5%99%A8%E5%AE%9E%E7%8E%B0%E6%AF%8F%E5%A4%A9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD/</url>
      
        <content type="html"><![CDATA[<p>事情的起因是今早上我更改前端页面的时候忽然发现，前端数据显示全是一系列的乱码什么的，似乎是被人恶意注入了，简直太痛了。自己没有mysql定时备份的习惯，所以只能含泪偷哭，好在我同事有，多亏他救了一命，还好数据还在。但是他每天都手动备份，着实有些麻烦了。小小的偷懒一下，懒惰是人们进步的阶梯。</p><p>因为windows有<strong>任务计划程序</strong>的原因，所以我们只需要写好bash脚本就可以。</p><h2 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">:: 配置数据库用户</span><br><span class="line">SET DB_USER=root</span><br><span class="line"></span><br><span class="line">:: 配置数据库密码</span><br><span class="line">SET DB_PASSWORD=root123</span><br><span class="line"></span><br><span class="line">:: 配置备份的数据库名称</span><br><span class="line">SET DB_NAME=security_enterprise</span><br><span class="line"></span><br><span class="line">:: 配置备份的文件路径</span><br><span class="line">SET SAVE_PATH=D:\MySqlBackup</span><br><span class="line"></span><br><span class="line">:: 配置mysqldump的路径,有空格的要加上双引号</span><br><span class="line">SET MYSQL_DUMP_PATH=D:\Environment\mysql-5.7.40\bin\mysqldump.exe</span><br><span class="line"></span><br><span class="line">:: 开始工作</span><br><span class="line">:: 跳转到工作目录下</span><br><span class="line">%SAVE_PATH:~0,2%</span><br><span class="line"><span class="built_in">cd</span> %SAVE_PATH%</span><br><span class="line">:: 设置变量：备份文件名</span><br><span class="line">SET BAK_FILE=%SAVE_PATH%\security_enterprise_bak_%<span class="built_in">date</span>:~0,4%_%<span class="built_in">date</span>:~5,2%_%<span class="built_in">date</span>:~8,2%.sql</span><br><span class="line">:: 开始做备份</span><br><span class="line">%MYSQL_DUMP_PATH% -u%DB_USER% -p%DB_PASSWORD% %DB_NAME%&gt;%BAK_FILE%</span><br></pre></td></tr></table></figure><p>在里面很清楚了，在此不做赘述。</p><h2 id="windows任务计划程序"><a href="#windows任务计划程序" class="headerlink" title="windows任务计划程序"></a>windows任务计划程序</h2><h4 id="设置名称描述以及安全选项"><a href="#设置名称描述以及安全选项" class="headerlink" title="设置名称描述以及安全选项"></a>设置名称描述以及安全选项</h4><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/2848937817.png"></p><h4 id="设置触发器"><a href="#设置触发器" class="headerlink" title="设置触发器"></a>设置触发器</h4><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/3967589268.png"></p><h4 id="设置操作"><a href="#设置操作" class="headerlink" title="设置操作"></a>设置操作</h4><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/1639975429.png"></p><h4 id="设置一下意外情况"><a href="#设置一下意外情况" class="headerlink" title="设置一下意外情况"></a>设置一下意外情况</h4><p>这里是防止备份失败进行的容错处理，可以做此步骤</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/4015595544.png"></p><p>经过一系列的设置，就会每天在固定时间在我的D:\MySqlBackup目录下面生成一个备份文件，防止出错了。</p><p><img src="https://blog.ittoolman.com/usr/uploads/2024/10/1076376555.png"></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小白向-用GitHubAction实现阿里云盘自动打卡</title>
      <link href="/2023/07/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-07-25-%E5%B0%8F%E7%99%BD%E5%90%91-%E7%94%A8GitHubAction%E5%AE%9E%E7%8E%B0%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1/"/>
      <url>/2023/07/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-07-25-%E5%B0%8F%E7%99%BD%E5%90%91-%E7%94%A8GitHubAction%E5%AE%9E%E7%8E%B0%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1/</url>
      
        <content type="html"><![CDATA[<p>开门见山，针对程序员来说，如果每天都手动签到岂不是很费力，昨天和我同学闲聊的时候，发现他在用py实现各种签到的打卡，看的我是狠狠的抽自己脸，怎么能手动打卡呢！！！尊严何在？</p><p>因为上个月在吾爱上看见一个<a href="https://www.52pojie.cn/home.php?mod=space&uid=1942406">zhuoxin99</a>大佬发了一个<a href="https://www.52pojie.cn/forum.php?mod=viewthread&tid=1785892&extra=page=1&filter=typeid&typeid=388">某盘签到</a>的一个java项目，今天正好心血来潮准备改改修修补补的。因为对GitHub的Action没有什么了解，所以有点怵头。修修补补最终是弄好了</p><p>项目地址：<a href="https://github.com/dellevin/ToDoTaskForGithubAction">https://github.com/dellevin/ToDoTaskForGithubAction</a></p><p>下面针对像我这样的技术小白说一下几个技术要点：</p><h2 id="创建工作流"><a href="#创建工作流" class="headerlink" title="创建工作流"></a>创建工作流</h2><p>在<code>./github/workflows</code> 的文件夹下面创建yml文件，文件名随便，后缀名一定是yml的格式</p><h2 id="编写配置"><a href="#编写配置" class="headerlink" title="编写配置"></a>编写配置</h2><p>下面贴一下我的完整配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Java</span> <span class="string">CI</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;30 22 * * *&quot;</span>  <span class="comment"># 北京时间上午06:30</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span>   <span class="comment"># 添加 workflow_dispatch 触发器，用于手动运行</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">code</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">JDK</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-java@v1</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">java-version:</span> <span class="string">&#x27;11&#x27;</span> <span class="comment"># 这里可以指定你需要的 Java 版本</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">Maven</span> <span class="string">packages</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">~/.m2</span></span><br><span class="line">        <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-m2-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/pom.xml&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">restore-keys:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-m2</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">with</span> <span class="string">Maven</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">mvn</span> <span class="string">-B</span> <span class="string">package</span> <span class="string">--file</span> <span class="string">pom.xml</span>   <span class="comment"># 使用 Maven 进行项目构建，可以根据你的项目需要修改命令</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">run</span> <span class="string">Java</span> <span class="string">Application</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        java -Djava.security.manager -Djava.security.policy==src/main/resources/policy.policy -jar  target/ToDoTask.jar</span></span><br><span class="line"><span class="string"></span>      <span class="comment"># 附带权限加载运行程序</span></span><br><span class="line">      <span class="attr">env:</span></span><br><span class="line">        <span class="attr">REFRESH_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.REFRESH_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>name: Java CI</code>表示我的工作流叫做Java CI</p><p>on里面我就不写了，已经打注释了</p><p>接下来是重头戏是job里面的东西们</p><p><code>runs-on: ubuntu-latest</code>表示我在这个ubuntu的系统上运行的（一个linux系统）</p><p><code>build</code>任务首先做checkout代码操作。</p><p>接下来是构建步骤，</p><p><code>- name</code> 表示我这个步骤叫什么名</p><p>下面表示我是java11版本运行的</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">uses:</span> <span class="string">actions/setup-java@v1</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">java-version:</span> <span class="string">&#x27;11&#x27;</span> <span class="comment"># 这里可以指定你需要的 Java 版本</span></span><br></pre></td></tr></table></figure><p>这一步表示 缓存Maven本地包,加速构建，避免了每次运行都要下载maven里面引入的包（ps：我是看别人写的copy过来的）</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">Maven</span> <span class="string">packages</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">~/.m2</span></span><br><span class="line">    <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-m2-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/pom.xml&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">restore-keys:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-m2</span></span><br></pre></td></tr></table></figure><p>使用Maven进行项目打包构建。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">with</span> <span class="string">Maven</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">mvn</span> <span class="string">-B</span> <span class="string">package</span> <span class="string">--file</span> <span class="string">pom.xml</span>   <span class="comment"># 使用 Maven 进行项目构建，可以根据你的项目需要修改命令</span></span><br></pre></td></tr></table></figure><p>最后调用Java命令运行打包生成的JAR文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">run</span> <span class="string">Java</span> <span class="string">Application</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    java -Djava.security.manager -Djava.security.policy==src/main/resources/policy.policy -jar  target/ToDoTask.jar</span></span><br><span class="line"><span class="string"></span>  <span class="comment"># 附带权限加载运行程序</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">REFRESH_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.REFRESH_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>其中<code>-Djava.security.manager -Djava.security.policy==src/main/resources/policy.policy</code>的作用是设置权限，让github设置的screct传入进来，也就是传入到ToDoTask类里面的<code>private static final String refresh_token = System.getenv(&quot;REFRESH_TOKEN&quot;);</code>里面，其中<code>System.getenv(&quot;REFRESH_TOKEN&quot;)</code>就是用来获取GitHub设置的screct的，通过yml配置文件里面的，</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">REFRESH_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.REFRESH_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>进行传入，如果不加入<code>-Djava.security.manager -Djava.security.policy==src/main/resources/policy.policy</code>这句话的话refresh_token 获取的一直是null。。。。。</p><p>因为我每次运行都是各种权限错误，运行一次加一次，最后索性在policy文件下面加了一个<code>permission java.security.AllPermission;</code>释放所有权限</p><p>报错log（部分）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">----<span class="number">1</span></span><br><span class="line">Error: Exception in thread <span class="string">&quot;main&quot;</span> java.lang.IllegalStateException: java.security.AccessControlException: access <span class="title function_">denied</span> <span class="params">(<span class="string">&quot;java.lang.RuntimePermission&quot;</span> <span class="string">&quot;getProtectionDomain&quot;</span>)</span></span><br><span class="line">----<span class="number">2</span></span><br><span class="line">access <span class="title function_">denied</span> <span class="params">(<span class="string">&quot;java.lang.RuntimePermission&quot;</span> <span class="string">&quot;setFactory&quot;</span>)</span></span><br><span class="line">----<span class="number">3</span></span><br><span class="line">access <span class="title function_">denied</span> <span class="params">(<span class="string">&quot;java.util.PropertyPermission&quot;</span> <span class="string">&quot;java.protocol.handler.pkgs&quot;</span> <span class="string">&quot;read&quot;</span>)</span></span><br><span class="line">----<span class="number">4</span></span><br><span class="line">access <span class="title function_">denied</span> <span class="params">(<span class="string">&quot;java.util.PropertyPermission&quot;</span> <span class="string">&quot;java.protocol.handler.pkgs&quot;</span> <span class="string">&quot;write&quot;</span>)</span></span><br><span class="line">----<span class="number">5</span></span><br><span class="line">access <span class="title function_">denied</span> <span class="params">(<span class="string">&quot;java.lang.RuntimePermission&quot;</span> <span class="string">&quot;getProtectionDomain&quot;</span>)</span></span><br><span class="line">    </span><br><span class="line">然后好多权限报错问题，运行一次报一次。。。。。。</span><br></pre></td></tr></table></figure><h3 id="yml配置之-项目切忌class方式运行"><a href="#yml配置之-项目切忌class方式运行" class="headerlink" title="yml配置之 项目切忌class方式运行"></a>yml配置之 项目切忌class方式运行</h3><p>一开始我是懵的，创建的是springboot的项目，然后就要编写如何运行java文件的东西，一开始我选择的是采用直接编译java文件运行class类的方式。</p><p>这种方式是大错特错的，因为是项目的原因，必须要引入这个</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name: Build with Maven</span><br><span class="line">run: mvn -B package --file pom.xml </span><br></pre></td></tr></table></figure><h3 id="pom配置之-一定要加bulid"><a href="#pom配置之-一定要加bulid" class="headerlink" title="pom配置之 一定要加bulid"></a>pom配置之 一定要加bulid</h3><p>也就是说一定要加入下面这段，finalName标签是必须要的，因为是打包成一个jar包运行的是一个jar包，你不加finalName人家都不知道运行啥，运行class文件吗，别搞笑了。</p><p>另外plugins标签里面也一定要加上，因为该插件提供了打包和运行Spring Boot项目的能力。添加这个插件后可以直接使用mvn spring-boot:run来运行Spring Boot应用，我不加上无法运行jar包。。。。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    打包后的文件名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>ToDoTask<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="java文件之获取传入进来的token"><a href="#java文件之获取传入进来的token" class="headerlink" title="java文件之获取传入进来的token"></a>java文件之获取传入进来的token</h3><p>我一直好奇的是<code>REFRESH_TOKEN: $&#123;&#123; secrets.REFRESH_TOKEN &#125;&#125;</code>这段是如何传入进来的，结果百度无果之后果断问了gpt，他告诉我用<code>System.getenv(&quot;REFRESH_TOKEN&quot;)</code>接收就好（ps：gpt真厉害）。在我运行工作流之后，发现token是null，很明显是没传入进来嘛，然后又去问，他告诉我要设置权限，也就是上面提到的哪些。。。。这样下来，最终是完成了这个</p><p>其中</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">    <span class="attr">REFRESH_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.REFRESH_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>这一段你要放在外面就是全局变量，你要放在里面就是局部变量</p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>Github Action对于公有仓库是免费的，对于私有仓库用户提供了一定的免费额度：</p><ul><li>对于运行在Linux上的作业，github提供了2000分钟的免费额度；</li><li>Github提供了10G免费的缓存，并且会对7天内未被访问的key进行删除；</li><li>以上的使用限额，会在每个月进行重置；</li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>由刷视频从喜羊羊到大黄蜂的思考</title>
      <link href="/2023/05/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-05-27-%E7%94%B1%E5%88%B7%E8%A7%86%E9%A2%91%E4%BB%8E%E5%96%9C%E7%BE%8A%E7%BE%8A%E5%88%B0%E5%A4%A7%E9%BB%84%E8%9C%82%E7%9A%84%E6%80%9D%E8%80%83/"/>
      <url>/2023/05/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-05-27-%E7%94%B1%E5%88%B7%E8%A7%86%E9%A2%91%E4%BB%8E%E5%96%9C%E7%BE%8A%E7%BE%8A%E5%88%B0%E5%A4%A7%E9%BB%84%E8%9C%82%E7%9A%84%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<p>今天周六早上起床，心血来潮开始刷视频，不知不觉时间就像被偷走一样，和游戏类似，两三个小时转瞬即逝。我每次都想着，诶呀一个一分多钟的视频算什么，下一个！于是在百个视频过去后一上午的时间也消失了。</p><p>从喜羊羊，到情感生活，到家庭育儿，到程序编码，到机器制作，再到科幻制作，再到大黄蜂。你可能会奇怪，喜羊羊和情感生活有什么关系，家庭育儿和程序编码有什么关系，机器制作和科幻制作又有什么关系。其实这些没有奇怪的地方，喜羊羊里面的喜羊羊美羊羊沸羊羊的关系引出情感，儿童的幼年编程引出了程序编码，机器制作的炫酷效果引出了科幻制作。</p><p>一个视频就像细胞上面的无数的受体和另一个细胞上面的配体一样，他们那种概念的联系将一个个视频连锁成宇宙中的群星看似毫无联系，细看却是万般变化的星座。</p><p>我在想是什么变成这样的呢？标签？模糊的标签？也许是这样，但这这是一种浅显的理解吧！因为这种标签，把他们分成了不同的种类，划分成不同的视频，然后用一个概念展示给我们看。罗翔老师讲过一个他的一件故事，他在上大学的时候，初入大学很多一个地区的人会互相认识，他去了他们省的聚会，然后他突然发现下次的聚合没有叫他，才知道是一个市区的聚会。具体内容我早已忘记，但是大概意思是这样的。我们每个人都像网络视频那样被打上了标签，我们用这个来区分自己的同类，异类。我们会和同类笑着说“看啊！那个人说话好怪啊！看啊！那个人吃饭的样子好丑”但是也许你在你同类眼里也是个异类，一个嘲笑他人的异类。于是你不断给自己打标签，做完这个做那个，加入这个加那个，最终像一只蝙蝠一样，鸟兽不分。</p><p>扯远了。其实这种标签带来的分化自古就有，可以具象的堪称阶级划分，就像盖茨比赚了再多的钱，举办了再多的宴会也融入不进去权贵阶层。可以抽象的理解为人们的闲话，谁家怎么怎么了，那家又如何如何。这种东西就像是无形的线，勒住我们的思想和手指。大数据的判别让我们困于信息茧房，让我们只看到自己想看的（比如追星的人会刷到自己喜欢明星的一切，不喜欢那个明星的则会刷到各种搞怪的视频）。我们的思想逐渐变得狭隘，三分钟的视频让我们的喜欢和伤心都会变得特别廉价。我经常看到的一句话就是“原本很开心的，看到你这里绷不住了”，“挺难受的，你这评论给我笑嘻了”无数的视频过去，让我们的喜欢随便的说出口，让我们的痛苦说来就来。</p><p>很难不否认短视频在释放压力方面是对当代打工人的良药。快节奏+短视频带给无数人不一样的生活见地，可是这种方式终归是饮鸩止渴，浅陋而自大的。你再也不会记得白鹿原里的白嘉轩，只会明白他叫大壮，我们再也不会记得南海十三郎里面的江誉镠，也许他的名字会叫作小亮。真不知百年之后人们的思想会是如何。</p><p>我相信还是会有下一个鲁迅的，那种《中国人难道失掉自信力了吗》那种俯首甘为孺子牛的鲁迅。用笔尖刺痛每一人的脊梁。也许我们不是愚蠢，只是不想醒罢了。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于vue，ts，echart整合显示地图的实现方式</title>
      <link href="/2023/05/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-24-%E5%85%B3%E4%BA%8Evue%EF%BC%8Cts%EF%BC%8Cechart%E6%95%B4%E5%90%88%E6%98%BE%E7%A4%BA%E5%9C%B0%E5%9B%BE%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/"/>
      <url>/2023/05/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-24-%E5%85%B3%E4%BA%8Evue%EF%BC%8Cts%EF%BC%8Cechart%E6%95%B4%E5%90%88%E6%98%BE%E7%A4%BA%E5%9C%B0%E5%9B%BE%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>这两天需要做一个大屏的东西，看着网上那个地图的效果很酷很炫，所以想整一个这样的东西，话不多说，开始整。因为项目本体是人人开源项目，我是在这个基础上做的一个二次开发吧。后端代码就省略了。其实很简单。在此就不会做太多的赘述了。</p><h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><p>不过有一个点是可以关注的，就是当你的数据库过于庞大的话，我们可以建一个缓存。也就是一下的示例代码。</p><p>2023年5月25日：针对这个数据，因为map里面是放到缓存中了，一直没有释放，所以改用redis，又因为这个是二次开发的项目，所以人家对redis进行了一系列的改造，我在自己新建redis配置类的时候一直报错有冲突，所以在看了一下结构之后，对后端的代码进行了一系列的重构。</p><h3 id="redis工具类"><a href="#redis工具类" class="headerlink" title="redis工具类"></a>redis工具类</h3><p>用于从 Redis 中获取缓存数据或者将数据存入 Redis</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">getListFromRedis</span><span class="params">(String key)</span> &#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">cachedData</span> <span class="operator">=</span> get(key);</span><br><span class="line">    <span class="keyword">if</span> (cachedData != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 如果缓存中存在数据，则将其转换为 List 对象并返回</span></span><br><span class="line">        <span class="keyword">return</span> (List) cachedData;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 如果缓存中不存在数据，则返回空列表</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setListToRedis</span><span class="params">(String key, List&lt;Object&gt; data, <span class="type">long</span> expire)</span> &#123;</span><br><span class="line">    set(key, data, expire);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="控制层"><a href="#控制层" class="headerlink" title="控制层"></a>控制层</h3><p>修改 <code>getEnterpriseNums</code> 方法，以先从 Redis 中获取数据，如果缓存中存在数据，则直接返回；如果缓存中不存在数据，则从数据库中获取数据，并将其存入 Redis 缓存中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisUtils redisUtils;</span><br><span class="line">  <span class="meta">@GetMapping(&quot;/enterpriseNums&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;返回地图上的区域数据&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">getEnterpriseNums</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//        List&lt;ShowEnterpriseDetailsNumsDTO&gt; enterpriseDetailsList = enterpriseDetailsService.getEnterpriseNums();</span></span><br><span class="line"><span class="comment">//        return  new Result().ok(enterpriseDetailsList);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">redisKey</span> <span class="operator">=</span> <span class="string">&quot;enterpriseNums&quot;</span>; <span class="comment">// 定义 Redis 缓存的键名</span></span><br><span class="line">        <span class="type">List</span> <span class="variable">enterpriseDetailsList</span> <span class="operator">=</span> redisUtils.getListFromRedis(redisKey);</span><br><span class="line">        <span class="keyword">if</span> (enterpriseDetailsList.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// 从数据库中获取数据</span></span><br><span class="line">            enterpriseDetailsList = enterpriseDetailsService.getEnterpriseNums();</span><br><span class="line">            <span class="comment">// 将数据存入 Redis 缓存，设置过期时间为一小时</span></span><br><span class="line">            redisUtils.setListToRedis(redisKey, enterpriseDetailsList, RedisUtils.HOUR_ONE_EXPIRE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>().ok(enterpriseDetailsList);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><del>首先从 <code>showEnterpriseDetailsServicesCache</code> 缓存中获取工厂信息列表数据。如果列表数据为空（即缓存中没有数据），则调用 <code>enterpriseDetailsService.getEnterpriseNums()</code> 方法获取工厂信息数据，并将其存入缓存中。在下次调用 <code>getEnterpriseNums()</code> 方法时，将直接从缓存中获取数据，避免了重复查询的开销。</del></p><p>通过以上优化，当第一次请求 <code>getEnterpriseNums</code> 接口时，数据将从数据库中获取，并存入 Redis 缓存中。之后的请求将直接从 Redis 缓存中获取数据，从而提高响应速度和性能。请确保 Redis 配置正确，并已经启动了 Redis 服务。</p><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><p>echarts示例：<a href="https://echarts.apache.org/examples/zh/editor.html?c=map-HK">https://echarts.apache.org/examples/zh/editor.html?c=map-HK</a></p><p>他给的示例我们可以分析出来，我觉得是通过ajax请求来把地图搞到，然后绑定map最后，把数据显示出来。<code>$.get(ROOT_PATH + &#39;/data/asset/geo/HK.json&#39;, function (geoJson)</code>用于异步加载地图数据。这段代码的作用是通过 AJAX 请求获取名为 <code>&#39;HK.json&#39; 的地图数据文件，然后在成功获取数据后，使用</code>echarts.registerMap(‘HK’, geoJson)<code>将地图数据注册到 ECharts 中，并命名为 </code>‘HK’<code>。这样，之后在配置地图的 </code>series<code>中就可以通过指定</code>map: ‘HK’&#96; 来使用该地图数据。</p><p>再者我们需要提前的把地图数据导入到项目当中来。可以通过这个平台下载地图的数据</p><p><a href="http://datav.aliyun.com/portal/school/atlas/area_selector#&lat=30.332329214580188&lng=106.72278672066881&zoom=3.5">http://datav.aliyun.com/portal/school/atlas/area_selector#&amp;lat=30.332329214580188&amp;lng=106.72278672066881&amp;zoom=3.5</a></p><p>然后的话导入方式，因为项目的原因我们需要这样做，</p><p><strong>先是import</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jiNanMapJson <span class="keyword">from</span> <span class="string">&quot;src/views/enterprise/assets/json/济南市.json&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&quot;echarts&quot;</span>;</span><br></pre></td></tr></table></figure><p><strong>再然后注册地图数据到 ECharts：</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echarts.<span class="title function_">registerMap</span>(<span class="string">&#x27;jiNan&#x27;</span>, jiNanMapJson);</span><br></pre></td></tr></table></figure><p><strong>更新 <code>mapOption</code> 中的 <code>series</code> 配置，将 <code>map: &#39;HK&#39;</code> 添加到相关的地图系列中，以便使用注册的地图数据：</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mapOption = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="comment">// ...其他配置项</span></span><br><span class="line">  <span class="attr">series</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// ...其他系列配置</span></span><br><span class="line">      <span class="attr">map</span>: <span class="string">&#x27;jiNan&#x27;</span>, <span class="comment">// 使用注册的地图数据</span></span><br><span class="line">      <span class="comment">// ...其他系列配置</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>通过这种方式，我们可以注册到其中，完整代码如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;el-form-item&gt;</span><br><span class="line">      &lt;el-button type=&quot;warning&quot; @click=&quot;importHandle()&quot;&gt;&#123;&#123; $t(&quot;excel.import&quot;) &#125;&#125;&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;div style=&quot;width: 100%;margin-left: 6em;margin-bottom: 2em;&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;topShow&quot;&gt;</span><br><span class="line">        &lt;div style=&quot;color:brown; font-size: 1.875rem /* 30/16 */;text-align: center;padding-top: 1.4375rem /* 23/16 */;&quot;&gt;</span><br><span class="line">          信用金桥大数据屏幕展示平台&lt;/div&gt;</span><br><span class="line">        &lt;div style=&quot;color:brown; font-size: 1.25rem /* 20/16 */;text-align: right;padding-right: 2.1875rem /* 35/16 */;;&quot;&gt;</span><br><span class="line">          &#123;&#123; dataForm.currentTime &#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;line_01&quot;&gt;</span><br><span class="line">      &lt;figure class=&quot;figure_left&quot;&gt;</span><br><span class="line">        &lt;div v-for=&quot;(item, index) in dataForm.enterpriseNums&quot; :key=&quot;index&quot; style=&quot;width: 23em;text-align: center; &quot;&gt;</span><br><span class="line">          &lt;div class=&quot;card&quot;&gt;</span><br><span class="line">            &lt;span style=&quot;color: red;&quot;&gt;&#123;&#123; item.name &#125;&#125;区&lt;/span&gt;</span><br><span class="line">            在营企业总数 ：</span><br><span class="line">            &lt;span style=&quot;color: sienna; font-size: 2em;&quot;&gt;&#123;&#123; item.value &#125;&#125; 家&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/figure&gt;</span><br><span class="line"></span><br><span class="line">      &lt;figure class=&quot;figure_center&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/figure&gt;</span><br><span class="line">      &lt;figure class=&quot;figure_right&quot;&gt;</span><br><span class="line">        &lt;v-chart :option=&quot;mapOption&quot; :autoresize=&quot;true&quot; /&gt;</span><br><span class="line">      &lt;/figure&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;line_02&quot;&gt;</span><br><span class="line">      &lt;figure class=&quot;figure_left&quot;&gt;</span><br><span class="line">        &lt;v-chart :option=&quot;pie&quot; :autoresize=&quot;true&quot; /&gt;</span><br><span class="line">      &lt;/figure&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;import ref=&quot;importRef&quot;&gt;&lt;/import&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref, provide, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; use &#125; from &quot;echarts/core&quot;;</span><br><span class="line">import &#123; CanvasRenderer &#125; from &quot;echarts/renderers&quot;;</span><br><span class="line">import &#123; BarChart, LineChart, PieChart, MapChart, RadarChart, ScatterChart, EffectScatterChart, LinesChart &#125; from &quot;echarts/charts&quot;;</span><br><span class="line">import &#123; GridComponent, PolarComponent, GeoComponent, TooltipComponent, LegendComponent, TitleComponent, VisualMapComponent, DatasetComponent, ToolboxComponent, DataZoomComponent &#125; from &quot;echarts/components&quot;;</span><br><span class="line">import VChart, &#123; THEME_KEY &#125; from &quot;vue-echarts&quot;;</span><br><span class="line">import app from &quot;@/constants/app&quot;;</span><br><span class="line">import &#123; getToken &#125; from &quot;@/utils/cache&quot;;</span><br><span class="line">import Import from &#x27;@/views/enterprise/enterprise-library-import.vue&#x27;;</span><br><span class="line">import baseService from &quot;@/service/baseService&quot;;</span><br><span class="line">import jiNanMapJson from &quot;src/views/enterprise/assets/json/济南市.json&quot;;</span><br><span class="line">import zhangQiuMapJson from &quot;src/views/enterprise/assets/json/章丘区.json&quot;;</span><br><span class="line">import * as echarts from &quot;echarts&quot;;</span><br><span class="line"></span><br><span class="line">use([BarChart, LineChart, PieChart, MapChart, RadarChart, ScatterChart, EffectScatterChart, LinesChart, GridComponent, PolarComponent, GeoComponent, TooltipComponent, LegendComponent, TitleComponent, VisualMapComponent, DatasetComponent, CanvasRenderer, ToolboxComponent, DataZoomComponent]);</span><br><span class="line"></span><br><span class="line">provide(THEME_KEY, &quot;westeros&quot;);</span><br><span class="line"></span><br><span class="line">const dataForm = reactive(&#123;</span><br><span class="line">  currentTime: &#x27;&#x27;,</span><br><span class="line">  enterpriseNums: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const importRef = ref();</span><br><span class="line">const importHandle = () =&gt; &#123;</span><br><span class="line">  importRef.value.init(`$&#123;app.api&#125;/enterprise/details/import?token=$&#123;getToken()&#125;`);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const list = ref([]);</span><br><span class="line">const industryNames = ref([]);</span><br><span class="line">const getIndustryInfo = async () =&gt; &#123;</span><br><span class="line">  let result = await (await baseService.get(&quot;/enterprise/details/industryInfo&quot;)).data;</span><br><span class="line">  list.value = result;</span><br><span class="line">  industryNames.value = result.map((item: any) =&gt; item.name);</span><br><span class="line">&#125;;</span><br><span class="line">getIndustryInfo();</span><br><span class="line"></span><br><span class="line">const updateTime = () =&gt; &#123;</span><br><span class="line">  const currentDate = new Date();</span><br><span class="line">  const year = String(currentDate.getFullYear());</span><br><span class="line">  const month = String(currentDate.getMonth() + 1).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const date = String(currentDate.getDate()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const hours = String(currentDate.getHours()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const minutes = String(currentDate.getMinutes()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const seconds = String(currentDate.getSeconds()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  dataForm.currentTime = `$&#123;year&#125;年$&#123;month&#125;月$&#123;date&#125;日  $&#123;hours&#125;:$&#123;minutes&#125;:$&#123;seconds&#125;`;</span><br><span class="line">&#125;;</span><br><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">  updateTime();</span><br><span class="line">&#125;, 1000);</span><br><span class="line"></span><br><span class="line">const mapMsg = ref([]);</span><br><span class="line">const getEnterpriseNums = async () =&gt; &#123;</span><br><span class="line">  let result = await (await baseService.get(&quot;/enterprise/details/enterpriseNums&quot;)).data;</span><br><span class="line">  dataForm.enterpriseNums = result;</span><br><span class="line">  mapMsg.value = result;</span><br><span class="line">  //console.log(mapMsg)</span><br><span class="line">&#125;;</span><br><span class="line">getEnterpriseNums();</span><br><span class="line"></span><br><span class="line">echarts.registerMap(&#x27;jiNan&#x27;, jiNanMapJson);</span><br><span class="line">const mapOption = ref(&#123;</span><br><span class="line">  title: &#123;</span><br><span class="line">    text: &#x27;济南市各区在营企业统计&#x27;,</span><br><span class="line">    subtext: &#x27;数据来源XXXX&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line">  tooltip: &#123;</span><br><span class="line">    trigger: &#x27;item&#x27;,</span><br><span class="line">    formatter: &#x27;&#123;b&#125;&lt;br/&gt;&#123;c&#125; (家)&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  toolbox: &#123;</span><br><span class="line">    show: false,</span><br><span class="line">    orient: &#x27;vertical&#x27;,</span><br><span class="line">    left: &#x27;right&#x27;,</span><br><span class="line">    top: &#x27;center&#x27;,</span><br><span class="line">    feature: &#123;</span><br><span class="line">      dataView: &#123; readOnly: false &#125;,</span><br><span class="line">      restore: &#123;&#125;,</span><br><span class="line">      saveAsImage: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  visualMap: &#123;</span><br><span class="line">    min: 800,</span><br><span class="line">    max: 500000,</span><br><span class="line">    text: [&#x27;High&#x27;, &#x27;Low&#x27;],</span><br><span class="line">    realtime: false,</span><br><span class="line">    calculable: true,</span><br><span class="line">    inRange: &#123;</span><br><span class="line">      color: [&#x27;lightskyblue&#x27;, &#x27;yellow&#x27;, &#x27;orangered&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  series: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: &#x27;济南市各区注册企业数量&#x27;,</span><br><span class="line">      type: &#x27;map&#x27;,</span><br><span class="line">      map: &#x27;jiNan&#x27;,</span><br><span class="line">      label: &#123;</span><br><span class="line">        show: true</span><br><span class="line">      &#125;,</span><br><span class="line">      data: mapMsg,</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const pie = ref(&#123;</span><br><span class="line">  title: &#123;</span><br><span class="line">    text: &quot;行业占比&quot;,</span><br><span class="line">    left: &quot;center&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  tooltip: &#123;</span><br><span class="line">    trigger: &quot;item&quot;,</span><br><span class="line">    formatter: &quot;&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  legend: &#123;</span><br><span class="line">    type: &#x27;scroll&#x27;,</span><br><span class="line">    orient: &quot;vertical&quot;,</span><br><span class="line">    right: 10,</span><br><span class="line">    top: 20,</span><br><span class="line">    bottom: 20,</span><br><span class="line">    left: &quot;left&quot;,</span><br><span class="line">    data: industryNames</span><br><span class="line">  &#125;,</span><br><span class="line">  series: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: &quot;行业占比&quot;,</span><br><span class="line">      type: &quot;pie&quot;,</span><br><span class="line">      label: &#123;</span><br><span class="line">        show: false</span><br><span class="line">      &#125;,</span><br><span class="line">      radius: &quot;55%&quot;,</span><br><span class="line">      center: [&quot;50%&quot;, &quot;60%&quot;],</span><br><span class="line">      data: list,</span><br><span class="line">      emphasis: &#123;</span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          shadowBlur: 10,</span><br><span class="line">          shadowOffsetX: 0,</span><br><span class="line">          shadowColor: &quot;rgba(0, 0, 0, 0.5)&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.topShow &#123;</span><br><span class="line">  width: 90%;</span><br><span class="line">  height: 5rem</span><br><span class="line">    /* 80/16 */</span><br><span class="line">  ;</span><br><span class="line">  font-family: &quot;得意黑&quot;;</span><br><span class="line">  border-radius: 3.125rem</span><br><span class="line">    /* 50/16 */</span><br><span class="line">  ;</span><br><span class="line">  border-radius: 3.4375rem</span><br><span class="line">    /* 55/16 */</span><br><span class="line">  ;</span><br><span class="line">  border-radius: 2.5rem</span><br><span class="line">    /* 40/16 */</span><br><span class="line">  ;</span><br><span class="line">  background: #f0f0ff;</span><br><span class="line">  box-shadow: .4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .875rem</span><br><span class="line">    /* 14/16 */</span><br><span class="line">    #ccccd9,</span><br><span class="line">    -.4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    -.4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .875rem</span><br><span class="line">    /* 14/16 */</span><br><span class="line">    #ffffff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@font-face &#123;</span><br><span class="line">  font-family: &#x27;得意黑&#x27;;</span><br><span class="line">  src: url(&#x27;./assets/font/SmileySans-Oblique-2.ttf&#x27;);</span><br><span class="line">  font-weight: normal;</span><br><span class="line">  font-style: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card &#123;</span><br><span class="line">  border-radius: .5rem</span><br><span class="line">    /* 8/16 */</span><br><span class="line">  ;</span><br><span class="line">  font-family: &quot;得意黑&quot;;</span><br><span class="line">  font-size: large;</span><br><span class="line">  border-radius: 1.125rem</span><br><span class="line">    /* 18/16 */</span><br><span class="line">  ;</span><br><span class="line">  background: #f0f0ff;</span><br><span class="line">  box-shadow: inset .4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .875rem</span><br><span class="line">    /* 14/16 */</span><br><span class="line">    #ccccd9,</span><br><span class="line">    inset -.4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    -.4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .875rem</span><br><span class="line">    /* 14/16 */</span><br><span class="line">    #ffffff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  justify-content: center;</span><br><span class="line"></span><br><span class="line">  figure &#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    // position: relative;</span><br><span class="line">    //margin: 2em auto;</span><br><span class="line">    border: .0625rem</span><br><span class="line">      /* 1/16 */</span><br><span class="line">      solid rgba(0, 0, 0, 0.1);</span><br><span class="line">    border-radius: .5rem</span><br><span class="line">      /* 8/16 */</span><br><span class="line">    ;</span><br><span class="line">    box-shadow: 0 0 2.8125rem</span><br><span class="line">      /* 45/16 */</span><br><span class="line">      rgba(0, 0, 0, 0.2);</span><br><span class="line">    padding: 1.875rem</span><br><span class="line">      /* 30/16 */</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    .echarts &#123;</span><br><span class="line">      width: 40vw;</span><br><span class="line">      min-width: 25rem</span><br><span class="line">        /* 400/16 */</span><br><span class="line">      ;</span><br><span class="line">      height: 18.75rem</span><br><span class="line">        /* 300/16 */</span><br><span class="line">      ;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.line_01 &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: auto;</span><br><span class="line"></span><br><span class="line">  // 左对齐</span><br><span class="line">  .figure_left &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 27em;</span><br><span class="line">    border-radius: 1.125rem</span><br><span class="line">      /* 18/16 */</span><br><span class="line">    ;</span><br><span class="line">    background: #f0f0ff;</span><br><span class="line">    box-shadow: .4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .875rem</span><br><span class="line">      /* 14/16 */</span><br><span class="line">      #ccccd9,</span><br><span class="line">      -.4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      -.4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .875rem</span><br><span class="line">      /* 14/16 */</span><br><span class="line">      #ffffff;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //右对齐</span><br><span class="line">  .figure_right &#123;</span><br><span class="line">    float: right;</span><br><span class="line">    width: 50em;</span><br><span class="line"></span><br><span class="line">    .echarts &#123;</span><br><span class="line">      width: auto;</span><br><span class="line">      height: 43.75rem</span><br><span class="line">        /* 700/16 */</span><br><span class="line">      ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    border-radius: 1.125rem</span><br><span class="line">    /* 18/16 */</span><br><span class="line">    ;</span><br><span class="line">    background: #f0f0ff;</span><br><span class="line">    box-shadow: .4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .875rem</span><br><span class="line">    /* 14/16 */</span><br><span class="line">    #ccccd9,</span><br><span class="line">    -.4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    -.4375rem</span><br><span class="line">    /* 7/16 */</span><br><span class="line">    .875rem</span><br><span class="line">    /* 14/16 */</span><br><span class="line">    #ffffff;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .figure_center &#123;</span><br><span class="line">    //float: right;</span><br><span class="line">    //position: absolute;</span><br><span class="line">    width: 21em;</span><br><span class="line">    border-radius: 1.125rem</span><br><span class="line">      /* 18/16 */</span><br><span class="line">    ;</span><br><span class="line">    background: #f0f0ff;</span><br><span class="line">    box-shadow: .4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .875rem</span><br><span class="line">      /* 14/16 */</span><br><span class="line">      #ccccd9,</span><br><span class="line">      -.4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      -.4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .875rem</span><br><span class="line">      /* 14/16 */</span><br><span class="line">      #ffffff;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.line_02 &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: auto;</span><br><span class="line"></span><br><span class="line">  // 左对齐</span><br><span class="line">  .figure_left &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 50em;</span><br><span class="line">    border-radius: 1.125rem</span><br><span class="line">      /* 18/16 */</span><br><span class="line">    ;</span><br><span class="line">    background: #f0f0ff;</span><br><span class="line">    box-shadow: .4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .875rem</span><br><span class="line">      /* 14/16 */</span><br><span class="line">      #ccccd9,</span><br><span class="line">      -.4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      -.4375rem</span><br><span class="line">      /* 7/16 */</span><br><span class="line">      .875rem</span><br><span class="line">      /* 14/16 */</span><br><span class="line">      #ffffff;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最终实现效果可参考echarts的案例。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端实现时间刷新</title>
      <link href="/2023/05/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-24-%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0%E6%97%B6%E9%97%B4%E5%88%B7%E6%96%B0/"/>
      <url>/2023/05/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-24-%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0%E6%97%B6%E9%97%B4%E5%88%B7%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<p>前端实现个时间刷新的案例：</p><h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color:brown; font-size: 1.25rem /* 20/16 */;text-align: right;padding-right: 2.1875rem /* 35/16 */;;&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; dataForm.currentTime &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="script"><a href="#script" class="headerlink" title="script"></a>script</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">updateTime</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> currentDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="keyword">const</span> year = <span class="title class_">String</span>(currentDate.<span class="title function_">getFullYear</span>());</span><br><span class="line">  <span class="keyword">const</span> month = <span class="title class_">String</span>(currentDate.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> date = <span class="title class_">String</span>(currentDate.<span class="title function_">getDate</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> hours = <span class="title class_">String</span>(currentDate.<span class="title function_">getHours</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> minutes = <span class="title class_">String</span>(currentDate.<span class="title function_">getMinutes</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> seconds = <span class="title class_">String</span>(currentDate.<span class="title function_">getSeconds</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">  dataForm.<span class="property">currentTime</span> = <span class="string">`<span class="subst">$&#123;year&#125;</span>年<span class="subst">$&#123;month&#125;</span>月<span class="subst">$&#123;date&#125;</span>日  <span class="subst">$&#123;hours&#125;</span>:<span class="subst">$&#123;minutes&#125;</span>:<span class="subst">$&#123;seconds&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这里主要调用的是 Date();的前端的方法。</p><p>然后我们设置定时器一秒刷新一次。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">updateTime</span>();</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>这是根据人人开源项目做二次开发写的，其实二次开发真的有些难受。</p><p>如果要根据vue的方式来写就是这样的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      currentTime: &#x27;&#x27;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    // 更新时间</span><br><span class="line">    this.updateTime();</span><br><span class="line"></span><br><span class="line">    // 每秒钟更新一次时间</span><br><span class="line">    setInterval(() =&gt; &#123;</span><br><span class="line">      this.updateTime();</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    updateTime() &#123;</span><br><span class="line">  const currentDate = new Date();</span><br><span class="line">  const year = currentDate.getFullYear();</span><br><span class="line">  const month = String(currentDate.getMonth() + 1).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const day = String(currentDate.getDate()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const hours = String(currentDate.getHours()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const minutes = String(currentDate.getMinutes()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  const seconds = String(currentDate.getSeconds()).padStart(2, &#x27;0&#x27;);</span><br><span class="line">  this.currentTime = `$&#123;year&#125;-$&#123;month&#125;-$&#123;day&#125; $&#123;hours&#125;:$&#123;minutes&#125;:$&#123;seconds&#125;`;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>mounted</code>生命周期钩子中，我们通过调用<code>updateTime</code>方法来初始化时间，并使用<code>setInterval</code>函数每秒钟更新一次时间。</p><p><code>updateTime</code>方法会获取当前时间并更新<code>currentTime</code>的值，然后将其显示在页面中。</p><p><code>getYear</code>方法返回的是四位数的年份，<code>getMonth</code>方法返回的是从0开始的月份（需要加1），<code>getDate</code>方法返回的是月份中的日期。我们将它们转换为字符串并使用<code>padStart</code>方法进行补零操作，以保证两位数的格式。</p><p>最后，我们将年、月、日、时、分和秒拼接为一个完整的日期时间字符串，并将其赋值给<code>currentTime</code>，用于在页面中显示。</p><p>其中有个点就是在获取日期时，<code>getDay()</code>方法返回的是星期几（0-6），而不是日期。今天就犯糊涂了，用了<code>getday()</code></p><p>另外推荐一个很好的拟态风格的css生成网站，简直不要太好用！！！！</p><p><a href="https://neumorphism.io/#e0e0e0">https://neumorphism.io/#e0e0e0</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ERR_UNSAFE_PORT情况解决</title>
      <link href="/2023/05/17/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-05-17-ERR_UNSAFE_PORT%E6%83%85%E5%86%B5%E8%A7%A3%E5%86%B3/"/>
      <url>/2023/05/17/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-05-17-ERR_UNSAFE_PORT%E6%83%85%E5%86%B5%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>起因是，今天看到一个有趣的项目（<a href="https://github.com/usememos/memos%EF%BC%89%E6%83%B3%E6%8B%89%E4%B8%8B%E6%9D%A5%E8%B7%91%E8%B7%91%E4%BD%93%E9%AA%8C%E4%B8%80%E4%B8%8B%E3%80%82%E7%BB%93%E6%9E%9C%E5%9C%A8docker%E4%B9%8B%E5%90%8E%EF%BC%8C%E6%8C%87%E5%AE%9A%E5%A5%BD%E4%BA%86%E7%AB%AF%E5%8F%A3%EF%BC%8C%E6%89%93%E5%BC%80%E6%97%B6%E5%8D%B4%E6%8F%90%E7%A4%BA%E6%88%91%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E6%AD%A4%E9%93%BE%E6%8E%A5">https://github.com/usememos/memos）想拉下来跑跑体验一下。结果在docker之后，指定好了端口，打开时却提示我无法访问此链接</a></p><p>再次确认后台程序在跑的时候，已经基本确定就是某些操作的问题，或许是被拦截了。<code>dcker ps -a</code>发现正在运行没有任何的报错</p><p>但是在看到前端报错的时候发现他在告诉我这个情况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERR_UNSAFE_PORT</span><br></pre></td></tr></table></figure><p>仔细查询（<a href="https://zhuanlan.zhihu.com/p/383077079%EF%BC%89%E4%BA%86%E4%B9%8B%E5%90%8E%E6%89%8D%E5%8F%91%E7%8E%B0%E8%BF%99%E6%98%AF%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80%E3%80%82%E8%99%BD%E8%AF%B4%E5%8F%AF%E4%BB%A5%E6%98%AF%E5%BC%BA%E5%88%B6%E6%89%93%E5%BC%80%EF%BC%8C%E4%BD%86%E6%98%AF%E8%BF%98%E6%98%AF%E6%8D%A2%E4%B8%AA%E7%AB%AF%E5%8F%A3%E6%AF%94%E8%BE%83%E7%A8%B3%E5%A6%A5%E3%80%82">https://zhuanlan.zhihu.com/p/383077079）了之后才发现这是浏览器的安全问题导致无法打开。虽说可以是强制打开，但是还是换个端口比较稳妥。</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1,    // tcpmux</span><br><span class="line">7,    // <span class="built_in">echo</span></span><br><span class="line">9,    // discard</span><br><span class="line">11,   // systat</span><br><span class="line">13,   // daytime</span><br><span class="line">15,   // netstat</span><br><span class="line">17,   // qotd</span><br><span class="line">19,   // chargen</span><br><span class="line">20,   // ftp data</span><br><span class="line">21,   // ftp access</span><br><span class="line">22,   // ssh</span><br><span class="line">23,   // telnet</span><br><span class="line">25,   // smtp</span><br><span class="line">37,   // time</span><br><span class="line">42,   // name</span><br><span class="line">43,   // nicname</span><br><span class="line">53,   // domain</span><br><span class="line">77,   // priv-rjs</span><br><span class="line">79,   // finger</span><br><span class="line">87,   // ttylink</span><br><span class="line">95,   // supdup</span><br><span class="line">101,  // hostriame</span><br><span class="line">102,  // iso-tsap</span><br><span class="line">103,  // gppitnp</span><br><span class="line">104,  // acr-nema</span><br><span class="line">109,  // pop2</span><br><span class="line">110,  // pop3</span><br><span class="line">111,  // sunrpc</span><br><span class="line">113,  // auth</span><br><span class="line">115,  // sftp</span><br><span class="line">117,  // uucp-path</span><br><span class="line">119,  // nntp</span><br><span class="line">123,  // NTP</span><br><span class="line">135,  // loc-srv /epmap</span><br><span class="line">139,  // netbios</span><br><span class="line">143,  // imap2</span><br><span class="line">179,  // BGP</span><br><span class="line">389,  // ldap</span><br><span class="line">465,  // smtp+ssl</span><br><span class="line">512,  // <span class="built_in">print</span> / <span class="built_in">exec</span></span><br><span class="line">513,  // login</span><br><span class="line">514,  // shell</span><br><span class="line">515,  // printer</span><br><span class="line">526,  // tempo</span><br><span class="line">530,  // courier</span><br><span class="line">531,  // chat</span><br><span class="line">532,  // netnews</span><br><span class="line">540,  // uucp</span><br><span class="line">556,  // remotefs</span><br><span class="line">563,  // nntp+ssl</span><br><span class="line">587,  // stmp?</span><br><span class="line">601,  // ??</span><br><span class="line">636,  // ldap+ssl</span><br><span class="line">993,  // ldap+ssl</span><br><span class="line">995,  // pop3+ssl</span><br><span class="line">2049, // nfs</span><br><span class="line">3659, // apple-sasl / PasswordServer</span><br><span class="line">4045, // lockd</span><br><span class="line">6000, // X11</span><br><span class="line">6665, // Alternate IRC</span><br><span class="line">6666, // Alternate IRC</span><br><span class="line">6667, // Standard IRC</span><br><span class="line">6668, // Alternate IRC</span><br><span class="line">6669, // Alternate IRC</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 故障 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>判断两个事件是否存在冲突</title>
      <link href="/2023/05/17/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-05-17-%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E4%BA%8B%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%86%B2%E7%AA%81/"/>
      <url>/2023/05/17/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-05-17-%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E4%BA%8B%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%86%B2%E7%AA%81/</url>
      
        <content type="html"><![CDATA[<p>给你两个字符串数组 <code>event1</code> 和 <code>event2</code> ，表示发生在同一天的两个闭区间时间段事件，其中：</p><ul><li><code>event1 = [startTime1, endTime1]</code> </li><li><code>event2 = [startTime2, endTime2]</code></li></ul><p>事件的时间为有效的 24 小时制且按 <code>HH:MM</code> 格式给出。</p><p>当两个事件存在某个非空的交集时（即，某些时刻是两个事件都包含的），则认为出现 <strong>冲突</strong> 。</p><p>如果两个事件之间存在冲突，返回 <code>true</code> ；否则，返回 <code>false</code> 。</p><p><strong>示例 1：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：event1 = [&quot;01:15&quot;,&quot;02:00&quot;], event2 = [&quot;02:00&quot;,&quot;03:00&quot;]</span><br><span class="line">输出：true</span><br><span class="line">解释：两个事件在 2:00 出现交集。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：event1 = [&quot;01:00&quot;,&quot;02:00&quot;], event2 = [&quot;01:20&quot;,&quot;03:00&quot;]</span><br><span class="line">输出：true</span><br><span class="line">解释：两个事件的交集从 01:20 开始，到 02:00 结束。</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：event1 = [&quot;10:00&quot;,&quot;11:00&quot;], event2 = [&quot;14:00&quot;,&quot;15:00&quot;]</span><br><span class="line">输出：false</span><br><span class="line">解释：两个事件不存在交集。</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>evnet1.length == event2.length == 2.</code></li><li><code>event1[i].length == event2[i].length == 5</code></li><li><code>startTime1 &lt;= endTime1</code></li><li><code>startTime2 &lt;= endTime2</code></li><li>所有事件的时间都按照 <code>HH:MM</code> 格式给出</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">haveConflict</span><span class="params">(String[] event1, String[] event2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">event1StartTime</span> <span class="operator">=</span> strToIntTime(event1[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">event1EndTime</span>   <span class="operator">=</span> strToIntTime(event1[<span class="number">1</span>]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">event2StartTime</span> <span class="operator">=</span> strToIntTime(event2[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">event2EndTime</span>   <span class="operator">=</span> strToIntTime(event2[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(event1EndTime &lt; event2StartTime || event2EndTime &lt;event1StartTime )&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">strToIntTime</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        String[] ss = str.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">hours</span> <span class="operator">=</span> Integer.parseInt(ss[<span class="number">0</span>])*<span class="number">60</span>;</span><br><span class="line">        <span class="keyword">return</span>  hours+Integer.parseInt(ss[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>比对时间不在另一个区间内就可以了，但是string不能进行比较，只能使用int类型比较。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue实现新闻列表的无限滚动</title>
      <link href="/2023/05/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-12-vue%E5%AE%9E%E7%8E%B0%E6%96%B0%E9%97%BB%E5%88%97%E8%A1%A8%E7%9A%84%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8/"/>
      <url>/2023/05/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-12-vue%E5%AE%9E%E7%8E%B0%E6%96%B0%E9%97%BB%E5%88%97%E8%A1%A8%E7%9A%84%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>这几天业务用到了这个，身为一个前端小白。。。垃圾的一批。百度的时候发现一个叫<code>vue-seamless-scroll</code>的组件，但是引入使用标签的适合前端会啥也不显示直接白花花的一大片。</p><p>百度的时候发现一个大佬已经通过js模拟那个组件实现了效果，特此记录下来。因为应用场景的问题，对他的代码稍做了些更改。</p><p>实现无限无缝滚动的链接：<a href="https://blog.csdn.net/weixin_41683949/article/details/125892840">https://blog.csdn.net/weixin_41683949/article/details/125892840</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- 平台成果  --&gt;</span><br><span class="line">    &lt;div class=&quot;platform-outcomes&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;imgTitle&quot;&gt;</span><br><span class="line">            &lt;img src=&quot;../assets/img/news.png&quot; alt=&quot;新闻png&quot;&gt;</span><br><span class="line">            &lt;span&gt;政策要闻&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 新闻展示div --&gt;</span><br><span class="line">        &lt;div class=&quot;box&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=&quot;scroll_parent_box&quot; @mouseenter=&quot;mEnter&quot; @mouseleave=&quot;mLeave&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;scroll_list&quot; :style=&quot;&#123; transform: `translate(0px,-$&#123;scrollTop&#125;px)` &#125;&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div ref=&quot;scrollItemBox&quot;&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;div class=&quot;scroll_item&quot; v-for=&quot;(item, index) in newsData&quot; :key=&quot;index&quot;&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;div class=&quot;newsFont&quot;&gt;</span><br><span class="line">                                &lt;img src=&quot;../assets/img/little_news.png&quot; alt=&quot;新闻小图标&quot;&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;div class=&quot;newsMessage&quot;&gt;</span><br><span class="line">                                &lt;a :href=&quot;item.sciUrl&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">                                    &lt;p v-bind:style=&quot;&#123; fontWeight: &#x27;bold&#x27; &#125;&quot;&gt;</span><br><span class="line">                                        &#123;&#123; item.content &#125;&#125;</span><br><span class="line">                                    &lt;/p&gt;</span><br><span class="line">                                &lt;/a&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div v-html=&quot;copyHtml&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            scrollTop: 0, //列表滚动高度</span><br><span class="line">            speed: 50, //滚动的速度</span><br><span class="line">            newsData: [</span><br><span class="line">            //     &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;科创金融为科创企业注入金融“活水”&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;https://finance.sina.com.cn/jjxw/2023-04-15/doc-imyqknmc2885203.shtml&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;工商银行 坚定不移推进高质量发展 在服务中国式现代化进程中展现新担当&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;http://paper.people.com.cn/rmrb/html/2023-03/10/nw.D110000renmrb_20230310_1-12.htm&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;让科创企业股权“软实力”变融资“硬通货”&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;http://www.ccb.com/cn/ccbtoday/newsv3/20230414_1681445103.html&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;建设高质量科创板，更好促进科技、资本和产业良性循环&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;http://www.sse.com.cn/aboutus/mediacenter/hotandd/c/c_20221122_5712368.shtml&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;国泰君安发布服务上海科创中心建设行动方案_中国经济网——国家经济门户&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;http://finance.ce.cn/stock/gsgdbd/202305/06/t20230506_38533924.shtml.&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;中国人民银行营业管理部召开2023年第二季度新闻发布会&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;https://finance.sina.com.cn/money/bank/bank_yhfg/2023-04-27/doc-imyrvnht4400317.shtml&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;中国农业银行联合多家机构成功举办2023科创金融论坛&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;http://finance.people.com.cn/n1/2023/0426/c1004-32674304.html&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;中国科协启动“科创中国”金融伙伴计划- 社会综合&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;https://www.chinanews.com.cn/sh/2023/02-20/9957121.shtml&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;2023济南科创金融论坛举行马建堂袁亚湘作主旨演讲袁炳忠刘强致辞&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;http://jntzcjj.jinan.gov.cn/art/2023/4/15/art_88379_4775055.html&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;济南市政府门户网站新闻刘强会见出席2023济南科创金融论坛嘉宾&#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;http://www.jinan.gov.cn/art/2023/4/14/art_22405_4947838.html&#x27;,</span><br><span class="line">            // &#125;, &#123;</span><br><span class="line">            //     &#x27;content&#x27;: &#x27;全国关注济南！科创+金融，一场盛会激涌发展“活水” &#x27;,</span><br><span class="line">            //     &#x27;sciUrl&#x27;: &#x27;https://new.qq.com/rain/a/20230415A01HXN00&#x27;,</span><br><span class="line">            // &#125;</span><br><span class="line">            ], //表示有多少个列表项</span><br><span class="line">            copyHtml: &#x27;&#x27;, //复制多一份防止滚动到后面出现空白</span><br><span class="line">            msg: &#x27;&#x27;,</span><br><span class="line">            outcomes: &#123;</span><br><span class="line">                companyNum: &#x27;&#x27;,</span><br><span class="line">                financingNum: &#x27;&#x27;,</span><br><span class="line">                financingTotalAmount: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    //同步执行的，意味着在该函数内的代码将在组件创建完成前立即执行</span><br><span class="line">    //可以在该函数下完成一些初始化的工作</span><br><span class="line">    created() &#123;</span><br><span class="line">        this.initData();</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        // 如果列表数据是异步获取的，记得初始化在获取数据后再调用</span><br><span class="line">        this.initScroll();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        //获取政务新闻条例</span><br><span class="line">        initData() &#123;</span><br><span class="line">            axios.get(&#x27;http://localhost:8080/renren-admin/index/sciindexnews/page?limit=14&amp;page=1&#x27;).then((res) =&gt; &#123;</span><br><span class="line">                this.newsData = res.data.data.list</span><br><span class="line">            &#125;).catch((err) =&gt; &#123;</span><br><span class="line">                console.log(err)</span><br><span class="line">                alert(&#x27;请求出错！&#x27;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        //以下是实现滚动的</span><br><span class="line">        initScroll() &#123;</span><br><span class="line">            this.$nextTick(() =&gt; &#123;</span><br><span class="line">                this.copyHtml = this.$refs.scrollItemBox.innerHTML</span><br><span class="line">                this.startScroll()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        // 鼠标移入停止滚动</span><br><span class="line">        mEnter() &#123;</span><br><span class="line">            clearInterval(this.timer);</span><br><span class="line">        &#125;,</span><br><span class="line">        // 鼠标移出继续滚动</span><br><span class="line">        mLeave() &#123;</span><br><span class="line">            this.startScroll()</span><br><span class="line">        &#125;,</span><br><span class="line">        // 开始滚动</span><br><span class="line">        startScroll() &#123;</span><br><span class="line">            //添加this指向，告诉他是自己的这个time，如果不加的话，没办法识别了</span><br><span class="line">            this.timer = setInterval(this.scroll, this.speed);</span><br><span class="line">        &#125;,</span><br><span class="line">        // 滚动处理方法</span><br><span class="line">        scroll() &#123;</span><br><span class="line">            //用于复制上一次出现的所有数据，因为在使用axios之后滚动数据只会滚动一次，也就是说没有调用copyHtml所以退而求其次用这个</span><br><span class="line">            this.copyHtml = this.$refs.scrollItemBox.innerHTML</span><br><span class="line"></span><br><span class="line">            this.scrollTop++</span><br><span class="line">            // 获取需要滚动的盒子的高度</span><br><span class="line">            let scrollItemBox = this.$refs.scrollItemBox.offsetHeight;</span><br><span class="line">            // 当判断滚动的高度大于等于盒子高度时，从头开始滚动</span><br><span class="line">            if (this.scrollTop &gt;= scrollItemBox) &#123;</span><br><span class="line">                this.scrollTop = 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">a &#123;</span><br><span class="line">    color: #000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.newsMessage &#123;</span><br><span class="line">    padding-left: 7%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.newsFont &#123;</span><br><span class="line">    text-align: left;</span><br><span class="line">    padding-left: 2%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.scroll_parent_box &#123;</span><br><span class="line">    width: 90%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    /*边框*/</span><br><span class="line">    /* border: 1px solid #ebeef5;  */</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    padding: 0 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.scroll_list &#123;</span><br><span class="line">    transition: all 0ms ease-in 0s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.scroll_item &#123;</span><br><span class="line">    height: 40px;</span><br><span class="line">    line-height: 40px;</span><br><span class="line">    /* text-align: center; */</span><br><span class="line">    font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.platform-outcomes &#123;</span><br><span class="line">    width: 1920px;</span><br><span class="line">    height: 600px;</span><br><span class="line">    background-image: url(&quot;../assets/img/chengguobg.jpg&quot;);</span><br><span class="line">    background-repeat: no-repeat;</span><br><span class="line">    background-size: 100%;</span><br><span class="line">    /* background-position: center; */</span><br><span class="line">    padding-left: 300px;</span><br><span class="line">    padding-top: 80px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.platform-outcomes .imgTitle &#123;</span><br><span class="line">    padding-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.platform-outcomes .imgTitle span &#123;</span><br><span class="line">    font-size: 25px;</span><br><span class="line">    font-weight: 700;</span><br><span class="line">    color: #313233;</span><br><span class="line">    margin-left: 10px;</span><br><span class="line">    margin-top: 15px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.platform-outcomes .box &#123;</span><br><span class="line">    padding-left: 10%;</span><br><span class="line">    /* box内的滚动条向左偏移10% */</span><br><span class="line">    width: 1200px;</span><br><span class="line">    height: 380px;</span><br><span class="line">    /* background: skyblue; */</span><br><span class="line">    background: white;</span><br><span class="line">    float: left;</span><br><span class="line">    margin-top: 35px;</span><br><span class="line">    margin-right: 10px;</span><br><span class="line">    border-top: 8px solid #d6ba83;</span><br><span class="line">    border-bottom: 8px solid #d6ba83;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.platform-outcomes .box ul &#123;</span><br><span class="line">    margin-left: 80px;</span><br><span class="line">    margin-right: 80px;</span><br><span class="line">    margin-top: 25px;</span><br><span class="line">    /* background:  white; */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 背景图 3张 */</span><br><span class="line">.platform-outcomes .box .building &#123;</span><br><span class="line">    background: url(&quot;../assets/img/chengguo1bg.png&quot;) no-repeat;</span><br><span class="line">    background-position: center center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.platform-outcomes .box .book &#123;</span><br><span class="line">    background: url(&quot;../assets/img/chengguo2bg.png&quot;) no-repeat;</span><br><span class="line">    background-position: center center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.platform-outcomes .box .money &#123;</span><br><span class="line">    background: url(&quot;../assets/img/chengguo3bg.png&quot;) no-repeat;</span><br><span class="line">    background-position: center center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.platform-outcomes .box ul span &#123;</span><br><span class="line">    font-size: 30px;</span><br><span class="line">    font-weight: 500;</span><br><span class="line">    color: #cc4f4f;</span><br><span class="line">&#125;&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>再次分析一下以上代码：</p><p>此处代码不做赘述，主要是用来实现页面展示的其中利用v-for实现不断地循环展示<code>@mouseenter</code>和<code>@mouseleave</code>作为监听鼠标的是否在此div上面滑入滑出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;scroll_parent_box&quot; @mouseenter=&quot;mEnter&quot; @mouseleave=&quot;mLeave&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;scroll_list&quot; :style=&quot;&#123; transform: `translate(0px,-$&#123;scrollTop&#125;px)` &#125;&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div ref=&quot;scrollItemBox&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;scroll_item&quot; v-for=&quot;(item, index) in newsData&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;newsFont&quot;&gt;</span><br><span class="line">                    &lt;img src=&quot;../assets/img/little_news.png&quot; alt=&quot;新闻小图标&quot;&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;newsMessage&quot;&gt;</span><br><span class="line">                    &lt;a :href=&quot;item.sciUrl&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">                        &lt;p v-bind:style=&quot;&#123; fontWeight: &#x27;bold&#x27; &#125;&quot;&gt;</span><br><span class="line">                            &#123;&#123; item.content &#125;&#125;</span><br><span class="line">                        &lt;/p&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div v-html=&quot;copyHtml&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>css部分在此不做解释：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.newsMessage</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">7%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.newsFont</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">2%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll_parent_box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="comment">/*边框*/</span></span><br><span class="line">    <span class="comment">/* border: 1px solid #ebeef5;  */</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll_list</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0ms</span> ease-in <span class="number">0s</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll_item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="comment">/* text-align: center; */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>javascript部分：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">scrollTop</span>: <span class="number">0</span>, <span class="comment">//列表滚动高度</span></span><br><span class="line">            <span class="attr">speed</span>: <span class="number">50</span>, <span class="comment">//滚动的速度</span></span><br><span class="line">            <span class="attr">newsData</span>: [</span><br><span class="line">            <span class="comment">//     &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;科创金融为科创企业注入金融“活水”&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;https://finance.sina.com.cn/jjxw/2023-04-15/doc-imyqknmc2885203.shtml&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;工商银行 坚定不移推进高质量发展 在服务中国式现代化进程中展现新担当&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;http://paper.people.com.cn/rmrb/html/2023-03/10/nw.D110000renmrb_20230310_1-12.htm&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;让科创企业股权“软实力”变融资“硬通货”&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;http://www.ccb.com/cn/ccbtoday/newsv3/20230414_1681445103.html&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;建设高质量科创板，更好促进科技、资本和产业良性循环&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;http://www.sse.com.cn/aboutus/mediacenter/hotandd/c/c_20221122_5712368.shtml&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;国泰君安发布服务上海科创中心建设行动方案_中国经济网——国家经济门户&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;http://finance.ce.cn/stock/gsgdbd/202305/06/t20230506_38533924.shtml.&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;中国人民银行营业管理部召开2023年第二季度新闻发布会&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;https://finance.sina.com.cn/money/bank/bank_yhfg/2023-04-27/doc-imyrvnht4400317.shtml&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;中国农业银行联合多家机构成功举办2023科创金融论坛&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;http://finance.people.com.cn/n1/2023/0426/c1004-32674304.html&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;中国科协启动“科创中国”金融伙伴计划- 社会综合&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;https://www.chinanews.com.cn/sh/2023/02-20/9957121.shtml&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;2023济南科创金融论坛举行马建堂袁亚湘作主旨演讲袁炳忠刘强致辞&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;http://jntzcjj.jinan.gov.cn/art/2023/4/15/art_88379_4775055.html&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;济南市政府门户网站新闻刘强会见出席2023济南科创金融论坛嘉宾&#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;http://www.jinan.gov.cn/art/2023/4/14/art_22405_4947838.html&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;, &#123;</span></span><br><span class="line">            <span class="comment">//     &#x27;content&#x27;: &#x27;全国关注济南！科创+金融，一场盛会激涌发展“活水” &#x27;,</span></span><br><span class="line">            <span class="comment">//     &#x27;sciUrl&#x27;: &#x27;https://new.qq.com/rain/a/20230415A01HXN00&#x27;,</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            ], <span class="comment">//表示有多少个列表项</span></span><br><span class="line">            <span class="attr">copyHtml</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//复制多一份防止滚动到后面出现空白</span></span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">outcomes</span>: &#123;</span><br><span class="line">                <span class="attr">companyNum</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                <span class="attr">financingNum</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                <span class="attr">financingTotalAmount</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//同步执行的，意味着在该函数内的代码将在组件创建完成前立即执行</span></span><br><span class="line">    <span class="comment">//可以在该函数下完成一些初始化的工作</span></span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">initData</span>();</span><br><span class="line">        <span class="comment">// 如果列表数据是异步获取的，记得初始化在获取数据后再调用</span></span><br><span class="line">        <span class="comment">//this.initScroll();</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">//获取政务新闻条例</span></span><br><span class="line">        <span class="title function_">initData</span>(<span class="params"></span>) &#123;</span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/renren-admin/index/sciindexnews/page?limit=14&amp;page=1&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">newsData</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">initScroll</span>();</span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&#x27;请求出错！&#x27;</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//以下是实现滚动的</span></span><br><span class="line">        <span class="title function_">initScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">copyHtml</span> = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scrollItemBox</span>.<span class="property">innerHTML</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">startScroll</span>()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 鼠标移入停止滚动</span></span><br><span class="line">        <span class="title function_">mEnter</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 鼠标移出继续滚动</span></span><br><span class="line">        <span class="title function_">mLeave</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">startScroll</span>()</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 开始滚动</span></span><br><span class="line">        <span class="title function_">startScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">//添加this指向，告诉他是自己的这个time，如果不加的话，没办法识别了</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="variable language_">this</span>.<span class="property">scroll</span>, <span class="variable language_">this</span>.<span class="property">speed</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 滚动处理方法</span></span><br><span class="line">        <span class="title function_">scroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">//用于复制上一次出现的所有数据，因为在使用axios之后滚动数据只会滚动一次，也就是说没有调用copyHtml所以退而求其次用这个</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">copyHtml</span> = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scrollItemBox</span>.<span class="property">innerHTML</span></span><br><span class="line"></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">scrollTop</span>++</span><br><span class="line">            <span class="comment">// 获取需要滚动的盒子的高度</span></span><br><span class="line">            <span class="keyword">let</span> scrollItemBox = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scrollItemBox</span>.<span class="property">offsetHeight</span>;</span><br><span class="line">            <span class="comment">// 当判断滚动的高度大于等于盒子高度时，从头开始滚动</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">scrollTop</span> &gt;= scrollItemBox) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">scrollTop</span> = <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>再次赘述一下以上的javascript代码，这段是最为关键的，其中data内的return不做叙述，主要功能是作为数据的初始化 <code>initData()</code>我们放在最后说。</p><p> <strong>initScroll()</strong>  这个方法的作用就是用户初始化滚动，其中调用了<code>startScroll()</code>方法，<code>this.copyHtml = this.$refs.scrollItemBox.innerHTML</code>的作用就是复制<code>ref=”scrollItemBox“</code>这个div内的所有代码来阻止出现当先数据显示完的情况之下出现空白的情形。</p><p><strong>mEnter()</strong> 这个方法是在鼠标进来的时候停止移动的clearInterval()就是阻塞setInterval()的方法。参考链接：<a href="http://caibaojian.com/setinterval-times.html">http://caibaojian.com/setinterval-times.html</a></p><p><strong>mLeave()</strong> 这个不多说，就是调用下面的 startScroll()方法</p><p><strong>startScroll()</strong> 在此处的作用是调用滚动方法和设置滚动速度（滚动速度其实就是显示的时间，具体可以查看setInterval()方法）</p><p><strong>scroll()</strong> 可以说是真正滚动方法的实现。scrollItemBox就是div的高度，初始化一个scrollTop为0让它随时间不断增加，这时候当scrollTop大于scrollItemBox也就是说显示的数据都没有了，那就重新初始化scrollTop数据让他们重新显示</p><p> <strong>initData()</strong> 这里的作用是用于初始化数据的，当数据写死的时候我们可以不用介意。但是当数据是异步请求的时候，我们就需要把初始化滚动放在数据请求之后了。也就是说是这个情况</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">initData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/renren-admin/index/sciindexnews/page?limit=14&amp;page=1&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">newsData</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">        <span class="comment">//初始化在获取数据后再调用</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">initScroll</span>();</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;请求出错！&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>同时在mounted更改</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">initData</span>();</span><br><span class="line">    <span class="comment">// 如果列表数据是异步获取的，记得初始化在获取数据后再调用</span></span><br><span class="line">    <span class="comment">//this.initScroll();</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>其实这个this.initData();是可以放在created()生命周期里面的，我个人比较偏向放在created()声明周期里。</p><p>普及一下这俩生命周期的区别：</p><p><strong>created:在模板渲染成html前调用，即通常初始化某些属性值，然后再渲染成视图。</strong></p><p><strong>mounted:在模板渲染成html后调用，通常是初始化页面完成后，再对html的dom节点进行一些需要的操作。</strong></p><p>可以参考知乎这个帖子：<a href="https://zhuanlan.zhihu.com/p/479084392">https://zhuanlan.zhihu.com/p/479084392</a>  </p><p><strong>憨憨的我：</strong></p><p>其实我一开始没有理解他的”记得初始化在获取数据后再调用“是什么意思，我还以为是初始化数据在获取数据之后初始化，我还寻思前端还能有这操作？这么神器吗？经过吾爱的大佬提示才知道，原来是，在数据初始化之后对方法的调用。。。。笨死我了</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端点击链接使用新建窗口打开外部链接</title>
      <link href="/2023/05/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-12-%E5%89%8D%E7%AB%AF%E7%82%B9%E5%87%BB%E9%93%BE%E6%8E%A5%E4%BD%BF%E7%94%A8%E6%96%B0%E5%BB%BA%E7%AA%97%E5%8F%A3%E6%89%93%E5%BC%80%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5/"/>
      <url>/2023/05/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-12-%E5%89%8D%E7%AB%AF%E7%82%B9%E5%87%BB%E9%93%BE%E6%8E%A5%E4%BD%BF%E7%94%A8%E6%96%B0%E5%BB%BA%E7%AA%97%E5%8F%A3%E6%89%93%E5%BC%80%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<p><strong>方法一：</strong></p><p>我们可以使用a标签的属性来实现新建窗口跳转</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;item.sciUrl&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中<code>target</code>有以下几种属性</p><table><thead><tr><th align="left">值</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">_blank</td><td align="left">在新窗口中打开被链接文档。</td></tr><tr><td align="left">_self</td><td align="left">默认。在相同的框架中打开被链接文档。</td></tr><tr><td align="left">_parent</td><td align="left">在父框架集中打开被链接文档。</td></tr><tr><td align="left">_top</td><td align="left">在整个窗口中打开被链接文档。</td></tr><tr><td align="left"><em>framename</em></td><td align="left">在指定的框架中打开被链接文档。</td></tr></tbody></table><p><strong>方法二：</strong></p><p>我们可以使用js脚本来配合跳转</p><p>html部分</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span @click=&quot;See(url)&quot;&gt;点击此处实现跳转&lt;/span&gt;</span><br></pre></td></tr></table></figure><p>js部分</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">See</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = e</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>其中url也就是你的传入值。</p><p>在这里面说明一下，你的链接在写的时候，必须带上<code>http://</code>或者<code>https://</code>如果不带的话，vue会自动识别为路由的</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一则小故事——完美的牲口</title>
      <link href="/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-05-07-%E4%B8%80%E5%88%99%E5%B0%8F%E6%95%85%E4%BA%8B%E2%80%94%E2%80%94%E5%AE%8C%E7%BE%8E%E7%9A%84%E7%89%B2%E5%8F%A3/"/>
      <url>/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-05-07-%E4%B8%80%E5%88%99%E5%B0%8F%E6%95%85%E4%BA%8B%E2%80%94%E2%80%94%E5%AE%8C%E7%BE%8E%E7%9A%84%E7%89%B2%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p>我以前在农村养过一段时间大型牲口。</p><p>牛这玩意力气大耐力足，能干很重的活但实际，上效率不高，因为它干活慢吞吞的。</p><p>马这东西能跑能拉，但是耐力很差，强度大一点做久就要歌菜</p><p>驴是好东西，速度和耐力都适中，但是脾气特别倔，一旦发起脾气来真的半天都不动，还撒泼。这么大一个牲口发起疯来可不是开玩笑。</p><p>猪浑身都是宝，但要宰了才能吃肉剥皮，它干不了，吃住条件一差就不长膘还容易生病。</p><p>拿吃来说吧，想要牲口长得好，吃的不能少，比如喂牛，带路的老农民一早就带我去割草，还叮嘱哪些可以吃哪些不行，并非什么草都行，太湿的也不行，一般是早上十点左右，早上的草鲜嫩且带露水基本没了，最适合喂牛等知识。当初让我大开眼界。</p><p>住就更别说了，打扫猪圈牛栏的酸爽谁做谁知道。</p><p>几天下来我累得头昏眼花觉得养牲口真不容易。</p><p>有一次我精疲力尽我想，能不能进化出这么一种牲口:条件要求低、吃得少，住得差，得了病自己能给自己治，能主动给我创造财富(长膘快)，能干活，效率高，少休息甚至不休息，良顺脾气好，最好智商低点。如果真的有那真是地球上进化得最高级的牲口啊。可惜我在农村时间不长见识有限没见过。</p><p>直到我在潭头看到了自己的倒影</p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>凌晨随想-23年05.07随笔记</title>
      <link href="/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-05-07-%E5%87%8C%E6%99%A8%E9%9A%8F%E6%83%B3-23%E5%B9%B405.07%E9%9A%8F%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-05-07-%E5%87%8C%E6%99%A8%E9%9A%8F%E6%83%B3-23%E5%B9%B405.07%E9%9A%8F%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>手机里存了形形色色的照片，大悲大喜，漂亮啊丑陋的，粗鄙的，甚至毫不掩饰的说有色情的。</p><p>入睡前我在想一件事情，为什么人这么容易被感动，但又那么容易脱离这种感动。那种容易勾起人内心深处的柔软大抵是至亲之人的嘘寒问暖，与自己同命相连之人的痛苦。我们活着，看到比自己好的人会羡慕，看到比自己不好的人会痛苦。一颗怜悯之心被自己这样反反复复的使用，最后归为麻木。<br><img src="https://raw.githubusercontent.com/dellevin/BlogImgs/main/picGoUpload/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230507170428.webp"></p><p>　　有时候挺恨的，这是个什么破时代，破时代，破时代啊，想当个好官都要匿名，都要被嘲笑。“好好干，日子会越来越甜”一句话充满着上层阶级对底层人民的怜悯，这句怜悯甚至带着些许的自视甚高。我讨厌谷爱凌，讨厌白岩松，有的时候想过，自己讨厌的不是他们，是讨厌的这种高高在上的人，努力实现了阶级的跃迁，真的是一件美事，有背后家境的撑腰，就算是猪过的也比普通人好上百倍。百年出来了雷锋，可惜再难有了。</p><p><img src="https://raw.githubusercontent.com/dellevin/BlogImgs/main/picGoUpload/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230507170432.webp"></p><p>　　一场疫情打碎了太多人的美梦，疫情期间，回忆过往成了那几年的主旋律。现在年轻人的批判成为了近几年的主旋律。没一个时代都有一个时代的标志。可以是一个人，也可以是一种意。<br><img src="https://raw.githubusercontent.com/dellevin/BlogImgs/main/picGoUpload/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230507170420.webp"></p><p>　　随着时代的发展，阶级固化，再去冲破他不知道还要多久，有的人不愿意放手，就会用制度经验来压。以前是人推动着社会走，现在是社会逼着人再跑。</p><p><img src="https://raw.githubusercontent.com/dellevin/BlogImgs/main/picGoUpload/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230507170410.webp"></p><p>有些跑题了，随便了，反正是睡前的胡思乱想，也许短视频的出现改变了这个时代。以前人民获取信息的方式是报纸，权威大，官方，留给人足够的思考辩证看待事物的时间。现在我们获取信息的方式有很多，可是这种驳杂带来的思考时间几乎为零，同时各种逆天言论带来了人门思想的解放。在此推荐尼尔波茨曼的三部曲。</p><p>　　之前在知乎上针对追星问题的谈论，结果因为指名道姓的说了蔡徐坤和肖战被某些人举报了。我在说追星的意义和时代的悲剧，她们和我扯自己的哥哥有太多的努力。我真的是。。。一头牛永远无法和一头狮子在同一个草原上谈论生存，一个想要吃草，一个想要吃牛。</p><p>　　安得广厦千万间，大庇天下寒士俱欢颜。我当年背的时候满满的豪气，现在留给自己的只是苦笑。我好佩服辛弃疾啊！尤其是那“少年不识愁滋味，爱上层楼。爱上层楼，为赋新词强说愁。”（这是上半阙），我当时也好喜欢背这首诗的下半阙。因为我相信我终有一天会明白他的，是现在吗？之前和一位前辈谈论过这些闲言碎语，他和我说资本论已经过时了，资本论真的过时了吗？</p><p>　　兴，百姓苦。亡，百姓苦。到最后天下还真的是归于这一句话。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>div内元素居中</title>
      <link href="/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-07-div%E5%86%85%E5%85%83%E7%B4%A0%E5%B1%85%E4%B8%AD/"/>
      <url>/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-05-07-div%E5%86%85%E5%85%83%E7%B4%A0%E5%B1%85%E4%B8%AD/</url>
      
        <content type="html"><![CDATA[<p>使用flex布局实现，示例代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>flex<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.container</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">350px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;<span class="comment">/*设为 Flex 布局以后，子元素的float、clear和vertical-align属性将失效*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: -webkit-flex; <span class="comment">/* Safari */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex-direction</span>: column;<span class="comment">/*容器内项目的排列方向(默认横向排列 row)*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex-wrap</span>: nowrap;<span class="comment">/*容器内项目换行方式*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">justify-content</span>: center;<span class="comment">/*项目在主轴上的对齐方式*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">align-items</span>: center;<span class="comment">/*项目在交叉轴上如何对齐*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">align-content</span>: center;<span class="comment">/*定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用*/</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.item</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: antiquewhite;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: burlywood;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: cornflowerblue;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>负二进制数相加</title>
      <link href="/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-05-07-%E8%B4%9F%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E7%9B%B8%E5%8A%A0/"/>
      <url>/2023/05/07/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-05-07-%E8%B4%9F%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E7%9B%B8%E5%8A%A0/</url>
      
        <content type="html"><![CDATA[<p>给出基数为 <strong>-2</strong> 的两个数 <code>arr1</code> 和 <code>arr2</code>，返回两数相加的结果。</p><p>数字以 <em>数组形式</em> 给出：数组由若干 0 和 1 组成，按最高有效位到最低有效位的顺序排列。例如，<code>arr = [1,1,0,1]</code> 表示数字 <code>(-2)^3 + (-2)^2 + (-2)^0 = -3</code>。<em>数组形式</em> 中的数字 <code>arr</code> 也同样不含前导零：即 <code>arr == [0]</code> 或 <code>arr[0] == 1</code>。</p><p>返回相同表示形式的 <code>arr1</code> 和 <code>arr2</code> 相加的结果。两数的表示形式为：不含前导零、由若干 0 和 1 组成的数组。</p><p><strong>示例 1：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：arr1 = [1,1,1,1,1], arr2 = [1,0,1]</span><br><span class="line">输出：[1,0,0,0,0]</span><br><span class="line">解释：arr1 表示 11，arr2 表示 5，输出表示 16 。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：arr1 = [0], arr2 = [0]</span><br><span class="line">输出：[0]</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：arr1 = [0], arr2 = [1]</span><br><span class="line">输出：[1]</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= arr1.length, arr2.length &lt;= 1000</code></li><li><code>arr1[i]</code> 和 <code>arr2[i]</code> 都是 <code>0</code> 或 <code>1</code></li><li><code>arr1</code> 和 <code>arr2</code> 都没有前导0</li></ul><h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] addNegabinary(<span class="type">int</span>[] arr1, <span class="type">int</span>[] arr2) &#123;</span><br><span class="line">        <span class="comment">// 定义规则：0+1=1，进位向前边减一，够减则减，不够减则借位</span></span><br><span class="line">        <span class="type">int</span>[] outCome = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (arr1.length &gt; arr2.length) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= arr2.length; i++) &#123;</span><br><span class="line">                arr1[arr1.length - i] += arr2[arr2.length - i];</span><br><span class="line">            &#125;</span><br><span class="line">            outCome = arr1;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= arr1.length; i++) &#123;</span><br><span class="line">                arr2[arr2.length - i] += arr1[arr1.length - i];</span><br><span class="line">            &#125;</span><br><span class="line">            outCome = arr2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// System.out.println(Arrays.toString(outCome));</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">add</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> outCome.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (outCome[i] + add &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                add = -<span class="number">1</span>;</span><br><span class="line">                outCome[i] -= <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (outCome[i] + add &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                outCome[i - <span class="number">1</span>] += <span class="number">1</span>;</span><br><span class="line">                outCome[i] = <span class="number">1</span>;</span><br><span class="line">                add = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                outCome[i] += add;</span><br><span class="line">                add = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        outCome[<span class="number">0</span>] += add;</span><br><span class="line">        <span class="comment">//System.out.println(Arrays.toString(outCome));</span></span><br><span class="line">        <span class="keyword">if</span> (outCome[<span class="number">0</span>] &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">            outCome[<span class="number">0</span>] -= <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>[] newOutCome = <span class="keyword">new</span> <span class="title class_">int</span>[outCome.length + <span class="number">2</span>];</span><br><span class="line">            newOutCome[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            newOutCome[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; outCome.length; i++) &#123;</span><br><span class="line">                newOutCome[<span class="number">2</span> + i] = outCome[i];</span><br><span class="line">            &#125;</span><br><span class="line">            outCome = newOutCome;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// System.out.println(Arrays.toString(outCome));</span></span><br><span class="line">        <span class="keyword">if</span> (outCome[<span class="number">0</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">zlength</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (zlength &lt; outCome.length &amp;&amp; outCome[zlength] == <span class="number">0</span>) &#123;</span><br><span class="line">                zlength++;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(zlength);</span><br><span class="line">            <span class="keyword">if</span> (zlength == outCome.length) &#123;</span><br><span class="line">                outCome = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">1</span>];</span><br><span class="line">                outCome[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span>[] newOutCome = <span class="keyword">new</span> <span class="title class_">int</span>[outCome.length - zlength];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; newOutCome.length; i++) &#123;</span><br><span class="line">                    newOutCome[i] = outCome[zlength + i];</span><br><span class="line">                &#125;</span><br><span class="line">                outCome = newOutCome;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> outCome;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="错误的办法："><a href="#错误的办法：" class="headerlink" title="错误的办法："></a>错误的办法：</h2><p>这里主要错误的原因是因为忽略了数组之间的长度，因为长度是1000也就是最大的数是-2的1000次幂。远远的超出了bigint，int，以及long类型的计算长度。所以下面的办法是妥妥的不对的</p><table><thead><tr><th>关键字</th><th>所占位数</th><th>范围</th></tr></thead><tbody><tr><td>int</td><td>32</td><td>−231−231 ~ 2 ^{31} - 1</td></tr><tr><td>long</td><td>64</td><td>−263−263 ~ 2 ^{63} - 1</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] addNegabinary(<span class="type">int</span>[] arr1, <span class="type">int</span>[] arr2) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">xx</span> <span class="operator">=</span> lowBinaryToInt(arr1) + lowBinaryToInt(arr2);</span><br><span class="line">        String ss= intToLowBinaryString(xx);</span><br><span class="line">        String[] ssArr = ss.split(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[ss.length()];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= ss.length()-<span class="number">1</span>; i++) &#123;</span><br><span class="line">            res[i] = Integer.parseInt(ssArr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lowBinaryToInt</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="type">double</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">xx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length - <span class="number">1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                res = res+Math.pow(-<span class="number">2</span>, xx);</span><br><span class="line">                xx++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                xx++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>)res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">intToLowBinaryString</span><span class="params">(<span class="type">int</span> N)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">while</span> (N != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> N % -<span class="number">2</span>;</span><br><span class="line">            N = N / -<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (r &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                r = r + <span class="number">2</span>;</span><br><span class="line">                N = N+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sb.append(r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.length() &gt; <span class="number">0</span> ? sb.reverse().toString() : <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue+springboot实现预览word</title>
      <link href="/2023/04/29/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-29-vue+springboot%E5%AE%9E%E7%8E%B0%E9%A2%84%E8%A7%88word/"/>
      <url>/2023/04/29/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-29-vue+springboot%E5%AE%9E%E7%8E%B0%E9%A2%84%E8%A7%88word/</url>
      
        <content type="html"><![CDATA[<p>其实这个有很多办法可以实现。</p><p>利用office的在线预览，vue的依赖，转换成pdf进行预览。三个办法我都试了。微软官方的office在线预览的话需要一个公网ip，同时有的时候还需要你科学上网，这个直接寄。</p><p><strong>word官方预览链接（支持三种格式，部分word带特殊符号或流程图无法显示）</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const routeUrl = file.url; // 文件路径</span><br><span class="line">const url = encodeURIComponent(routeUrl);</span><br><span class="line">const officeUrl = &quot;https://view.xdocin.com/view?src=&quot; + url;</span><br></pre></td></tr></table></figure><p>​  <strong>office官方预览（pdf不能展示）</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let officeUrl = &#x27;http://view.officeapps.live.com/op/view.aspx?src=&#x27;+url</span><br></pre></td></tr></table></figure><p>vue的依赖的话，GitHub上搜索一下会有很多。vue-office这个项目很棒，可惜我引入包和标签的时候会报错，人家用的是js，而我用的是ts，这个也pass了。这个是项目地址，非常棒的一个项目，可以参考学习一下：<a href="https://github.com/501351981/vue-office">https://github.com/501351981/vue-office</a></p><p>到最后，还要回到word转换成office的破办法，这是我最难接受的一个，用的人一多，后端压力就大了，万一流量上来了，服务器直接开摆，笑死。但是实在是没办法了，退退退而求其次，只能这样了。主要思路是前端把文件id获取到，去数据库搜索到存放word的url地址，后端通过url地址把doc文档转换成输入流，然后通过输出流存放到一个专属的pdf文件夹，再把这个pdf生成链接给前端，前端显示的话就用这一个链接进行显示。</p><p><strong>前端代码</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog v-model=&quot;visible&quot; :title=&quot;$t(&#x27;文件预览&#x27;)&quot; :close-on-click-modal=&quot;false&quot; :close-on-press-escape=&quot;false&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;fileMessage.fileType == &#x27;jpg&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;png&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;ico&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;gif&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;webp&#x27; </span><br><span class="line">      &quot;&gt;</span><br><span class="line">      &lt;el-image style=&quot;width: 100%&quot; :src=&quot;fileMessage.getFilePath&quot;&gt; &lt;/el-image&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileMessage.fileType == &#x27;docx&#x27; || fileMessage.fileType == &#x27;doc&#x27;&quot;&gt;</span><br><span class="line">      &lt;embed :src=&quot;result.url&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">      &lt;!-- &lt;h2 style=&quot;text-align: center;color: brown; &quot;&gt;暂不支持doc、docx格式！&lt;/h2&gt; --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileMessage.fileType == &#x27;xlsx&#x27; || fileMessage.fileType == &#x27;xls&#x27;&quot;&gt;</span><br><span class="line">      &lt;h2 style=&quot;text-align: center;color: brown; &quot;&gt;暂不支持该xlsx、xls格式！&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileMessage.fileType == &#x27;pdf&#x27;&quot;&gt;</span><br><span class="line">      &lt;embed :src=&quot;fileMessage.getFilePath&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else&gt;</span><br><span class="line">      &lt;h2 style=&quot;text-align: center;color: brown; &quot;&gt;暂不支持该文件格式！&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;</span><br><span class="line">      &lt;el-button @click=&quot;visible = false&quot;&gt;&#123;&#123; $t(&quot;退出预览&quot;) &#125;&#125;&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import baseService from &quot;@/service/baseService&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line"></span><br><span class="line">const visible = ref(false);</span><br><span class="line">const dataFormRef = ref();</span><br><span class="line"></span><br><span class="line">const fileMessage = reactive(&#123;</span><br><span class="line">  getFilePath: &quot;&quot;,</span><br><span class="line">  fileType: &quot;&quot;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const dataForm = reactive(&#123;</span><br><span class="line">  uploadFileId: &quot;&quot;,</span><br><span class="line">  uploadCompanyName: &quot;&quot;,</span><br><span class="line">  uploadFileName: &quot;&quot;,</span><br><span class="line">  uploadFilePath: &quot;&quot;,</span><br><span class="line">  uploadUserName: &quot;&quot;,</span><br><span class="line">  uploadFileTime: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const init = (uploadFileId?: number) =&gt; &#123;</span><br><span class="line">  visible.value = true;</span><br><span class="line">  dataForm.uploadFileId = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">  //重置表单数据</span><br><span class="line">  if (dataFormRef.value) &#123;</span><br><span class="line">    dataFormRef.value.resetFields();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (uploadFileId) &#123;</span><br><span class="line">    getInfo(uploadFileId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const result = reactive(&#123;</span><br><span class="line">  url: &quot;&quot;,</span><br><span class="line">  msg: &quot;&quot;</span><br><span class="line">&#125;);</span><br><span class="line">//var showType: string;</span><br><span class="line">// 获取信息</span><br><span class="line">const getInfo = (uploadFileId: number) =&gt; &#123;</span><br><span class="line">  baseService.get(&quot;/uploadFile/xyjqfileupload/&quot; + uploadFileId).then((res) =&gt; &#123;</span><br><span class="line">    Object.assign(dataForm, res.data);</span><br><span class="line">    if (dataForm.uploadFilePath != &quot;&quot;) &#123;</span><br><span class="line">      fileMessage.getFilePath = dataForm.uploadFilePath; //获取到图片的路径，写在这里面才管用，写在外面，第一次请求时候没有数据</span><br><span class="line">      //console.log(getFilePath.substring(getFilePath.lastIndexOf(&quot;.&quot;) + 1, getFilePath.length));</span><br><span class="line">      //console.log(getFilePath);</span><br><span class="line">      fileMessage.fileType = fileMessage.getFilePath.substring(fileMessage.getFilePath.lastIndexOf(&quot;.&quot;) + 1, fileMessage.getFilePath.length);</span><br><span class="line">      //showType = fileType;</span><br><span class="line">      console.log(&quot;文件类型：&quot; + fileMessage.fileType);</span><br><span class="line">      console.log(fileMessage.getFilePath);</span><br><span class="line">      if (fileMessage.fileType == &quot;doc&quot; || fileMessage.fileType == &quot;docx&quot;) &#123;</span><br><span class="line">        baseService</span><br><span class="line">          .post(`/uploadFile/xyjqfileupload/pdfUrl/$&#123;uploadFileId&#125;`)</span><br><span class="line">          .then((res) =&gt; &#123;</span><br><span class="line">            if (res.code === 0) &#123;</span><br><span class="line">              result.url = res.data;</span><br><span class="line">              console.log(res.data);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              ElMessage.error(res.msg);</span><br><span class="line">              result.msg = res.msg;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch((err) =&gt; &#123;</span><br><span class="line">            ElMessage.error(err.message);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      ElMessage.error(&quot;链接地址为空，无法打开&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  init</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>主要核心代码是这里</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取信息</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getInfo</span> = (<span class="params">uploadFileId: number</span>) =&gt; &#123;</span><br><span class="line">  baseService.<span class="title function_">get</span>(<span class="string">&quot;/uploadFile/xyjqfileupload/&quot;</span> + uploadFileId).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(dataForm, res.<span class="property">data</span>);</span><br><span class="line">    <span class="keyword">if</span> (dataForm.<span class="property">uploadFilePath</span> != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">      fileMessage.<span class="property">getFilePath</span> = dataForm.<span class="property">uploadFilePath</span>; <span class="comment">//获取到图片的路径，写在这里面才管用，写在外面，第一次请求时候没有数据</span></span><br><span class="line">      <span class="comment">//console.log(getFilePath.substring(getFilePath.lastIndexOf(&quot;.&quot;) + 1, getFilePath.length));</span></span><br><span class="line">      <span class="comment">//console.log(getFilePath);</span></span><br><span class="line">      fileMessage.<span class="property">fileType</span> = fileMessage.<span class="property">getFilePath</span>.<span class="title function_">substring</span>(fileMessage.<span class="property">getFilePath</span>.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>, fileMessage.<span class="property">getFilePath</span>.<span class="property">length</span>);</span><br><span class="line">      <span class="comment">//showType = fileType;</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件类型：&quot;</span> + fileMessage.<span class="property">fileType</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(fileMessage.<span class="property">getFilePath</span>);</span><br><span class="line">      <span class="keyword">if</span> (fileMessage.<span class="property">fileType</span> == <span class="string">&quot;doc&quot;</span> || fileMessage.<span class="property">fileType</span> == <span class="string">&quot;docx&quot;</span>) &#123;</span><br><span class="line">        baseService</span><br><span class="line">          .<span class="title function_">post</span>(<span class="string">`/uploadFile/xyjqfileupload/pdfUrl/<span class="subst">$&#123;uploadFileId&#125;</span>`</span>)</span><br><span class="line">          .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">0</span>) &#123;</span><br><span class="line">              result.<span class="property">url</span> = res.<span class="property">data</span>;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>);</span><br><span class="line">              result.<span class="property">msg</span> = res.<span class="property">msg</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(err.<span class="property">message</span>);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">&quot;链接地址为空，无法打开&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>主要就是获取到文件之后看看文件后缀，欸！是doc或者docx格式的，那就继续post后端，把文件id发过去，这样后端就能通过id在数据库里面找到文件的在线链接。然后进行下载解析word。</p><p><strong>后端部分代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/pdfUrl/&#123;fileId&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;WORD转换PdF&quot;)</span></span><br><span class="line"><span class="meta">@LogOperation(&quot;WORD转换pdf&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result  <span class="title function_">wordToPdf</span><span class="params">(<span class="meta">@PathVariable(&quot;fileId&quot;)</span> String fileId)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">XyjqFileUploadEntity</span> <span class="variable">xyjqFileUploadEntity</span> <span class="operator">=</span> xyjqFileUploadService.selectById(fileId);</span><br><span class="line">    <span class="comment">//获取到url地址</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> xyjqFileUploadEntity.getUploadFilePath();</span><br><span class="line">    <span class="comment">//给新保存的文件起一个新的名字</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">strFileNameAndPoint</span> <span class="operator">=</span> url.substring(url.lastIndexOf(<span class="string">&quot;/&quot;</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">newFileName</span> <span class="operator">=</span>  strFileNameAndPoint.substring(<span class="number">0</span>,strFileNameAndPoint.lastIndexOf(<span class="string">&quot;.&quot;</span>))+<span class="string">&quot;_pdf.pdf&quot;</span>;</span><br><span class="line">    System.out.println(newFileName);</span><br><span class="line">    <span class="type">String</span> <span class="variable">paths</span> <span class="operator">=</span> <span class="string">&quot;D:\\Archive\\Desktop\\uploadFile\\WordToPdf\\&quot;</span>+newFileName;</span><br><span class="line">    <span class="comment">//先提前构建一个生成的pdf保存路径</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">outputFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(paths);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//先把获取到的文件转换成输入流的模式</span></span><br><span class="line">    <span class="type">URL</span> <span class="variable">receiveUrl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(url);</span><br><span class="line">    <span class="type">HttpURLConnection</span> <span class="variable">conn</span> <span class="operator">=</span> (HttpURLConnection)receiveUrl.openConnection();</span><br><span class="line">    <span class="comment">//设置超时间为3秒</span></span><br><span class="line">    conn.setConnectTimeout(<span class="number">3</span>*<span class="number">1000</span>);</span><br><span class="line">    <span class="comment">//将传输过来的doc文件转换成流</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">docxInputStream</span> <span class="operator">=</span> conn.getInputStream();</span><br><span class="line">    <span class="keyword">try</span>  &#123;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(outputFile);</span><br><span class="line">        <span class="type">IConverter</span> <span class="variable">converter</span> <span class="operator">=</span> LocalConverter.builder().build();</span><br><span class="line">        converter.</span><br><span class="line">                convert(docxInputStream).as(DocumentType.DOCX).<span class="comment">//作为doc格式</span></span><br><span class="line">                to(outputStream).as(DocumentType.PDF).</span><br><span class="line">                execute();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;Word To Pdf 转换完成&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将file格式转换成MultipartFile格式</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(paths);</span><br><span class="line">    <span class="type">MultipartFile</span> <span class="variable">cMultiFile</span> <span class="operator">=</span> getMultipartFile(file);</span><br><span class="line">    <span class="comment">//获取到新的url返还给前端进行预览</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">newUrl</span> <span class="operator">=</span> OSSFactory.build().uploadSuffix(cMultiFile.getBytes(), <span class="string">&quot;pdf&quot;</span>);</span><br><span class="line">    System.out.println(newUrl);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>().ok(newUrl);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> MultipartFile <span class="title function_">getMultipartFile</span><span class="params">(File file)</span> &#123;</span><br><span class="line">    <span class="type">DiskFileItem</span> <span class="variable">item</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DiskFileItem</span>(<span class="string">&quot;file&quot;</span></span><br><span class="line">            , MediaType.MULTIPART_FORM_DATA_VALUE</span><br><span class="line">            , <span class="literal">true</span></span><br><span class="line">            , file.getName()</span><br><span class="line">            , (<span class="type">int</span>)file.length()</span><br><span class="line">            , file.getParentFile());</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> item.getOutputStream();</span><br><span class="line">        os.write(FileUtils.readFileToByteArray(file));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartFile</span>(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我开始是想传输url的，但是post之后，发现失败，原来前端不承认这样的链接啊，我也是太天真了，所以只能这么做了。</p><p>哦对，还需要引入两个依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 转换成PDF--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.documents4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>documents4j-local<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.documents4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>documents4j-transformer-msoffice-word<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>基本情况是这个样子，中间还少了一些判断，比如第二次打开的时候，这个链接其实以及生成一个pdf了，再次预览的话，又要生成一个一样的就覆盖了，实在是太占用资源了，还不如去mysql里面做个表去保存这个生成的预览pdf链接，然后直接返还，这样就能再一定程度节省服务器资源了。目前没写主要是太困了，我需要睡觉了。。。想起来再写吧。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
            <tag> java </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>v-if 与 v-show 的区别</title>
      <link href="/2023/04/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-27-v-if_%E4%B8%8E_v-show_%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2023/04/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-27-v-if_%E4%B8%8E_v-show_%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h2 id="v-if-和-v-show-区别："><a href="#v-if-和-v-show-区别：" class="headerlink" title="v-if 和 v-show 区别："></a>v-if 和 v-show 区别：</h2><p>在切换 v-if 块时，Vue.js 有一个局部编译&#x2F;卸载过程，因为 v-if 之中的模板也可能包括数据绑定或子组件。v-if 是真实的条件渲染，因为它会确保条件块在切换当中合适地销毁与重建条件块内的事件监听器和子组件。</p><p>v-if 也是惰性的：如果在初始渲染时条件为假，则什么也不做——在条件第一次变为真时才开始局部编译（编译会被缓存起来）。</p><p>相比之下，v-show 简单得多——元素始终被编译并保留，只是简单地基于 CSS 切换。</p><p>一般来说，v-if 有更高的切换消耗而 v-show 有更高的初始渲染消耗。因此，如果需要频繁切换 v-show 较好，如果在运行时条件不大可能改变 v-if 较好。</p><h2 id="v-if-和-v-show-区别：-1"><a href="#v-if-和-v-show-区别：-1" class="headerlink" title="v-if 和 v-show 区别："></a>v-if 和 v-show 区别：</h2><p>v-if 是动态添加，当值为 false 时，是完全移除该元素，即 dom 树中不存在该元素。</p><p>v-show 仅是隐藏 &#x2F; 显示，值为 false 时，该元素依旧存在于 dom 树中。若其原有样式设置了 display: none 则会导致其无法正常显示。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue.js 两个等号 == 和三个等号 ===的区别</title>
      <link href="/2023/04/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-27-vue.js_%E4%B8%A4%E4%B8%AA%E7%AD%89%E5%8F%B7_==_%E5%92%8C%E4%B8%89%E4%B8%AA%E7%AD%89%E5%8F%B7_===%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2023/04/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-27-vue.js_%E4%B8%A4%E4%B8%AA%E7%AD%89%E5%8F%B7_==_%E5%92%8C%E4%B8%89%E4%B8%AA%E7%AD%89%E5%8F%B7_===%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p><code>== </code>用于比较两者是否相等，忽略数据类型。</p><p><code>=== </code>用于更严谨的比较，值和值的数据类型都需要同时比较。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;vue.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;text ==1 &quot;</span>&gt;</span></span><br><span class="line">            1--值一样，类型不同，两个等号显示 </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;text ===1 &quot;</span>&gt;</span></span><br><span class="line">            2--值一样，类型不同，三个等号不显示</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;text ===&#x27;1&#x27; &quot;</span>&gt;</span></span><br><span class="line">            3--值一样，类型同，三个等号显示</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/* text:&quot;1&quot; 这里的1是个字符串  */</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">text</span>:<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>显示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1--值一样，类型不同，两个等号显示 </span><br><span class="line">3--值一样，类型同，三个等号显示</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue数据传递加载以及v-if判断不显示</title>
      <link href="/2023/04/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-27-vue%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E5%8A%A0%E8%BD%BD%E4%BB%A5%E5%8F%8Av-if%E5%88%A4%E6%96%AD%E4%B8%8D%E6%98%BE%E7%A4%BA/"/>
      <url>/2023/04/27/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-27-vue%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E5%8A%A0%E8%BD%BD%E4%BB%A5%E5%8F%8Av-if%E5%88%A4%E6%96%AD%E4%B8%8D%E6%98%BE%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<p>今天在尽心数据传递的时候，在点击的时候，发现数据第一次会为空，但是控制台get到的数据时正常的，也就是说，赋值的时候能赋值上去，当时到了v-if判断的时候出现了小问题。</p><p>一开始时按照h5的逻辑来，我以为是script在标签后面，所以才后渲染，导致判断失误的。以为时vue渲染的时候先吧标签渲染，然后才开始渲染script，但是这样的情况时不合理的，如果后加载标签的话，那么显示的时候标签上的颜色标签应该是不上色的情况。所以这个思路时错误的。</p><p>代码大致的结构是这样的，之前的代码删了，大致情况时这个样子。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog v-model=&quot;visible&quot; :title=&quot;$t(&#x27;文件预览&#x27;)&quot; :close-on-click-modal=&quot;false&quot; :close-on-press-escape=&quot;false&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;fileType == &#x27;jpg&#x27; ||</span><br><span class="line">      fileType == &#x27;png&#x27; ||</span><br><span class="line">      fileType == &#x27;ico&#x27; ||</span><br><span class="line">      fileType == &#x27;gif&#x27; ||</span><br><span class="line">      fileType == &#x27;webp&#x27; </span><br><span class="line">      &quot;&gt;</span><br><span class="line">      &lt;el-image style=&quot;width: 100%&quot; :src=&quot;getFilePath&quot;&gt; &lt;/el-image&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileType == &#x27;docx&#x27; || fileType == &#x27;doc&#x27;&quot;&gt;文档</span><br><span class="line">      &lt;embed :src=&quot;getFilePath&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileType == &#x27;xlsx&#x27; || fileType == &#x27;xls&#x27;&quot;&gt;表格</span><br><span class="line">      &lt;embed :src=&quot;getFilePath&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileType == &#x27;pdf&#x27;&quot;&gt;</span><br><span class="line">      &lt;embed :src=&quot;getFilePath&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else&gt;</span><br><span class="line">      &lt;h2 style=&quot;text-align: center;color: brown; &quot;&gt;暂不支持该文件格式！&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;</span><br><span class="line">      &lt;el-button @click=&quot;visible = false&quot;&gt;&#123;&#123; $t(&quot;退出预览&quot;) &#125;&#125;&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import baseService from &quot;@/service/baseService&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line"></span><br><span class="line">const visible = ref(false);</span><br><span class="line">const dataFormRef = ref();</span><br><span class="line">var getFilePath = &quot;&quot;;</span><br><span class="line">var fileType = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">const fileMessage = reactive(&#123;</span><br><span class="line">  getFilePath: &quot;&quot;,</span><br><span class="line">  fileType: &quot;&quot;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const dataForm = reactive(&#123;</span><br><span class="line">  uploadFileId: &quot;&quot;,</span><br><span class="line">  uploadCompanyName: &quot;&quot;,</span><br><span class="line">  uploadFileName: &quot;&quot;,</span><br><span class="line">  uploadFilePath: &quot;&quot;,</span><br><span class="line">  uploadUserName: &quot;&quot;,</span><br><span class="line">  uploadFileTime: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const init = (uploadFileId?: number) =&gt; &#123;</span><br><span class="line">  visible.value = true;</span><br><span class="line">  dataForm.uploadFileId = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">  //重置表单数据</span><br><span class="line">  if (dataFormRef.value) &#123;</span><br><span class="line">    dataFormRef.value.resetFields();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (uploadFileId) &#123;</span><br><span class="line">    getInfo(uploadFileId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//var showType: string;</span><br><span class="line">// 获取信息</span><br><span class="line">const getInfo = (uploadFileId: number) =&gt; &#123;</span><br><span class="line">  baseService.get(&quot;/uploadFile/xyjqfileupload/&quot; + uploadFileId).then((res) =&gt; &#123;</span><br><span class="line">    Object.assign(dataForm, res.data);</span><br><span class="line">    if (dataForm.uploadFilePath != &quot;&quot;) &#123;</span><br><span class="line">      getFilePath = dataForm.uploadFilePath; //获取到图片的路径，写在这里面才管用，写在外面，第一次请求时候没有数据</span><br><span class="line">      //获取文件的类型，取文件后缀名判断</span><br><span class="line">      fileType = getFilePath.substring(getFilePath.lastIndexOf(&quot;.&quot;) + 1, getFilePath.length);</span><br><span class="line">      console.log(&quot;文件类型：&quot; + fileType);</span><br><span class="line">      console.log(getFilePath);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      ElMessage.error(&quot;链接地址为空，无法打开&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  init</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>代码大致时这个情况，后来发现主要原因出现在这两个赋值传递值的阶段</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var filetype=&quot;&quot;;</span><br><span class="line">var getFilePath=&quot;&quot;;</span><br></pre></td></tr></table></figure><p>不知道是不是vue的结构还是html的结构问题，主要脚本语言时时typescript，需要const定义一下属性进行赋值，才可以在第一次传递数据和判断数据的时候生效，也就是说要改成下面的这个情况。而且在ts中，var的作用区间并不是和js一样，我想大概是因为这个情况吧，才学没多久，希望有人能指出这个bug来。。。。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const fileMessage = reactive(&#123;</span><br><span class="line">  getFilePath: &quot;&quot;,</span><br><span class="line">  fileType: &quot;&quot;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>这个是正确的结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog v-model=&quot;visible&quot; :title=&quot;$t(&#x27;文件预览&#x27;)&quot; :close-on-click-modal=&quot;false&quot; :close-on-press-escape=&quot;false&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;fileMessage.fileType == &#x27;jpg&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;png&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;ico&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;gif&#x27; ||</span><br><span class="line">      fileMessage.fileType == &#x27;webp&#x27; </span><br><span class="line">      &quot;&gt;</span><br><span class="line">      &lt;el-image style=&quot;width: 100%&quot; :src=&quot;fileMessage.getFilePath&quot;&gt; &lt;/el-image&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileMessage.fileType == &#x27;docx&#x27; || fileMessage.fileType == &#x27;doc&#x27;&quot;&gt;文档</span><br><span class="line">      &lt;embed :src=&quot;fileMessage.getFilePath&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileMessage.fileType == &#x27;xlsx&#x27; || fileMessage.fileType == &#x27;xls&#x27;&quot;&gt;表格</span><br><span class="line">      &lt;embed :src=&quot;fileMessage.getFilePath&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;fileMessage.fileType == &#x27;pdf&#x27;&quot;&gt;</span><br><span class="line">      &lt;embed :src=&quot;fileMessage.getFilePath&quot; style=&quot;width: 100%; height: 600px&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else&gt;</span><br><span class="line">      &lt;h2 style=&quot;text-align: center;color: brown; &quot;&gt;暂不支持该文件格式！&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;</span><br><span class="line">      &lt;el-button @click=&quot;visible = false&quot;&gt;&#123;&#123; $t(&quot;退出预览&quot;) &#125;&#125;&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import baseService from &quot;@/service/baseService&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line"></span><br><span class="line">const visible = ref(false);</span><br><span class="line">const dataFormRef = ref();</span><br><span class="line"></span><br><span class="line">const fileMessage = reactive(&#123;</span><br><span class="line">  getFilePath: &quot;&quot;,</span><br><span class="line">  fileType: &quot;&quot;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const dataForm = reactive(&#123;</span><br><span class="line">  uploadFileId: &quot;&quot;,</span><br><span class="line">  uploadCompanyName: &quot;&quot;,</span><br><span class="line">  uploadFileName: &quot;&quot;,</span><br><span class="line">  uploadFilePath: &quot;&quot;,</span><br><span class="line">  uploadUserName: &quot;&quot;,</span><br><span class="line">  uploadFileTime: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const init = (uploadFileId?: number) =&gt; &#123;</span><br><span class="line">  visible.value = true;</span><br><span class="line">  dataForm.uploadFileId = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">  //重置表单数据</span><br><span class="line">  if (dataFormRef.value) &#123;</span><br><span class="line">    dataFormRef.value.resetFields();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (uploadFileId) &#123;</span><br><span class="line">    getInfo(uploadFileId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">//var showType: string;</span><br><span class="line">// 获取信息</span><br><span class="line">const getInfo = (uploadFileId: number) =&gt; &#123;</span><br><span class="line">  baseService.get(&quot;/uploadFile/xyjqfileupload/&quot; + uploadFileId).then((res) =&gt; &#123;</span><br><span class="line">    Object.assign(dataForm, res.data);</span><br><span class="line">    if (dataForm.uploadFilePath != &quot;&quot;) &#123;</span><br><span class="line">      fileMessage.getFilePath = dataForm.uploadFilePath; //获取到图片的路径，卸载这里面才管用，写在外面，第一次请求时候没有数据</span><br><span class="line">      //console.log(getFilePath.substring(getFilePath.lastIndexOf(&quot;.&quot;) + 1, getFilePath.length));</span><br><span class="line">      //console.log(getFilePath);</span><br><span class="line">      fileMessage.fileType = fileMessage.getFilePath.substring(fileMessage.getFilePath.lastIndexOf(&quot;.&quot;) + 1, fileMessage.getFilePath.length);</span><br><span class="line">      //showType = fileType;</span><br><span class="line">      console.log(&quot;文件类型：&quot; + fileMessage.fileType);</span><br><span class="line">      console.log(fileMessage.getFilePath);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      ElMessage.error(&quot;链接地址为空，无法打开&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  init</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java截取字符</title>
      <link href="/2023/04/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-26-Java%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6/"/>
      <url>/2023/04/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-26-Java%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>今天脑子突然抽了，截取字符的时候</p><p>想把</p><p>[1651114259328487426]</p><p>截取成</p><p>1651114259328487426</p><p>我知道是substring从1开始截取，但是为什么最后是length()-1呢，一开始-2我还很疑惑，看了一些文档才反应过来。</p><ul><li><p><strong>beginIndex</strong> – 起始索引（包括）, 索引从 0 开始。</p></li><li><p><strong>endIndex</strong> – 结束索引（不包括）。</p></li></ul><p>原来是最后的索引是不包括的呀。。。自己真的蠢到家了，自己把自己蠢到了，说到底基础还是不扎实。</p><p><strong>Java截取最后一个&#x2F;后面的所有字符</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">imgUrl</span> <span class="operator">=</span> <span class="string">&quot;http://127.0.0.1:8080/cms/ReadAddress/1479805098158.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">image</span> <span class="operator">=</span> imgUrl.substring(imgUrl.lastIndexOf(<span class="string">&quot;/&quot;</span>)+<span class="number">1</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows的bat脚本控制nginx</title>
      <link href="/2023/04/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-26-windows%E7%9A%84bat%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6nginx/"/>
      <url>/2023/04/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-26-windows%E7%9A%84bat%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6nginx/</url>
      
        <content type="html"><![CDATA[<p>测试用到nginx了，但是频繁使用命令太麻烦，集成到bat脚本里面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">rem 提供Windows下nginx的启动，重启，关闭功能</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> ==================begin========================</span><br><span class="line">  </span><br><span class="line">cls</span><br><span class="line">::ngxin 所在的盘符</span><br><span class="line"><span class="built_in">set</span> NGINX_PATH=D:</span><br><span class="line">  </span><br><span class="line">::nginx 所在目录</span><br><span class="line"><span class="built_in">set</span> NGINX_DIR=D:\Environment\nginx\</span><br><span class="line">color 0c</span><br><span class="line">TITLE Nginx 管理程序增强版</span><br><span class="line">  </span><br><span class="line">CLS</span><br><span class="line">  </span><br><span class="line">:MENU</span><br><span class="line">  </span><br><span class="line"><span class="built_in">echo</span>. _nginx 进程list:</span><br><span class="line">::tasklist|findstr /i <span class="string">&quot;nginx.exe&quot;</span></span><br><span class="line">tasklist /fi <span class="string">&quot;imagename eq nginx.exe&quot;</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line">::*****************************</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>.  [1] 启动Nginx </span><br><span class="line">    <span class="built_in">echo</span>.  [2] 关闭Nginx </span><br><span class="line">    <span class="built_in">echo</span>.  [3] 重启Nginx</span><br><span class="line">    <span class="built_in">echo</span>.  [4] 刷新控制台 </span><br><span class="line">    <span class="built_in">echo</span>.  [5] 重新加载Nginx配置文件</span><br><span class="line">    <span class="built_in">echo</span>.  [6] 检查测试nginx配置文件</span><br><span class="line">    <span class="built_in">echo</span>.  [7] 查看nginx version</span><br><span class="line">    <span class="built_in">echo</span>.  [0] 退 出</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line">  </span><br><span class="line"><span class="built_in">echo</span>.请输入选择的序号:</span><br><span class="line"><span class="built_in">set</span> /p ID=</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;1&quot;</span> GOTO start</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;2&quot;</span> GOTO stop</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;3&quot;</span> GOTO restart</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;4&quot;</span> GOTO MENU</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;5&quot;</span> GOTO reloadConf</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;6&quot;</span> GOTO checkConf</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;7&quot;</span> GOTO showVersion</span><br><span class="line">    IF <span class="string">&quot;%id%&quot;</span>==<span class="string">&quot;0&quot;</span> EXIT</span><br><span class="line">PAUSE</span><br><span class="line">  </span><br><span class="line">::********************</span><br><span class="line">::启动</span><br><span class="line">:start</span><br><span class="line">    call :startNginx</span><br><span class="line">    GOTO MENU</span><br><span class="line">  </span><br><span class="line">::停止</span><br><span class="line">:stop</span><br><span class="line">    call :shutdownNginx</span><br><span class="line">    GOTO MENU</span><br><span class="line">  </span><br><span class="line">::重启</span><br><span class="line">:restart</span><br><span class="line">    call :shutdownNginx</span><br><span class="line">    call :startNginx</span><br><span class="line">    GOTO MENU</span><br><span class="line">  </span><br><span class="line">::检查测试配置文件</span><br><span class="line">:checkConf</span><br><span class="line">    call :checkConfNginx</span><br><span class="line">  GOTO MENU</span><br><span class="line">  </span><br><span class="line">::重新加载Nginx配置文件</span><br><span class="line">:reloadConf</span><br><span class="line">    call :checkConfNginx</span><br><span class="line">    call :reloadConfNginx</span><br><span class="line">  GOTO MENU</span><br><span class="line">     </span><br><span class="line">::显示nginx版本</span><br><span class="line">:showVersion</span><br><span class="line">    call :showVersionNginx</span><br><span class="line">  GOTO MENU</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">::***************</span><br><span class="line">::底层</span><br><span class="line">::***************</span><br><span class="line">:shutdownNginx</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>.关闭Nginx......</span><br><span class="line">    taskkill /F /IM nginx.exe &gt; nul</span><br><span class="line">    echo.OK,关闭所有nginx 进程</span><br><span class="line">    goto :eof</span><br><span class="line">  </span><br><span class="line">:startNginx</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>.启动Nginx......</span><br><span class="line">    IF NOT EXIST <span class="string">&quot;%NGINX_DIR%nginx.exe&quot;</span> (</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;%NGINX_DIR%nginx.exe&quot;</span>不存在</span><br><span class="line">        goto :eof</span><br><span class="line">     )</span><br><span class="line">  </span><br><span class="line">    %NGINX_PATH%</span><br><span class="line">    <span class="built_in">cd</span> <span class="string">&quot;%NGINX_DIR%&quot;</span></span><br><span class="line">  </span><br><span class="line">    IF EXIST <span class="string">&quot;%NGINX_DIR%nginx.exe&quot;</span> (</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;start &#x27;&#x27; nginx.exe&quot;</span></span><br><span class="line">        start <span class="string">&quot;&quot;</span> nginx.exe</span><br><span class="line">    )</span><br><span class="line">    echo.OK</span><br><span class="line">    goto :eof</span><br><span class="line">     </span><br><span class="line">  </span><br><span class="line">:checkConfNginx</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>.检查测试 nginx 配置文件......</span><br><span class="line">    IF NOT EXIST <span class="string">&quot;%NGINX_DIR%nginx.exe&quot;</span> (</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;%NGINX_DIR%nginx.exe&quot;</span>不存在</span><br><span class="line">        goto :eof</span><br><span class="line">     )</span><br><span class="line">  </span><br><span class="line">    %NGINX_PATH%</span><br><span class="line">    <span class="built_in">cd</span> <span class="string">&quot;%NGINX_DIR%&quot;</span></span><br><span class="line">    nginx -t -c conf/nginx.conf</span><br><span class="line">  </span><br><span class="line">    goto :eof</span><br><span class="line">     </span><br><span class="line">:: 重新加载 nginx 配置文件</span><br><span class="line">:reloadConfNginx</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    <span class="built_in">echo</span>.重新加载 nginx 配置文件......</span><br><span class="line">    IF NOT EXIST <span class="string">&quot;%NGINX_DIR%nginx.exe&quot;</span> (</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;%NGINX_DIR%nginx.exe&quot;</span>不存在</span><br><span class="line">        goto :eof</span><br><span class="line">     )</span><br><span class="line">  </span><br><span class="line">    %NGINX_PATH%</span><br><span class="line">    <span class="built_in">cd</span> <span class="string">&quot;%NGINX_DIR%&quot;</span></span><br><span class="line">    nginx -s reload</span><br><span class="line">  </span><br><span class="line">    goto :eof</span><br><span class="line">     </span><br><span class="line">::显示nginx版本</span><br><span class="line">:showVersionNginx</span><br><span class="line">    <span class="built_in">echo</span>.</span><br><span class="line">    %NGINX_PATH%</span><br><span class="line">    <span class="built_in">cd</span> <span class="string">&quot;%NGINX_DIR%&quot;</span></span><br><span class="line">    nginx -V</span><br><span class="line">    goto :eof</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>idea导入项目Command line is too long的解决办法</title>
      <link href="/2023/04/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-25-idea%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AECommand_line_is_too_long%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2023/04/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-25-idea%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AECommand_line_is_too_long%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>报错：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error running AdminApplication.Command line is too <span class="type">long</span>. Shorten the command line via JAR manifest or via a classpath file and rerun.</span><br></pre></td></tr></table></figure><p>昨天刚在新公司入职，准备接手项目的时候在导入过程中突然出现了这个错误。大概意思就是命令行太长了，你需要短一点。</p><p>因为自己还是哥小菜鸡，所以只剩下百度了。</p><p><strong>修改.idea下面的workspace.xml文件</strong></p><p>在&#96;&#96;<component name="PropertiesComponent">&#96; 这个标签里面添加一行，因为我的idea是2022.3.2所以这个文件里面的内容是json格式的。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dynamic.classpath&quot;</span>: <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure><p>老版本的idea则是添加</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dynamic.classpath&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端获取上传文件大小</title>
      <link href="/2023/04/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-25-%E5%89%8D%E7%AB%AF%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F/"/>
      <url>/2023/04/25/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-25-%E5%89%8D%E7%AB%AF%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F/</url>
      
        <content type="html"><![CDATA[<p>上传文件需要判别文件大小</p><p>以这个为案例</p><p><strong>显示部分</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;uploadFile&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myPhoto&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnConfirm&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;checkFile()&quot;</span>&gt;</span>确认上传<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br></pre></td></tr></table></figure><p><strong>JS部分</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">checkFile</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="comment">//获取文件 </span></span><br><span class="line">          <span class="keyword">var</span> file = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;uploadFile&quot;</span>).<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">          <span class="keyword">var</span> filesize=file.<span class="property">size</span>;<span class="comment">//文件的字节数</span></span><br><span class="line">          <span class="title function_">alert</span>(filesize)</span><br><span class="line">        &#125;; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>通过id获取文件来判断文件大小，这种方式是获取的文件字节数，也就是说是b如果要显示大小的话还需要除1024*1024</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库Error Code 1067 - Invalid default value 的解决办法</title>
      <link href="/2023/04/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-04-24-%E6%95%B0%E6%8D%AE%E5%BA%93Error_Code_1067_-_Invalid_default_value_%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2023/04/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-04-24-%E6%95%B0%E6%8D%AE%E5%BA%93Error_Code_1067_-_Invalid_default_value_%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>报错：<br>    Error Code: 1067 - Invalid default value for ‘LOCK_TIME_’</p><p>查阅资料知道是mysql从5.7开始，默认是严格模式，严格遵从SQL92规范。</p><p>公司mysql版本：5.7.25</p><p>我的mysql版本：5.7.40</p><p>因为mysql差距不大的原因，所以猜测，应该是我没开启timestamp默认值规则</p><p>先查看是否开启了</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> variables like <span class="string">&#x27;explicit_defaults_for_timestamp&#x27;</span>; </span><br></pre></td></tr></table></figure><p>忘了截图了，不过查询出来的结果是off</p><p><strong>设置开启</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> explicit_defaults_for_timestamp <span class="operator">=</span> <span class="keyword">ON</span>;</span><br></pre></td></tr></table></figure><p>再次查看是否开启</p><p><strong>explicit_defaults_for_timestamp 的值是ON表示开启</strong></p><p>开启了，然后再次导入数据库。就可以了。</p><p>还有一种解决方式是去除掉关于时间这些not null字段，也可以，不过实在是太多了，所以就没有选择此种方法。</p><p>参考连接：</p><p><a href="https://www.jianshu.com/p/523a0bf27095">https://www.jianshu.com/p/523a0bf27095</a></p><p><a href="https://blog.csdn.net/u010227042/article/details/123321421">https://blog.csdn.net/u010227042/article/details/123321421</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 故障 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cb() never called!的解决办法</title>
      <link href="/2023/04/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-24-cb()_never_called!%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2023/04/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-24-cb()_never_called!%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm ERR! cb() never called!</span><br><span class="line"></span><br><span class="line">npm ERR! This is an error with npm itself. Please report this error at:</span><br><span class="line">npm ERR!     &lt;https://npm.community&gt;</span><br><span class="line"></span><br><span class="line">npm ERR! A complete <span class="built_in">log</span> of this run can be found <span class="keyword">in</span>:</span><br><span class="line">npm ERR!     /Users/geekchief/.npm/_logs/2021-07-12T06_56_29_399Z-debug.log</span><br></pre></td></tr></table></figure><p><strong>github的issue的讨论：</strong> <a href="https://github.com/npm/cli/issues/417">https://github.com/npm/cli/issues/417</a><br>错误的意思是，npm程序执行到未知流程节点中然后没有调用回调通知任务已执行完成，导致进程异常退出，据官方说法他们也没有太好的方式解决，不过网上的东西大多数不靠谱，但是有挺多人用的淘宝源，出这个错误的概率会大大提高。</p><p>先尝试清楚npm缓存再安装试试</p><p><code>npm cache clean -force</code></p><p>然后</p><p><code>npm install</code></p><p>不过这个办法多数时候不管用</p><p>造成这个办法的情况是使用的淘宝的源，建议换回官方的源，然后再次安装</p><p><strong>查看是什么源</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure><p>如果带有taobao.org表示淘宝的源，好的，果断替换</p><p><strong>换回官方源</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org/</span><br></pre></td></tr></table></figure><p>再次查看没有了，表示替换成功了，多数时候下载会失败或者很慢，这就需要我们科学上网了，设置npm代理的端口。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> proxy=http://127.0.0.1:10809</span><br></pre></td></tr></table></figure><p>然后如果想查看npm配置的话可以使用这个命令查看<code>npm config list</code></p><p>如果出现<code>proxy = &#39;http://127.0.0.1:10809&#39;</code>表示设置成功此时你要保证本地的v2代理能用奥，然后再次<code>npm install</code>安装就会成功了</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 故障 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Winows取消Ctrl+Alt+Del安全登录交互式登录</title>
      <link href="/2023/04/16/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-16-_Winows%E5%8F%96%E6%B6%88Ctrl+Alt+Del%E5%AE%89%E5%85%A8%E7%99%BB%E5%BD%95%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%99%BB%E5%BD%95/"/>
      <url>/2023/04/16/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-16-_Winows%E5%8F%96%E6%B6%88Ctrl+Alt+Del%E5%AE%89%E5%85%A8%E7%99%BB%E5%BD%95%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>自己之前换的神州网信的windows系统，老是有这种安全登录，再烧录单片机的时候，用到了这个组合键，但是digispark这个死活没有delete的按键，所以退而求其次，只能取消这个东西了。</p><ol><li><p>按 Win + R 组合键打开运行，输入：gpedit.msc 命令，确定或回车，打开本地组策略编辑器</p></li><li><p>在本地组策略编辑器中，依次展开：计算机配置 - Windows 设置 - 安全设置 - 本地策略 - 安全选项，在右侧找到并双击打开交互式：无须按Ctrl+Alt+Del；</p></li><li><p>交互式登录：无须按Ctrl+Alt+Del属性创空中，选择已启用；</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用digispark实现windows登录</title>
      <link href="/2023/04/16/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-16-%E7%94%A8digispark%E5%AE%9E%E7%8E%B0windows%E7%99%BB%E5%BD%95/"/>
      <url>/2023/04/16/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-16-%E7%94%A8digispark%E5%AE%9E%E7%8E%B0windows%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>昨晚上在家里搜搜，发现了这个小东西。之前是用来做badusb的。但是一直没有去真的实施（主要是胆小）。所以今天拿出来随便玩玩。其实这玩意可以实现很多操作，主要看自己怎么做了。</p><p><strong>下载Arduino IDE</strong></p><p><a href="https://www.arduino.cc/en/software">https://www.arduino.cc/en/software</a></p><p><strong>建议打开之后，第一件事就是挂代理，好多依赖都是需要代理才行的。</strong></p><p>简单配置：</p><p>File-&gt;Preferences-&gt;Settings</p><p>在这里面找到Additional boards manaqer URLs</p><p>然后在里面填入以下网址</p><p><a href="http://digistump.com/package_digistump_index.json">http://digistump.com/package_digistump_index.json</a></p><p>点击类似文件的按钮进行安装</p><p>然后就可以写了，有的时候一定要设置延迟，是给电脑的反应时间。。。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;DigiKeyboard.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">DigiKeyboard.<span class="built_in">sendKeyStroke</span>(<span class="number">0</span>);</span><br><span class="line">DigiKeyboard.<span class="built_in">delay</span>(<span class="number">50</span>);</span><br><span class="line">DigiKeyboard.<span class="built_in">sendKeyStroke</span>(KEY_ENTER);</span><br><span class="line">DigiKeyboard.<span class="built_in">delay</span>(<span class="number">2000</span>);</span><br><span class="line">DigiKeyboard.<span class="built_in">print</span>(<span class="string">&quot;qqqqq&quot;</span>);<span class="comment">//这里写开机密码的英文</span></span><br><span class="line">DigiKeyboard.<span class="built_in">print</span>(<span class="string">&quot;0000&quot;</span>);<span class="comment">//这里写开机密码的数字</span></span><br><span class="line">DigiKeyboard.<span class="built_in">delay</span>(<span class="number">1000</span>);</span><br><span class="line">DigiKeyboard.<span class="built_in">sendKeyStroke</span>(KEY_ENTER);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>英文和数字要分开写，测试过，好像英文和数字在一起只会有英文。</p><p>另外一定要引用<code> &quot;DigiKeyboard.h&quot;</code>而不是<code>&quot;Keyboard.h&quot;</code>。再引用Keyboard.h之后，不知道为什么会编译失败一直提是HID.h找不到，网上找办法也找不到。难受得要死。</p><p>另外<code>DigiKeyboard.h</code>无法实现<code>ctrl+del+alt</code>的组合键操作，这也是难受的一点。</p><p>写完之后，点击左上角的对勾，看看有没有错。没有错的话，就可以点击对勾旁边的按钮进行编译 了。</p><p>出现这个<code>plug in device now...</code>提示，是告诉你要再60s内插入disgispark的，要在一分钟之内不插入的话会提示你超时。插入之后，就开始识别编译了。最后出现如下的提示<code>Micronucleus done.Thank youl</code>，就说明编译成功了。</p><p>另外，要下载Digispark的驱动才可以。下面的是驱动下载的地址，然后点击64那个安装就可以了。</p><p><a href="https://github.com/digistump/DigistumpArduino/releases">https://github.com/digistump/DigistumpArduino/releases</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打醒自己</title>
      <link href="/2023/04/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-13-%E6%89%93%E9%86%92%E8%87%AA%E5%B7%B1/"/>
      <url>/2023/04/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-13-%E6%89%93%E9%86%92%E8%87%AA%E5%B7%B1/</url>
      
        <content type="html"><![CDATA[<p>离开学校，我第一件事情就应该是打醒自己，告诉自己已经进入社会，而不是沉溺于自己改变社会的幻想，而这种觉醒，却是在第一份工作辞职后，也就是毕业半年后。</p><p><strong>解释性知识不能替代实践性知识。</strong></p><p>随着行业分工的细化，整个社会也逐步的趋向于高内聚，低耦合。这种形式的发展下，“高内聚，低耦合”不仅成为了软件的评判标准，也渐渐的开始成为了个人，公司，职业的评判标准。实践性知识的重要性开始提高，但是它也开始被初入社会的年轻人忽略。</p><p>自己带着知识的傲慢，觉得自己学到的知识就可以解释宇宙万物，社会百态，觉得可以凭借知识去兑换自己的红利。找工作不顺利，工作不顺心就去批判社会，批判资本家，诚然是应该批判这些的，但是自己是真的想批判社会和资本家吗？只不过是想通过批判社会来改善个人境遇，一种逃避现实的借口罢了。</p><p>有些人也不创造价值，他们凭什么有那么好的工作。可是，寄生虫永远存在，所以社会的批判永不过时。但如果批判寄生虫的目的是为了自己当寄生虫，那的确是有些可悲了。</p><p>一旦把个人生活过不好的责任，全部总结到社会的头上，就等于放弃了个人努力的志气。用阶级理论，给不如意的工作一个安慰。用性别理论，给不如意的情感一个安慰。这些大而化之的理论，可以解释所有的不如意，但却无法纠正任何一个微小的不如意。这些理论反而固化了人的认知，让人觉得“万方有罪，唯我无辜”。这表面上是对世界的指责，其实是对自己人生的放弃。</p><p>奇怪人们为什么总用宏观客观理论解释微观主观实践？</p><hr><p>以下来自一位前辈的一句话</p><blockquote><p>用宏观上的不适当安慰微观上的不如意 但是随着互联网让人们感受到的阶级感越来越强 贫富差距越来越大 很多差距确实不是靠个人努力就可以弥补的。年轻人确实很累 也确实爱抱怨 但这也是他们一种自我保护的方式吧 毕竟现实生活中我们能改变的事情也很有限。所以年轻人爱抱怨固然不是一件好事 但也是一种方式 一种表达的方式。如果等哪天都懒得批判 懒得抱怨了 那真是快到头了</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>别看了！煎饼人是没有活路的</title>
      <link href="/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-08-%E5%88%AB%E7%9C%8B%E4%BA%86%EF%BC%81%E7%85%8E%E9%A5%BC%E4%BA%BA%E6%98%AF%E6%B2%A1%E6%9C%89%E6%B4%BB%E8%B7%AF%E7%9A%84/"/>
      <url>/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-08-%E5%88%AB%E7%9C%8B%E4%BA%86%EF%BC%81%E7%85%8E%E9%A5%BC%E4%BA%BA%E6%98%AF%E6%B2%A1%E6%9C%89%E6%B4%BB%E8%B7%AF%E7%9A%84/</url>
      
        <content type="html"><![CDATA[<p>记得在我小学的时候做过一个颇具辩论的问题，你是想做煎饼人还是不想做煎饼人呢？配图是一个煎饼人的图片和解释。我当时傻傻的选择了自己想要做一个煎饼人，想要掌控所有的知识，那时候我觉得这样的人太帅了，真的是全能啊！简直是一个完美的大写的人矗立在我的面前。</p><p>后来，那个题被打了大大的零分，语文老师还在课上拿这个典型的题做例子，告诉我们千万不要做煎饼人。当时我笨，我仍抱有幻想，不信这一切，我就想着，凭什么我就不能做个优秀的煎饼人呢？做到行行深入，我可以会的！</p><p>后来接触了计算机，我发现这个东西太有魔力了，可以实现我的好多构想。在那之后我看到了天眼之父南仁东逝世的消息，看到他的报道，音乐，建筑，天文等等，把他说的神乎其神。我那是就感觉，他就是“煎饼人”之中的神。或许直到我大学毕业之前，我都在为小学的那道题来诠释自己的选择是正确的。可是等到我到了社会上我才发现，原来我当时的选择是真的错了，老师应该给我零分的。</p><p>不会写文章，我可以学啊，起点签约了啊！我开心的不行，最后却没能上推荐，一次又一次打击的我体无完肤，或许我是不适合吧。</p><p>不会PS，我可以学啊，做展板，做明信片，这都是信手拈来的，直到我接了商单，上面的各种要求，什么出血，什么格式，我是一个都不懂，或许是我不适合吧。</p><p>不会网络安全，可是后来才明白，自己只不过是一个可笑的脚本小子，只会用工具的废人。后来又学开发，告诉自己一定可以学好的。直到算法的出现，把我打击的体无完肤。</p><p>直到，我看到那些大佬的绝伦的构思和文笔，我看到大佬的绘图制图的技术手段，看到了网安大佬的渗透技巧。这一次我把自己否定了，给曾经的自己画上了一个大大的零。</p><p>有人叫我大佬，我会感到难堪，觉得心里很不是滋味。有人批判我，我承认，我自己是水平不足。有的时候，我直到自己的实力不足，可就是想要证明自己一定可以的，后来发现，全是扯淡。大家都是普通人，别搞什么特殊了。</p><p>我活了二十五年，每天都活在自己的幻想和美梦中。一段失败的感情，让我对情字提不起任何兴趣。每当他们问“你想我没啊？”我都会说“没有”，他们以为我在骗他们，可是我说的都是实话啊，或许是他们在骗自己吧。我不知道究竟有什么能打醒我了，有的时候真的想从楼上一跃而下，告诉这个世界，你赢了。但是还不能死，我还没完成自己最后的遗愿。也许现在能支撑我活下去的是我每天的回顾的日记吧，那些短暂的开心与痛在那一刻告诉我，你还活着！</p><p>但是，我日记写完之后，又该怎样以什么形式活着呢？</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7安装Keepalived</title>
      <link href="/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-08-CentOS7%E5%AE%89%E8%A3%85Keepalived/"/>
      <url>/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-08-CentOS7%E5%AE%89%E8%A3%85Keepalived/</url>
      
        <content type="html"><![CDATA[<p><strong>Keepalived</strong> 是基于vrrp协议的一款高可用软件。Keepailived有一台主服务器和多台备份服务器，在主服务器和备份服务器上面部署相同的服务配置，使用一个虚拟IP地址对外提供服务，当主服务器出现故障时，虚拟IP地址会自动漂移到备份服务器。</p><h2 id="1-Keepalived官网下载"><a href="#1-Keepalived官网下载" class="headerlink" title="1.Keepalived官网下载"></a>1.Keepalived官网下载</h2><p><a href="https://www.keepalived.org/download.html">https://www.keepalived.org/download.html</a></p><h2 id="2-解压"><a href="#2-解压" class="headerlink" title="2.解压"></a>2.解压</h2><p>把下载好的Keepalived压缩包上传到我们的CentOS7系统上，然后输入下面解压命令进行解压。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf keepalived-2.0.18.tar.gz</span><br></pre></td></tr></table></figure><h2 id="3-配置"><a href="#3-配置" class="headerlink" title="3.配置"></a>3.配置</h2><p>先进入Keepalived目录，然后输入配置命令进行配置(–prefix：指明Keepalived的安装位置，–sysconf：指明Keepalived配置文件存放位置，必须放在&#x2F;etc下面，为了后续Keepalived启动关闭不报错)。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> keepalived-2.0.18  <span class="comment">#进入目录</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/keepalived --sysconf=/etc</span><br></pre></td></tr></table></figure><p><strong>注意</strong>  ：如果执行配置命令，出现以下警告信息，要先进行libnl核心库依赖安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARNING - this build will not support IPVS with IPv6. Please install libnl/libnl-3 dev libraries to support IPv6 with IPVS.</span><br></pre></td></tr></table></figure><h2 id="4-安装"><a href="#4-安装" class="headerlink" title="4.安装"></a>4.安装</h2><p>执行完上面命令之后，这时候Keepalived目录里面多了个Makefile的文件，这时候我们可以进行安装了。<br>输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>之后可以用<code>whereid keepalived</code>来查看具体安装位置</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript圣杯布局与双飞翼布局</title>
      <link href="/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-08-JavaScript%E5%9C%A3%E6%9D%AF%E5%B8%83%E5%B1%80%E4%B8%8E%E5%8F%8C%E9%A3%9E%E7%BF%BC%E5%B8%83%E5%B1%80/"/>
      <url>/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-08-JavaScript%E5%9C%A3%E6%9D%AF%E5%B8%83%E5%B1%80%E4%B8%8E%E5%8F%8C%E9%A3%9E%E7%BF%BC%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://juejin.cn/post/6973562604581027853">https://juejin.cn/post/6973562604581027853</a></p><p><strong>圣杯布局</strong>是通过<code>float</code>搭建布局+<code>margin</code>使三列布局到一行上+<code>relative</code>相对定位调整位置。</p><p><strong>双飞翼布局</strong>是通过<code>float</code>+<code>margin</code>，<strong>没有使用相对定位</strong>。</p><h2 id="圣杯布局"><a href="#圣杯布局" class="headerlink" title="圣杯布局"></a>圣杯布局</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  * &#123;</span><br><span class="line">      <span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line">      text-<span class="attr">align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">  html&#123;</span><br><span class="line">      <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">  &#125;</span><br><span class="line">  body&#123;</span><br><span class="line">      <span class="attr">display</span>: flex;</span><br><span class="line">      flex-<span class="attr">direction</span>: column;</span><br><span class="line">      <span class="attr">height</span>: <span class="number">100</span>%;;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">header</span>&#123;</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">      <span class="attr">height</span>: 50px;</span><br><span class="line">      background-<span class="attr">color</span>:dimgray;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">footer</span>&#123;</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">      <span class="attr">height</span>: 50px;</span><br><span class="line">      background-<span class="attr">color</span>:dimgray;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">outer</span>&#123;</span><br><span class="line">      <span class="attr">flex</span>:<span class="number">1</span>;</span><br><span class="line">      padding-<span class="attr">left</span>: 100px;</span><br><span class="line">      padding-<span class="attr">right</span>: 200px;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">center</span>&#123;</span><br><span class="line">      <span class="attr">float</span>: left;</span><br><span class="line">      background-<span class="attr">color</span>: darkslateblue;</span><br><span class="line">      <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">      <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">left</span>&#123;</span><br><span class="line">      <span class="attr">float</span>: left;</span><br><span class="line">      <span class="attr">width</span>: 100px;</span><br><span class="line">      margin-<span class="attr">left</span>: -<span class="number">100</span>%;</span><br><span class="line">      background-<span class="attr">color</span>: burlywood;</span><br><span class="line">      <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">      <span class="attr">position</span>: relative;</span><br><span class="line">      <span class="attr">left</span>: -100px;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">right</span>&#123;</span><br><span class="line">      <span class="attr">float</span>: left;</span><br><span class="line">      <span class="attr">width</span>: 200px;</span><br><span class="line">      margin-<span class="attr">left</span>: -200px;</span><br><span class="line">      <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">      <span class="attr">position</span>: relative;</span><br><span class="line">      <span class="attr">right</span>: -200px;</span><br><span class="line">      background-<span class="attr">color</span>: cyan;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span>center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="双飞翼布局"><a href="#双飞翼布局" class="headerlink" title="双飞翼布局"></a>双飞翼布局</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    *&#123;</span><br><span class="line">        <span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    html&#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">        <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">        text-<span class="attr">align</span>: center;</span><br><span class="line">    &#125;</span><br><span class="line">    body&#123;</span><br><span class="line">        <span class="attr">display</span>: flex;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">        <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">        flex-<span class="attr">direction</span>: column;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="property">header</span>&#123;</span><br><span class="line">        background-<span class="attr">color</span>:grey;</span><br><span class="line">        <span class="attr">height</span>: 50px;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="property">footer</span>&#123;</span><br><span class="line">        background-<span class="attr">color</span>:grey;</span><br><span class="line">        <span class="attr">height</span>: 50px;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="property">outer</span>&#123;</span><br><span class="line">        <span class="attr">flex</span>:<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="property">center</span>&#123;</span><br><span class="line">        <span class="attr">float</span>: left;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">        background-<span class="attr">color</span>: darkslateblue;</span><br><span class="line">        <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="property">left</span>&#123;</span><br><span class="line">        <span class="attr">float</span>: left;</span><br><span class="line">        margin-<span class="attr">left</span>: -<span class="number">100</span>%;</span><br><span class="line">        <span class="attr">width</span>: 100px;</span><br><span class="line">        background-<span class="attr">color</span>: burlywood;</span><br><span class="line">        <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="property">right</span>&#123;</span><br><span class="line">        <span class="attr">float</span>: left;</span><br><span class="line">        <span class="attr">width</span>: 200px;</span><br><span class="line">        background-<span class="attr">color</span>: cyan;</span><br><span class="line">        margin-<span class="attr">left</span>: -200px;</span><br><span class="line">        <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="property">content</span>&#123;</span><br><span class="line">        margin-<span class="attr">left</span>: 100px;</span><br><span class="line">        margin-<span class="attr">right</span>: 200px;</span><br><span class="line">        <span class="attr">height</span>: <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>echarts显示小数点后两位</title>
      <link href="/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-08-echarts%E6%98%BE%E7%A4%BA%E5%B0%8F%E6%95%B0%E7%82%B9%E5%90%8E%E4%B8%A4%E4%BD%8D/"/>
      <url>/2023/04/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-08-echarts%E6%98%BE%E7%A4%BA%E5%B0%8F%E6%95%B0%E7%82%B9%E5%90%8E%E4%B8%A4%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%; margin: 0; background-color: transparent&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 100%; background-color: transparent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;container&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(dom);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> option;</span></span><br><span class="line"><span class="language-javascript">    option = &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">backgroundColor</span>: <span class="string">&#x27;transparent&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&#x27;gauge&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">axisLine</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">width</span>: <span class="number">15</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">color</span>: [</span></span><br><span class="line"><span class="language-javascript">                [<span class="number">0.3</span>, <span class="string">&#x27;#67e0e3&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">                [<span class="number">0.7</span>, <span class="string">&#x27;#37a2da&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">                [<span class="number">1</span>, <span class="string">&#x27;#fd666d&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">              ]</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">min</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">max</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pointer</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">itemStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">color</span>: <span class="string">&#x27;auto&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">axisTick</span>: &#123;<span class="comment">//轴刻度</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">distance</span>: -<span class="number">15</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">length</span>: <span class="number">8</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">width</span>: <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">splitLine</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">distance</span>: -<span class="number">15</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">length</span>: <span class="number">15</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">width</span>: <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">axisLabel</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">distance</span>: <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">fontSize</span>: <span class="number">12</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">detail</span>: &#123;<span class="comment">//pue显示</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">valueAnimation</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="string">&#x27;PUE= &#123;value&#125;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">fontSize</span>: <span class="number">20</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">data</span>: [</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">value</span>: <span class="number">0.00</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">min</span>: <span class="number">0.00</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">max</span>: <span class="number">3.00</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          ]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      ]</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    oaJsApi.<span class="title function_">dpConnect</span>(<span class="string">&#x27;System1:PUE5.PUE:_online.._value&#x27;</span>, <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> value = data.<span class="property">value</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//var pueShow =   newF.toFixed(2); </span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//var pueShow = formatFloat(newF, n = 2,&#x27;floor&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//console.log(newF);</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//console.log(pueShow);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          myChart.<span class="title function_">setOption</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">              &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">detail</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                      <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span>  <span class="string">&quot;PUE=&quot;</span>+value.<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                      &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: [</span></span><br><span class="line"><span class="language-javascript">                  &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">value</span>:value,</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                ]</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (option &amp;&amp; <span class="keyword">typeof</span> option === <span class="string">&#x27;object&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      myChart.<span class="title function_">setOption</span>(option);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//自建方法 ceil 向上取   floor 向下区</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">formatFloat</span>(<span class="params">num, n = <span class="number">1</span>, flag</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> f = <span class="built_in">parseFloat</span>(num);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(f)) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (flag === <span class="string">&#x27;ceil&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        f = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(num * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n)) / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n); <span class="comment">// n 幂</span></span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (flag === <span class="string">&#x27;floor&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        f = <span class="title class_">Math</span>.<span class="title function_">floor</span>(num * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n)) / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n); <span class="comment">// n 幂</span></span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        f = <span class="title class_">Math</span>.<span class="title function_">round</span>(num * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n)) / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n); <span class="comment">// n 幂</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> s = f.<span class="title function_">toString</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> rs = s.<span class="title function_">indexOf</span>(<span class="string">&#x27;.&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//判定如果是整数，增加小数点再补0</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (rs &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        rs = s.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">        s += <span class="string">&#x27;.&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">while</span> (s.<span class="property">length</span> &lt;= rs + n) &#123;</span></span><br><span class="line"><span class="language-javascript">        s += <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> s;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>先处理传入的value值，</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: [</span><br><span class="line">                  &#123;</span><br><span class="line">                    <span class="attr">value</span>:value,</span><br><span class="line">                  &#125;</span><br><span class="line">      ]</span><br></pre></td></tr></table></figure><p>然后利用函数给formatter发送数据，return数据可以是string类型</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">detail</span>:&#123;</span><br><span class="line">                      <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">                            <span class="keyword">return</span>  <span class="string">&quot;PUE=&quot;</span>+value.<span class="title function_">toFixed</span>(<span class="number">2</span>);</span><br><span class="line">                      &#125;</span><br><span class="line">         &#125;,</span><br></pre></td></tr></table></figure><p>前端针对pue数据进行显示  <code>formatter: &#39;&#123;value&#125;&#39;</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">detail</span>: &#123;<span class="comment">//pue显示</span></span><br><span class="line">            <span class="attr">valueAnimation</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="string">&#x27;&#123;value&#125;&#x27;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="number">20</span></span><br><span class="line">          &#125;,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些思考</title>
      <link href="/2023/04/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-03-%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/"/>
      <url>/2023/04/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-03-%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<p>之前和我同学聊天聊到过阶级固化这种东西。未来的发展肯定是一种趋势。疫情也仅仅是加速了这种现象，很多人觉得那种专家的话语不舒服，其实这就是一种阶级分层的体现。在那些专家脑子中就已经把阶级划分出来，虽然他们可能会没有感觉，但是这种现象已经在他们话语和行为上体现出来了。</p><p>伴随着人民只是水平的提升，和人文素养的不断提高。农村家庭的子女通过教育实现向上流动的成本越来越高，动力越来越小。但是富裕的家庭却在这方面不会受到影响，他们依旧可以拿着优待可以在自己本层次上上下浮动。</p><p>不可不畏人性。歧视，贪婪这是造成阶级分化的主要原因。不是说我不信社会主义的终极形态是否可以出现。我可以肯定，在物质大于需求的情况出现之前，真正的社会主义是永远是人们空想的乌托邦。在物质大于需求之后，人们的思考方向应该是情感的摒弃，即摒弃歧视和贪婪诸多恶欲。如果不去摒弃，阶级分化必然会再次出现，压迫必然会出现。</p><p>不是说人们之中不会存在真正道德高尚的人，但是雷锋同志，焦裕禄同志都是百年罕见的人才。有些时候，人们会把高尚的品德认为耻辱，因为这样是赚不到钱的。毕竟没有底线了，钱就有了，钱有了，地位就有了，底线就可以提高了。概念化的东西，尤其是道德，是人们给自己思想和行为的枷锁，这种枷锁带领着社会形态的提升与进化。一两个人不会有什么问题，但是人多了，这种东西对于社会形态的影响是致命的。</p><p>再者就是贪污腐败，一切源于人们心中的私欲。有了一块钱你不会感觉什么，但是有了一百块钱，一千块钱，你会再想怎么能多出一百元，一千元。这就是贪欲。可以说反腐是国家和社会形态的胜利，是针对贫苦大众的胜利。但是胜利必然会牺牲，这种牺牲是对应着一些上层阶级和中产阶级。反的是上，动摇的是中产。让部分中产更加的中产，无法往上，让贫苦往中产的改变。等到中产累积到一定程度之后，再来一波的反腐，又是一波社会形态的提升，阶级的固化。可是这种固化能持续多久呢？也许是在某次战争之后，也许是在下次的反腐之后。不得不感叹那些人眼光的遥远，有的时候，他们看到的不是一个国家，他们看到的是一个人类的社会形态。</p><p>局部战争是可以轻易打响的，世界级别的战争也是轻易的，他只是缺少一个导火索罢了。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Failed to start bean documentationPluginsBootstrapper</title>
      <link href="/2023/04/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-03-Failed_to_start_bean_documentationPluginsBootstrapper/"/>
      <url>/2023/04/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-03-Failed_to_start_bean_documentationPluginsBootstrapper/</url>
      
        <content type="html"><![CDATA[<p>关于报错org.springframework.context.ApplicationContextException: Failed to start bean ‘documentationPluginsBootstrapper’</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Error starting ApplicationContext. To display the conditions report re-run your application with <span class="string">&#x27;debug&#x27;</span> enabled.</span><br><span class="line">2023-04-03 00:08:57.651 ERROR 15032 --- [           main] o.s.boot.SpringApplication               : Application run failed</span><br><span class="line"></span><br><span class="line">org.springframework.context.ApplicationContextException: Failed to start bean <span class="string">&#x27;documentationPluginsBootstrapper&#x27;</span>; nested exception is java.lang.NullPointerException</span><br><span class="line">  at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  at org.springframework.context.support.DefaultLifecycleProcessor.access<span class="variable">$200</span>(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  at org.springframework.context.support.DefaultLifecycleProcessor<span class="variable">$LifecycleGroup</span>.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]</span><br><span class="line">  at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.10.jar:2.6.10]</span><br><span class="line">  at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:745) ~[spring-boot-2.6.10.jar:2.6.10]</span><br><span class="line">  at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:420) ~[spring-boot-2.6.10.jar:2.6.10]</span><br><span class="line">  at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.6.10.jar:2.6.10]</span><br><span class="line">  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1317) ~[spring-boot-2.6.10.jar:2.6.10]</span><br><span class="line">  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.6.10.jar:2.6.10]</span><br><span class="line">  at com.wonder.UselessToolsApplication.main(UselessToolsApplication.java:14) ~[classes/:na]</span><br><span class="line">Caused by: java.lang.NullPointerException: null</span><br><span class="line">  at springfox.documentation.spi.service.contexts.Orderings<span class="variable">$8</span>.compare(Orderings.java:112) ~[springfox-spi-2.9.2.jar:null]</span><br><span class="line">  at springfox.documentation.spi.service.contexts.Orderings<span class="variable">$8</span>.compare(Orderings.java:109) ~[springfox-spi-2.9.2.jar:null]</span><br><span class="line">  at com.google.common.collect.ComparatorOrdering.compare(ComparatorOrdering.java:37) ~[guava-20.0.jar:na]</span><br><span class="line">  at java.base/java.util.TimSort.countRunAndMakeAscending(TimSort.java:355) ~[na:na]</span><br><span class="line">  at java.base/java.util.TimSort.<span class="built_in">sort</span>(TimSort.java:220) ~[na:na]</span><br><span class="line">  at java.base/java.util.Arrays.<span class="built_in">sort</span>(Arrays.java:1441) ~[na:na]</span><br><span class="line">  at com.google.common.collect.Ordering.sortedCopy(Ordering.java:855) ~[guava-20.0.jar:na]</span><br><span class="line">  at springfox.documentation.spring.web.plugins.WebMvcRequestHandlerProvider.requestHandlers(WebMvcRequestHandlerProvider.java:57) ~[springfox-spring-web-2.9.2.jar:null]</span><br><span class="line">  at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper<span class="variable">$2</span>.apply(DocumentationPluginsBootstrapper.java:138) ~[springfox-spring-web-2.9.2.jar:null]</span><br><span class="line">  at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper<span class="variable">$2</span>.apply(DocumentationPluginsBootstrapper.java:135) ~[springfox-spring-web-2.9.2.jar:null]</span><br><span class="line">  at com.google.common.collect.Iterators<span class="variable">$7</span>.transform(Iterators.java:750) ~[guava-20.0.jar:na]</span><br><span class="line">  at com.google.common.collect.TransformedIterator.next(TransformedIterator.java:47) ~[guava-20.0.jar:na]</span><br><span class="line">  at com.google.common.collect.TransformedIterator.next(TransformedIterator.java:47) ~[guava-20.0.jar:na]</span><br><span class="line">  at com.google.common.collect.MultitransformedIterator.hasNext(MultitransformedIterator.java:52) ~[guava-20.0.jar:na]</span><br><span class="line">  at com.google.common.collect.MultitransformedIterator.hasNext(MultitransformedIterator.java:50) ~[guava-20.0.jar:na]</span><br><span class="line">  at com.google.common.collect.ImmutableList.copyOf(ImmutableList.java:249) ~[guava-20.0.jar:na]</span><br><span class="line">  at com.google.common.collect.ImmutableList.copyOf(ImmutableList.java:209) ~[guava-20.0.jar:na]</span><br><span class="line">  at com.google.common.collect.FluentIterable.toList(FluentIterable.java:614) ~[guava-20.0.jar:na]</span><br><span class="line">  at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.defaultContextBuilder(DocumentationPluginsBootstrapper.java:111) ~[springfox-spring-web-2.9.2.jar:null]</span><br><span class="line">  at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.buildContext(DocumentationPluginsBootstrapper.java:96) ~[springfox-spring-web-2.9.2.jar:null]</span><br><span class="line">  at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.start(DocumentationPluginsBootstrapper.java:167) ~[springfox-spring-web-2.9.2.jar:null]</span><br><span class="line">  at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.22.jar:5.3.22]</span><br><span class="line">  ... 14 common frames omitted</span><br></pre></td></tr></table></figure><h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><blockquote><p>因为Springfox 使用的路径匹配是基于AntPathMatcher的，而Spring Boot 2.6.X使用的是PathPatternMatcher。</p></blockquote><h2 id="修复方案"><a href="#修复方案" class="headerlink" title="修复方案"></a>修复方案</h2><h3 id="修复方案一：降低Spring-Boot-版本到2-6-x以下版本"><a href="#修复方案一：降低Spring-Boot-版本到2-6-x以下版本" class="headerlink" title="修复方案一：降低Spring Boot 版本到2.6.x以下版本"></a>修复方案一：降低Spring Boot 版本到2.6.x以下版本</h3><p>比如下面版本组合是兼容的</p><table><thead><tr><th>Spring Boot版本</th><th>Swagger 版本</th></tr></thead><tbody><tr><td>2.5.6</td><td>2.9.2</td></tr></tbody></table><h3 id="修复方案二-SpringBoot版本不降级解决方案"><a href="#修复方案二-SpringBoot版本不降级解决方案" class="headerlink" title="修复方案二: SpringBoot版本不降级解决方案"></a>修复方案二: SpringBoot版本不降级解决方案</h3><p>比如下面版本组合是兼容的</p><table><thead><tr><th>Spring Boot版本</th><th>Swagger 版本</th></tr></thead><tbody><tr><td>2.6.5</td><td>3.0.0</td></tr></tbody></table><h3 id="修复方案三：设置application配置文件"><a href="#修复方案三：设置application配置文件" class="headerlink" title="修复方案三：设置application配置文件"></a>修复方案三：设置application配置文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">pathmatch:</span></span><br><span class="line">      <span class="attr">matching-strategy:</span> <span class="string">ant_path_matcher</span></span><br></pre></td></tr></table></figure><h3 id="修复方案四，修改spring源文件"><a href="#修复方案四，修改spring源文件" class="headerlink" title="修复方案四，修改spring源文件"></a>修复方案四，修改spring源文件</h3><p>我没找到这个java文件。。。。没试过，估计应该可以。。</p><p>参考地址：<a href="https://github.com/springfox/springfox/issues/3462">https://github.com/springfox/springfox/issues/3462</a></p><ol><li><p>revert matching strategy <code>spring.mvc.pathmatch.matching-strategy</code> to <code>ant-path-matcher</code></p></li><li><p>hack springfox <a href="https://github.com/springfox/springfox/blob/master/springfox-spring-webmvc/src/main/java/springfox/documentation/spring/web/plugins/WebMvcRequestHandlerProvider.java#L63">WebMvcRequestHandlerProvider</a> to filter out actuator controllers which don’t respect <code>spring.mvc.pathmatch.matching-strategy</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">WebMvcRequestHandlerProvider</span><span class="params">(Optional&lt;ServletContext&gt; servletContext, HandlerMethodResolver methodResolver,</span></span><br><span class="line"><span class="params">    List&lt;RequestMappingInfoHandlerMapping&gt; handlerMappings)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.handlerMappings = handlerMappings.stream().filter(mapping -&gt; mapping.getPatternParser() == <span class="literal">null</span>)</span><br><span class="line">      .collect(Collectors.toList());</span><br></pre></td></tr></table></figure></li></ol><h2 id="swagger配置类"><a href="#swagger配置类" class="headerlink" title="swagger配置类"></a>swagger配置类</h2><p>.apis(RequestHandlerSelectors.basePackage(“com.wonder.controller”)) </p><p>这里填写扫描包，对应类添加@API</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wonder.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// 标明是配置类</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">createRestApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)  <span class="comment">// DocumentationType.SWAGGER_2 固定的，代表swagger2</span></span><br><span class="line"><span class="comment">//                .groupName(&quot;分布式任务系统&quot;) // 如果配置多个文档的时候，那么需要配置groupName来分组标识</span></span><br><span class="line">                .apiInfo(apiInfo()) <span class="comment">// 用于生成API信息</span></span><br><span class="line">                .select() <span class="comment">// select()函数返回一个ApiSelectorBuilder实例,用来控制接口被swagger做成文档</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wonder.controller&quot;</span>)) <span class="comment">// 用于指定扫描哪个包下的接口</span></span><br><span class="line">                .paths(PathSelectors.any())<span class="comment">// 选择所有的API,如果你想只为部分API生成文档，可以配置这里</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用于定义API主界面的信息，比如可以声明所有的API的总标题、描述、版本</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;项目API&quot;</span>) <span class="comment">//  可以用来自定义API的主标题</span></span><br><span class="line">                .description(<span class="string">&quot;项目SwaggerAPI管理&quot;</span>) <span class="comment">// 可以用来描述整体的API</span></span><br><span class="line">                <span class="comment">//.termsOfServiceUrl(&quot;&quot;) // 用于定义服务的域名</span></span><br><span class="line">                .version(<span class="string">&quot;1.0&quot;</span>) <span class="comment">// 可以用来定义版本。</span></span><br><span class="line">                .build(); <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>   访问地址：<a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 故障 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux命令找不到的解决方法一以fidisk为例</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-linux%E5%91%BD%E4%BB%A4%E6%89%BE%E4%B8%8D%E5%88%B0%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E4%B8%80%E4%BB%A5fidisk%E4%B8%BA%E4%BE%8B/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-linux%E5%91%BD%E4%BB%A4%E6%89%BE%E4%B8%8D%E5%88%B0%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E4%B8%80%E4%BB%A5fidisk%E4%B8%BA%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<p>起因是因为装了个min的linux系统，啥也没有。。。用啥都难受的一批</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash: fdisk: 未找到命令</span><br></pre></td></tr></table></figure><p>  解决办法：将fdisk添加到命令搜索路径中</p><p><strong>方法如下</strong> ：</p><p> 查看当前的命令搜索路径</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@VM-8-15-centos ~]# <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"> /usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games</span><br></pre></td></tr></table></figure><p> 查找fdisk命令在哪个路径下<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@VM-8-15-centos ~]# whereis fdisk</span><br><span class="line"></span><br><span class="line"> fdisk: /sbin/fdisk /usr/share/man/man8/fdisk.8.gz</span><br></pre></td></tr></table></figure></p><p> 可以看到fdisk命令不在当前的命令搜索路径里，将fdisk命令添加到当前命令搜索路径中即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-8-15-centos ~]# <span class="built_in">sudo</span> <span class="built_in">ln</span> -s /sbin/fdisk /usr/local/bin</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>更改域名啦！</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-%E6%9B%B4%E6%94%B9%E5%9F%9F%E5%90%8D%E5%95%A6%EF%BC%81/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-%E6%9B%B4%E6%94%B9%E5%9F%9F%E5%90%8D%E5%95%A6%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<p>花了几块钱，把自己域名更改了一，解析换了一下。解析完毕之后，我本以为会正常显示，结果半天了，啥还是不行。我本以为我操作的问题，心想着是域名解析啊，的确没错，看了一下浏览器的控制台，error404，域名还是指向原来的域名，好家伙，原来是我忘了清理浏览器的缓存了，之前的cookies还存着呢。</p><p>这里不得不提到那个面试常问的问题了，cookies和session的区别了。</p><p>cookie实际上是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户的状态，就使用response向客户端浏览器颁发一个cookie。客户端浏览器会把cookie保存起来。当浏览器再次请求该网站时，浏览器就会把请求地址和cookie一同给服务器。服务器检查该cookie，从而判断用户的状态。服务器还可以根据需要修改cookie的内容。<br>session是另一种记录客户状态的机制。不同的是cookie保存在客户端浏览器中，而session保存在服务器上。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上，这就是session。客户端浏览器再次访问时只需要从该session中查找该客户的状态就可以了。<br>如果说cookie机制是通过检查客户身上的“通信证”，那么session机制就是通过检查服务器上的“客户明细表”来确认客户身份。</p><p>前些日子，steam花了58大洋买了个鬼谷八荒，心痛的一批，但是真香。这种战斗模式，和游戏模式都是我前所未见的。虽说游戏出的久了。但是真的上手还是这些日子。虽说是个单机游戏，但是还是有很多地方值得深思的，比如这游戏退出的时候，会警告你退出不会保存游戏历史进度，只有你点击保存了历史进度退出进入才会保存历史进度。所以说，在游戏进行过程中他是在内存中不断整活的。跟我同学聊了起来，他说别的游戏也碰到过，想必是单机游戏都是如此吧。毕竟上来就直接往磁盘中读写，这是最要命的，再好的电脑也能被折腾废了。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>没有嫁给你-张小娴</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-%E6%B2%A1%E6%9C%89%E5%AB%81%E7%BB%99%E4%BD%A0-%E5%BC%A0%E5%B0%8F%E5%A8%B4/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-%E6%B2%A1%E6%9C%89%E5%AB%81%E7%BB%99%E4%BD%A0-%E5%BC%A0%E5%B0%8F%E5%A8%B4/</url>
      
        <content type="html"><![CDATA[<p><strong>我最害怕的事，是我最终没有嫁给你</strong><br><strong>——张小娴</strong></p><p>在一起一年、两年、三年、四年……牵手走过了无数个春夏秋冬，体会了无数个喜怒哀乐，经历了无数个小灾大难。最后和你牵手走过红毯的人，竟然不是我。而我身边站着的男人，也不是你。</p><p>站在他身边浅浅微笑，望着你和你美丽的新娘，那一刻我竟然没有悲伤。</p><p>我曾经对你说我们结婚，不要盛大的婚礼、漂亮的婚纱、厚厚的礼金、太多人的祝福，只要手牵手到民政局领个红色的本本，然后开始柴米油盐的农夫与农妇的平淡婚姻—我便知足。</p><p>你还笑着问：“人家都是王子和公主，怎么到咱俩这就成了农夫和农妇？”</p><p>很简单，因为我早就不相信童话了。</p><p>那么多年的路边摊、地摊货、为数不多的近郊旅游，以及洗洗涮涮变得粗糙不堪的双手，让我明白了什么是平平淡淡，什么是素年锦时。</p><p>平平淡淡就是无论去哪里你都牵着我的手、吻着我的脸，让我知道，无论发生什么都会陪在我身边。素年锦时就是每个清晨醒来身边的人是你，我用指尖轻轻划过你的额头、眼眉、鼻翼，悄悄亲吻你的脸颊。</p><p>后来的后来，我们常常为了一些琐碎的事情发生争吵。你总是说我变了，我也开始怪你不够体贴、温柔。虽然流泪的时候，我想依靠的还是你的肩膀。</p><p>我对你说：没有你，我哪儿也不想去。</p><p>我对你说：只要有你，我什么都不怕。</p><p>我对你说：无论如何，请你不要放开我的手，不要丢下我一个人。</p><p>我对你说：如果我任性的让你无法理喻，请给我一个拥抱，一个拥抱就可以好。</p><p>我对你说：你是我第一个也是唯一一个想嫁的人。</p><p>我说过的太多太多，可你不记得了，我该怎么办？</p><p>女人，总是在爱一个人的时候失去所有理智。无论在别人面前显现得如何骄傲，终究逃不过眼泪的劫难，却在不断的百般纠结、失望、寻死觅活中不知不觉中淡然了。</p><p>于是开始练习一个人安稳的走路、吃饭、看书、写字、睡觉。试着不再期待那些小惊喜、不会为了一句话就弄得眼眶红红、不会为了一件小礼物就欢天喜地好几天、不会原谅一个人把相同的错误犯无数次、不会在深夜瞪着手机等着谁晚归的电话、不会把一时的敷衍当做一世的承诺、不会不分时间地点傻傻哭了……</p><p>可这些不会，却都是我为你做过的。</p><p>我努力对身边的人笑，努力成为太阳花般灿烂的女子。</p><p>你看，我终究还是长大了。不论以后会不会爱人、被爱我都不会那么冲动了。</p><p>当我穿着白色的婚纱，被爸爸挽起左手缓缓走入教堂，把我的手交付到另一个男人的手上，神父问及彼此是否愿意无论贫穷，灾难或疾病都相依相守到死，回答YES I DO后在彼此左手的无名指套上一抹绚烂色彩的瞬间—我的眼泪默默爬满面颊。</p><p>这是我第一次在那么幸福的场景下哭泣，也是最后一次为你掉泪。</p><p>如同今天的你，站在聚光灯下的礼堂，挽着你的新娘，在众人面前宣誓—要与她相伴到老。</p><p>那似曾相识的誓言，忽远忽近的漂浮在我的耳边。</p><p>亦如数年前你初见我，温柔脸庞映衬下的集万千宠爱于我独身的眼神。</p><p>婚宴上，你前来敬酒，我平静的说着祝福的话。</p><p>看你为他点烟，为我剥糖。然后牵着他的手悄然离开。</p><p>以前的你，知道我怕黑，怕虫子，怕打针……怕很多。</p><p>却始终不知道：我最害怕的事，是我最终没有嫁给你。</p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>美满的婚姻要由瞎子女人和聋子男人缔成</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-%E7%BE%8E%E6%BB%A1%E7%9A%84%E5%A9%9A%E5%A7%BB%E8%A6%81%E7%94%B1%E7%9E%8E%E5%AD%90%E5%A5%B3%E4%BA%BA%E5%92%8C%E8%81%8B%E5%AD%90%E7%94%B7%E4%BA%BA%E7%BC%94%E6%88%90/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-02-%E7%BE%8E%E6%BB%A1%E7%9A%84%E5%A9%9A%E5%A7%BB%E8%A6%81%E7%94%B1%E7%9E%8E%E5%AD%90%E5%A5%B3%E4%BA%BA%E5%92%8C%E8%81%8B%E5%AD%90%E7%94%B7%E4%BA%BA%E7%BC%94%E6%88%90/</url>
      
        <content type="html"><![CDATA[<p><strong>论婚姻</strong></p><p>《蒙田随笔集》 节选</p><p>婚姻是一种明智的交易，在婚姻里，情欲已不那么癫狂，而是较为深沉，也有所减弱。爱情不愿意男女双方不靠它而靠别的东西维系在一起，当它混在以其他名义——比如婚姻——建立和维持的关系中，它就变得无精打采，因为在婚姻中，联亲、财产的分量与风韵、容貌同等重，甚至更重。不管人们口头怎么讲，实际上人们不是为自己结婚，而主要是为传宗接代、为家族而结婚。婚姻的用处和好处关系到我们的世系，远甚于关系到我们本人。故而，我认为这事由第三者来操办比自己亲手操办更好，按别人的意思办比按自己的意思办更合适。这一切与爱情的常规真是大相径庭！ </p><p>有些人以为，把婚姻与爱情连在一起，就能为婚姻增加光彩；我觉得，他们的做法与那些为要抬高德行的身价便认为高贵身份即是美德的人毫无二致。婚姻与爱情，德行与高贵之间有某种相似，但却有很多不同；没有必要搅乱它们的名字和称号，把它们混为一谈对两者都不好。出身高贵是一种长处，把它列入考虑的因素是对的；但这种长处取决于他人，而且可能降落在一个品质恶劣、毫无能力的人身上，故而它远不及美德受人敬重。如果要说它是一种美德，那么它是一种人为的、表面的美德，它取决于时间和命运并随地域的不同而变换形式，它有活力但并非不朽，它来自出身正如尼罗河来自发源地，它属于整个家族谱系因而为某些人所共有，它有连续性又有相似性，它重要又不很重要。博学、强健、善良、美貌、富有等长处都能进入人们的交往，而高贵的出身只能自己受用，对他人毫无用处。 </p><p>好的婚姻——如果世上存在好婚姻的话——拒绝接受爱情的伴随和爱情的特性，而是力图体现友谊的性质。婚姻是一种温馨的共同生活，充满忠贞、信赖以及无数相互间的有益而实在的帮助和责任。“任何女人一旦品尝了这种婚姻的滋味，任何女人一旦由婚姻之烛把她和所爱的男子结合在一起，便不再愿意处于丈夫的情人或女伴的地位，当她作为妻子在这个男人的感情上占据一定地位时，那么她的地位是体面的、稳固的”。 </p><p>美好的婚姻那么罕见，正说明它的宝贵、它的价值。假如好好缔造、好好对待，婚姻实在是我们社会再好不过的构件了。我们少了它不行，然而我们又贬低它、践踏它。如同鸟笼一样：笼外的鸟儿拼命想进去，笼内的鸟儿拼命想出来。苏格拉底被问及什么更合适，娶妻还是不娶妻，他回答说：“不管娶妻或不娶妻，总会后悔的。”这种看法成了一种俗套，与其相应的还有所谓“人之于人，不是上帝，便是豺狼”的说法。要缔结美好的婚姻，需要汇集很多良好的品德。当今世下，婚姻更适合头脑简单者与平民大众，因为他们的心灵没有被享乐、好奇和无所事事的生活搅得如此之乱。 </p><p>爱情与婚姻是两个目的，各有其不同的路线，无法融合。一个女子可能委身于某个男人而又不肯嫁他，并非因为财产地位，而是因为男人本身的问题。很少有男人娶了原来的女伴而不后悔的。 </p><p>伊索克拉底说，雅典城令人赏心悦目，如同男人出于爱慕而追求的一位贵妇；人人喜欢来这儿散步，消磨时光，但没有一个爱她是为了娶她（就是说，在那儿扎根和定居）。 </p><p>伊索克拉底还说，爱情和婚姻的目的各异，但可以在某种方式下互容。婚姻的好处在于它的功利性、合法性、体面性和稳定性，它给予的欢乐是平淡的，但却更无所不包。爱情仅仅建筑在男欢女爱的基础上，它给予的乐趣确实更销魂、更强烈、更刻骨铭心，而且因难于得手而变得更炽热。爱情需要刺激、需要烹调，没有箭和火的爱情就不再是爱情了。婚后的女人给予得太慷慨，以致夫妻间的感情和欲望也磨得迟钝了。 </p><p>我们千方百计诱骗女人、挑逗女人，我们不断煽动和刺激她们的想象，而后我们又大呼：淫荡！老实说，我们男人中，几乎没有一个不是害怕妻子行为不轨给他带来耻辱甚于怕自己道德败坏而丢脸的；没有一个不是关心妻子的良心甚于关心自己的良心的；没有一个不是宁愿自己是小偷、渎圣者，或妻子是杀人犯、异教徒，也不愿妻子的贞洁程度稍逊于自己的。 </p><p>有人说，美满的婚姻要由瞎子女人和聋子男人缔成，我觉得此人对婚姻的了解可谓透彻。 </p><p>一个年轻人问哲学家帕纳提乌斯：“圣贤坠入情网是否恰当？”他回答说：“别管圣贤的事，只谈不是圣贤的你和我吧；我们自己不要卷入这种令人过分激动的事，它会把我们变成他人的奴隶，还会使我们自轻自贱。”哲人的话有道理，谁若没有足够的勇气承受爱情的冲击，谁若不能用事实驳倒阿格西劳斯那句“理智与爱情不能并行不悖”的名言，那么他就别去体验爱情这种急风暴雨似的东西。 </p><p>我们让爱情主宰我们的生活的时间愈短，我们的生命就愈有价值。看看被爱情主宰的人们的行径吧：完全像黄口小儿那样幼稚。谁不知道，受制于爱情的人行事是多么违背条理和秩序？在学业、训练和机能的运用上都变得无能了。爱情是受没有生活经验者统辖的天地。“它无规无矩。”诚然，充满意外和混乱的爱情更令人神魂颠倒，连其中的过失和事与愿违的结果也是奇妙的，令人回味无穷的。只要爱得强烈，爱得如饥似渴，理智和谨慎都无关紧要了，你看爱情像醉鬼般摇摇晃晃、跌跌绊绊、疯疯癫癫。谁若用明智和巧计引导它，便是给它戴上镣铐，谁若要它听从老年人的教诲，便是限制它神圣的自由。</p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7 安装 Mysql 5.7.28</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-02-centos7_%E5%AE%89%E8%A3%85_Mysql_5.7.28/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-02-centos7_%E5%AE%89%E8%A3%85_Mysql_5.7.28/</url>
      
        <content type="html"><![CDATA[<h3 id="1-下载-MySQL的yum包"><a href="#1-下载-MySQL的yum包" class="headerlink" title="1. 下载 MySQL的yum包"></a>1. 下载 MySQL的yum包</h3><p>也可以自己从官方下载</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="attr">http</span>:<span class="comment">//repo.mysql.com/mysql57-community-release-el7-10.noarch.rpm</span></span><br></pre></td></tr></table></figure><h3 id="2-安装MySQL源"><a href="#2-安装MySQL源" class="headerlink" title="2.安装MySQL源"></a>2.安装MySQL源</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -<span class="title class_">Uvh</span> mysql57-community-release-el7-<span class="number">10.</span>noarch.<span class="property">rpm</span></span><br></pre></td></tr></table></figure><h3 id="3-安装MySQL服务端-需要等待一些时间"><a href="#3-安装MySQL服务端-需要等待一些时间" class="headerlink" title="3.安装MySQL服务端,需要等待一些时间"></a>3.安装MySQL服务端,需要等待一些时间</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mysql-community-server</span><br></pre></td></tr></table></figure><h3 id="4-启动MySQL"><a href="#4-启动MySQL" class="headerlink" title="4.启动MySQL"></a>4.启动MySQL</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld.<span class="property">service</span></span><br></pre></td></tr></table></figure><h3 id="5-检查是否启动成功"><a href="#5-检查是否启动成功" class="headerlink" title="5.检查是否启动成功"></a>5.检查是否启动成功</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld.<span class="property">service</span></span><br></pre></td></tr></table></figure><h3 id="6-获取临时密码，"><a href="#6-获取临时密码，" class="headerlink" title="6.获取临时密码，"></a>6.获取临时密码，</h3><p>MySQL5.7为root用户随机生成了一个密码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;temporary password&#x27;</span> /<span class="keyword">var</span>/log/mysqld.<span class="property">log</span> </span><br></pre></td></tr></table></figure><h3 id="7-通过临时密码登录"><a href="#7-通过临时密码登录" class="headerlink" title="7.通过临时密码登录"></a>7.通过临时密码登录</h3><p>通过临时密码登录MySQL，进行修改密码操作</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><p>使用临时密码登录后，不能进行其他的操作，否则会报错，这时候我们进行修改密码操作</p><h3 id="8-设置mysql密码规则"><a href="#8-设置mysql密码规则" class="headerlink" title="8.设置mysql密码规则"></a>8.设置mysql密码规则</h3><p>因为MySQL的密码规则需要很复杂，我们一般自己设置的不会设置成这样，所以我们全局修改一下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set <span class="variable language_">global</span> validate_password_policy=<span class="number">0</span>;</span><br><span class="line">mysql&gt; set <span class="variable language_">global</span> validate_password_length=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>这时候我们就可以自己设置想要的密码了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">ALTER</span> <span class="variable constant_">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="variable constant_">IDENTIFIED</span> <span class="variable constant_">BY</span> <span class="string">&#x27;yourpassword&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="9-授权其他机器远程登录"><a href="#9-授权其他机器远程登录" class="headerlink" title="9.授权其他机器远程登录"></a>9.授权其他机器远程登录</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">GRANT</span> <span class="variable constant_">ALL</span> <span class="variable constant_">PRIVILEGES</span> <span class="variable constant_">ON</span> *.* <span class="variable constant_">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="variable constant_">IDENTIFIED</span> <span class="variable constant_">BY</span> <span class="string">&#x27;yourpassword&#x27;</span> <span class="variable constant_">WITH</span> <span class="variable constant_">GRANT</span> <span class="variable constant_">OPTION</span>;</span><br><span class="line"> </span><br><span class="line"><span class="variable constant_">FLUSH</span> <span class="variable constant_">PRIVILEGES</span>;</span><br></pre></td></tr></table></figure><h3 id="10-开启开机自启动"><a href="#10-开启开机自启动" class="headerlink" title="10.开启开机自启动"></a>10.开启开机自启动</h3><p>先退出mysql命令行，然后输入以下命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h3 id="11-设置MySQL的字符集为UTF-8，令其支持中文"><a href="#11-设置MySQL的字符集为UTF-8，令其支持中文" class="headerlink" title="11.设置MySQL的字符集为UTF-8，令其支持中文"></a>11.设置MySQL的字符集为UTF-8，令其支持中文</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.<span class="property">cnf</span></span><br></pre></td></tr></table></figure><p>复制</p><p>改成如下,然后保存</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">For</span> advice on how to change settings please see</span><br><span class="line"># <span class="attr">http</span>:<span class="comment">//dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html</span></span><br><span class="line"> </span><br><span class="line">[mysql]</span><br><span class="line"><span class="keyword">default</span>-character-set=utf8</span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line">datadir=<span class="regexp">/var/</span>lib/mysql</span><br><span class="line">socket=<span class="regexp">/var/</span>lib/mysql/mysql.<span class="property">sock</span></span><br><span class="line"><span class="keyword">default</span>-storage-engine=<span class="variable constant_">INNODB</span></span><br><span class="line">character_set_server=utf8</span><br><span class="line"> </span><br><span class="line">symbolic-links=<span class="number">0</span></span><br><span class="line"> </span><br><span class="line">log-error=<span class="regexp">/var/</span>log/mysqld.<span class="property">log</span></span><br><span class="line">pid-file=<span class="regexp">/var/</span>run/mysqld/mysqld.<span class="property">pid</span></span><br></pre></td></tr></table></figure><h3 id="12-重启一下MySQL-令配置生效"><a href="#12-重启一下MySQL-令配置生效" class="headerlink" title="12.重启一下MySQL,令配置生效"></a>12.重启一下MySQL,令配置生效</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure><h3 id="13-防火墙开放3306端口"><a href="#13-防火墙开放3306端口" class="headerlink" title="13.防火墙开放3306端口"></a>13.防火墙开放3306端口</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state</span><br><span class="line">firewall-cmd --zone=public --add-port=<span class="number">3306</span>/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h3 id="14-卸载MySQL仓库"><a href="#14-卸载MySQL仓库" class="headerlink" title="14.卸载MySQL仓库"></a>14.卸载MySQL仓库</h3><p>一开始的时候我们安装的yum，每次yum操作都会更新一次，耗费时间，我们把他卸载掉</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mysql</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove mysql57-community-release-el7-<span class="number">10.</span>noarch</span><br></pre></td></tr></table></figure><h3 id="15-数据库的操作"><a href="#15-数据库的操作" class="headerlink" title="15.数据库的操作"></a>15.数据库的操作</h3><p>（1）查看mysql是否启动：<code>service mysqld status</code></p><p>启动mysql：<code>service mysqld start</code></p><p>停止mysql：<code>service mysqld stop</code></p><p>重启mysql：<code>service mysqld restart</code></p><p>（2）查看临时密码：<code>grep password /var/log/mysqld.log</code></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java获取客户端的ip地址以及获取位置</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-02-java%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84ip%E5%9C%B0%E5%9D%80%E4%BB%A5%E5%8F%8A%E8%8E%B7%E5%8F%96%E4%BD%8D%E7%BD%AE/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-02-java%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84ip%E5%9C%B0%E5%9D%80%E4%BB%A5%E5%8F%8A%E8%8E%B7%E5%8F%96%E4%BD%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>主要依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--通过ip查询客户端位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.lionsoul<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ip2region<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Alibaba Fastjson --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.76<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>首先先获取到访问者的ip地址</p><p>访问必须是通过公网访问，要是内网互ip访问相测试的话，会返回127.0.0.1，或者访问者的内网ip地址。</p><p>通过X－FORWARDED－FOR等信息。跟踪原有的客户端IP地址和原来客户端请求的服务器地址。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wonder.utils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getIPutils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">resClientIP</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> getClientIpAddress(request);</span><br><span class="line">        <span class="type">boolean</span>  <span class="variable">isInner</span> <span class="operator">=</span> isInnerIP(ip);</span><br><span class="line">        <span class="keyword">if</span> (!isInner) &#123;</span><br><span class="line">            <span class="keyword">return</span>  ip;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">&quot;内网ip&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getClientIpAddress</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取请求主机IP地址,如果通过代理进来，则透过防火墙获取真实IP地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">headerName</span> <span class="operator">=</span> <span class="string">&quot;x-forwarded-for&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> request.getHeader(headerName);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != ip &amp;&amp; ip.length() != <span class="number">0</span> &amp;&amp; !<span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            <span class="comment">// 多次反向代理后会有多个IP值，第一个IP才是真实IP,它们按照英文逗号&#x27;,&#x27;分割</span></span><br><span class="line">            <span class="keyword">if</span> (ip.indexOf(<span class="string">&quot;,&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">                ip = ip.split(<span class="string">&quot;,&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (checkIp(ip)) &#123;</span><br><span class="line">            headerName = <span class="string">&quot;Proxy-Client-IP&quot;</span>;</span><br><span class="line">            ip = request.getHeader(headerName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (checkIp(ip)) &#123;</span><br><span class="line">            headerName = <span class="string">&quot;WL-Proxy-Client-IP&quot;</span>;</span><br><span class="line">            ip = request.getHeader(headerName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (checkIp(ip)) &#123;</span><br><span class="line">            headerName = <span class="string">&quot;HTTP_CLIENT_IP&quot;</span>;</span><br><span class="line">            ip = request.getHeader(headerName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (checkIp(ip)) &#123;</span><br><span class="line">            headerName = <span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>;</span><br><span class="line">            ip = request.getHeader(headerName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (checkIp(ip)) &#123;</span><br><span class="line">            headerName = <span class="string">&quot;X-Real-IP&quot;</span>;</span><br><span class="line">            ip = request.getHeader(headerName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (checkIp(ip)) &#123;</span><br><span class="line">            headerName = <span class="string">&quot;remote addr&quot;</span>;</span><br><span class="line">            ip = request.getRemoteAddr();</span><br><span class="line">            <span class="comment">// 127.0.0.1 ipv4, 0:0:0:0:0:0:0:1 ipv6</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;127.0.0.1&quot;</span>.equals(ip) || <span class="string">&quot;0:0:0:0:0:0:0:1&quot;</span>.equals(ip)) &#123;</span><br><span class="line">                <span class="comment">//根据网卡取本机配置的IP</span></span><br><span class="line">                <span class="type">InetAddress</span> <span class="variable">inet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    inet = InetAddress.getLocalHost();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                ip = inet.getHostAddress();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;getClientIp  IP is &quot;</span> + ip + <span class="string">&quot;, headerName = &quot;</span> + headerName);</span><br><span class="line">        <span class="keyword">return</span> ip;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkIp</span><span class="params">(String ip)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == ip || ip.length() == <span class="number">0</span> || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断IP是否是内网地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ipAddress ip地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否是内网地址</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isInnerIP</span><span class="params">(String ipAddress)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> isInnerIp;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ipNum</span> <span class="operator">=</span> getIpNum(ipAddress);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         私有IP：A类  10.0.0.0-10.255.255.255</span></span><br><span class="line"><span class="comment">         B类  172.16.0.0-172.31.255.255</span></span><br><span class="line"><span class="comment">         C类  192.168.0.0-192.168.255.255</span></span><br><span class="line"><span class="comment">         还有127这个网段是环回地址</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">aBegin</span> <span class="operator">=</span> getIpNum(<span class="string">&quot;10.0.0.0&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">aEnd</span> <span class="operator">=</span> getIpNum(<span class="string">&quot;10.255.255.255&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">bBegin</span> <span class="operator">=</span> getIpNum(<span class="string">&quot;172.16.0.0&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">bEnd</span> <span class="operator">=</span> getIpNum(<span class="string">&quot;172.31.255.255&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">cBegin</span> <span class="operator">=</span> getIpNum(<span class="string">&quot;192.168.0.0&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">cEnd</span> <span class="operator">=</span> getIpNum(<span class="string">&quot;192.168.255.255&quot;</span>);</span><br><span class="line">        isInnerIp = isInner(ipNum, aBegin, aEnd) || isInner(ipNum, bBegin, bEnd) || isInner(ipNum, cBegin, cEnd)</span><br><span class="line">                || ipAddress.equals(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> isInnerIp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getIpNum</span><span class="params">(String ipAddress)</span> &#123;</span><br><span class="line">        String[] ip = ipAddress.split(<span class="string">&quot;\\.&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">a</span> <span class="operator">=</span> Integer.parseInt(ip[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> Integer.parseInt(ip[<span class="number">1</span>]);</span><br><span class="line">        <span class="type">long</span> <span class="variable">c</span> <span class="operator">=</span> Integer.parseInt(ip[<span class="number">2</span>]);</span><br><span class="line">        <span class="type">long</span> <span class="variable">d</span> <span class="operator">=</span> Integer.parseInt(ip[<span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> a * <span class="number">256</span> * <span class="number">256</span> * <span class="number">256</span> + b * <span class="number">256</span> * <span class="number">256</span> + c * <span class="number">256</span> + d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isInner</span><span class="params">(<span class="type">long</span> userIp, <span class="type">long</span> begin, <span class="type">long</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (userIp &gt;= begin) &amp;&amp; (userIp &lt;= end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getRealIP</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取客户端ip地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">clientIp</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;x-forwarded-for&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clientIp == <span class="literal">null</span> || clientIp.length() == <span class="number">0</span> || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(clientIp)) &#123;</span><br><span class="line">            clientIp = request.getRemoteAddr();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String[] clientIps = clientIp.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(clientIps.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> clientIp.trim();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断是否来自CDN</span></span><br><span class="line">        <span class="keyword">if</span>(isComefromCDN(request))&#123;</span><br><span class="line">            <span class="keyword">if</span>(clientIps.length&gt;=<span class="number">2</span>) <span class="keyword">return</span> clientIps[clientIps.length-<span class="number">2</span>].trim();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> clientIps[clientIps.length-<span class="number">1</span>].trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isComefromCDN</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">host</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;host&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> host.contains(<span class="string">&quot;www.189.cn&quot;</span>) ||host.contains(<span class="string">&quot;shouji.189.cn&quot;</span>) || host.contains(</span><br><span class="line">                <span class="string">&quot;image2.chinatelecom-ec.com&quot;</span>) || host.contains(</span><br><span class="line">                <span class="string">&quot;image1.chinatelecom-ec.com&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="相关请求头"><a href="#相关请求头" class="headerlink" title="相关请求头"></a>相关请求头</h3><ul><li><code>X-Forwarded-For</code> 记录一个请求从客户端出发到目标服务器过程中经历的代理，或者负载平衡设备的IP。这是由缓存代理软件 Squid 引入，用来表示 HTTP 请求端真实 IP，现在已经成为事实上的标准，被各大 HTTP 代理、负载均衡等转发服务广泛使用，并被写入 RFC 7239（Forwarded HTTP Extension）标准之中。格式为X-Forwarded-For:client1,proxy1,proxy2，一般情况下，第一个ip为客户端真实ip，后面的为经过的代理服务器的ip。现在大部分的代理都会加上这个请求头。</li><li><code>Proxy-Client-IP/WLProxy-Client-IP</code> 这个一般是经过apache http服务器的请求才会有，用apache http做代理时一般会加上Proxy-Client-IP请求头，而WL-Proxy-Client-IP是他的weblogic插件加上的头。</li><li><code>HTTP_CLIENT_IP</code>  有些代理服务器会加上此请求头。</li><li><code>X-Real-IP nginx</code>代理一般会加上此请求头。</li></ul><h3 id="通过ip获取位置"><a href="#通过ip获取位置" class="headerlink" title="通过ip获取位置"></a>通过ip获取位置</h3><p>通过上面返还的ip地址进行解析，具体方式可以参考<a href="https://github.com/lionsoul2014/ip2region">Ip2region</a>的官方文档。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wonder.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.lionsoul.ip2region.xdb.Searcher;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FromIpToCtiy</span> &#123;</span><br><span class="line">  <span class="comment">//https://github.com/lionsoul2014/ip2region/tree/master/binding/java</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String  <span class="title function_">resLocation</span><span class="params">(String ip)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">dbPath</span> <span class="operator">=</span> <span class="string">&quot;src/main/resources/ip2region.xdb&quot;</span>;</span><br><span class="line">        <span class="comment">// 1、从 dbPath 中预先加载 VectorIndex 缓存，并且把这个得到的数据作为全局变量，后续反复使用。</span></span><br><span class="line">        <span class="type">byte</span>[] vIndex;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            vIndex = Searcher.loadVectorIndexFromFile(dbPath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;failed to load vector index from `%s`: %s\n&quot;</span>, dbPath, e);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;:\&quot;加载索引失败\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、使用全局的 vIndex 创建带 VectorIndex 缓存的查询对象。</span></span><br><span class="line">        Searcher searcher;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            searcher = Searcher.newWithVectorIndex(dbPath, vIndex);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;failed to create vectorIndex cached searcher with `%s`: %s\n&quot;</span>, dbPath, e);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;:\&quot;创建缓存搜索器失败\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3、查询</span></span><br><span class="line">        <span class="type">long</span> sTime;</span><br><span class="line">        <span class="type">String</span> <span class="variable">region</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">cost</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sTime= System.nanoTime();</span><br><span class="line">            region= searcher.search(ip);</span><br><span class="line">            cost= TimeUnit.NANOSECONDS.toMicros((<span class="type">long</span>) (System.nanoTime() - sTime));</span><br><span class="line">            System.out.printf(<span class="string">&quot;&#123;region: %s, ioCount: %d, took: %d μs&#125;\n&quot;</span>, region, searcher.getIOCount(), cost);</span><br><span class="line">            <span class="comment">// 4、关闭资源</span></span><br><span class="line">            searcher.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;failed to search(%s): %s\n&quot;</span>, ip, e);</span><br><span class="line">        &#125;</span><br><span class="line">        Map&lt;String,String&gt;  resmap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        resmap.put(<span class="string">&quot;location&quot;</span>,region);</span><br><span class="line">        resmap.put(<span class="string">&quot;ioCount&quot;</span>, String.valueOf(searcher.getIOCount()));</span><br><span class="line">        resmap.put(<span class="string">&quot;cost&quot;</span>, cost+<span class="string">&quot;μs&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> JSONObject.toJSONString(resmap);</span><br><span class="line">        <span class="comment">// 备注：每个线程需要单独创建一个独立的 Searcher 对象，但是都共享全局的制度 vIndex 缓存。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>说实在的，其实没啥技术含量，就是互相调用查看的，通过客户端的请求进行解析。然后查询地址的，也就是通过一个人家写的库进行查询。很简单的。欸。。目前没啥好想法了。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>U盘文件消失却占内存的解决方法</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-02-U%E7%9B%98%E6%96%87%E4%BB%B6%E6%B6%88%E5%A4%B1%E5%8D%B4%E5%8D%A0%E5%86%85%E5%AD%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-02-U%E7%9B%98%E6%96%87%E4%BB%B6%E6%B6%88%E5%A4%B1%E5%8D%B4%E5%8D%A0%E5%86%85%E5%AD%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="title-‘U盘文件消失却占内存的解决方法-‘updated-2021-01-26-14-48-06Zcreated-2021-01-26-14-48-06Zsource-https-www-wonder1999-com-index-php-archives-18-htmltags-windows-故障"><a href="#title-‘U盘文件消失却占内存的解决方法-‘updated-2021-01-26-14-48-06Zcreated-2021-01-26-14-48-06Zsource-https-www-wonder1999-com-index-php-archives-18-htmltags-windows-故障" class="headerlink" title="title: ‘U盘文件消失却占内存的解决方法 ‘updated: 2021-01-26 14:48:06Zcreated: 2021-01-26 14:48:06Zsource: https://www.wonder1999.com/index.php/archives/18.htmltags:  - windows  - 故障"></a>title: ‘U盘文件消失却占内存的解决方法 ‘<br>updated: 2021-01-26 14:48:06Z<br>created: 2021-01-26 14:48:06Z<br>source: <a href="https://www.wonder1999.com/index.php/archives/18.html">https://www.wonder1999.com/index.php/archives/18.html</a><br>tags:<br>  - windows<br>  - 故障</h2><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>查看U盘属性，如果已用空间不为0，那么可以使用以下方法。在你的U盘里面直接新建一个txt文档在里面输入attrib -s -h &#x2F;s &#x2F;d保存。然后打开我的电脑-&gt;工具-&gt;文件夹选项-&gt;查看，将里面的隐藏已知文件扩展名前面的勾去掉。如果已经去掉了就不用这步操作了。然后再将刚刚新建的TXT文档改名为0.bat。双击运行即可。</p><h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>如果你的U盘属性显示已用空间为0，那么我们可以借用软件来解决，首先下载一个EASY RECOVERY，可以在系统之家网站上下载此软件的汉化注册版，把文件恢复。</p><h2 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h2><p>插入U盘，然后不要打开，而是右键单击盘符。选择“作为媒体便携设备打开”，文件全部显示出来了，但是不能打开，把它复制到本地硬盘就行了，数据备份好以后把U盘格式化。</p><p>以上方法适用于你的U盘文件没隐藏也没有中毒，如果是U盘中毒原因，可以使用杀毒软件或者专门对付U盘病毒的USBCleaner，可以非常有效的清理你的U盘病毒，还能给你的U盘加上免疫功能，U盘的价格如今已非常便宜，如果是硬件坏了的话就赶紧再买一个吧。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 故障 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>office账号登录提示0x80190001错误码</title>
      <link href="/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-02-office%E8%B4%A6%E5%8F%B7%E7%99%BB%E5%BD%95%E6%8F%90%E7%A4%BA0x80190001%E9%94%99%E8%AF%AF%E7%A0%81/"/>
      <url>/2023/04/02/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-02-office%E8%B4%A6%E5%8F%B7%E7%99%BB%E5%BD%95%E6%8F%90%E7%A4%BA0x80190001%E9%94%99%E8%AF%AF%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<p>office登录账号时提示错误代码0x80190001，导致有些功能不能使用。</p><p>错误原因0x80190001是一个代理服务引起的错误（网络查找的原因，出现这个错误反馈office也无法发送成功）</p><p>解决方法一：</p><p>1、在Internet Explorer浏览器的右上角点击设置，打开<strong>Internet选项</strong></p><p>2、在<strong>Internet选项</strong>界面，进入<strong>常规</strong>，单击<strong>删除</strong>，再点击<strong>确定</strong>，缓存文件就已经全部删除。</p><p>3、在<strong>Internet选项</strong>界面，进入<strong>高级</strong>， 单击 <strong>重置</strong>，即可。</p><p>按<strong>Windows+R</strong>输入<strong>services.msc</strong> 找到<strong>Microsoft Account Sign-in Assistant</strong>右键启动是否正常（检查该服务是否已经启动）。</p><p>解决方法二：</p><p>检查是Internet选项 - 连接 - 局域网（LAN）设置 - 使用自动配置脚本影响导致。把勾去掉后就可以登录账户了</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> 故障 </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我们都要往对方那里迈步-2022年6月2日</title>
      <link href="/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-01-%E6%88%91%E4%BB%AC%E9%83%BD%E8%A6%81%E5%BE%80%E5%AF%B9%E6%96%B9%E9%82%A3%E9%87%8C%E8%BF%88%E6%AD%A5-2022%E5%B9%B46%E6%9C%882%E6%97%A5/"/>
      <url>/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-04-01-%E6%88%91%E4%BB%AC%E9%83%BD%E8%A6%81%E5%BE%80%E5%AF%B9%E6%96%B9%E9%82%A3%E9%87%8C%E8%BF%88%E6%AD%A5-2022%E5%B9%B46%E6%9C%882%E6%97%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="摘抄"><a href="#摘抄" class="headerlink" title="摘抄"></a>摘抄</h1><h2 id="我们都要往对方那里迈步。"><a href="#我们都要往对方那里迈步。" class="headerlink" title="我们都要往对方那里迈步。"></a><em>我们都要往对方那里迈步。</em></h2><p>周末朋友来我家住，中途跟男友电话。</p><p>男友大概是公司团建喝多了酒，说话有点语无伦次。</p><p>她佯装生气，说了他几句，然后叮嘱他，回家之后在冰箱里找柠檬片自己泡水喝，解解酒：“这个柠檬片很酸，放一片就够了。”她又多叮嘱了几句。</p><p>我还蛮感慨的。</p><p>她以前其实并不是一个会照顾人的女生，大多时候都娇纵，有一点点小作。</p><p>大学时期，还因为男友忙着备考CFA不陪她吃饭而删对方微信。</p><p>可毕业恋爱这两年，却似乎也慢慢变了。</p><p>我和她聊爱情。</p><p>她说其实自己最近也一直因为男友加班没时间陪她而跟他闹脾气。</p><blockquote><p>“我上周，一整周都没跟他面对面说上话。我睡着的时候他才回来，我醒来的时候他已经要出门了。</p><p>除了半夜上厕所能看到他躺在身边，几乎已经没有「一起生活」的体感了。而且前段时间我一个人去看牙医，牙齿麻醉没弄好，拔牙的时候疼得直飙泪，结束后我跟他微信诉苦他也半天才回复…真的很难不生气！”</p></blockquote><p>“不过，”她话锋一转。</p><blockquote><p>“我也知道他辛苦。我的脾气差，他一直都让着我，周末即使是单休，也会给我做饭，陪我看综艺。能怎么办呢，也就他能忍我。我每次发完脾气就会后悔，就想着从别的地方多弥补他咯。”</p></blockquote><p>我听她聊这些鸡毛蒜皮的日常，感觉到她这些年身上的柔软变化，再一次感叹恋爱对一个人行云流水般的奇妙改造。</p><p>爱的维稳状态大概就是这样。</p><p>两个人一起生活，并不靠单方面的迁就和改变，而是得双方都作出自觉的让步和变化。</p><p>今天我低头认错，明天你认栽劝慰，生活里很少有大风大浪的大是大非之争，矛盾的根源大多是彼此本性中的天然缺陷和生活里细枝末节的缺漏，而缓和气氛的法则是，彼此懂得适可而止各让一步。</p><p>说到底，两个人一起生活，是慢慢看清自己和对方的过程。</p><p>在一次次生气、长谈、撒娇、和好之后，我们会慢慢认清自己不算一个好脾气的人，也慢慢认清他不是完美无缺的恋人。</p><p>如果你察觉到他偶尔迁就、时常妥协、持续爱你，你自然也会学着慢慢体谅、间歇让步、长久爱他。</p><p>这是琐碎的生活所赋予给每一对关系稳定的情侣的默契和智慧。</p><p>两个人如果从决定相爱的那一瞬就完全合拍，严丝合缝神仙眷侣，固然是幸运之至。</p><p>但现实是，大多数人都是没有完美性格的凡人。</p><p>双向的让步，双向的成全，以及主动的改变，才是让关系温情延续的秘诀。</p><p>朋友之前也有过一段初见乍欢的恋情。</p><p>她聊起那一段，感慨当时年轻气盛，总是抓住一点无关紧要的端倪大闹，几轮“回合”下来，双方都累得想喊停。</p><blockquote><p>“一开始是我一点也不让步，每次该闹的不该闹的都等着对方来道歉。后来他认错多了，心里憋了气，直接冷战，我更不可能求和，最后说累了要分手，其实我现在都能理解。”</p></blockquote><ul><li>是天平两端爱的分量失衡了，一方谄媚、一方刚硬的爱情，是走不长远的。</li></ul><p><strong>彼此不计较谁更吃亏，彼此都愿意多改变一些，才能达成更均衡的相爱与相守。</strong></p><p>她有一天愿意为他洗手作羹汤，他有一天开始为家里置办清洁用具和家电……</p><p>一点一滴的改变和成长，砌起牢固的爱情城墙。</p><p>爱的动人之处就在于，一个人，哪怕再冥顽不灵，性格里的劣根再深，一旦遭逢爱情，都会自省自察，清洗自我的污垢，以容纳更纯粹的爱意。</p><p>于是这也在让我思考，是不是爱的深度，就在于对方愿意为彼此改变的幅度。</p><p>这当然不是指一旦爱上就为对方大动干戈、改头换面，但是面对喜欢的人，你总归很容易从嘴到行动，都说出那句“愿意”，在生活摩擦你我的过程中，慢慢收起了自己的娇气做作，或者慢慢不再放纵自己的任性冷漠，潜移默化地相互成全包容。</p><p>这种润物细无声的默契会滋养彼此，让这段关系驶向更长久的相守。</p><p>今天我为了你在菜里少放点盐，明天你为了我早下班十分钟，后天我们再为了彼此，在面对小狗随地大小便的时候，再多一些耐心……</p><p>不善言辞的人逐渐愿意敞开心扉，不苟言笑的人逐渐愿意说笑逗乐，潇洒爱玩的人逐渐变得顾家勤勉……</p><p>以前看《和Summer的五百天》，男主是个完全不会表达心意的人，跟女主角Summer从相识到确立关系的每一步，都是由Summer推动——他是真心喜欢Summer的。但当Summer意识到他在这段关系里享受着她的推动而从未改变过自己的懦弱时，她决定离开。</p><p>失去挚爱之人的痛苦让男主亲身学会了改变，他遇到下一个心动女孩Autumn时，才终于能够勇敢地向她打招呼。</p><ul><li>人性特别容易有恃无恐，很多人都是失去了一个人才会痛心去改变，但我们当然不要这样。</li></ul><p><strong>我们要及时地去做。</strong></p><p><strong>双向的改变和包容，才能让爱的天平趋于平稳。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>debian的samba搭建</title>
      <link href="/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-01-debian%E7%9A%84samba%E6%90%AD%E5%BB%BA/"/>
      <url>/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-01-debian%E7%9A%84samba%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="date-created-2022-11-29-16-31"><a href="#date-created-2022-11-29-16-31" class="headerlink" title="date created: 2022-11-29 16:31"></a>date created: 2022-11-29 16:31</h2><p>心血来潮，任务是将debian搭建samba服务。虽然大学学过，但是已经忘得差不多了。。。</p><p>最怕改配置文件了。。</p><h2 id="下载samba"><a href="#下载samba" class="headerlink" title="下载samba"></a>下载samba</h2><p>这个很重要。但是这个步骤一直告诉我依赖库有问题，我很是好奇依赖库哪里有问题，已经换成国内的镜像源。还是有依赖库的问题。以致于总是安装不上。后来才明白，这种依赖的问题大多数是源有问题，可以尝试换个源试试的。</p><p>再<code>/etc/apt</code>的<code>sources.list</code>文件，如果你不习惯使用linux的vim可以使用xshell的xftp进行文件更改。另外说一句，debian这系统和centos还不一样，需要有权限才能对文件进行操作我，我要更改系统文件的话必须加上sudo才可以。</p><p>打开<code>sources.list</code>文件之后，进行更改，添加上源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#阿里云镜像源</span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb https://mirrors.aliyun.com/debian-security/ bullseye-security main</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian-security/ bullseye-security main</span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib</span><br></pre></td></tr></table></figure><p>添加上之后，保存文件然后输入下面命令更新源</p><p><code>sudo apt-get update</code></p><p><code>sudo apt-get upgrade</code></p><h4 id="Tips："><a href="#Tips：" class="headerlink" title="Tips："></a>Tips：</h4><p>sudo apt-get update<br>这个命令，会访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。我们在新立得软件包管理器里看到的软件列表，都是通过update命令更新的。</p><p>update后，可能需要upgrade一下。</p><p>sudo apt-get upgrade<br>这个命令，会把本地已安装的软件，与刚下载的软件列表里对应软件进行对比，如果发现已安装的软件版本太低，就会提示你更新。如果你的软件都是最新版本，会提示：</p><p>升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 0 个软件包未被升级。</p><h2 id="安装samba"><a href="#安装samba" class="headerlink" title="安装samba"></a>安装samba</h2><p>root用户下直接使用以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install samba</span><br></pre></td></tr></table></figure><p>若是普通用户下使用以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install samba</span><br></pre></td></tr></table></figure><p>安装好samba之后然后就是更改配置文件<code>/etc/samba</code>下面的<code>smb.conf</code>文件</p><h2 id="更改samba配置文件"><a href="#更改samba配置文件" class="headerlink" title="更改samba配置文件"></a>更改samba配置文件</h2><p>我主要更改了home文件下面的配置文件，appshare是我自己写的配置，可以照着写一下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">workgroup = WORKGROUP</span><br><span class="line">   <span class="built_in">log</span> file = /var/log/samba/log.%m</span><br><span class="line">   max <span class="built_in">log</span> size = 1000</span><br><span class="line">   logging = file</span><br><span class="line">   panic action = /usr/share/samba/panic-action %d</span><br><span class="line">   server role = standalone server</span><br><span class="line">   obey pam restrictions = <span class="built_in">yes</span></span><br><span class="line">   unix password <span class="built_in">sync</span> = <span class="built_in">yes</span></span><br><span class="line">   map to guest = bad user <span class="comment">#设置是否可以匿名访问</span></span><br><span class="line">   usershare allow guests = <span class="built_in">yes</span></span><br><span class="line">[homes]</span><br><span class="line">   comment = Home Directories</span><br><span class="line">   browseable = <span class="built_in">yes</span></span><br><span class="line">   public = <span class="built_in">yes</span></span><br><span class="line">   guest ok = <span class="built_in">yes</span></span><br><span class="line">   <span class="built_in">read</span> only = no</span><br><span class="line">   writable = <span class="built_in">yes</span></span><br><span class="line">   create mask = 0777</span><br><span class="line">   directory mask = 0777</span><br><span class="line">   valid <span class="built_in">users</span> = %S</span><br><span class="line">[appshare]</span><br><span class="line">comment = WinccOA Share <span class="comment">#描述</span></span><br><span class="line">path = /home/uarto/app   <span class="comment">#路径</span></span><br><span class="line">browseable = <span class="built_in">yes</span>   <span class="comment">#是否可见</span></span><br><span class="line">writable = <span class="built_in">yes</span> <span class="comment">#可写</span></span><br><span class="line">available = <span class="built_in">yes</span></span><br><span class="line">public = <span class="built_in">yes</span> <span class="comment">#公共</span></span><br><span class="line"><span class="built_in">read</span> only = no <span class="comment">#只读，不能和上面的pulic =yes 冲突</span></span><br><span class="line">guest ok = <span class="built_in">yes</span></span><br><span class="line">browseable = <span class="built_in">yes</span></span><br><span class="line">create mask = 0777</span><br><span class="line">directory mask = 0777</span><br></pre></td></tr></table></figure><p>再然后就是保存重启配置文件，重启samba服务就可以</p><p><code>sudo systemctl  restart  smbd</code></p><p><strong>如果出现文件夹无法访问的情况，有可能是没有给共享文件夹下赋予一定的权限，使用chmod更改文件夹权限就可以。</strong></p><h2 id="Samba服务程序中的参数以及作用"><a href="#Samba服务程序中的参数以及作用" class="headerlink" title="Samba服务程序中的参数以及作用"></a>Samba服务程序中的参数以及作用</h2><table><thead><tr><th>[global]</th><th></th><th>全局参数。</th></tr></thead><tbody><tr><td></td><td>workgroup &#x3D; MYGROUP</td><td>工作组名称</td></tr><tr><td></td><td>server string &#x3D; Samba Server Version %v</td><td>服务器介绍信息，参数%v为显示SMB版本号</td></tr><tr><td></td><td>log file &#x3D; &#x2F;var&#x2F;log&#x2F;samba&#x2F;log.%m</td><td>定义日志文件的存放位置与名称，参数%m为来访的主机名</td></tr><tr><td></td><td>max log size &#x3D; 50</td><td>定义日志文件的最大容量为50KB</td></tr><tr><td></td><td>security &#x3D; user</td><td>安全验证的方式，总共有4种</td></tr><tr><td></td><td>share：来访主机无需验证口令；比较方便，但安全性很差</td><td></td></tr><tr><td></td><td>user：需验证来访主机提供的口令后才可以访问；提升了安全性</td><td></td></tr><tr><td></td><td>server：使用独立的远程主机验证来访主机提供的口令（集中管理账户）</td><td></td></tr><tr><td></td><td>domain：使用域控制器进行身份验证</td><td></td></tr><tr><td></td><td>passdb backend &#x3D; tdbsam</td><td>定义用户后台的类型，共有3种</td></tr><tr><td></td><td>smbpasswd：使用smbpasswd命令为系统用户设置Samba服务程序的密码</td><td></td></tr><tr><td></td><td>tdbsam：创建数据库文件并使用pdbedit命令建立Samba服务程序的用户</td><td></td></tr><tr><td></td><td>ldapsam：基于LDAP服务进行账户验证</td><td></td></tr><tr><td></td><td>load printers &#x3D; yes</td><td>设置在Samba服务启动时是否共享打印机设备</td></tr><tr><td></td><td>cups options &#x3D; raw</td><td>打印机的选项</td></tr><tr><td>[homes]</td><td></td><td>共享参数</td></tr><tr><td></td><td>comment &#x3D; Home Directories</td><td>描述信息</td></tr><tr><td></td><td>browseable &#x3D; no</td><td>指定共享信息是否在“网上邻居”中可见</td></tr><tr><td></td><td>writable &#x3D; yes</td><td>定义是否可以执行写入操作，与“read only”相反</td></tr><tr><td>[printers]</td><td></td><td>打印机共享参数</td></tr><tr><td></td><td>comment &#x3D; All Printers</td><td></td></tr><tr><td></td><td>path &#x3D; &#x2F;var&#x2F;spool&#x2F;samba</td><td>共享文件的实际路径(重要)。</td></tr><tr><td></td><td>browseable &#x3D; no</td><td></td></tr><tr><td></td><td>guest ok &#x3D; no   等于 public &#x3D; no</td><td>是否所有人可见，等同于”public”参数。</td></tr><tr><td></td><td>writable &#x3D; no    等于 read only &#x3D; yes</td><td></td></tr><tr><td></td><td>printable &#x3D; yes</td><td></td></tr></tbody></table><p>共享选项及说明，按照需求合理配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">[共享名称]: 共享中看到的共享目录名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">comment = 共享的描述. </span><br><span class="line"></span><br><span class="line">path = 共享目录路径(可以用%u、%m这样的宏来代替路径如:/home/share/%u) </span><br><span class="line"></span><br><span class="line">browseable = <span class="built_in">yes</span>/no指定该共享是否在“网上邻居”中可见。</span><br><span class="line"></span><br><span class="line">writable = <span class="built_in">yes</span>/no指定该共享路径是否可写。</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> only = <span class="built_in">yes</span>/no设置共享目录为只读(注意设置不要与writable有冲突) </span><br><span class="line"></span><br><span class="line">available = <span class="built_in">yes</span>/no指定该共享资源是否可用。</span><br><span class="line"></span><br><span class="line">admin <span class="built_in">users</span> = bobyuan，jane指定该共享的管理员,用户验证方式为“security=share”时，此项无效。 </span><br><span class="line"></span><br><span class="line">valid <span class="built_in">users</span> = bobyuan，jane允许访问该共享的用户或组-“@+组名” </span><br><span class="line"></span><br><span class="line">invalid <span class="built_in">users</span> = 禁止访问该共享的用户与组(同上) </span><br><span class="line"></span><br><span class="line">write list = 允许写入该共享的用户</span><br><span class="line"></span><br><span class="line">public = <span class="built_in">yes</span>/no共享是否允许guest账户访问。 </span><br><span class="line"></span><br><span class="line">guest ok = <span class="built_in">yes</span>/no意义同“public”。</span><br><span class="line"></span><br><span class="line">create mask = 0700指定用户通过Samba在该共享目录中创建文件的默认权限。0600代表创建文件的权限为rw-------</span><br><span class="line"></span><br><span class="line">directory mask = 0700指定用户通过Samba在该共享目录中创建目录的默认权限。0600代表创建目录的权限为rwx------ </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置Debian11服务器允许root用户远程SSH登录</title>
      <link href="/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-01-%E9%85%8D%E7%BD%AEDebian11%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%81%E8%AE%B8root%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8BSSH%E7%99%BB%E5%BD%95/"/>
      <url>/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-04-01-%E9%85%8D%E7%BD%AEDebian11%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%81%E8%AE%B8root%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8BSSH%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>全新安装系统后，默认情况下将禁用Debian Linux上的root登录。当您尝试以root用户身份登录Debian11 Linux服务器时，访问将被拒绝。要在Debian Linux系统上为root用户启用SSH登录，您需要首先配置SSH服务器。</p><p><strong>0.首先安装SSH</strong><br>注意：如果使用的是WSL安装的ubuntu&#x2F;debian，那么你需要先卸载：<code>apt remove openssh-server</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install openssh-server</span><br></pre></td></tr></table></figure><p>安装完成后<a href="https://so.csdn.net/so/search?q=SSH&spm=1001.2101.3001.7020">SSH</a> 服务默认开启<br>手动启动：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start ssh.service</span><br></pre></td></tr></table></figure><p><strong>1.安装vim</strong><br>首先由普通用户登录Debian服务器，su root切换到root用户，输入下面命令安装即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure><p><strong>2.利用vim打开并修改&#x2F;etc&#x2F;ssh&#x2F;sshd_config文件</strong><br>将PermitRootLogin 设置为yes,PasswordAuthentication设置为yes即可，:wq保存退出即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line">PasswordAuthentication <span class="built_in">yes</span></span><br><span class="line">PermitRootLogin <span class="built_in">yes</span></span><br></pre></td></tr></table></figure><p><strong>3.输入下面命令，重新启动SSH服务器：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/ssh restart</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>for循环的优化</title>
      <link href="/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-01-for%E5%BE%AA%E7%8E%AF%E7%9A%84%E4%BC%98%E5%8C%96/"/>
      <url>/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-04-01-for%E5%BE%AA%E7%8E%AF%E7%9A%84%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="for循环的优化"><a href="#for循环的优化" class="headerlink" title="for循环的优化"></a>for循环的优化</h2><p>2022年11月12日17点52分</p><p>今天使用wincc oa的时候遍历excel表的时候，五千多行，慢的要死，最后还是归结自己的定义变量的随便。以至于自己写的程序拖慢了速度。<br>以下是几条优化for循环的方式</p><h2 id="方法一：消除循环终止判断时的方法调用"><a href="#方法一：消除循环终止判断时的方法调用" class="headerlink" title="方法一：消除循环终止判断时的方法调用"></a>方法一：消除循环终止判断时的方法调用</h2><p>优化前：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">  System.out.println(list.get(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>优点：较常见，易于理解<br>缺点：每次都要计算list.size()</p><p>优化一：<br>将计算list长度提取出来</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> list.size();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      System.out.println(list.get(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>优点：将list长度提取出来，不必每次都计算<br>缺点：</p><ol><li>m的作用域不够小，违反了最小作用域原则</li><li>不能在for循环中操作list的大小，比如除去或新加一个元素</li></ol><p>分析：<br>list.size()每次循环都会被执行一次，这无疑会影响程序的性能，所以应该将其放到循环外面，用一个变量来代替，优化前后的对比也很明显。</p><p>优化二：<br>将计算list长度提取出来</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, n = list.size(); i &lt; n; i++) &#123;</span><br><span class="line">      System.out.println(list.get(i));</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>优点：不必每次都计算 ，变量的作用域遵循最小范围原则</p><p>优化三：<br>采用倒序的写法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> list.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      System.out.println(list.get(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>优点：不必每次都计算 ，变量的作用域遵循最小范围原则<br>缺点：</p><ol><li>结果的顺序会反</li><li>看起来不习惯，不易读懂</li></ol><p>适用场合：与显示结果顺序无关的地方：比如保存之前数据的校验</p><h2 id="方法二：Iterator-遍历"><a href="#方法二：Iterator-遍历" class="headerlink" title="方法二：Iterator 遍历"></a>方法二：Iterator 遍历</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Iterator&lt;String&gt; it = list.iterator(); it.hasNext();) &#123;</span><br><span class="line">      System.out.println(it.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>优点：简洁</p><h2 id="方法三：jdk1-5新写法"><a href="#方法三：jdk1-5新写法" class="headerlink" title="方法三：jdk1.5新写法"></a>方法三：jdk1.5新写法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Object o : list) &#123;</span><br><span class="line">     System.out.println(o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>优点：简洁结合泛型使用更简洁<br>缺点：jdk1.4向下不兼容</p><h2 id="方法四：循环嵌套外小内大原则（从外至里，循环对象size要从小到大）"><a href="#方法四：循环嵌套外小内大原则（从外至里，循环对象size要从小到大）" class="headerlink" title="方法四：循环嵌套外小内大原则（从外至里，循环对象size要从小到大）"></a>方法四：循环嵌套外小内大原则（从外至里，循环对象size要从小到大）</h2><p>优化前：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">         &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>优化后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">100000</span>; j++) &#123;</span><br><span class="line">         &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>理解：这就好比你复制很多个小文件和复制几个大文件的区别。</p><h2 id="方法五：循环嵌套提取不需要循环的逻辑"><a href="#方法五：循环嵌套提取不需要循环的逻辑" class="headerlink" title="方法五：循环嵌套提取不需要循环的逻辑"></a>方法五：循环嵌套提取不需要循环的逻辑</h2><p>优化前：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>, b = <span class="number">11</span>;</span><br><span class="line"> <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">              i = i * a * b;</span><br><span class="line">  &#125; </span><br></pre></td></tr></table></figure><p>优化后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a * b;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        i = i * c;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>分析：代码中a*b与我们的循环无关，所以为避免重复计算，应该把它放到外面。优化后性能会提升好几个数量级，这些是不容忽视的。</p><h2 id="方法六：异常处理写在循环外面"><a href="#方法六：异常处理写在循环外面" class="headerlink" title="方法六：异常处理写在循环外面"></a>方法六：异常处理写在循环外面</h2><p>优化前：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"> </span><br><span class="line">            &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> e) &#123;</span><br><span class="line"> </span><br><span class="line">            &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>优化后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">     &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"> </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>分析：捕获异常是很耗资源的，所以不能将try catch放到循环内部，优化后同样有好几个数量级的提升</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为什么一个axios请求会发起两次？</title>
      <link href="/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-01-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%80%E4%B8%AAaxios%E8%AF%B7%E6%B1%82%E4%BC%9A%E5%8F%91%E8%B5%B7%E4%B8%A4%E6%AC%A1%EF%BC%9F/"/>
      <url>/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2023-04-01-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%80%E4%B8%AAaxios%E8%AF%B7%E6%B1%82%E4%BC%9A%E5%8F%91%E8%B5%B7%E4%B8%A4%E6%AC%A1%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<p>参考原文：<a href="https://juejin.cn/post/6977198715542962183#heading-2">https://juejin.cn/post/6977198715542962183#heading-2</a></p><p>前几日写项目的时候碰到的这个问题，在项目中只写了一次的请求，在实际netWork中发送了两次</p><p><strong>解释：</strong></p><ol><li><p>因为vue是没有提供ajax请求功能，所以需要使用vue-resource、axios等插件实现ajax请求</p></li><li><p>axios本质上是javascript的ajax封装，所以在使用axios发送请求时会被同源策略限制</p></li></ol><p>对了，也有可能会碰到跨域的问题，在对应方法上使用注解**@CrossOrigin**解决。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux和windows的CPU执行策略</title>
      <link href="/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-01-Linux%E5%92%8Cwindows%E7%9A%84CPU%E6%89%A7%E8%A1%8C%E7%AD%96%E7%95%A5/"/>
      <url>/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-01-Linux%E5%92%8Cwindows%E7%9A%84CPU%E6%89%A7%E8%A1%8C%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<p>今天更换了服务器，把所有的服务部署到linux上。服务启动，发现cpu多数为均匀分布，平均到30~40%左右。但是到windows上面会出现一核工作多核围观的现象出现。</p><p><strong>Linux 中操作系统的对 CPU 采用的是时间片算法</strong>，所有进程排成一个队列，操作系统按照顺序给每个进程分配一段时间，即该进程允许的执行时间，如果时间到了该进程还在运行，则该进程的 CPU 会被剥夺给下一个进程，该进程用完这个时间之后会被移到队列的尾部等待下一次分配；</p><p><strong>windows 使用的抢占式算法</strong>，根据进程的优先级、饥饿程度去分配，如果一个进程拿到 CPU 之后，除非自己主动放弃 CPU，不然会一直占用（如果发现某个线程长时间霸占 CPU，会强制使这个线程挂起，因此在实际上不会出现 “一个线程一直霸占着 CPU 不放” 的情况）；</p><p>Thread.Sleep（N），告诉 CPU 在 N 时间内不用考虑自己，重新进行资源分配 (根据优先级 和饥饿程度);</p><p>Thread.Sleep（0）, 触发操作系统重新立刻进行一次 CPU 竞争，包含自己；</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>intel vt-x 处于禁用状态解决办法</title>
      <link href="/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-01-intel_vt-x_%E5%A4%84%E4%BA%8E%E7%A6%81%E7%94%A8%E7%8A%B6%E6%80%81%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2023/04/01/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-04-01-intel_vt-x_%E5%A4%84%E4%BA%8E%E7%A6%81%E7%94%A8%E7%8A%B6%E6%80%81%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="title-intel-vt-x-处于禁用状态解决办法-Wonderupdated-2021-01-26-14-57-19Zcreated-2021-01-26-14-57-19Zsource-https-www-wonder1999-com-index-php-archives-48-htmltags-windows-软件"><a href="#title-intel-vt-x-处于禁用状态解决办法-Wonderupdated-2021-01-26-14-57-19Zcreated-2021-01-26-14-57-19Zsource-https-www-wonder1999-com-index-php-archives-48-htmltags-windows-软件" class="headerlink" title="title: intel vt-x 处于禁用状态解决办法 - Wonderupdated: 2021-01-26 14:57:19Zcreated: 2021-01-26 14:57:19Zsource: https://www.wonder1999.com/index.php/archives/48.htmltags:  - windows  - 软件"></a>title: intel vt-x 处于禁用状态解决办法 - Wonder<br>updated: 2021-01-26 14:57:19Z<br>created: 2021-01-26 14:57:19Z<br>source: <a href="https://www.wonder1999.com/index.php/archives/48.html">https://www.wonder1999.com/index.php/archives/48.html</a><br>tags:<br>  - windows<br>  - 软件</h2><p>虚拟机 VMware安装系统，提示此主机支持Intel VT-x,但Intel VT-x处于禁用状态</p><p>VMware提示此主机支持Intel VT-x,但Intel VT-x处于禁用状态这是怎么回事呢？</p><p>Intel VT-x完整名称是Intel Virtualization Technology，就是Intel虚拟技术，开启它可以让硬件平台同时运行多个操作系统，是虚拟机软件运行必备的技术之一，如果禁用，就会弹出“此主机支持Intel VT-x,但Intel VT-x处于禁用状态”这个提示，解决办法就是进BIOS开启Intel Virtualization Technology。</p><h1 id="一、操作说明："><a href="#一、操作说明：" class="headerlink" title="一、操作说明："></a>一、操作说明：</h1><p>电脑主板非常多，不同品牌、不同机型BIOS设置都不一样，这边仅列举一部分作例子（联想），</p><h2 id="1、重启电脑"><a href="#1、重启电脑" class="headerlink" title="1、重启电脑"></a>1、重启电脑</h2><h2 id="2、按住F12，进入BIOS"><a href="#2、按住F12，进入BIOS" class="headerlink" title="2、按住F12，进入BIOS"></a>2、按住F12，进入BIOS</h2><p>在界面Main，Devices，Power，Advanced，Security，Startup，Exit,</p><p>选择Advanced，在选择CPU Setup，Enter 进入 ，选择 Intel （R） Virtualization Technology，设置Disabled为 Enbabled，之后按F10保存，重启即可。</p><p><strong>注意：</strong>  </p><p>如果你BIOS跟本文介绍的都不同，可以进入BIOS后一个个看看，一般会在Advanced、Security、BIOS Features、Configuration的下面，</p><p>找到Intel Virtualization Technology按回车键选择Enabled，表示开启。</p><p>进入BIOS之后选择某个选项按Enter是进入，按Esc是返回，按F10或F4保存。</p><p>(小提示：联想Y7000 进入bios如果遇到需要输入硬盘密码的话，输入完成后按住回车立刻敲F2，进入bios)</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> windows </tag>
            
            <tag> 软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用户名不在 sudoers文件中</title>
      <link href="/2023/03/31/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-03-31-%E7%94%A8%E6%88%B7%E5%90%8D%E4%B8%8D%E5%9C%A8_sudoers%E6%96%87%E4%BB%B6%E4%B8%AD/"/>
      <url>/2023/03/31/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-03-31-%E7%94%A8%E6%88%B7%E5%90%8D%E4%B8%8D%E5%9C%A8_sudoers%E6%96%87%E4%BB%B6%E4%B8%AD/</url>
      
        <content type="html"><![CDATA[<h2 id="“用户名不在-sudoers文件中，此事将被报告”-解决方案"><a href="#“用户名不在-sudoers文件中，此事将被报告”-解决方案" class="headerlink" title="“用户名不在 sudoers文件中，此事将被报告” 解决方案"></a>“用户名不在 sudoers文件中，此事将被报告” 解决方案</h2><p><strong>通用解释</strong>：sudo命令可以让你以root身份执行命令，来完成一些我们这个账号完成不了的任务。但是并非所有用户都能够执行sudo，因为有权限的用户都在&#x2F;etc&#x2F;sudoers中。</p><p>解决方案：</p><p><strong>（1）进入root模式，su，再输入正确密码，</strong></p><p><strong>（2）通过cd &#x2F;etc 进入etc文件中，</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc</span><br></pre></td></tr></table></figure><p><strong>（3）通过vim打开sudoers并编辑，</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim sudoers</span><br></pre></td></tr></table></figure><p>找到root  ALL&#x3D;(ALL)  ALL文件，在下方添加自己的账户并:wq!进行强制保存退出，</p><p><strong>（4）接下来就可以继续安装一些必要的系统工具了：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 技术笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java获取当前系统所有正在运行的进程</title>
      <link href="/2023/03/31/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-03-31-java%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%89%80%E6%9C%89%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E8%BF%9B%E7%A8%8B/"/>
      <url>/2023/03/31/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-03-31-java%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%89%80%E6%9C%89%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E8%BF%9B%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="获取当前系统所有正在运行的进程"><a href="#获取当前系统所有正在运行的进程" class="headerlink" title="获取当前系统所有正在运行的进程"></a>获取当前系统所有正在运行的进程</h2><p>ProcList类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wonder.utils;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.Native;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.platform.win32.Kernel32;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.platform.win32.Tlhelp32;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.platform.win32.WinDef;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.platform.win32.WinNT;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.win32.W32APIOptions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProcList</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//data members</span></span><br><span class="line">    <span class="keyword">private</span> String dwSize;</span><br><span class="line">    <span class="keyword">private</span> String cntUsage;</span><br><span class="line">    <span class="keyword">private</span> String th32ProcessID;</span><br><span class="line">    <span class="keyword">private</span> String th32DefaultHeapID;</span><br><span class="line">    <span class="keyword">private</span> String th32ModuleID;</span><br><span class="line">    <span class="keyword">private</span> String cntThreads;</span><br><span class="line">    <span class="keyword">private</span> String th32ParentProcessID;</span><br><span class="line">    <span class="keyword">private</span> String pcPriClassBase;</span><br><span class="line">    <span class="keyword">private</span> String dwFlags;</span><br><span class="line">    <span class="keyword">private</span> String szExeFile;</span><br><span class="line">    <span class="keyword">private</span> String procPath;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String[]&gt; procData = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String[]&gt;();;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getting proc details (without path)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String[]&gt; getProcList()&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Kernel32</span> <span class="variable">kernel32</span> <span class="operator">=</span> (Kernel32) Native.loadLibrary(Kernel32.class, W32APIOptions.DEFAULT_OPTIONS);</span><br><span class="line">        Tlhelp32.PROCESSENTRY32.<span class="type">ByReference</span> <span class="variable">processEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tlhelp32</span>.PROCESSENTRY32.ByReference();</span><br><span class="line">        WinNT.<span class="type">HANDLE</span> <span class="variable">processSnapshot</span> <span class="operator">=</span> kernel32.CreateToolhelp32Snapshot(Tlhelp32.TH32CS_SNAPPROCESS, <span class="keyword">new</span> <span class="title class_">WinDef</span>.DWORD(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//looping ProcList</span></span><br><span class="line">            <span class="keyword">while</span> (kernel32.Process32Next(processSnapshot, processEntry))&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//assigning details</span></span><br><span class="line">                dwSize = processEntry.dwSize.toString();</span><br><span class="line">                cntUsage = processEntry.cntUsage.toString();</span><br><span class="line">                th32ProcessID = processEntry.th32ProcessID.toString();</span><br><span class="line">                th32DefaultHeapID = processEntry.th32DefaultHeapID.toString();</span><br><span class="line">                th32ModuleID = processEntry.th32ModuleID.toString();</span><br><span class="line">                cntThreads = processEntry.cntThreads.toString();</span><br><span class="line">                th32ParentProcessID = processEntry.th32ParentProcessID.toString();</span><br><span class="line">                pcPriClassBase = processEntry.pcPriClassBase.toString();</span><br><span class="line">                dwFlags = processEntry.dwFlags.toString();</span><br><span class="line">                szExeFile = Native.toString(processEntry.szExeFile);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//final 2d result array</span></span><br><span class="line">                procData.add(<span class="keyword">new</span> <span class="title class_">String</span>[] &#123;dwSize, cntUsage, th32ProcessID, th32DefaultHeapID, th32ModuleID, cntThreads, th32ParentProcessID, pcPriClassBase, pcPriClassBase, dwFlags, szExeFile&#125;);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            kernel32.CloseHandle(processSnapshot);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//returning data</span></span><br><span class="line">        <span class="keyword">return</span> procData;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getting proc details (with path)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String[]&gt; getProcListExt()&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Kernel32</span> <span class="variable">kernel32</span> <span class="operator">=</span> (Kernel32) Native.loadLibrary(Kernel32.class, W32APIOptions.DEFAULT_OPTIONS);</span><br><span class="line">        Tlhelp32.PROCESSENTRY32.<span class="type">ByReference</span> <span class="variable">processEntry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tlhelp32</span>.PROCESSENTRY32.ByReference();</span><br><span class="line">        WinNT.<span class="type">HANDLE</span> <span class="variable">processSnapshot</span> <span class="operator">=</span> kernel32.CreateToolhelp32Snapshot(Tlhelp32.TH32CS_SNAPPROCESS, <span class="keyword">new</span> <span class="title class_">WinDef</span>.DWORD(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//looping ProcList</span></span><br><span class="line">            <span class="keyword">while</span> (kernel32.Process32Next(processSnapshot, processEntry))&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//assigning details</span></span><br><span class="line">                dwSize = processEntry.dwSize.toString();</span><br><span class="line">                cntUsage = processEntry.cntUsage.toString();</span><br><span class="line">                th32ProcessID = processEntry.th32ProcessID.toString();</span><br><span class="line">                th32DefaultHeapID = processEntry.th32DefaultHeapID.toString();</span><br><span class="line">                th32ModuleID = processEntry.th32ModuleID.toString();</span><br><span class="line">                cntThreads = processEntry.cntThreads.toString();</span><br><span class="line">                th32ParentProcessID = processEntry.th32ParentProcessID.toString();</span><br><span class="line">                pcPriClassBase = processEntry.pcPriClassBase.toString();</span><br><span class="line">                dwFlags = processEntry.dwFlags.toString();</span><br><span class="line">                szExeFile = Native.toString(processEntry.szExeFile);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//getting path</span></span><br><span class="line">                WinNT.<span class="type">HANDLE</span> <span class="variable">moduleSnapshot</span> <span class="operator">=</span> kernel32.CreateToolhelp32Snapshot(Tlhelp32.TH32CS_SNAPMODULE, processEntry.th32ProcessID);</span><br><span class="line">                ProcessPathKernel32.MODULEENTRY32.<span class="type">ByReference</span> <span class="variable">me</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessPathKernel32</span>.MODULEENTRY32.ByReference();</span><br><span class="line">                ProcessPathKernel32.INSTANCE.Module32First(moduleSnapshot, me);</span><br><span class="line">                procPath = me.szExePath();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">//final 2d result array</span></span><br><span class="line">                procData.add(<span class="keyword">new</span> <span class="title class_">String</span>[] &#123;dwSize, cntUsage, th32ProcessID, th32DefaultHeapID, th32ModuleID, cntThreads, th32ParentProcessID, pcPriClassBase, pcPriClassBase, dwFlags, szExeFile, procPath&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            kernel32.CloseHandle(processSnapshot);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//returning data</span></span><br><span class="line">        <span class="keyword">return</span> procData;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">PidAndName</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;String[]&gt; test = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String[]&gt;();</span><br><span class="line">        Map&lt;String, String&gt; coursesMap =<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">        <span class="type">ProcList</span> <span class="variable">pl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcList</span>();</span><br><span class="line">        test = pl.getProcListExt();</span><br><span class="line">        String sjson=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; test.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//System.out.println(Arrays.toString(test.get(i)));</span></span><br><span class="line">            <span class="comment">//System.out.println(test.get(i)[2]+&quot;---&quot;+test.get(i)[10]);</span></span><br><span class="line"><span class="comment">//            coursesMap.put(&quot;PID&quot;,test.get(i)[2]);</span></span><br><span class="line"><span class="comment">//            coursesMap.put(&quot;processName&quot;,test.get(i)[10]);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//            System.out.println(&quot;PID&quot; + &quot;:&quot; + test.get(i)[2]);</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;processName&quot; + &quot;:&quot; + test.get(i)[10]);</span></span><br><span class="line">            sjson=sjson+<span class="string">&quot;&#123;&quot;</span>+<span class="string">&quot;\&quot;PID\&quot;&quot;</span> + <span class="string">&quot;:&quot;</span> +<span class="string">&quot;\&quot;&quot;</span>+ test.get(i)[<span class="number">2</span>] +<span class="string">&quot;\&quot;&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;\&quot;processName\&quot;&quot;</span> + <span class="string">&quot;:&quot;</span> +<span class="string">&quot;\&quot;&quot;</span>+ test.get(i)[<span class="number">10</span>]+<span class="string">&quot;\&quot;&quot;</span>+<span class="string">&quot;&#125;,&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sjson =<span class="string">&quot;[&quot;</span>+sjson.substring(<span class="number">0</span>,sjson.length() - <span class="number">1</span>)+<span class="string">&quot;]&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> sjson;</span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; test.size(); i++) &#123;</span></span><br><span class="line"><span class="comment">//            //System.out.println(Arrays.toString(test.get(i)));</span></span><br><span class="line"><span class="comment">//            //System.out.println(test.get(i)[2]+&quot;---&quot;+test.get(i)[10]);</span></span><br><span class="line"><span class="comment">//            coursesMap.put(test.get(i)[2], test.get(i)[10]);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        return coursesMap;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String[]&gt; test = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String[]&gt;();</span><br><span class="line">        <span class="type">ProcList</span> <span class="variable">pl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcList</span>();</span><br><span class="line">        test = pl.getProcListExt();</span><br><span class="line"><span class="comment">//        for (String[] row : test) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(row[0]+&quot;\t&quot;+row[9]+&quot;\t\t&quot;+row[10]);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        for (String[] strings : test) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;pid: &quot;+strings[2]+&quot;---&quot;+&quot;name: &quot;+strings[10]);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        Map&lt;String, String&gt; coursesMap =<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"><span class="comment">//        for (String[] strings : test) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;pid: &quot;+strings[2]+&quot;---&quot;+&quot;name: &quot;+strings[10]);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        System.out.println(test.size());</span><br><span class="line">        String sjson=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; test.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//System.out.println(Arrays.toString(test.get(i)));</span></span><br><span class="line">            <span class="comment">//System.out.println(test.get(i)[2]+&quot;---&quot;+test.get(i)[10]);</span></span><br><span class="line"><span class="comment">//            coursesMap.put(&quot;PID&quot;,test.get(i)[2]);</span></span><br><span class="line"><span class="comment">//            coursesMap.put(&quot;processName&quot;,test.get(i)[10]);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//            System.out.println(&quot;PID&quot; + &quot;:&quot; + test.get(i)[2]);</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;processName&quot; + &quot;:&quot; + test.get(i)[10]);</span></span><br><span class="line">            sjson=sjson+<span class="string">&quot;&#123;&quot;</span>+<span class="string">&quot;\&quot;PID\&quot;&quot;</span> + <span class="string">&quot;:&quot;</span> + <span class="string">&quot;\&quot;test.get(i)[2]\&quot;&quot;</span>+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;\&quot;processName\&quot;&quot;</span> + <span class="string">&quot;:&quot;</span> + <span class="string">&quot;\&quot;test.get(i)[10]\&quot;&quot;</span>+<span class="string">&quot;&#125;,&quot;</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        sjson =sjson.substring(<span class="number">0</span>,sjson.length() - <span class="number">1</span>);</span><br><span class="line">        System.out.println(sjson);</span><br><span class="line"><span class="comment">//        coursesMap.entrySet().stream().forEach((entry) -&gt; &#123;</span></span><br><span class="line"><span class="comment">//                System.out.println(entry.getKey()+&quot;---&quot;+entry.getValue());</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ProcessPathKernel32接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wonder.utils;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.Native;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.Pointer;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.Structure;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.platform.win32.Kernel32;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.platform.win32.WinDef;</span><br><span class="line"><span class="keyword">import</span> com.sun.jna.win32.W32APIOptions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProcessPathKernel32</span> <span class="keyword">extends</span> <span class="title class_">Kernel32</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MODULEENTRY32</span> <span class="keyword">extends</span> <span class="title class_">Structure</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ByReference</span> <span class="keyword">extends</span> <span class="title class_">MODULEENTRY32</span> <span class="keyword">implements</span> <span class="title class_">Structure</span>.ByReference &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="title function_">ByReference</span><span class="params">()</span> &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="title function_">ByReference</span><span class="params">(Pointer memory)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>(memory);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MODULEENTRY32</span><span class="params">()</span> &#123;</span><br><span class="line">            dwSize = <span class="keyword">new</span> <span class="title class_">WinDef</span>.DWORD(size());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MODULEENTRY32</span><span class="params">(Pointer memory)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(memory);</span><br><span class="line">            read();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> DWORD dwSize;</span><br><span class="line">        <span class="keyword">public</span> DWORD th32ModuleID;</span><br><span class="line">        <span class="keyword">public</span> DWORD th32ProcessID;</span><br><span class="line">        <span class="keyword">public</span> DWORD GlblcntUsage;</span><br><span class="line">        <span class="keyword">public</span> DWORD ProccntUsage;</span><br><span class="line">        <span class="keyword">public</span> Pointer modBaseAddr;</span><br><span class="line">        <span class="keyword">public</span> DWORD modBaseSize;</span><br><span class="line">        <span class="keyword">public</span> HMODULE hModule;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">char</span>[] szModule = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">255</span>+<span class="number">1</span>]; <span class="comment">// MAX_MODULE_NAME32</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">char</span>[] szExePath = <span class="keyword">new</span> <span class="title class_">char</span>[MAX_PATH];</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">szModule</span><span class="params">()</span> &#123; <span class="keyword">return</span> Native.toString(<span class="built_in">this</span>.szModule); &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">szExePath</span><span class="params">()</span> &#123; <span class="keyword">return</span> Native.toString(<span class="built_in">this</span>.szExePath); &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> List&lt;String&gt; <span class="title function_">getFieldOrder</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Arrays.asList(<span class="keyword">new</span> <span class="title class_">String</span>[] &#123;</span><br><span class="line">                    <span class="string">&quot;dwSize&quot;</span>, <span class="string">&quot;th32ModuleID&quot;</span>, <span class="string">&quot;th32ProcessID&quot;</span>, <span class="string">&quot;GlblcntUsage&quot;</span>, <span class="string">&quot;ProccntUsage&quot;</span>, <span class="string">&quot;modBaseAddr&quot;</span>, <span class="string">&quot;modBaseSize&quot;</span>, <span class="string">&quot;hModule&quot;</span>, <span class="string">&quot;szModule&quot;</span>, <span class="string">&quot;szExePath&quot;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">ProcessPathKernel32</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> (ProcessPathKernel32)Native.loadLibrary(ProcessPathKernel32.class, W32APIOptions.UNICODE_OPTIONS);</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">Module32First</span><span class="params">(HANDLE hSnapshot, MODULEENTRY32.ByReference lpme)</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">Module32Next</span><span class="params">(HANDLE hSnapshot, MODULEENTRY32.ByReference lpme)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java获取pc的诸多信息</title>
      <link href="/2023/03/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-03-30-_java%E8%8E%B7%E5%8F%96pc%E7%9A%84%E8%AF%B8%E5%A4%9A%E4%BF%A1%E6%81%AF/"/>
      <url>/2023/03/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-03-30-_java%E8%8E%B7%E5%8F%96pc%E7%9A%84%E8%AF%B8%E5%A4%9A%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wonder.utils;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.CharsetUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.crypto.symmetric.SymmetricAlgorithm;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.crypto.symmetric.SymmetricCrypto;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> oshi.SystemInfo;</span><br><span class="line"><span class="keyword">import</span> oshi.hardware.*;</span><br><span class="line"><span class="keyword">import</span> oshi.software.os.OperatingSystem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.net.Inet4Address;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取硬件信息工具类（含加密解密）</span></span><br><span class="line"><span class="comment"> * 使用类库:oshi-6.3.0 和 hutool-5.8.6</span></span><br><span class="line"><span class="comment"> * [url=home.php?mod=space&amp;uid=686208]<span class="doctag">@AuThor</span>[/url] ying</span></span><br><span class="line"><span class="comment"> * [url=home.php?mod=space&amp;uid=1248337]<span class="doctag">@version</span>[/url] 1.0</span></span><br><span class="line"><span class="comment"> * [url=home.php?mod=space&amp;uid=686237]<span class="doctag">@date</span>[/url] 2022-10-24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OshiTool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SystemInfo</span> <span class="variable">si</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemInfo</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// System.out.println(getSysInfo(si));</span></span><br><span class="line">        <span class="comment">//getCpuInfo(si);</span></span><br><span class="line">        getDisks(si);</span><br><span class="line">        <span class="comment">//getMemInfo(si);</span></span><br><span class="line">        <span class="comment">//getNetWork(si);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//OshiTool.getDisks(si);</span></span><br><span class="line">        <span class="comment">//OshiTool.getUsbDevices(si);</span></span><br><span class="line">        <span class="comment">// OshiTool.getMemInfo(si);</span></span><br><span class="line"><span class="comment">//        String context=OshiTool.getSysHashCode();</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;原始:&quot;+context);</span></span><br><span class="line"><span class="comment">//        String encyptStr=OshiTool.encryptCode(context);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;加密:&quot;+encyptStr);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;解密:&quot;+OshiTool.decryptCode(encyptStr));</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解密</span></span><br><span class="line"><span class="comment">     * [url=home.php?mod=space&amp;uid=952169]<span class="doctag">@Param</span>[/url] encryptStr 加密字符串</span></span><br><span class="line"><span class="comment">     * [url=home.php?mod=space&amp;uid=155549]<span class="doctag">@Return</span>[/url] String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decryptCode</span><span class="params">(String encryptStr)</span>&#123;</span><br><span class="line">        <span class="comment">//随机生成密钥</span></span><br><span class="line">        <span class="type">byte</span>[] key = &#123;<span class="number">12</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">88</span>,<span class="number">54</span>,<span class="number">12</span>,<span class="number">35</span>&#125;;</span><br><span class="line">        <span class="comment">//构建</span></span><br><span class="line">        <span class="type">SymmetricCrypto</span> <span class="variable">aes</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SymmetricCrypto</span>(SymmetricAlgorithm.AES, key);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//解密为字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">decryptStr</span> <span class="operator">=</span> aes.decryptStr(encryptStr, CharsetUtil.CHARSET_UTF_8);</span><br><span class="line">        <span class="keyword">return</span> decryptStr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加密</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content 加密内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encryptCode</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        <span class="comment">//固定密钥key</span></span><br><span class="line">        <span class="type">byte</span>[] key = &#123;<span class="number">12</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">88</span>,<span class="number">54</span>,<span class="number">12</span>,<span class="number">35</span>&#125;;</span><br><span class="line">        <span class="comment">//构建</span></span><br><span class="line">        <span class="type">SymmetricCrypto</span> <span class="variable">aes</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SymmetricCrypto</span>(SymmetricAlgorithm.AES, key);</span><br><span class="line">        <span class="comment">//加密为16进制表示</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encryptHex</span> <span class="operator">=</span> aes.encryptHex(content);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> encryptHex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取电脑 品牌+序列号+硬盘UUID</span></span><br><span class="line"><span class="comment">     * 用于注册码</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getSysHashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//系统信息</span></span><br><span class="line">        <span class="type">SystemInfo</span> <span class="variable">si</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemInfo</span>();</span><br><span class="line">        <span class="comment">//硬件信息</span></span><br><span class="line">        <span class="type">HardwareAbstractionLayer</span> <span class="variable">hardware</span> <span class="operator">=</span> si.getHardware();</span><br><span class="line">        <span class="comment">//计算机系统</span></span><br><span class="line">        <span class="type">ComputerSystem</span> <span class="variable">cs</span> <span class="operator">=</span> hardware.getComputerSystem();</span><br><span class="line">        <span class="comment">//生成硬件特征码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">vendor</span> <span class="operator">=</span> cs.getManufacturer();</span><br><span class="line">        <span class="type">String</span> <span class="variable">processorSerialNumber</span> <span class="operator">=</span> cs.getSerialNumber();</span><br><span class="line">        <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> cs.getHardwareUUID();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">hardcode</span> <span class="operator">=</span> String.format(<span class="string">&quot;%08x&quot;</span>, vendor.hashCode()) + String.format(<span class="string">&quot;%08x&quot;</span>, processorSerialNumber.hashCode()) + String.format(<span class="string">&quot;%08x&quot;</span>, uuid.hashCode());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> hardcode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取外接设备信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> si oshi.SystemInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getUsbDevices</span><span class="params">(SystemInfo si)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">HardwareAbstractionLayer</span> <span class="variable">hardware</span> <span class="operator">=</span> si.getHardware();</span><br><span class="line">            List&lt;UsbDevice&gt; devs = hardware.getUsbDevices(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">for</span> (UsbDevice ud : devs) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Usb名称:&quot;</span> + ud.getName());</span><br><span class="line">                System.out.println(<span class="string">&quot;Usb产品ID:&quot;</span> + ud.getProductId());</span><br><span class="line">                System.out.println(<span class="string">&quot;Usb序列号:&quot;</span> + ud.getSerialNumber());</span><br><span class="line">                System.out.println(<span class="string">&quot;Usb供应商:&quot;</span> + ud.getVendor());</span><br><span class="line">                System.out.println(<span class="string">&quot;Usb唯一设备号:&quot;</span> + ud.getUniqueDeviceId());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取硬盘信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> si oshi.SystemInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getDisks</span><span class="params">(SystemInfo si)</span> &#123;</span><br><span class="line">        List&lt;HWDiskStore&gt; list = si.getHardware().getDiskStores();</span><br><span class="line">        <span class="keyword">for</span> (HWDiskStore disk : list) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;品牌型号：&quot;</span> + disk.getName() + <span class="string">&quot; &quot;</span> + disk.getModel());</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;硬盘序号: &quot;</span> + disk.getSerial());</span><br><span class="line"></span><br><span class="line">            <span class="type">File</span> <span class="variable">win</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            List&lt;HWPartition&gt; partitions = disk.getPartitions();</span><br><span class="line">            <span class="type">long</span> <span class="variable">sumFreeSize</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (HWPartition part : partitions) &#123;</span><br><span class="line">                win = <span class="keyword">new</span> <span class="title class_">File</span>(part.getMountPoint());</span><br><span class="line">                sumFreeSize += win.getFreeSpace();</span><br><span class="line">                System.out.print(<span class="string">&quot;盘符：&quot;</span> + part.getMountPoint() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;名称：&quot;</span> + part.getName() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;大小：&quot;</span> + convertFileSize(part.getSize()) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;使用：&quot;</span> + convertFileSize(part.getSize() - win.getFreeSpace()) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;空闲: &quot;</span> + convertFileSize(win.getFreeSpace()) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;使用率： &quot;</span> + <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.##%&quot;</span>).format((part.getSize() - win.getFreeSpace()) * <span class="number">1.0</span> / part.getSize()));</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(<span class="string">&quot;硬盘总大小: &quot;</span> + convertFileSize(disk.getSize()) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.print(<span class="string">&quot;硬盘总空闲: &quot;</span> + convertFileSize(sumFreeSize) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.print(<span class="string">&quot;硬盘总使用: &quot;</span> + convertFileSize(disk.getSize() - sumFreeSize) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;硬盘总使用率: &quot;</span> + <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.##%&quot;</span>).format((disk.getSize() - sumFreeSize) * <span class="number">1.0</span> / disk.getSize()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取网络信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> si oshi.SystemInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getNetWork</span><span class="params">(SystemInfo si)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">HardwareAbstractionLayer</span> <span class="variable">hardware</span> <span class="operator">=</span> si.getHardware();</span><br><span class="line">        List&lt;NetworkIF&gt; netWorkifs = hardware.getNetworkIFs();</span><br><span class="line">        <span class="keyword">for</span> (NetworkIF networkIF : netWorkifs) &#123;</span><br><span class="line">            System.out.println(String.format(<span class="string">&quot;IPV4:%s\t网络接收:%s\t网络发送:%s\t显示名称:%s\tMAC地址:%s\t&quot;</span>, Arrays.toString(networkIF.getIPv4addr()), networkIF.getBytesRecv(), networkIF.getBytesSent(), networkIF.getDisplayName(), networkIF.getMacaddr()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取JVM信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> si oshi.SystemInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getJvmInfo</span><span class="params">(SystemInfo si)</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> System.getProperties();</span><br><span class="line">        <span class="comment">// 当前可用的内存总量MB</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">totalMemory</span> <span class="operator">=</span> Runtime.getRuntime().totalMemory();</span><br><span class="line">        System.out.println(<span class="string">&quot;JVM当前可用的内存总量:&quot;</span> + convertFileSize(totalMemory));</span><br><span class="line">        <span class="comment">// 当前内存总量的近似值</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">freeMemory</span> <span class="operator">=</span> Runtime.getRuntime().freeMemory();</span><br><span class="line">        System.out.println(<span class="string">&quot;JVM当前内存总量的近似值:&quot;</span> + convertFileSize(freeMemory));</span><br><span class="line">        <span class="comment">// 虚拟机的最大内存容量</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">maxMemory</span> <span class="operator">=</span> Runtime.getRuntime().maxMemory();</span><br><span class="line">        System.out.println(<span class="string">&quot;JVM最大内存容量&quot;</span> + convertFileSize(maxMemory));</span><br><span class="line">        System.out.println(<span class="string">&quot;JAVA版本:&quot;</span> + props.getProperty(<span class="string">&quot;java.version&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;JAVA_HOME:&quot;</span> + props.getProperty(<span class="string">&quot;java.home&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;用户时区：&quot;</span> + props.getProperty(<span class="string">&quot;user.timezone&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取CPU信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> si oshi.SystemInfo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title function_">getCpuInfo</span><span class="params">(SystemInfo si)</span> &#123;</span><br><span class="line">        <span class="type">HardwareAbstractionLayer</span> <span class="variable">hardware</span> <span class="operator">=</span> si.getHardware();</span><br><span class="line">        <span class="type">Sensors</span> <span class="variable">sensors</span> <span class="operator">=</span> hardware.getSensors();</span><br><span class="line">        <span class="type">CentralProcessor</span> <span class="variable">processor</span> <span class="operator">=</span> hardware.getProcessor();</span><br><span class="line"><span class="comment">//        System.out.println(&quot;CPU型号: &quot; + processor.getProcessorIdentifier().getName());</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;CPU序列号: &quot; + processor.getProcessorIdentifier().getProcessorID());</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;CPU核心: &quot; + processor.getLogicalProcessorCount());</span></span><br><span class="line">        <span class="comment">//System.out.println(&quot;CPU温度: &quot; + sensors.getCpuTemperature());</span></span><br><span class="line">        <span class="type">ComputerSystem</span> <span class="variable">cs</span> <span class="operator">=</span> hardware.getComputerSystem();</span><br><span class="line"><span class="comment">//        System.out.println(&quot;主板品牌: &quot; + cs.getManufacturer());</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;主板型号: &quot; + cs.getModel());</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;主板UUID: &quot; + cs.getHardwareUUID());</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;主板序列号: &quot; + cs.getSerialNumber());</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">CPUXingHao</span> <span class="operator">=</span>processor.getProcessorIdentifier().getName();</span><br><span class="line">        String CPUXuLieHao=processor.getProcessorIdentifier().getProcessorID();</span><br><span class="line">        <span class="type">String</span> <span class="variable">CPUHeXin</span> <span class="operator">=</span> String.valueOf(processor.getLogicalProcessorCount());</span><br><span class="line">        <span class="type">String</span> <span class="variable">CPUWenDu</span> <span class="operator">=</span> String.valueOf(sensors.getCpuTemperature());</span><br><span class="line">        String ZhuBanPinPai=cs.getManufacturer();</span><br><span class="line">        String ZhuBanXingHao=cs.getModel();</span><br><span class="line">        String ZhuBanUUID=cs.getHardwareUUID();</span><br><span class="line">        String ZhuBanXuLieHao=cs.getSerialNumber();</span><br><span class="line">        Map&lt;String,Object&gt; cpuInfoMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">        cpuInfoMap.put(<span class="string">&quot;CPUXingHao&quot;</span>,CPUXingHao);</span><br><span class="line">        cpuInfoMap.put(<span class="string">&quot;CPUXuLieHao&quot;</span>,CPUXuLieHao);</span><br><span class="line">        cpuInfoMap.put(<span class="string">&quot;CPUHeXin&quot;</span>,CPUHeXin);</span><br><span class="line">        <span class="comment">//cpuInfoMap.put(&quot;CPUWenDu&quot;,CPUWenDu);</span></span><br><span class="line">        cpuInfoMap.put(<span class="string">&quot;ZhuBanPinPai&quot;</span>,ZhuBanPinPai);</span><br><span class="line">        cpuInfoMap.put(<span class="string">&quot;ZhuBanXingHao&quot;</span>,ZhuBanXingHao);</span><br><span class="line">        cpuInfoMap.put(<span class="string">&quot;ZhuBanUUID&quot;</span>,ZhuBanUUID);</span><br><span class="line">        cpuInfoMap.put(<span class="string">&quot;ZhuBanXuLieHao&quot;</span>,ZhuBanXuLieHao);</span><br><span class="line">        <span class="keyword">return</span> cpuInfoMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取内存信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> si oshi.SystemInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getMemInfo</span><span class="params">(SystemInfo si)</span> &#123;</span><br><span class="line">        <span class="type">HardwareAbstractionLayer</span> <span class="variable">hardware</span> <span class="operator">=</span> si.getHardware();</span><br><span class="line">        <span class="type">GlobalMemory</span> <span class="variable">m</span> <span class="operator">=</span> hardware.getMemory();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;total总内存:&quot;</span> + convertFileSize(m.getTotal()));</span><br><span class="line">        System.out.println(<span class="string">&quot;used已用内存:&quot;</span> + convertFileSize(m.getTotal() - m.getAvailable()));</span><br><span class="line">        System.out.println(<span class="string">&quot;free剩余内存:&quot;</span> + convertFileSize(m.getAvailable()));</span><br><span class="line">        System.out.println(<span class="string">&quot;usageRate内存使用率:&quot;</span> + <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#.##%&quot;</span>).format((m.getTotal() - m.getAvailable()) * <span class="number">1.0</span> / m.getTotal()));</span><br><span class="line"></span><br><span class="line">        List&lt;PhysicalMemory&gt; memoryList = m.getPhysicalMemory();</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (PhysicalMemory pm : memoryList) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            System.out.println(<span class="string">&quot;第[&quot;</span> + i + <span class="string">&quot;]根内存&quot;</span>);</span><br><span class="line">            System.out.print(<span class="string">&quot;内存型号:&quot;</span> + pm.getManufacturer() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.print(<span class="string">&quot;内存规格:&quot;</span> + pm.getMemoryType() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.print(<span class="string">&quot;内存主频:&quot;</span> + convertFileSize(pm.getClockSpeed()) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;内存大小:&quot;</span> + convertFileSize(pm.getCapacity()));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字节转换</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size 字节大小</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 转换后值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">convertFileSize</span><span class="params">(<span class="type">long</span> size)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">kb</span> <span class="operator">=</span> <span class="number">1024</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">mb</span> <span class="operator">=</span> kb * <span class="number">1024</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">gb</span> <span class="operator">=</span> mb * <span class="number">1024</span>;</span><br><span class="line">        <span class="keyword">if</span> (size &gt;= gb) &#123;</span><br><span class="line">            <span class="keyword">return</span> String.format(<span class="string">&quot;%.1f GB&quot;</span>, (<span class="type">float</span>) size / gb);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size &gt;= mb) &#123;</span><br><span class="line">            <span class="type">float</span> <span class="variable">f</span> <span class="operator">=</span> (<span class="type">float</span>) size / mb;</span><br><span class="line">            <span class="keyword">return</span> String.format(f &gt; <span class="number">100</span> ? <span class="string">&quot;%.0f MB&quot;</span> : <span class="string">&quot;%.1f MB&quot;</span>, f);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size &gt;= kb) &#123;</span><br><span class="line">            <span class="type">float</span> <span class="variable">f</span> <span class="operator">=</span> (<span class="type">float</span>) size / kb;</span><br><span class="line">            <span class="keyword">return</span> String.format(f &gt; <span class="number">100</span> ? <span class="string">&quot;%.0f KB&quot;</span> : <span class="string">&quot;%.1f KB&quot;</span>, f);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> String.format(<span class="string">&quot;%d B&quot;</span>, size);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得系统基础信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> si oshi.SystemInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title function_">getSysInfo</span><span class="params">(SystemInfo si)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">OperatingSystem</span> <span class="variable">os</span> <span class="operator">=</span> si.getOperatingSystem();</span><br><span class="line">            <span class="type">InetAddress</span> <span class="variable">ip</span> <span class="operator">=</span> Inet4Address.getLocalHost();</span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> System.getProperties();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">hostname</span> <span class="operator">=</span> ip.getHostName();</span><br><span class="line">            <span class="type">String</span> <span class="variable">osVersion</span> <span class="operator">=</span> os.getManufacturer() + <span class="string">&quot; &quot;</span> + os.getFamily() + os.getVersionInfo();</span><br><span class="line">            <span class="type">String</span> <span class="variable">netInfo</span> <span class="operator">=</span> os.getNetworkParams().toString() ;</span><br><span class="line">            <span class="type">String</span> <span class="variable">gateWay</span> <span class="operator">=</span>os.getNetworkParams().getIpv4DefaultGateway();</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileOS</span> <span class="operator">=</span>  os.getFileSystem().toString();</span><br><span class="line">            <span class="type">String</span> <span class="variable">bitNess</span> <span class="operator">=</span> String.valueOf(os.getBitness());</span><br><span class="line">            <span class="type">String</span> <span class="variable">processCount</span> <span class="operator">=</span> String.valueOf(os.getProcessCount());</span><br><span class="line">            <span class="type">String</span> <span class="variable">threadCount</span> <span class="operator">=</span>  String.valueOf(os.getThreadCount());</span><br><span class="line">            <span class="type">String</span> <span class="variable">propertyArch</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;os.arch&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">propertyVersion</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;os.version&quot;</span>);</span><br><span class="line">            <span class="comment">//System.out.println(&quot;主机名: &quot; + ip.getHostName());</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;系统版本：&quot; + os.getManufacturer() + &quot; &quot; + os.getFamily() + os.getVersionInfo());</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;网络信息：&quot; + os.getNetworkParams().toString() + &quot; 网关：&quot; + os.getNetworkParams().getIpv4DefaultGateway());</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;文件系统: &quot; + os.getFileSystem().toString());</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;系统支持位数: &quot; + os.getBitness());</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;进程运行数量: &quot; + os.getProcessCount());</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;线程运行数量: &quot; + os.getThreadCount());</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;系统位数: &quot; + properties.getProperty(&quot;os.arch&quot;));</span></span><br><span class="line">            <span class="comment">//System.out.println(&quot;系统版本: &quot; + properties.getProperty(&quot;os.version&quot;));</span></span><br><span class="line">            Map&lt;String,Object&gt; sysInfoMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Object&gt;();</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;hostname&quot;</span>,hostname);</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;osVersion&quot;</span>,osVersion);</span><br><span class="line">            <span class="comment">//sysInfoMap.put(&quot;netInfo&quot;,netInfo);</span></span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;gateWay&quot;</span>,gateWay);</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;fileOS&quot;</span>,fileOS);</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;bitNess&quot;</span>,bitNess);</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;processCount&quot;</span>,processCount);</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;threadCount&quot;</span>,threadCount);</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;propertyArch&quot;</span>,propertyArch);</span><br><span class="line">            sysInfoMap.put(<span class="string">&quot;propertyVersion&quot;</span>,propertyVersion);</span><br><span class="line">            <span class="keyword">return</span> sysInfoMap;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lineNumber1columnNumber1前言中不允许有内容</title>
      <link href="/2023/03/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-03-30-lineNumber__1;_columnNumber__1;_%E5%89%8D%E8%A8%80%E4%B8%AD%E4%B8%8D%E5%85%81%E8%AE%B8%E6%9C%89%E5%86%85%E5%AE%B9/"/>
      <url>/2023/03/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/java/2023-03-30-lineNumber__1;_columnNumber__1;_%E5%89%8D%E8%A8%80%E4%B8%AD%E4%B8%8D%E5%85%81%E8%AE%B8%E6%9C%89%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<p>bug日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Line 1 <span class="keyword">in</span> XML document from class path resource [application.yml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; 前言中不允许有内容。</span><br></pre></td></tr></table></figure><p>有可能是yml配置文件编码的问题utf-8 选择没有Bom的</p><p>排错发现是redis的配置。。。。</p><p>正确配置：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">redis:</span><br><span class="line">  database: <span class="number">0</span></span><br><span class="line">  host: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">  port: <span class="number">6379</span></span><br><span class="line">  password: <span class="number">123456</span></span><br><span class="line">  timeout: <span class="number">1000</span></span><br><span class="line">  jedis:</span><br><span class="line">    pool:</span><br><span class="line">      max-active: <span class="number">8</span></span><br><span class="line">      max-wait: -<span class="number">1</span></span><br><span class="line">      max-idle: <span class="number">8</span></span><br><span class="line">      min-idle: <span class="number">0</span></span><br></pre></td></tr></table></figure><p>是jedis:不是lettuce:<br>用啥东西就写啥，不要瞎写。。。。之前用lettcue没有引入包。。。<br><strong>两者区别：</strong></p><p>Jedis在实现上是直接连接的redis server，如果在多线程环境下是非线程安全的，这个时候只有使用连接池，为每个Jedis实例增加物理连接</p><p>Lettuce的连接是基于Netty的，连接实例（StatefulRedisConnection）可以在多个线程间并发访问，应为StatefulRedisConnection是线程安全的，所以一个连接实例（StatefulRedisConnection）就可以满足多线程环境下的并发访问，当然这个也是可伸缩的设计，一个连接实例不够的情况也可以按需增加连接实例。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 故障 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>不加思考的人生，终将会变成发光的二极管</title>
      <link href="/2023/03/05/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-03-05-%E4%B8%8D%E5%8A%A0%E6%80%9D%E8%80%83%E7%9A%84%E4%BA%BA%E7%94%9F%EF%BC%8C%E7%BB%88%E5%B0%86%E4%BC%9A%E5%8F%98%E6%88%90%E5%8F%91%E5%85%89%E7%9A%84%E4%BA%8C%E6%9E%81%E7%AE%A1/"/>
      <url>/2023/03/05/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-03-05-%E4%B8%8D%E5%8A%A0%E6%80%9D%E8%80%83%E7%9A%84%E4%BA%BA%E7%94%9F%EF%BC%8C%E7%BB%88%E5%B0%86%E4%BC%9A%E5%8F%98%E6%88%90%E5%8F%91%E5%85%89%E7%9A%84%E4%BA%8C%E6%9E%81%E7%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>最近发现自己越来越暴躁了。对于网上某些逢迎自己口味的言论，不加思考就点赞。应该批判一下自己的。</p><p>二极管，这个是最近网络上流行的一个词。<strong>指的是看待问题，只能看到两种极端，认为世界非黑即白，不会辩证的看待问题的人群</strong>。以我的感觉就是上层阶级对下层阶级思想上的掌控。而上层阶级的派别林立，派别的多样，思想的多样可是最终无非会走向左右两个极端。这里我就不想去再去深入思考了，想多了，只会让自己对生活更加的失望，犹如牵线木偶般，被无形的线操控着自己的一生。</p><p>不加思考的人生，终将会变成发光的二极管。见过了网上的形形色色，发现人们的思想越来越有偏颇，有时候会对一条科普视频疯狂点赞，而不会追求其是否是真正的科普。</p><p>在《娱乐至死》中，波兹曼在最后的时候将奥威尔和赫胥黎放在一起，比较了两种文化精神枯萎的模式，一种是文化监狱式的，将人们的思想牢牢控制；而另一种是文化戏谑式的，用娱乐垃圾让人失去思考的能力。</p><blockquote><p>有两种方法可以让文化精神枯萎，一种是奥威尔式的——文化成为另一个监狱，另一种是赫胥黎式的——文化成为一场滑稽戏。<br>我们无需别人提醒就能认识到，我们的世界已经深受各种监狱文化的残害，奥威尔在他的寓言中已经对这些监狱文化的结构进行了准确的描写。如果你读一读他的《一九八四年》和《动物农庄》，以及亚瑟·科斯勒的《正午的黑暗》，你就会非常清楚地看清目前在数十个国家几百万人民身上发挥作用的控制思想的机器是个什么样子。当然，奥威尔不是第一个警告我们专制会带来精神毁灭的人。但他的作品中最可贵的一点就是，他一再强调，不管我们的看守人接受的是左翼思想还是右翼思想，对于我们来说并没有差别，监狱的大门一样是坚不可摧的，管制一样是森严的，偶像崇拜一样是深入人心的。<br>而赫胥黎告诉我们的是，在一个科技发达的时代里，造成精神毁灭的敌人更可能是一个满面笑容的人，而不是那种一眼看上去就让人心生怀疑和仇恨的人。在赫胥黎的预言中，“老大哥”并没有成心监视着我们，而是我们自己心甘情愿地一直注视着他，根本就不需要什么看守人、大门或“真理部”。如果一个民族分心于繁杂琐事，如果文化生活被重新定义为娱乐的周而复始，如果严肃的公众对话变成了幼稚的婴儿语言，总而言之，如果人民蜕化为被动的受众，而一切公共事务形同杂耍，那么这个民族就会发现自己危在旦夕，文化灭亡的命运就在劫难逃。在美国，奥威尔的预言似乎和我们无关，而赫胥黎的预言却正在实现。</p></blockquote><p>以上的现象，在此我不做赘述。只能不断地感慨前人伟大思想。在那信息贫瘠的时代，就能敏锐的嗅到百年后发生的事情，这种思想的是深刻，一针见血的。当我在网络上说“我喜欢吃肉”，接踵而至就会有人回复你“那就是说你不喜欢吃菜了？”。在正常人看来，这多种有些杠的行为，但是在某些人的眼中看来这就是正常的。他们的思想就是世界的非黑即白（这种思潮在中小高乃至大学十分常见）。坐在象牙塔中的孩子们（也包括我），很难窥其世界的真正面貌，他们从书本中汲取营养，从网络感叹世界万千，当真正脱离学校家庭的那一刻，像极了剪断脐带的婴儿，在磕磕绊绊中长大。</p><p>我有的时候很愤恨这个世界，对普通人真的太不公平了，一个生错了家庭，就注定了他一生的追求就是别人轻而易举获得的。我有的时候有很平常心，但是这种平常心是来自一种对生活的无奈与妥协。是的，普通人的一生都在妥协。学校对老师和学习，社会对领导和家庭，老年对死亡的妥协。你可以说他可以去改变啊，可是这种沉默成本太大了，改变的那一刻，如果失败，那么对于普通人就是死亡。一切在现实面前显得太多的苍白无力。</p><p>最近发现，又挺多的文化影视作品开始出现一种潮流，那就是反差，多了一些人物心理上的描写。这种反差是来自内心的最真诚的刻画，让人物更加的丰满。这种外表冷淡内心火热的形象似乎更满足了大众的趣味，我一直在思考这种形象为什么受众，仅仅是人物形象的丰满吗？或者是这种强烈的冲击感？我想不明白，但最终归会结于人心中的欲，对那种近乎变态的追求，令人咋舌。</p><p>写到这里，感觉自己思想太过于空洞了。拿着从四处拼凑的概念，凝合成一个不伦不类的思想，有些恶心了。就此作罢，为自己不耻。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>逆天？改命？为什么在这个时代会如此的流行</title>
      <link href="/2023/02/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-26-%E9%80%86%E5%A4%A9%EF%BC%9F%E6%94%B9%E5%91%BD%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%97%B6%E4%BB%A3%E4%BC%9A%E5%A6%82%E6%AD%A4%E7%9A%84%E6%B5%81%E8%A1%8C/"/>
      <url>/2023/02/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-26-%E9%80%86%E5%A4%A9%EF%BC%9F%E6%94%B9%E5%91%BD%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%97%B6%E4%BB%A3%E4%BC%9A%E5%A6%82%E6%AD%A4%E7%9A%84%E6%B5%81%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<p>今天在读文章的时候偶然间看到这样一段话，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">六岁之前：学前教育</span><br><span class="line">六岁：一年级</span><br><span class="line">十二：小升初</span><br><span class="line">十五：中考</span><br><span class="line">十八：高考</span><br><span class="line">二十二：毕业，开始工作</span><br><span class="line">二十五：奋斗三年，月薪五千，借钱首付，还贷三十年</span><br><span class="line">二十七：借钱凑彩礼，终于结良缘</span><br><span class="line">二十八：得子，攒钱准备学前早教</span><br><span class="line">三十四：孩子入学，九年义务，一年学杂五千补习一万，雪上加霜</span><br><span class="line">四十三：中考升高中，学杂费升级，一年一万，补习一年亦一万</span><br><span class="line">四十六：孩子成年，勤工俭学，不问家里要一分，己身力衰心有余</span><br><span class="line">五十：孩子毕业，开始工作，己身年衰，高龄下岗，零工碎挣，聊以厘毫</span><br><span class="line">五十三：几年攒出一点，与子付了首付，老年小区不光彩，迎娶儿媳要新房</span><br><span class="line">五十五：终于熬完三十年，又贷一笔凑彩礼</span><br><span class="line">五十六：亲孙落地蹒跚步，半个甲子一轮回</span><br><span class="line">六十五：一生劳苦终需报，碎银难补碎玉身</span><br><span class="line">七十五：独步尘寰终离世，回首往事幸无疾。芸芸碌碌何所道，一抔清白同山阿。</span><br><span class="line">《孩子，我宁愿欠你一个快乐的少年，也不愿看到你卑微的成年》</span><br><span class="line"></span><br><span class="line">后来有人突然奇想，就接了下去：</span><br><span class="line"></span><br><span class="line">《少年，我宁愿欠你一个后浪的成年，也不愿看到你悲惨的中年》</span><br><span class="line"></span><br><span class="line">《后生，我宁愿欠你一个体面的中年，也不愿看到你凄惨的老年》</span><br><span class="line"></span><br><span class="line">《先生，我宁愿欠你一个安稳的老年，也不愿看到你无助的晚年》</span><br><span class="line"></span><br><span class="line">《逝者，我宁愿欠你一个盛大的葬礼，也不愿看到你下一代输在起跑线上》</span><br><span class="line"></span><br><span class="line">所有的合起来，不就是：</span><br><span class="line"></span><br><span class="line">《孩子，我宁愿你从未来过，也不愿你有个悲惨的一生。》</span><br><span class="line">我做了很多角色，唯独没有做过自己。</span><br></pre></td></tr></table></figure><p>多有感慨，特此执笔。</p><p>有时候我会再想，这个社会，如今的世界到底怎么了？22年我正好毕业，也就是那一年，俄罗斯的炮火飞向了乌克兰，那时候正好是奥运会期间。当全世界都认为奥运会期间各国都会遵守君子协定不会开动战争，俄罗斯的做法，却超乎了所有人的意料。同时，也给我好好的上了一课。所谓的规则都是强者制定的，就像孙悟空给唐僧画的圈，没有实力的人跳出去受伤的是自己。其实我很早就知道这个，可是，也许是成长的原因，这次带我的冲击感，远超乎从前的所有。</p><p>自从我高中开始，也就是16年左右，逆天改命就似乎成为那时候年轻人的主题。伴随着各种电视剧小说的衍生，资本家开始赚的本满钵满。他们用不断的空想和光明的未来，给当时的年轻人画着大饼，仿佛在说，只要你努力，跟着我，就能实现财富的自由。到了现在，那些人，包括我似乎都醒悟了过来。用着近乎五六年的坎坷，打醒了自己，打醒了困在屋檐下面的雀。可是，疫情的艰辛，又他们和我上了一课，原来，所有的事情并不是随心所欲，我们只能在大时代的潮流下和光同尘。</p><p>这次的疫情像一个照妖镜，照进了世间坎坷不平。疫情期间最火热的话题就是回忆从前。人们为什么喜欢回忆从前呢？大抵是过往留下了诸多的美好，以至于时间的滤镜把那些艰辛统统擦除。人们再也不坚信，努力就能获得所谓的回报。有的人提出过这样的一个问题：现在的人为什么会越来越冷漠了？我笑笑，不愿做回答，热血的人少有，热血不幸的人却很多。看着一桩桩救助老人被坑害的事情，看着被某些女权坑害的人，看着为追星散尽家财的人。他们开始害怕，开始抗拒这种来自内心的道德，最终化为一句“放下助人情节，尊重他人命运”，以此来告慰曾经的自己。</p><p>有的时候自己都活不好，还去担心他人。看看现在，当我看完《封神·杨戬》电影之后，不得不感叹，人们都觉得自己是主角，可是活来活去，连个路人甲都不是。现在的逆天改命就像多年前的毒鸡汤，看着国家一步步的富强，觉得自己也可以伴着一国的富强奔向小康。最终一记重锤，打在了心口，只有真正的痛才能彻底敲醒愚昧的灵魂。</p><p>这几年又出现了一种主旋律，相信很多人都能感受到，这种埋藏在市井之间的文化沙漠越来越严重。这种权力的集中越来越明显，我总感觉我活着的这些年会有大事发生。他们想做到思想的统一，可是那种高度的统一再也难以看见了。多数人思想的空白怎么可能去真正做到这种思想的填充呢？世间流离千万家，帝王高台轩宇华。</p><p>总是有大把大把的人去歌颂着苦难，比如说怀孕的女子雨夜送外卖，年过八旬的爷爷捡废品供两个孙女上大学，这些人无时无刻不在告诉你这个世界上比你惨的人多的是，你要知足，你要奋斗，然后你感动的擦了擦眼泪，把心头对社会和生活的不满往下压了压，然后继续像老四的驴一样日复一日，年复一年，觉得人只要吃了苦才能变得高尚。这种想法本身就是有错误的，而且是病态的。不要试图从别人的苦难中品尝自己的感动，他们身处苦难不是未来让我们感动，更不是让我们共情，而是因为他们无法避开。经历苦难的人不会觉得这励志，他们只是想活下去而已，该追求的是认清生活的本质但依然热爱生活，而不是认为吃了苦就能成功。歌颂苦难者本身就是居高临下的，傲慢的。</p><p>当我看到谷爱凌夺冠后人们对其努力的每天睡觉只十小时的称颂，似乎明白了，有些人的思想就是贫瘠且病态的。当我看到白岩松对谷爱凌父母这种做法对其人的称赞我才明白，原来这些人是如此的虚伪和傲慢。他们从来不会真正的从一个底层人的眼光去看待世界，那些真正这样做的人，都被无声无息的埋藏进了岁月的长河之中，未曾掀起半点波澜。</p><p>每个时代，富人有富人的快乐，穷人有穷人的心酸。快乐从不相同，心酸从来不同。穷人只想简单的活着，我是穷人，大多数人都是。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bat启动mysql和vm</title>
      <link href="/2023/02/19/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-02-19-bat%E5%90%AF%E5%8A%A8mysql%E5%92%8Cvm/"/>
      <url>/2023/02/19/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%BD%91%E7%BB%9C/2023-02-19-bat%E5%90%AF%E5%8A%A8mysql%E5%92%8Cvm/</url>
      
        <content type="html"><![CDATA[<p>受限于电脑比较垃圾，23年了，还用着五年前的电脑。再加之软件更新迭代快，对性能的要求也渐渐地有了要求。自己也开始对系统开始做一些优化，禁用一些不需要的服务。必要时再开启。昨晚上半夜学了点bat的操作方式，写了俩脚本耍耍。</p><p>因为涉及到服务启动，所以都需要管理员权限运行。</p><p><code>mysql</code>开关脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> /f <span class="string">&quot;skip=3 tokens=4&quot;</span> %%i <span class="keyword">in</span> (<span class="string">&#x27;sc query mysql&#x27;</span>) <span class="keyword">do</span> <span class="built_in">set</span> <span class="string">&quot;zt=%%i&quot;</span> &amp;goto :next  </span><br><span class="line">:next  </span><br><span class="line"><span class="keyword">if</span> /i <span class="string">&quot;%zt%&quot;</span>==<span class="string">&quot;RUNNING&quot;</span> (  </span><br><span class="line"><span class="built_in">echo</span> ======================================== </span><br><span class="line"><span class="built_in">echo</span>       该服务mysql现在处于 开启状态  </span><br><span class="line"><span class="built_in">echo</span>         %<span class="built_in">date</span>:~0,4%年%<span class="built_in">date</span>:~5,2%月%<span class="built_in">date</span>:~8,2%日%time:~0,2%时%time:~3,2%分</span><br><span class="line"><span class="built_in">echo</span> ======================================== </span><br><span class="line">) <span class="keyword">else</span> (  </span><br><span class="line"><span class="built_in">echo</span> ======================================== </span><br><span class="line"><span class="built_in">echo</span>       该服务mysql现在处于 停止状态  </span><br><span class="line"><span class="built_in">echo</span>         %<span class="built_in">date</span>:~0,4%年%<span class="built_in">date</span>:~5,2%月%<span class="built_in">date</span>:~8,2%日%time:~0,2%时%time:~3,2%分</span><br><span class="line"><span class="built_in">echo</span> ======================================== </span><br><span class="line">)  </span><br><span class="line"></span><br><span class="line">choice /c:YN  /m <span class="string">&quot;开启[Y]关闭[N] MySQL 服务&quot;</span> </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 2 goto two </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 1 goto one </span><br><span class="line"> </span><br><span class="line"> :one a</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 正在开启 MySQL 服务... </span><br><span class="line"> </span><br><span class="line"> net start mysql</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> MySQL 服务开启成功</span><br><span class="line"> </span><br><span class="line"> choice /c:YN /m <span class="string">&quot;是[Y]否[N]要开启SQLyong&quot;</span> </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 2 <span class="built_in">exit</span> </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 1 start <span class="string">&quot;&quot;</span> <span class="string">&quot;D:\Program Files\Webyog SQLyog Ultimate\SQLyog.exe&quot;</span></span><br><span class="line"> </span><br><span class="line"> &gt;nul</span><br><span class="line"> </span><br><span class="line"> :two </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 正在关闭 MySQL 服务... </span><br><span class="line"> </span><br><span class="line"> net stop mysql </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> MySQL 服务关闭成功 </span><br><span class="line"> </span><br><span class="line"> taskkill /f /im <span class="string">&quot;SQLyog.exe&quot;</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">echo</span> 请按任意键退出... </span><br><span class="line"> </span><br><span class="line"> pause&gt;nul </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">exit</span> </span><br></pre></td></tr></table></figure><p><code>VM</code>开关脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span> /f <span class="string">&quot;skip=3 tokens=4&quot;</span> %%i <span class="keyword">in</span> (<span class="string">&#x27;sc query &quot;VMAuthdService&quot;&#x27;</span>) <span class="keyword">do</span> <span class="built_in">set</span> <span class="string">&quot;zt=%%i&quot;</span> &amp;goto :next </span><br><span class="line"> </span><br><span class="line"> :next </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> /i <span class="string">&quot;%zt%&quot;</span>==<span class="string">&quot;RUNNING&quot;</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware Authorization Service正在运行 </span><br><span class="line"> </span><br><span class="line"> ) <span class="keyword">else</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware Authorization Service已停止 </span><br><span class="line"> </span><br><span class="line"> ) </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span> /f <span class="string">&quot;skip=3 tokens=4&quot;</span> %%i <span class="keyword">in</span> (<span class="string">&#x27;sc query &quot;VMnetDHCP&quot;&#x27;</span>) <span class="keyword">do</span> <span class="built_in">set</span> <span class="string">&quot;zt=%%i&quot;</span> &amp;goto :next </span><br><span class="line"> </span><br><span class="line"> :next </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> /i <span class="string">&quot;%zt%&quot;</span>==<span class="string">&quot;RUNNING&quot;</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware DHCP Service正在运行 </span><br><span class="line"> </span><br><span class="line"> ) <span class="keyword">else</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware DHCP Service已停止 </span><br><span class="line"> </span><br><span class="line"> ) </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span> /f <span class="string">&quot;skip=3 tokens=4&quot;</span> %%i <span class="keyword">in</span> (<span class="string">&#x27;sc query &quot;VMware NAT Service&quot;&#x27;</span>) <span class="keyword">do</span> <span class="built_in">set</span> <span class="string">&quot;zt=%%i&quot;</span> &amp;goto :next </span><br><span class="line"> </span><br><span class="line"> :next </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> /i <span class="string">&quot;%zt%&quot;</span>==<span class="string">&quot;RUNNING&quot;</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware NAT Service正在运行 </span><br><span class="line"> </span><br><span class="line"> ) <span class="keyword">else</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware NAT Service已停止 </span><br><span class="line"> </span><br><span class="line"> ) </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span> /f <span class="string">&quot;skip=3 tokens=4&quot;</span> %%i <span class="keyword">in</span> (<span class="string">&#x27;sc query &quot;VMUSBArbService&quot;&#x27;</span>) <span class="keyword">do</span> <span class="built_in">set</span> <span class="string">&quot;zt=%%i&quot;</span> &amp;goto :next </span><br><span class="line"> </span><br><span class="line"> :next </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> /i <span class="string">&quot;%zt%&quot;</span>==<span class="string">&quot;RUNNING&quot;</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware USB Arbitration Service正在运行 </span><br><span class="line"> </span><br><span class="line"> ) <span class="keyword">else</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware USB Arbitration Service已停止 </span><br><span class="line"> </span><br><span class="line"> ) </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span> /f <span class="string">&quot;skip=3 tokens=4&quot;</span> %%i <span class="keyword">in</span> (<span class="string">&#x27;sc query &quot;VMwareHostd&quot;&#x27;</span>) <span class="keyword">do</span> <span class="built_in">set</span> <span class="string">&quot;zt=%%i&quot;</span> &amp;goto :next </span><br><span class="line"> </span><br><span class="line"> :next </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> /i <span class="string">&quot;%zt%&quot;</span>==<span class="string">&quot;RUNNING&quot;</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware Workstation Server正在运行 </span><br><span class="line"> </span><br><span class="line"> ) <span class="keyword">else</span> ( </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 服务VMware Workstation Server已停止 </span><br><span class="line"> </span><br><span class="line"> ) </span><br><span class="line"> </span><br><span class="line"> choice /c:12 /m <span class="string">&quot;启动/停止VM虚拟机服务及网络连接[1启动,2停止]&quot;</span> </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 2 goto two </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 1 goto one </span><br><span class="line"> </span><br><span class="line"> :one </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 正在启用VM各项服务，请耐心等待......</span><br><span class="line"> </span><br><span class="line"> net start <span class="string">&quot;VMnetDHCP&quot;</span> </span><br><span class="line"> </span><br><span class="line"> net start <span class="string">&quot;VMware NAT Service&quot;</span> </span><br><span class="line"> </span><br><span class="line"> net start <span class="string">&quot;VMUSBArbService&quot;</span> </span><br><span class="line"> </span><br><span class="line"> net start <span class="string">&quot;VMAuthdService&quot;</span> </span><br><span class="line"> </span><br><span class="line"> ::net start <span class="string">&quot;VMwareHostd&quot;</span> </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 正在启用网络连接... </span><br><span class="line"> </span><br><span class="line"> netsh interface <span class="built_in">set</span> interface <span class="string">&quot;VMware Network Adapter VMnet1&quot;</span> <span class="built_in">enable</span> </span><br><span class="line"> </span><br><span class="line"> netsh interface <span class="built_in">set</span> interface <span class="string">&quot;VMware Network Adapter VMnet8&quot;</span> <span class="built_in">enable</span> </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 网络连接VMware Network Adapter VMnet1、VMware Network Adapter VMnet8启动成功 </span><br><span class="line"> </span><br><span class="line"> choice /c:12 /m <span class="string">&quot; 是否启动VMware Workstations...[1是,2否]&quot;</span> </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 2 <span class="built_in">exit</span> </span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> errorlevel 1 start <span class="string">&quot;&quot;</span> <span class="string">&quot;D:\Program Files (x86)\VMware\VMware Workstation\vmware.exe&quot;</span></span><br><span class="line"> </span><br><span class="line"> &gt;nul</span><br><span class="line"> </span><br><span class="line"> :two </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 正在禁用VM各项服务,请耐心等待......</span><br><span class="line"> </span><br><span class="line"> ::net stop <span class="string">&quot;VMwareHostd&quot;</span> </span><br><span class="line"> </span><br><span class="line"> net stop <span class="string">&quot;VMnetDHCP&quot;</span> </span><br><span class="line"> </span><br><span class="line"> net stop <span class="string">&quot;VMware NAT Service&quot;</span> </span><br><span class="line"> </span><br><span class="line"> net stop <span class="string">&quot;VMUSBArbService&quot;</span> </span><br><span class="line"> </span><br><span class="line"> net stop <span class="string">&quot;VMAuthdService&quot;</span> </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 正在禁用网络连接... </span><br><span class="line"> </span><br><span class="line"> netsh interface <span class="built_in">set</span> interface <span class="string">&quot;VMware Network Adapter VMnet1&quot;</span> <span class="built_in">disable</span> </span><br><span class="line"> </span><br><span class="line"> netsh interface <span class="built_in">set</span> interface <span class="string">&quot;VMware Network Adapter VMnet8&quot;</span> <span class="built_in">disable</span> </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 网络连接VMware Network Adapter VMnet1、VMware Network Adapter VMnet8禁用成功 </span><br><span class="line"></span><br><span class="line"> taskkill /f /im <span class="string">&quot;vmware.exe&quot;</span></span><br><span class="line"> </span><br><span class="line"> <span class="built_in">echo</span> 按任意键退出... </span><br><span class="line"> </span><br><span class="line"> pause&gt;nul </span><br><span class="line"> </span><br><span class="line"> <span class="built_in">exit</span> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> bash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一切不过是从头再来</title>
      <link href="/2023/02/18/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-18-%E4%B8%80%E5%88%87%E4%B8%8D%E8%BF%87%E6%98%AF%E4%BB%8E%E5%A4%B4%E5%86%8D%E6%9D%A5/"/>
      <url>/2023/02/18/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-18-%E4%B8%80%E5%88%87%E4%B8%8D%E8%BF%87%E6%98%AF%E4%BB%8E%E5%A4%B4%E5%86%8D%E6%9D%A5/</url>
      
        <content type="html"><![CDATA[<p>好吧，一切都从头开始了。</p><p>其实不想这样的，只不过手贱，想装了双系统，但是自己知识水平有限。Ubuntu和windows一直抢引导，导致开机一直卡死。针对引导这块，我也没深入学习过，还有各种逻辑分区啥啥啥的，我也是一脸的蒙。到最最后的结果是系统引导全部丢失了。开机都开不了了。</p><p>结果就是，重装了系统（其实我的内心早就有这种想法，前系统bug太多）但是环境我一直不想动，动一下，又要修好些日子。但是系统在此时已经彻底崩坏了。于是，趁着昨天周五，我把系统重装了一下。</p><p>正所谓破而后立，我把所有的东西都重新汇总整理了一遍，发现冗余的文件太多了，删了又删。我自己也是乐得自在。弄了一天，系统算是初步弄好了，环境也是配好了。终于又调教成我喜欢的样子。我不知道我是从什么时刻，开始对感情，失去无感的。或许就是在这系统一次次重装，手机一次次刷机的过程中，我习惯了失去，习惯了那些我曾拥有过的烟消云散。我看淡了好多，甚至我有时候把我自己都失去了。</p><p>我明白干电子计算机这行和信息打交道，对数据特别看重。干程序员这行，对逻辑特别看重。刚才舍友找我，说我的编辑器字体特别丑，这里不好看，那里不行的。我很费解，又不是他用，指指点点我当作笑话挥挥手作罢。也有学弟问我学哪门语言比较好是c++还是java？你问我，我也不知道，自己根据实际情况和内心选择就行了，有徘徊的功夫，也许早就学会了。</p><p>昨天偶然间看到一篇文章，里面有这么一段话</p><p><strong>编程语言是程序员谈论得最多的话题，他们喜欢讨论哪个编程语言更有优势，关注编程语言的排行，正因为此，有一部分人会以不断学习新的编程语言为乐，以此作为区别于普通程序员的凭证。相反，另一部分人由于经验不足，区分不了具体哪个语言才是最适合自己的，从而迟迟不肯行动，陷入无限的纠结中。有时不同编程语言的阵营间还会产生口角，这种现象被视为对各自信仰的捍卫，进而还会引起大多数人的围观。</strong></p><p>　　<strong>大多数人都把注意力放在编程语言这一层面上，最大的原因可能是因为编程语言是通往程序世界的大门，它也是最实用的工具，学会了一门编程语言，就可以用一种新的方式和计算机进行交互了。</strong></p><p>　　<strong>但这和现实世界不同，现实世界中，学好一门外语，相当于打开了一个新的世界，例如学好了英语，你便可以自由穿梭在以英语为母语的国家中，了解他们的文化和历史，掌握第一手外文知识，从而能够帮助你更好的决策，可以说多掌握一门外语能让你的认知获得线性增长。相反，在计算机世界，你多学一门语言，它不会给你带来1+1&#x3D;2的效果，因为本质上，我们的目的不是学更多编程语言，而是利用计算机，帮助我们完成具体的任务，要知道同样的一个任务，甚至可以用好几种不同的语言来实现。</strong></p><p>　　<strong>曾经看过一个问题，提问人可能是新人，他问：我想学编程，但不知道先学Python还是Javascript。回答的人就告诉他：你用来纠结的这些时间，说不定早就可以学会其中一门了。</strong></p><p>　　<strong>是的，优秀的程序员不会把大量的时间放在编程语言上，因为他们会把注意力放在更重要的事情上。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql之压缩包方式安装</title>
      <link href="/2023/02/18/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-02-18-mysql%E4%B9%8B%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/"/>
      <url>/2023/02/18/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/mysql/2023-02-18-mysql%E4%B9%8B%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>今天重装了系统，搞了半天才搞好，后来想起来&#96;&#96;mysql<code>这么关键的东西竟然没安装，实在是蠢。网上找了半天没有</code>msi<code>的安装器，只能</code>google&#96;学习用压缩包方式安装了。。。特此学习记录</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>下载地址（选择该地址可以下载历史版本）<br><a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="解压到路径并且在解压目录下创建my-ini"><a href="#解压到路径并且在解压目录下创建my-ini" class="headerlink" title="解压到路径并且在解压目录下创建my.ini"></a>解压到路径并且<strong>在解压目录下创建my.ini</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line"><span class="comment"># 设置mysql客户端默认字符集</span></span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line">port=3306</span><br><span class="line">character_set_server=utf8</span><br><span class="line"><span class="comment"># 解压目录</span></span><br><span class="line">basedir=D:\Environment\mysql-5.7.40</span><br><span class="line"><span class="comment"># 解压目录下data目录,这里血药自己创建data</span></span><br><span class="line">datadir=D:\Environment\mysql-5.7.40\data</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line">[WinMySQLAdmin]</span><br><span class="line">D:\Environment\mysql-5.7.40\bin\mysqld.exe</span><br></pre></td></tr></table></figure><h3 id="设置MYSQL的环境变量"><a href="#设置MYSQL的环境变量" class="headerlink" title="设置MYSQL的环境变量"></a>设置<code>MYSQL</code>的环境变量</h3><ul><li>新增系统变量 <code>MYSQL_HOME</code>路径写<code>D:\Environment\mysql-5.7.40</code></li><li>在系统变量Path后面追加<code>;%MYSQL_HOME%\bin</code></li></ul><h3 id="安装MYSQL"><a href="#安装MYSQL" class="headerlink" title="安装MYSQL"></a>安装<code>MYSQL</code></h3><p>在解压目录的\bin下（<code>D:\Environment\mysql-5.7.40\bin</code>），开启命令窗口，这里我用的是<code>cmder</code></p><p><strong>执行命令初始化数据库</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqld -install</span><br><span class="line">mysqld --initialize --console</span><br></pre></td></tr></table></figure><p><code>mysqld --initialize --console</code>命令，可以得到<code>mysql</code>的初始密码，用<code>mysqld --initialize </code>的目的是初始化data目录。</p><p>接着就是在输入<code>net start mysql</code>启动服务(<strong>这里需要管理员权限</strong>)</p><p>开始使用&#96;&#96;mysql<code>，输入命令：</code>mysql -uroot -p&#96;，然后输入刚才的初始密码</p><p>修改密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">exit</span>;</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><ul><li>输入命令：<code>mysql -uroot -p</code>，然后尝试新密码</li></ul>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术笔记 </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_买卖股票的最佳时机</title>
      <link href="/2023/02/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-15-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA/"/>
      <url>/2023/02/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-15-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>给定一个数组 <code>prices</code> ，它的第 <code>i</code> 个元素 <code>prices[i]</code> 表示一支给定股票第 <code>i</code> 天的价格。</p><p>你只能选择 <strong>某一天</strong> 买入这只股票，并选择在 <strong>未来的某一个不同的日子</strong> 卖出该股票。设计一个算法来计算你所能获取的最大利润。</p><p>返回你可以从这笔交易中获取的最大利润。如果你不能获取任何利润，返回 <code>0</code> 。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">输入：[7,1,5,3,6,4]</span><br><span class="line">输出：5</span><br><span class="line">解释：在第 2 天（股票价格 = 1）的时候买入，在第 5 天（股票价格 = 6）的时候卖出，最大利润 = 6-1 = 5 。</span><br><span class="line">     注意利润不能是 7-1 = 6, 因为卖出价格需要大于买入价格；同时，你不能在买入前卖出股票。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：prices = [7,6,4,3,1]</span><br><span class="line">输出：0</span><br><span class="line">解释：在这种情况下, 没有交易完成, 所以最大利润为 0。</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= prices.length &lt;= 105</code></li><li><code>0 &lt;= prices[i] &lt;= 104</code></li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码:"></a>代码:</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        //超时了，tmd，注意 1 &lt;= prices.length &lt;= 105</span></span><br><span class="line"><span class="comment">        int res = 0;</span></span><br><span class="line"><span class="comment">        for(int i=0 ; i&lt;prices.length ;i++)&#123;</span></span><br><span class="line"><span class="comment">            for(int j =i+1;j&lt;prices.length;j++)&#123;</span></span><br><span class="line"><span class="comment">                if(prices[j]-prices[i]&gt;=0)&#123;</span></span><br><span class="line"><span class="comment">                    res=Math.max(res,prices[j]-prices[i]);</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        return res;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//max（当前价格max-最低价格min）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> <span class="number">10001</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;prices.length;i++)&#123;</span><br><span class="line">            min = Math.min(min,prices[i]);</span><br><span class="line">            res = Math.max(res,prices[i]-min);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="思路"><a href="#思路" class="headerlink" title="思路:"></a>思路:</h2><p>原本是准备使用双循环解决这个问题的,结果时间超时了,因为数组长度太长了<code>1 &lt;= prices.length &lt;= 105</code></p><p>思考了一下不能这样解决问题。可以循环求最小值，用当前值减去最小值就是一个新的值，然后再用新值和下一次的新值作比较就能求出来了。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算法入门_减小和重新排列数组后的最大元素</title>
      <link href="/2023/02/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-15-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8_%E5%87%8F%E5%B0%8F%E5%92%8C%E9%87%8D%E6%96%B0%E6%8E%92%E5%88%97%E6%95%B0%E7%BB%84%E5%90%8E%E7%9A%84%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/"/>
      <url>/2023/02/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-15-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8_%E5%87%8F%E5%B0%8F%E5%92%8C%E9%87%8D%E6%96%B0%E6%8E%92%E5%88%97%E6%95%B0%E7%BB%84%E5%90%8E%E7%9A%84%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/</url>
      
        <content type="html"><![CDATA[<p>给你一个正整数数组 <code>arr</code> 。请你对 <code>arr</code> 执行一些操作（也可以不进行任何操作），使得数组满足以下条件：</p><ul><li><code>arr</code> 中 <strong>第一个</strong> 元素必须为 <code>1</code> 。</li><li>任意相邻两个元素的差的绝对值 <strong>小于等于</strong> <code>1</code> ，也就是说，对于任意的 <code>1 &lt;= i &lt; arr.length</code> （<strong>数组下标从 0 开始</strong>），都满足 <code>abs(arr[i] - arr[i - 1]) &lt;= 1</code> 。<code>abs(x)</code> 为 <code>x</code> 的绝对值。</li></ul><p>你可以执行以下 2 种操作任意次：</p><ul><li><strong>减小</strong> <code>arr</code> 中任意元素的值，使其变为一个 <strong>更小的正整数</strong> 。</li><li><strong>重新排列</strong> <code>arr</code> 中的元素，你可以以任意顺序重新排列。</li></ul><p>请你返回执行以上操作后，在满足前文所述的条件下，<code>arr</code> 中可能的 <strong>最大值</strong> 。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入：arr = [2,2,1,2,1]</span><br><span class="line">输出：2</span><br><span class="line">解释：</span><br><span class="line">我们可以重新排列 arr 得到 [1,2,2,2,1] ，该数组满足所有条件。</span><br><span class="line">arr 中最大元素为 2 。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">输入：arr = [100,1,1000]</span><br><span class="line">输出：3</span><br><span class="line">解释：</span><br><span class="line">一个可行的方案如下：</span><br><span class="line">1. 重新排列 arr 得到 [1,100,1000] 。</span><br><span class="line">2. 将第二个元素减小为 2 。</span><br><span class="line">3. 将第三个元素减小为 3 。</span><br><span class="line">现在 arr = [1,2,3] ，满足所有条件。</span><br><span class="line">arr 中最大元素为 3 。</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：arr = [1,2,3,4,5]</span><br><span class="line">输出：5</span><br><span class="line">解释：数组已经满足所有条件，最大元素为 5 。</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= arr.length &lt;= 105</code></li><li><code>1 &lt;= arr[i] &lt;= 109</code></li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumElementAfterDecrementingAndRearranging</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i]&gt;res)&#123;</span><br><span class="line">                res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>贪心,他默认是从1开始的,就假设下标为1。然后进行遍历</p><p>1&gt;0就res+1此时res&#x3D;1</p><p>2&gt;1就res+1此时res&#x3D;2</p><p>2&gt;2?此时不进行+1，res&#x3D;2</p><p>如此循环往复</p><p>最后返回res就可以</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>剑指 Offer 05. 替换空格</title>
      <link href="/2023/02/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-15-%E5%89%91%E6%8C%87_Offer_05._%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC/"/>
      <url>/2023/02/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-15-%E5%89%91%E6%8C%87_Offer_05._%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC/</url>
      
        <content type="html"><![CDATA[<p>请实现一个函数，把字符串 <code>s</code> 中的每个空格替换成”%20”。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;We are happy.&quot;</span></span><br><span class="line">输出：<span class="string">&quot;We%20are%20happy.&quot;</span></span><br></pre></td></tr></table></figure><p><strong>限制：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 &lt;= s 的长度 &lt;= 10000</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">replaceSpace</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s.replace(<span class="string">&quot; &quot;</span>,<span class="string">&quot;%20&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人生难得是欢聚，惟有别离多</title>
      <link href="/2023/02/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-14-%E4%BA%BA%E7%94%9F%E9%9A%BE%E5%BE%97%E6%98%AF%E6%AC%A2%E8%81%9A%EF%BC%8C%E6%83%9F%E6%9C%89%E5%88%AB%E7%A6%BB%E5%A4%9A/"/>
      <url>/2023/02/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-14-%E4%BA%BA%E7%94%9F%E9%9A%BE%E5%BE%97%E6%98%AF%E6%AC%A2%E8%81%9A%EF%BC%8C%E6%83%9F%E6%9C%89%E5%88%AB%E7%A6%BB%E5%A4%9A/</url>
      
        <content type="html"><![CDATA[<p><strong>文&#x2F;稻田</strong></p><p>从李叔同天津故居走出，那个多情的时代歌者和庄重的佛法高僧的叠影在眼前变换得更加纷繁。</p><p>每每抢占于前的是一张狭小陋室的照片，一架首尾及墙的木床，床上侧卧着一位着灰色补丁僧服的长者，右肘枕腮，面色安洋，似入沉梦和思索。</p><p>这是弘一法师在泉州温陵养老院“晚晴室”圆寂的实景，据载大师弥留之际书有“悲欣交集”的遗言，并眼沁泪花。从拒医绝食到往生西天，数日弥留的时间里，他的思绪一定也是变幻纷繁的。六十二载生命，尘佛两界人生，生命大限之际，他都想到了什么？凡夫俗子之我只能战战兢兢地推测。</p><p>是那个叫诚子的日本姑娘吧？那个与他携手从东瀛到上海共同生活的妻子，特别是西湖别离的悲凄情景，诚子的那句“什么是爱”的问话、以及绝望不解的眼神，当他要彻底放下弘法之责的时候，应该会想起那双眼睛吧？</p><p>他们那天西湖别离后，诚子便带着孩子孤寂地返回了东瀛。这之后的艰辛和悲苦，他便完全不知。他不知道诚子不被家人接纳，不得不从东京到了一个叫冲绳的小岛上做医护为生，更不知道诚子一直保留着他的一绺胡须，还有那首《送别》的手写诗稿，直至106岁离世。</p><p>他应该还会想起知音许幻园向他告别时的情景吧。当年风雅激昂的沪上“天涯五子”，在草堂诗文唱答、论道国事，以及一家人受恩居住草堂的生活情景，是他无论如何都不会忘怀的。但几年未见的许幻园竟然悲壮告别去了，“叔同兄，我家破产了，咱们后会有期吧……”。</p><p>1914年上海的那个冬日，他忘不了那场大雪中许幻园渐渐消失的背影。他也忘不了在诚子的弹奏中，泪流满面的自己写下的那首《送别》的歌曲，“天之涯，地之角，知交半零落，问君此去几时来，来时莫徘徊。”但许君却未再归来，两度草堂寻故，草堂已经破败易主，他在草堂附近的一间小屋里再见了已经白发苍苍，勉强度日的沪上名士、诗者许幻园。</p><p>命至弥留，按常情是会闪过慈母的面容的。恍惚中，他可能会以一个懵懂少儿的记忆置身于津门粮店街60号的那个清灰色的祖居，那个占地千余平的大宅，在复杂的廊道和复杂的人际中，出身丫鬟的末位小妾，母亲王氏拘谨温顺的面容在眼前复现。他可能还会想起自己护送母亲灵柩自沪回津祭祀安葬的情形，以及模模糊糊中，父亲去世时，大宅里僧人穿梭，经声起伏的情形。</p><p>抛弃功名，遁入空门，已经修炼为得道高僧、佛界领袖的他，该不会在意识里给尘世间的那些高光时刻留下位置吧？但从“悲欣交集”的遗言看，他在迎接大限往生的几日里，是在回顾与总结的思绪中的。</p><p>三十八岁在西湖虎跑寺背离尘世，出家为僧，三十八年里的无数高光表现使其更深刻地领悟到欲望与人生苦厄的根由，以及涅槃重生的欣慰。</p><p>那段在东京扮演《茶花女》玛格丽特的经历是无法从记忆里抹去的，更何况那是为祖国赈灾而举行的募捐义演，此与佛教的博爱慈悲是精神相通的。白裙长发，蜂腰柔姿，男扮女装的演出引起东瀛演艺界的轰动，开创中国话剧先河的举动也在祖国形成了巨大的影响。</p><p>他是一个做事严谨、全心投入的人，为克服男扮女装的局限，他竟以节食来减小腰身。严谨是为人处世的优点，但过度的要求和投入，则容易收获过多的负面结果。</p><p>那段在上海主编《太平洋报》的日子曾给他带来极大的畅快，艺术的天赋和创造力在其中得到了尽意的发挥，引漫画改良广告、介绍西洋画派，开中国近代广告、绘画先河等，一个艺术家的精神记忆是如基因般牢驻心底的。李叔同将生命极致地献给了《太平洋报》，在报馆的阁楼里不分昼夜地工作，“图书环列，往往沉酣咀嗫，至暮达旦。”但报业是市场的，市场的需求不仅仅听从从业者的情意。幸福的时光瞬间而过，报纸停办了。极大的热情与极冷的结果相撞，留下的是揪心的苦痛。</p><p>艺术家不能在艺术中完成精神救赎，艺术家的前途在哪里呢？</p><p>李叔同的天资太过聪颖，幼能为诗，少成气候，书画音乐、金石篆刻、诗文词赋，以及日文西语、现代戏剧等，均以艺术家的规格齐聚到这位翩翩少年身上，而他不仅以此独立人世，而且以崇高庄严对待自己的领域，执着地追求艺术的精神价值，却不幸身处衰弱王朝、纷乱民国，在如此不堪的世道里独自走的太快、太远，失意太多实为难免。</p><p>一个激情少年屡为世事打击，一个伤感少年在悲情的江湖中伤怀日积，加上自幼缠身的精神衰弱、肺部沉疴，精神和身体的双重逼压，使他终于无法再待在平常人所看到的风光生活里。</p><p>于是“何去何从”的问题摆在了李叔同的面前，前途欲如何，对失意无望者来说，大致有两种选择，一是放弃努力，自我沉沦，二是了却生命，自我解脱。李叔同则选择了第三条道路，即断离尘网，入佛求法，走精神救赎的新途。</p><p>日月星辰，冷风热雨，寒室青灯，以及布衣草履，四处弘法讲学的画面，在李叔同逐渐模糊的意识里，应该会跳出闪现吧？“救赎”，那是他决定涅槃重生的抉择，他在剃度出家后给自己取了“李婴儿”的名字，以表示“重过新生”的决心。这样关系自己新旧人生的决定，终使自己一路跋涉，修成正果，将往无极乐土。所以，他恐怕会再次想起曾给诚子的那封信来吧：</p><p>“诚子，做这样的决定，非我寡情薄意，为了那更远、更艰难的佛道历程，我必须放下一切……在西方无极乐土，我们再相逢吧。”</p><p>这是一种含泪的道别，更是一次悲壮的决绝，所谓“世间安得两全法，不负如来不负卿”，在入佛与守情之间，真要全心全意对待是没有两全之美的。李叔同将一切功名以及挚爱亲情忍痛舍去，选择了博爱众生的佛道，此为人格高境，还是薄情寡义或自我私心，凡者如我无能评价，但我感受到了他的纠结、痛苦，以及不舍，同时更看到了他精神救赎的勇气和志存高远的目光。</p><p>李叔同，那个津门阔少、沪上才俊，海内杰士，一直就不是平凡的人，修道弘法的弘一大师就更是凡人不可相比，就此勇气和博大，当令人仰望。</p><p>“万古是非浑短梦，一句弥陀作大舟”，弘一大师以镌刻在泉州墓塔石柱上的两句对联，向人们无尽地传递着一种高格阔步的救赎精神。</p><p><strong>左岸记：</strong> 李叔同，弘一大师的故事听上去，实在像是个“神话”，而这个“神话”，竟然真的发生过。丰子恺评价他说，“文化艺术的园地，差不多都被他走遍了”。梁实秋、林语堂说他“值得所有人慢慢阅读，慢慢体味，用一生的时间静静领悟”。连从来目下无尘的张爱玲也说，“不要认为我是个高傲的人，我从来不是的——至少，在弘一法师寺院围墙的外面，我是如此的谦卑。”凡人有凡人烦恼，大师有大师悲欣。</p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>那些打鸡血的人生</title>
      <link href="/2023/02/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-14-%E9%82%A3%E4%BA%9B%E6%89%93%E9%B8%A1%E8%A1%80%E7%9A%84%E4%BA%BA%E7%94%9F/"/>
      <url>/2023/02/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-02-14-%E9%82%A3%E4%BA%9B%E6%89%93%E9%B8%A1%E8%A1%80%E7%9A%84%E4%BA%BA%E7%94%9F/</url>
      
        <content type="html"><![CDATA[<p>生活中，是不是有人经常向你推荐，“这部电影太励志了”，“这本书很正能量呀”，“昨天那个讲座我听得热血沸腾，讲的太有道理了”，想来经过这么多年网络的洗礼，你会知道这些都是骗人的。他们是得了一种病，一种叫做鸡血狂躁症的痼疾，会间歇性发作。这种病会让人免疫退化，犹如习武之人内力全失，让人在亢奋和低落之间跌宕起伏，而且传染力极强，会让人头脑发热。</p><p>这样的人，会是怎样的一群人呢？他们总有雄心壮志，又往往半途而废。按照熵的社会学解释，人总是会慢慢衰落、消亡，可是这些人，总是在追赶最后一趟火车。他们表面上拥有足够的热情，深藏的却是内心的狂躁，他们营造着自欺欺人的假象，让自己在岁月的杀猪刀下消亡殆尽。</p><p>人总有难以逃脱的困境，打了鸡血的人，往往深陷泥潭却不自知。他们不去思考自身的困境，不反省是什么把自己逼进了进退维谷的地步，却寄希望于天上掉馅饼，期待武侠小说的“情怀”，到头来却是拔剑四顾心茫然，欲渡黄河冰塞川，将登太行雪满山。</p><p>他们总想在一个慵懒的午后，满心期待着通过一两本书，一两部电影，一两场讲座，从中得到所谓的真传，让自己脱胎换骨，顿悟法门。</p><p>在现在这个快速变化的时代，打鸡血会变换着各种戏法，粉墨登场，趁虚而入。所谓的成功学，励志，正能量，都是鸡血的新装——“只要有信心，人永远不会挫败”“人生的道路很长，但关键的时候，往往只有几步”，这样的话在网络上司空见惯。乍眼一看，觉得这是无可辩驳的箴言，听了让人热血澎湃，仿佛得了人生的福音之书，仔细一想，又是如此的理所当然，用冯唐的话来讲，顿觉心头肿胀，然而，认真思考却是如此的荒谬与戏谑，就让他们扯淡去吧！</p><p>“即便你真的能排除思想上的障碍，将计划付诸行动，在这个程中，也有无数这样那样的困难，挡住你前进的道路——这是一个漫长而艰苦的过程，决不是一时意气就能坚持下来的。”</p><p>看看你的身边，你会发现，那些过早放弃的人，往往是对于未来很乐观的人，现实世界的打击会让他们很快退出循环，那些鸡血打得最多的人，呐喊得最强烈的人，往往是最先逃跑的人，而那些能够一直坚持到底的人，往往是清楚地认识到前路所会遇到的苦难但始终坚信自己的人，就是我们说的“呆子”，“nerd”，知道为什么，世界总是偏爱和青睐那些所谓的“呆子”吗？</p><p>《大学》有云：“知止而后有定，定而后能静，静而后能安，安而后能虑，虑而后能得。”不知止，何以定，不定不静不安，孰能得？知止者，又何用打鸡血？</p><p>那些打了鸡血的人生终究会变得很狗血！想想那些昨天还跟你满腔热血，高谈阔论“励志”，“正能量”的人吧，大梦初醒时，天依旧清亮，风依旧分明，他应该都不记得他昨天说过什么了。</p><p><strong>左岸记：</strong> 古人说开卷有益，那是对好书而言。现在，全国每年出版19万种图书，世界第一，可是，平心而论，好书实在有限，平庸的书居多，不少是东拼西凑的书，剪剪贴贴的书，无病呻吟的书，跟风炒作的书。就我个人来说，我最讨厌这样几类书：</p><p>励志的书。这类书又可分为《成功学》、《心灵鸡汤》两大类，一般路子都是，讲个真真假假的小故事，引出个貌似深刻的大道理。写这种书的人，往往是混得不怎么样的穷酸文人，百无一用，不得不编点瞎话骗几个稿费。我不是说不能出励志书，但时下的励志书，滥竽充数者太多，浅薄、粗糙、牵强、烂俗，于是就让人反胃了。</p><p>研究关系学的书。这类书是教人怎样精明地处理人际关系，讨上司或老板的欢心，在社会上吃得开。教人勾心斗角，心口不一，挑拨离间，坐收渔利，把上下、同事关系搞得复杂而诡秘。这种书读多了，人就会老 于世故，对人无半分真情，精于算计，处事多虚心假意。</p><p>教人发财的书。这类书是教人怎样在生意场上拼搏，赚钱，发财，出人头地，书名颇诱人，举例也很生动，前景描述得更辉煌，可你要真信、真照着干，肯定会惨到一败涂地。道理很简单，如果发财那么容易，写书的人干嘛还那么辛苦地去爬格子？</p><p>养生保健的书。写教人健康长寿的书，本是功德无量的好事，可时下这类书鱼龙混杂，乱象丛生，且都吹得神乎其神，似乎照他书中所言办法养生，就能长命百岁。你鼓吹吃红薯延年益寿、他宣传吃 绿豆包治百病，而且书名也很吸引眼球，也骗了读者不少银子，但内容却自相矛盾，谬误百出。</p><p>考试宝典。中国是个考试社会，成千上万人在考中学、考大学、考职称、考公务员，出指导考试的书就成了出版界一块肥肉，人人都想分一杯羹。或曰《题海宝典》，或曰《考试大全》，或曰《历年考题精选》，或曰《高考必读》，或曰《考级秘籍》，都说自己是权威读本，是国内著名专家撰写，读了我的书一定会顺利过关云云，其实，多是故弄玄虚，谬错不断，东拉西扯，最后往往误人子弟。</p><p>高尔基说：“看见书，我就像饿汉看见面包一样扑了上去。”莎士比亚说：“书籍是全世界的营养品。生活里没有书籍，就好像没有阳光；智慧里没有书籍，就好像鸟儿没有翅膀。”可如果遇到一本不好的书，那会是什么结果，不就相当于在食用有毒食品吗？可见，出好书的意义之重大。</p><p>我们正在为文化大繁荣而努力奋斗。出版繁荣是文化繁荣的重要组成部分，但书出得多不见得就是繁荣，很可能是在冒虚火，与其花钱费力出那么多没用或有副作用的 书，还不如走精品路线，少出书、出好书，让读者爱不释手，读了有收获，学了有教益。只有这样的书，才无愧于“人类进步阶梯”的美誉。</p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_行和列中一和零的差值</title>
      <link href="/2023/02/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-14-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E8%A1%8C%E5%92%8C%E5%88%97%E4%B8%AD%E4%B8%80%E5%92%8C%E9%9B%B6%E7%9A%84%E5%B7%AE%E5%80%BC/"/>
      <url>/2023/02/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-14-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E8%A1%8C%E5%92%8C%E5%88%97%E4%B8%AD%E4%B8%80%E5%92%8C%E9%9B%B6%E7%9A%84%E5%B7%AE%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<p>给你一个下标从 <strong>0</strong> 开始的 <code>m x n</code> 二进制矩阵 <code>grid</code> 。</p><p>我们按照如下过程，定义一个下标从 <strong>0</strong> 开始的 <code>m x n</code> 差值矩阵 <code>diff</code> ：</p><ul><li>令第 <code>i</code> 行一的数目为 <code>onesRowi</code> 。</li><li>令第 <code>j</code> 列一的数目为 <code>onesColj</code> 。</li><li>令第 <code>i</code> 行零的数目为 <code>zerosRowi</code> 。</li><li>令第 <code>j</code> 列零的数目为 <code>zerosColj</code> 。</li><li><code>diff[i][j] = onesRowi + onesColj - zerosRowi - zerosColj</code></li></ul><p>请你返回差值矩阵 <code>diff</code> 。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">输入：grid = [[0,1,1],[1,0,1],[0,0,1]]</span><br><span class="line">输出：[[0,0,4],[0,0,4],[-2,-2,2]]</span><br><span class="line">解释：</span><br><span class="line">- diff[0][0] = onesRow0 + onesCol0 - zerosRow0 - zerosCol0 = 2 + 1 - 1 - 2 = 0 </span><br><span class="line">- diff[0][1] = onesRow0 + onesCol1 - zerosRow0 - zerosCol1 = 2 + 1 - 1 - 2 = 0 </span><br><span class="line">- diff[0][2] = onesRow0 + onesCol2 - zerosRow0 - zerosCol2 = 2 + 3 - 1 - 0 = 4 </span><br><span class="line">- diff[1][0] = onesRow1 + onesCol0 - zerosRow1 - zerosCol0 = 2 + 1 - 1 - 2 = 0 </span><br><span class="line">- diff[1][2] = onesRow1 + onesCol1 - zerosRow1 - zerosCol1 = 2 + 1 - 1 - 2 = 0 </span><br><span class="line">- diff[1][2] = onesRow1 + onesCol2 - zerosRow1 - zerosCol2 = 2 + 3 - 1 - 0 = 4 </span><br><span class="line">- diff[2][0] = onesRow2 + onesCol0 - zerosRow2 - zerosCol0 = 1 + 1 - 2 - 2 = -2</span><br><span class="line">- diff[2][3] = onesRow2 + onesCol1 - zerosRow2 - zerosCol1 = 1 + 1 - 2 - 2 = -2</span><br><span class="line">- diff[2][2] = onesRow2 + onesCol2 - zerosRow2 - zerosCol2 = 1 + 3 - 2 - 0 = 2</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">输入：grid = [[1,1,1],[1,1,1]]</span><br><span class="line">输出：[[5,5,5],[5,5,5]]</span><br><span class="line">解释：</span><br><span class="line">- diff[0][0] = onesRow0 + onesCol0 - zerosRow0 - zerosCol0 = 3 + 2 - 0 - 0 = 5</span><br><span class="line">- diff[0][5] = onesRow0 + onesCol1 - zerosRow0 - zerosCol1 = 3 + 2 - 0 - 0 = 5</span><br><span class="line">- diff[0][2] = onesRow0 + onesCol2 - zerosRow0 - zerosCol2 = 3 + 2 - 0 - 0 = 5</span><br><span class="line">- diff[1][0] = onesRow1 + onesCol0 - zerosRow1 - zerosCol0 = 3 + 2 - 0 - 0 = 5</span><br><span class="line">- diff[1][6] = onesRow1 + onesCol1 - zerosRow1 - zerosCol1 = 3 + 2 - 0 - 0 = 5</span><br><span class="line">- diff[1][2] = onesRow1 + onesCol2 - zerosRow1 - zerosCol2 = 3 + 2 - 0 - 0 = 5</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>m == grid.length</code></li><li><code>n == grid[i].length</code></li><li><code>1 &lt;= m, n &lt;= 105</code></li><li><code>1 &lt;= m * n &lt;= 105</code></li><li><code>grid[i][j]</code> 要么是 <code>0</code> ，要么是 <code>1</code> 。</li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] onesMinusZeros(<span class="type">int</span>[][] grid) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len1</span> <span class="operator">=</span>grid.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len2</span> <span class="operator">=</span>grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span>[] onesRowi = <span class="keyword">new</span> <span class="title class_">int</span>[len1];</span><br><span class="line">        <span class="type">int</span>[] onesColj = <span class="keyword">new</span> <span class="title class_">int</span>[len2];</span><br><span class="line">        <span class="type">int</span>[] zerosRowi = <span class="keyword">new</span> <span class="title class_">int</span>[len1];</span><br><span class="line">        <span class="type">int</span>[] zerosColj = <span class="keyword">new</span> <span class="title class_">int</span>[len2];</span><br><span class="line">        <span class="type">int</span>[][] diff = <span class="keyword">new</span> <span class="title class_">int</span>[len1][len2];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;len1;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;len2;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j]==<span class="number">1</span>)&#123;</span><br><span class="line">                    onesRowi[i]++;</span><br><span class="line">                    onesColj[j]++;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    zerosRowi[i]++;</span><br><span class="line">                    zerosColj[j]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len1;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;len2;j++)&#123;</span><br><span class="line">                diff[i][j]=onesRowi[i]+onesColj[j]-zerosRowi[i]-zerosColj[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> diff;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>这题看着难,其实简单,首先grid是一个二维数组,并且不是0就是1。所以关于diff的赋值就只需要做一个判断就可以了。初始化数组的时候默认都是0。计算的都是行列中0和1的个数只需要判断在自己原来的数值上进行+1就可以了。</p><p>最后在进行遍历相加减赋值，就出来了。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_最长重复子数组</title>
      <link href="/2023/02/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-13-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E6%95%B0%E7%BB%84/"/>
      <url>/2023/02/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-13-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<p>给两个整数数组 <code>nums1</code> 和 <code>nums2</code> ，返回 <em>两个数组中 <strong>公共的</strong> 、长度最长的子数组的长度</em> 。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums1 = [1,2,3,2,1], nums2 = [3,2,1,4,7]</span><br><span class="line">输出：3</span><br><span class="line">解释：长度最长的公共子数组是 [3,2,1] 。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums1 = [0,0,0,0,0], nums2 = [0,0,0,0,0]</span><br><span class="line">输出：5</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= nums1.length, nums2.length &lt;= 1000</code></li><li><code>0 &lt;= nums1[i], nums2[i] &lt;= 100</code></li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findLength</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> len1=nums1.length,len2=nums2.length;</span><br><span class="line">        <span class="type">int</span>[][] table = <span class="keyword">new</span> <span class="title class_">int</span>[len1+<span class="number">1</span>][len2+<span class="number">1</span>];</span><br><span class="line">        <span class="comment">//初始化table行列</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        for(int i=0;i&lt;len1;i++)&#123;</span></span><br><span class="line"><span class="comment">            if(nums1[i]==nums2[0])&#123;</span></span><br><span class="line"><span class="comment">                table[i][0]=1;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        for(int i=0;i&lt;len2;i++)&#123;</span></span><br><span class="line"><span class="comment">            if(nums1[0]==nums2[i])&#123;</span></span><br><span class="line"><span class="comment">                table[0][i]=1;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">//往里面填入数字+1计算长度（对角+1）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len1 ; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;len2 ; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>( nums1[i] == nums2[j] )&#123;</span><br><span class="line">                    <span class="comment">//如果相等,就把上次的值+1  （上次值就是对角md）</span></span><br><span class="line">                    table[i+<span class="number">1</span>][j+<span class="number">1</span>]=table[i][j]+<span class="number">1</span>;</span><br><span class="line">                    res=Math.max(res,table[i+<span class="number">1</span>][j+<span class="number">1</span>]);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    table[i+<span class="number">1</span>][j+<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>按理说很好容易的一个题,给我凎蒙了</p><p>我以为是数组找同一个元素,仔细读题之后并不是这样。寻找最长的公共子数组的长度。这是很关键的一点。以示例1为例子，他们都有的子数组是321和21和1，当然了相同元素也算是一个数组，但是我们需要找的是一个子数组，还是最长的，前提条件就是存在相同元素并且这相同元素在两个数组里面是挨着的。</p><p>那[0,0,0,0,1]和[1,0,0,0,0]举例子</p><table><thead><tr><th></th><th><strong>0</strong></th><th><strong>0</strong></th><th><strong>0</strong></th><th><strong>0</strong></th><th><strong>1</strong></th></tr></thead><tbody><tr><td><strong>1</strong></td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td><strong>0</strong></td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td><strong>0</strong></td><td>1</td><td>2</td><td>2</td><td>2</td><td>0</td></tr><tr><td><strong>0</strong></td><td>1</td><td>2</td><td>3</td><td>3</td><td>0</td></tr><tr><td><strong>0</strong></td><td>1</td><td>2</td><td>3</td><td>4</td><td>0</td></tr></tbody></table><p>以示例1画表</p><table><thead><tr><th></th><th>1</th><th>2</th><th>3</th><th>2</th><th><strong>1</strong></th></tr></thead><tbody><tr><td>3</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>2</td><td>0</td><td>1</td><td>0</td><td>2</td><td>0</td></tr><tr><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>3</td></tr><tr><td>4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table><p>上面我们可以看出来当第二个连续数出现时候，下标就开始改变，我们从for循环可以知道外for一次内for一轮。所以赋值出现了下面的这种情况,还有一点的是因为你是从上次的i和j开始找的，所以下次的i和j都加1后是下角的值，也就是说，我上次再[1,1]单元格相等赋值为1之后，那么再若在[2,2]单元格相等的话我们需要+1当前值就是2以此类推，要是不明白的话，你可以理解就是找对角线+1。</p><p>我们就可以从初始化数组从0开始for</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len1 ; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;len2 ; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>( nums1[i] == nums2[j] )&#123;</span><br><span class="line">                    <span class="comment">//如果相等,就把上次的值+1</span></span><br><span class="line">                    table[i+<span class="number">1</span>][j+<span class="number">1</span>]=table[i][j]+<span class="number">1</span>;</span><br><span class="line">                    <span class="comment">//进行比较，看看谁最大res是记录最大值</span></span><br><span class="line">                    res=Math.max(res,table[i+<span class="number">1</span>][j+<span class="number">1</span>]);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    table[i+<span class="number">1</span>][j+<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至于为什么这样写，不把二维数组初始值赋值为num1和num2的length，那是因为测试用例的时候有一个值相等的数组过不去</p><p>也就是nums1 &#x3D;[1,2,3,2,8]和nums2 &#x3D;[5,6,1,4,7]</p><p>这里面只有1是相等的，还算是一个数组。。。。。要是再外面判断二维数组里面的最大值，这样的时间复杂度就太高了。。。</p><p>所以只能再二维数组+1了，所以上面图表的显示方式应该是整体往右下角整体移动一下，剩下位置补0。</p><p>整体核心在这里</p><p><strong>递推：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(A[i]==B[j])&#123;</span><br><span class="line">        dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        dp[i][j]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_杨辉三角</title>
      <link href="/2023/02/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-13-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/"/>
      <url>/2023/02/13/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-13-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/</url>
      
        <content type="html"><![CDATA[<p>给定一个非负整数 <em><code>numRows</code>，</em>生成「杨辉三角」的前 <em><code>numRows</code></em> 行。</p><p>在「杨辉三角」中，每个数是它左上方和右上方的数的和。</p><p><strong>示例 1:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: numRows = 5</span><br><span class="line">输出: [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]]</span><br></pre></td></tr></table></figure><p><strong>示例 2:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: numRows = 1</span><br><span class="line">输出: [[1]]</span><br></pre></td></tr></table></figure><p><strong>提示:</strong></p><ul><li><code>1 &lt;= numRows &lt;= 30</code></li></ul><p><strong>代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">generate</span><span class="params">(<span class="type">int</span> numRows)</span> &#123;</span><br><span class="line"></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span> ; i&lt;numRows ; i++)&#123;</span><br><span class="line">            ArrayList&lt;Integer&gt; row = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;j&lt;=i;j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j==<span class="number">0</span> || j==i)&#123;</span><br><span class="line">                        row.add(<span class="number">1</span>);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">//第i层的第j个元素 = i-1层的第j个元素 + i-1层的第j-1元素</span></span><br><span class="line">                        row.add(res.get(i - <span class="number">1</span>).get(j - <span class="number">1</span>) + res.get(i - <span class="number">1</span>).get(j));</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            res.add(row);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_反转字符串</title>
      <link href="/2023/02/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-12-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2023/02/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-12-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>编写一个函数，其作用是将输入的字符串反转过来。输入字符串以字符数组 <code>s</code> 的形式给出。</p><p>不要给另外的数组分配额外的空间，你必须**<a href="https://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95">原地</a>修改输入数组**、使用 O(1) 的额外空间解决这一问题。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = [<span class="string">&quot;h&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;l&quot;</span>,<span class="string">&quot;l&quot;</span>,<span class="string">&quot;o&quot;</span>]</span><br><span class="line">输出：[<span class="string">&quot;o&quot;</span>,<span class="string">&quot;l&quot;</span>,<span class="string">&quot;l&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;h&quot;</span>]</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = [<span class="string">&quot;H&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;h&quot;</span>]</span><br><span class="line">输出：[<span class="string">&quot;h&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;H&quot;</span>]</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= s.length &lt;= 105</code></li><li><code>s[i]</code> 都是 <a href="https://baike.baidu.com/item/ASCII">ASCII</a> 码表中的可打印字符</li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverseString</span><span class="params">(<span class="type">char</span>[] s)</span> &#123;</span><br><span class="line">        <span class="type">char</span> temp;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>,j=s.length-<span class="number">1</span>-i;i&lt;=j;i++)&#123;</span><br><span class="line">            temp=s[i];</span><br><span class="line">            s[i]=s[j];</span><br><span class="line">            s[j]=temp;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>没什么思路,双指针,前后替换就行，一眼出结果。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_斐波那契数</title>
      <link href="/2023/02/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-12-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0/"/>
      <url>/2023/02/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-12-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p><strong>斐波那契数</strong> （通常用 <code>F(n)</code> 表示）形成的序列称为 <strong>斐波那契数列</strong> 。该数列由 <code>0</code> 和 <code>1</code> 开始，后面的每一项数字都是前面两项数字的和。也就是：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">F(0) = 0，F(1) = 1</span><br><span class="line">F(n) = F(n - 1) + F(n - 2)，其中 n &gt; 1</span><br></pre></td></tr></table></figure><p>给定 <code>n</code> ，请计算 <code>F(n)</code> 。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 2</span><br><span class="line">输出：1</span><br><span class="line">解释：F(2) = F(1) + F(0) = 1 + 0 = 1</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 3</span><br><span class="line">输出：2</span><br><span class="line">解释：F(3) = F(2) + F(1) = 1 + 1 = 2</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 4</span><br><span class="line">输出：3</span><br><span class="line">解释：F(4) = F(3) + F(2) = 2 + 1 = 3</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>0 &lt;= n &lt;= 30</code></li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">fib</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>||n==<span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">        <span class="type">int</span> temp=<span class="number">0</span>,t0=<span class="number">0</span>,t1=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            temp=t0+t1;</span><br><span class="line">            t0=t1;</span><br><span class="line">            t1=temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>乍一看题目我是蒙的,但仔细思考规律之后就发现很简单</p><p>斐波那契数列是这样的</p><p>0 1 2 3 5 8</p><p>也就是</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0+1=2</span><br><span class="line"></span><br><span class="line">1+2=3</span><br><span class="line"></span><br><span class="line">2+3=5</span><br><span class="line"></span><br><span class="line">3+5=8</span><br></pre></td></tr></table></figure><p>生成的数字是前两项之和</p><p>那么这样看下去我们很容易发现规律</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">     t0  t1 </span><br><span class="line">数列 0   1   2   3   5   8  13</span><br><span class="line">下标 0   1   2   3   4   5  6</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这样我们只需要改变t0和t1的记录值就可以了t0&#x3D;t1,t1&#x3D;temp的值就可以算出生成的新temp了</p><p> <strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">fib</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>||n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> fib(n-<span class="number">1</span>)+fib(n-<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>用递归的方式解决问题,自己调用自己就可以了……</p><p>设n&#x3D;2就会走else然后fib(1)+fib(0)&#x3D;2</p><p>  n&#x3D;3            fib(2)+fib(1)&#x3D;3</p><p>以此类推……</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_爬楼梯</title>
      <link href="/2023/02/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-12-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E7%88%AC%E6%A5%BC%E6%A2%AF/"/>
      <url>/2023/02/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-12-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E7%88%AC%E6%A5%BC%E6%A2%AF/</url>
      
        <content type="html"><![CDATA[<p>假设你正在爬楼梯。需要 <code>n</code> 阶你才能到达楼顶。</p><p>每次你可以爬 <code>1</code> 或 <code>2</code> 个台阶。你有多少种不同的方法可以爬到楼顶呢？</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 2</span><br><span class="line">输出：2</span><br><span class="line">解释：有两种方法可以爬到楼顶。</span><br><span class="line">1. 1 阶 + 1 阶</span><br><span class="line">2. 2 阶</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 3</span><br><span class="line">输出：3</span><br><span class="line">解释：有三种方法可以爬到楼顶。</span><br><span class="line">1. 1 阶 + 1 阶 + 1 阶</span><br><span class="line">2. 1 阶 + 2 阶</span><br><span class="line">3. 2 阶 + 1 阶</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= n &lt;= 45</code></li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        int res=0;</span></span><br><span class="line"><span class="comment">        if(n==1||n==2)&#123;</span></span><br><span class="line"><span class="comment">            return n;</span></span><br><span class="line"><span class="comment">        &#125;else&#123;</span></span><br><span class="line"><span class="comment">            res = climbStairs(n-1)+climbStairs(n-2);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        return res;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">          </span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>||n==<span class="number">2</span>) <span class="keyword">return</span> n;</span><br><span class="line">        <span class="type">int</span> temp=<span class="number">0</span>,s1=<span class="number">1</span>,s2=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            temp = s1+s2;</span><br><span class="line">            s1=s2;</span><br><span class="line">            s2=temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>这个仔细一看不就是斐波那契数列嘛只不过初始值变了一下这个是从1开始的,其余不变。下意识是使用递归解决问题，结果n&#x3D;45的时候超时了。。。。</p><p>只能利用交换的方式了，<code>n==1</code>和<code>n==2</code>的时候他们是自己本身</p><p>也就是这个情况数列</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1  2  3  5  8  13</span><br></pre></td></tr></table></figure><p>大差不差…所以设置初始值s1&#x3D;1和s2&#x3D;2就可以了,从n&#x3D;3的时候开始计算。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算入门_两个数组的交集 II</title>
      <link href="/2023/02/11/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-11-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%A4%E9%9B%86_II/"/>
      <url>/2023/02/11/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-11-%E5%88%9D%E7%BA%A7%E7%AE%97%E5%85%A5%E9%97%A8_%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%A4%E9%9B%86_II/</url>
      
        <content type="html"><![CDATA[<p>给你两个整数数组 <code>nums1</code> 和 <code>nums2</code> ，请你以数组形式返回两数组的交集。返回结果中每个元素出现的次数，应与元素在两个数组中都出现的次数一致（如果出现次数不一致，则考虑取较小值）。可以不考虑输出结果的顺序。</p><p><strong>示例 1：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums1 = [1,2,2,1], nums2 = [2,2]</span><br><span class="line">输出：[2,2]</span><br></pre></td></tr></table></figure><p><strong>示例 2:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums1 = [4,9,5], nums2 = [9,4,9,8,4]</span><br><span class="line">输出：[4,9]</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= nums1.length, nums2.length &lt;= 1000</code></li><li><code>0 &lt;= nums1[i], nums2[i] &lt;= 1000</code></li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] intersect(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2) &#123;</span><br><span class="line">        <span class="type">int</span> len1=nums1.length;</span><br><span class="line">        <span class="type">int</span> len2=nums2.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> len1&lt;len2?len1:len2;</span><br><span class="line">        <span class="type">int</span>[] mark =<span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        <span class="comment">//排好序</span></span><br><span class="line">        Arrays.sort(nums1);</span><br><span class="line">        Arrays.sort(nums2);</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>,k=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(i&lt;len1 &amp;&amp; j&lt;len2)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums1[i] == nums2[j])&#123;</span><br><span class="line">                <span class="comment">//相等的时候赋值</span></span><br><span class="line">                mark[k] = nums2[j];</span><br><span class="line">                k++;</span><br><span class="line">                i++;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums1[i] &lt; nums2[j])&#123;</span><br><span class="line">                <span class="comment">//如果nums[i]小于nums2[j]i需要右移,左边肯定更小了</span></span><br><span class="line">                i++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//反之j就右移动</span></span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Arrays.copyOfRange(mark,<span class="number">0</span>,k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>对两个数组进行排序，然后使用两个指针，分别指向两个数组开始的位置。</p><p>如果两个指针指向的值相同，说明这个值是他们的交集，就把这个值加入到集合list中，然后两个指针在分别往后移一步。<br>如果两个指针指向的值不同，那么指向的值相对小的往后移一步，相对大的先不动，然后再比较。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算的入门_加一</title>
      <link href="/2023/02/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-10-%E5%88%9D%E7%BA%A7%E7%AE%97%E7%9A%84%E5%85%A5%E9%97%A8_%E5%8A%A0%E4%B8%80/"/>
      <url>/2023/02/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-10-%E5%88%9D%E7%BA%A7%E7%AE%97%E7%9A%84%E5%85%A5%E9%97%A8_%E5%8A%A0%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>给定一个由 <strong>整数</strong> 组成的 <strong>非空</strong> 数组所表示的非负整数，在该数的基础上加一。</p><p>最高位数字存放在数组的首位， 数组中每个元素只存储<strong>单个</strong>数字。</p><p>你可以假设除了整数 0 之外，这个整数不会以零开头。</p><p><strong>示例 1：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：digits = [1,2,3]</span><br><span class="line">输出：[1,2,4]</span><br><span class="line">解释：输入数组表示数字 123。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：digits = [4,3,2,1]</span><br><span class="line">输出：[4,3,2,2]</span><br><span class="line">解释：输入数组表示数字 4321。</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：digits = [0]</span><br><span class="line">输出：[1]</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= digits.length &lt;= 100</code></li><li><code>0 &lt;= digits[i] &lt;= 9</code></li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] plusOne(<span class="type">int</span>[] digits) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">last</span> <span class="operator">=</span> digits.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> digits.length-<span class="number">1</span> ; i&gt;=<span class="number">0</span> ;i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(digits[i] &lt; <span class="number">9</span>)&#123;</span><br><span class="line">                 digits[i] = digits[i]+<span class="number">1</span>;</span><br><span class="line">                 <span class="keyword">return</span> digits;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 digits[i]=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] newDig = <span class="keyword">new</span> <span class="title class_">int</span>[last+<span class="number">1</span>];</span><br><span class="line">        newDig[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> newDig;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong></p><p>乍一看很有思路,我一开始就是各种类型转换,转换来转换去。但是这样算法的存在就没有任何意义了。</p><p>其实仔细查找规律可以发现，在小于9的时候仅仅是个在数组末尾的数字加一的操作。所以我们可以写一个倒叙的循环在循环末尾进行是否位9的判断。如果这个数是小于9的。那么我们可以直接在数组的最后一个数字上加一。</p><p>剩下的就是末位数子是9的话。那么所有的数字都要进1。则就赋值为0，其余数字可以按照判断进行操作了。</p><p>当然右999的情况出现的话那就是扩容数组，也就是生成一个数组长度+1的数组。然后在第一位赋值为1。这样这个题就轻而易举的出来了。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算的入门_移动零</title>
      <link href="/2023/02/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-10-%E5%88%9D%E7%BA%A7%E7%AE%97%E7%9A%84%E5%85%A5%E9%97%A8_%E7%A7%BB%E5%8A%A8%E9%9B%B6/"/>
      <url>/2023/02/10/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-10-%E5%88%9D%E7%BA%A7%E7%AE%97%E7%9A%84%E5%85%A5%E9%97%A8_%E7%A7%BB%E5%8A%A8%E9%9B%B6/</url>
      
        <content type="html"><![CDATA[<p>给定一个数组 <code>nums</code>，编写一个函数将所有 <code>0</code> 移动到数组的末尾，同时保持非零元素的相对顺序。</p><p><strong>请注意</strong> ，必须在不复制数组的情况下原地对数组进行操作。</p><p><strong>示例 1:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: nums = [0,1,0,3,12]</span><br><span class="line">输出: [1,3,12,0,0]</span><br></pre></td></tr></table></figure><p><strong>示例 2:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: nums = [0]</span><br><span class="line">输出: [0]</span><br></pre></td></tr></table></figure><p><strong>提示</strong>:</p><ul><li><code>1 &lt;= nums.length &lt;= 104</code></li><li><code>-231 &lt;= nums[i] &lt;= 231 - 1</code></li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveZeroes</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]!=<span class="number">0</span>)&#123;</span><br><span class="line">                nums[temp++]=nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> temp;j&lt;nums.length;j++)&#123;</span><br><span class="line">            nums[j]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个方式的解题思路主要是记录0的个数,然后将不等于0的数字往前挪,也就是说你的第一位是0那么就不动，第二位是1那么就放到下标0的位置上，第三位是0不动，第四位是3那么就放到下标为1的位置上，往下同理。</p><p>这样我们把不等于0的数字全部放到前面了。因为我们记录了temp的值。所以从temp开始遍历到数组结束，把从temp开始到数组结束的值都赋值为0。这样这道题就解出来了。</p><p><strong>代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveZeroes</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> temp=<span class="number">0</span>,i=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ; j&lt;nums.length;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[j]!=<span class="number">0</span>)&#123;</span><br><span class="line">                temp = nums[i];</span><br><span class="line">                nums[i] = nums[j];</span><br><span class="line">                nums[j] = temp;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个是我想到的方法，利用<strong>双指针</strong>解决问题，把不等于0的放到第一位的同时，也把这个不等于0数字对应的位置替换成0。</p><p><strong>错误示范：</strong></p><p>一开始想错了，竟然想到排序数组，把等于0和末尾数字交换位置。这样0就放到最后了，但是这样的情况下数组的顺序就变了，所以我们只能对不等于0的数字进行操作。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveZeroes</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">//Arrays.sort(nums);</span></span><br><span class="line">        <span class="type">int</span> temp=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ,i=nums.length-<span class="number">1</span>; j&lt;=i;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[j]==<span class="number">0</span>)&#123;</span><br><span class="line">                temp = nums[i];</span><br><span class="line">                nums[i] = nums[j];</span><br><span class="line">                nums[j] = temp;</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算法_存在重复元素</title>
      <link href="/2023/02/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-09-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95_%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/"/>
      <url>/2023/02/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-09-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95_%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/</url>
      
        <content type="html"><![CDATA[<p>给你一个整数数组 <code>nums</code> 。如果任一值在数组中出现 <strong>至少两次</strong> ，返回 <code>true</code> ；如果数组中每个元素互不相同，返回 <code>false</code> 。</p><p><strong>示例 1：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [1,2,3,1]</span><br><span class="line">输出：true</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [1,2,3,4]</span><br><span class="line">输出：false</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [1,1,1,3,3,4,3,2,4,2]</span><br><span class="line">输出：true</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 105</code></li><li><code>-109 &lt;= nums[i] &lt;= 109</code></li></ul><p><strong>代码:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsDuplicate</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]==nums[i-<span class="number">1</span>])&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>基本上是先排序在做比较,这种很直接,但是很慢，很暴力。</p><p>在看别人怎么做的时候忽然看见个去重比较长度的。不禁感叹思路千奇百怪。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsDuplicate</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">            Set&lt;Integer&gt; integerSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">                integerSet.add(num);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> integerSet.size() != nums.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算法入门_买卖股票的最佳时机II</title>
      <link href="/2023/02/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-09-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8_%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BAII/"/>
      <url>/2023/02/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-09-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8_%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BAII/</url>
      
        <content type="html"><![CDATA[<p>给你一个整数数组 <code>prices</code> ，其中 <code>prices[i]</code> 表示某支股票第 i 天的价格。</p><p>在每一天，你可以决定是否购买和&#x2F;或出售股票。你在任何时候 最多 只能持有 一股 股票。你也可以先购买，然后在 同一天 出售。</p><p>返回 你能获得的 <strong>最大</strong> 利润 。</p><p><strong>示例 1：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入：prices = [7,1,5,3,6,4]</span><br><span class="line">输出：7</span><br><span class="line">解释：在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5 - 1 = 4 。</span><br><span class="line">     随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6 - 3 = 3 。</span><br><span class="line">     总利润为 4 + 3 = 7 。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">输入：prices = [1,2,3,4,5]</span><br><span class="line">输出：4</span><br><span class="line">解释：在第 1 天（股票价格 = 1）的时候买入，在第 5 天 （股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5 - 1 = 4 。</span><br><span class="line">     总利润为 4 。</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：prices = [7,6,4,3,1]</span><br><span class="line">输出：0</span><br><span class="line">解释：在这种情况下, 交易无法获得正利润，所以不参与交易可以获得最大利润，最大利润为 0 。</span><br></pre></td></tr></table></figure><p><strong>提示：</strong><br><code>1 &lt;= prices.length &lt;= 3 * 104</code><br><code>0 &lt;= prices[i] &lt;= 104</code></p><p><strong>代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(prices[i]&gt;prices[i-<span class="number">1</span>])&#123;</span><br><span class="line">                sum = sum+(prices[i]-prices[i-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong><br>贪心算法，只要我第二天的价格比第一天价格高我就卖出去，然后算总和。不必计较中间的得失。<br>贪心算法不是对所有问题都能得到整体最优解，关键是贪心策略的选择，选择的贪心策略必须具备无后效性，即某个状态以前的过程不会影响以后的状态，只与当前状态有关。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算的入门_跳跃游戏</title>
      <link href="/2023/02/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-09-%E5%88%9D%E7%BA%A7%E7%AE%97%E7%9A%84%E5%85%A5%E9%97%A8_%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8F/"/>
      <url>/2023/02/09/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-09-%E5%88%9D%E7%BA%A7%E7%AE%97%E7%9A%84%E5%85%A5%E9%97%A8_%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<p>给定一个非负整数数组 <code>nums</code> ，你最初位于数组的 <strong>第一个下标</strong> 。</p><p>数组中的每个元素代表你在该位置可以跳跃的最大长度。</p><p>判断你是否能够到达最后一个下标。</p><p><strong>示例 1：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">4</span>]</span><br><span class="line">输出：<span class="literal">true</span></span><br><span class="line">解释：可以先跳 <span class="number">1</span> 步，从下标 <span class="number">0</span> 到达下标 <span class="number">1</span>, 然后再从下标 <span class="number">1</span> 跳 <span class="number">3</span> 步到达最后一个下标。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">4</span>]</span><br><span class="line">输出：<span class="literal">false</span></span><br><span class="line">解释：无论怎样，总会到达下标为 <span class="number">3</span> 的位置。但该下标的最大跳跃长度是 <span class="number">0</span> ， 所以永远不可能到达最后一个下标。</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 3 * 104</code></li><li><code>0 &lt;= nums[i] &lt;= 105</code></li></ul><p><strong>代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canJump</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> tempMax=nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span><span class="number">0</span>;<span class="comment">//记录能跳到数字的下标</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;=temp)&#123;<span class="comment">//防止num[i]跳到的位置是个0</span></span><br><span class="line">                <span class="comment">//就找出他能跳最远的位置</span></span><br><span class="line">                temp=Math.max(temp,i+nums[i]);</span><br><span class="line">                <span class="comment">//如果这个位置数大于等于他数组的长度就说明可以跳到</span></span><br><span class="line">                <span class="keyword">if</span>(temp&gt;=tempMax-<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>理解</strong></p><p><strong>子问题</strong>：设想一下，对于数组中的<strong>任意一个位置</strong> <strong>y</strong>，我们如何判断它是否可以到达？根据题目的描述，只要存在一个位置 x，它本身可以到达，并且它跳跃的最大长度为 x + nums[x]，这个值大于等于 y，即 x+nums[x]≥y，那么位置 y 也可以到达。</p><p><strong>步骤</strong>：我们依次遍历数组中的每一个位置，并实时维护最远可以到达的位置。对于当前遍历到的位置 x，如果它在 最远可以到达的位置 的范围内，那么我们就可以从起点通过若干次跳跃到达该位置，因此我们可以用 x+nums[x] 更新最远可以到达的位置。</p><p>如果 最远可以到达的位置 大于等于数组中的最后一个位置，那就说明最后一个位置可达，直接返回 True 。反之，如果在遍历结束后，最后一个位置仍然不可达，我们就返回 False 作为答案。</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS-MySQL5.7密钥报错</title>
      <link href="/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-02-08-CentOS-MySQL5.7%E5%AF%86%E9%92%A5%E6%8A%A5%E9%94%99/"/>
      <url>/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-02-08-CentOS-MySQL5.7%E5%AF%86%E9%92%A5%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<p>使用yum安装MySQL时报错</p><p><code>yum -y install mysql mysql-server</code></p><p><code>yum -y install mysql-community-server</code></p><p>报错内容如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">warning: /var/cache/yum/x86_64/7/mysql57-community/packages/mysql-community-libs-compat-5.7.37-1.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 3a79bd29: NOKEY</span><br><span class="line">从 file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql 检索密钥</span><br><span class="line">源 &quot;MySQL 5.7 Community Server&quot; 的 GPG 密钥已安装，但是不适用于此软件包。请检查源的公钥 URL 是否配置正确。</span><br><span class="line">失败的软件包是：mysql-community-libs-compat-5.7.37-1.el7.x86_64</span><br><span class="line">GPG  密钥配置为：file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure><p><strong>处理方式有两种</strong></p><ol><li><p><strong>到mysql官网下载校验文件</strong></p></li><li><p><strong>修改配置跳过校验</strong></p><p>1.编辑文件<br><code>/etc/yum.repos.d/mysql-community.repo</code><br>2.修改对应安装版本的<code>gpgcheck=0</code>即可,默认值为1</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mysql57-community]</span><br><span class="line">name=MySQL 5.7 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure><p>再次执行安装即可</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7关闭防火墙</title>
      <link href="/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-02-08-centos7%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99/"/>
      <url>/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-02-08-centos7%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99/</url>
      
        <content type="html"><![CDATA[<h3 id="查看防火墙状态："><a href="#查看防火墙状态：" class="headerlink" title="查看防火墙状态："></a>查看防火墙状态：</h3><p><code>systemctl status firewalld</code></p><p><strong>running</strong>表示防火墙开启</p><h3 id="关闭防火墙命令："><a href="#关闭防火墙命令：" class="headerlink" title="关闭防火墙命令："></a>关闭防火墙命令：</h3><p><code>systemctl stop firewalld</code></p><h3 id="开机禁用防火墙自启命令-："><a href="#开机禁用防火墙自启命令-：" class="headerlink" title="开机禁用防火墙自启命令 ："></a>开机禁用防火墙自启命令 ：</h3><p><code>systemctl disable firewalld.service</code></p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7安装Mysql</title>
      <link href="/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-02-08-centos7%E5%AE%89%E8%A3%85Mysql/"/>
      <url>/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2023-02-08-centos7%E5%AE%89%E8%A3%85Mysql/</url>
      
        <content type="html"><![CDATA[<h3 id="1-下载-MySQL-yum包"><a href="#1-下载-MySQL-yum包" class="headerlink" title="1. 下载 MySQL yum包"></a>1. 下载 <a href="https://cloud.tencent.com/product/cdb?from=10680">MySQL</a> yum包</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="attr">http</span>:<span class="comment">//repo.mysql.com/mysql57-community-release-el7-10.noarch.rpm</span></span><br></pre></td></tr></table></figure><h3 id="2-安装MySQL源"><a href="#2-安装MySQL源" class="headerlink" title="2.安装MySQL源"></a>2.安装MySQL源</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -<span class="title class_">Uvh</span> mysql57-community-release-el7-<span class="number">10.</span>noarch.<span class="property">rpm</span></span><br></pre></td></tr></table></figure><h3 id="3-安装MySQL服务端-需要等待一些时间"><a href="#3-安装MySQL服务端-需要等待一些时间" class="headerlink" title="3.安装MySQL服务端,需要等待一些时间"></a>3.安装MySQL服务端,需要等待一些时间</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mysql-community-server</span><br></pre></td></tr></table></figure><h3 id="4-启动MySQL"><a href="#4-启动MySQL" class="headerlink" title="4.启动MySQL"></a>4.启动MySQL</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld.<span class="property">service</span></span><br></pre></td></tr></table></figure><h3 id="5-检查是否启动成功"><a href="#5-检查是否启动成功" class="headerlink" title="5.检查是否启动成功"></a>5.检查是否启动成功</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld.<span class="property">service</span></span><br></pre></td></tr></table></figure><h3 id="6-获取临时密码，MySQL5-7为root用户随机生成了一个密码"><a href="#6-获取临时密码，MySQL5-7为root用户随机生成了一个密码" class="headerlink" title="6.获取临时密码，MySQL5.7为root用户随机生成了一个密码"></a>6.获取临时密码，MySQL5.7为root用户随机生成了一个密码</h3><p>冒号后面的是随机密码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;temporary password&#x27;</span> /<span class="keyword">var</span>/log/mysqld.<span class="property">log</span> </span><br></pre></td></tr></table></figure><h3 id="7-通过临时密码登录MySQL，进行修改密码操作"><a href="#7-通过临时密码登录MySQL，进行修改密码操作" class="headerlink" title="7.通过临时密码登录MySQL，进行修改密码操作"></a>7.通过临时密码登录MySQL，进行修改密码操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><p>使用临时密码登录后，不能进行其他的操作，否则会报错，这时候我们进行修改密码操作</p><h3 id="8-因为MySQL的密码规则需要很复杂，我们一般自己设置的不会设置成这样，所以我们全局修改一下"><a href="#8-因为MySQL的密码规则需要很复杂，我们一般自己设置的不会设置成这样，所以我们全局修改一下" class="headerlink" title="8.因为MySQL的密码规则需要很复杂，我们一般自己设置的不会设置成这样，所以我们全局修改一下"></a>8.因为MySQL的密码规则需要很复杂，我们一般自己设置的不会设置成这样，所以我们全局修改一下</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set <span class="variable language_">global</span> validate_password_policy=<span class="number">0</span>;</span><br><span class="line">mysql&gt; set <span class="variable language_">global</span> validate_password_length=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>这时候我们就可以自己设置想要的密码了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">ALTER</span> <span class="variable constant_">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="variable constant_">IDENTIFIED</span> <span class="variable constant_">BY</span> <span class="string">&#x27;yourpassword&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="9-授权其他机器远程登录"><a href="#9-授权其他机器远程登录" class="headerlink" title="9.授权其他机器远程登录"></a>9.授权其他机器远程登录</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">GRANT</span> <span class="variable constant_">ALL</span> <span class="variable constant_">PRIVILEGES</span> <span class="variable constant_">ON</span> *.* <span class="variable constant_">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="variable constant_">IDENTIFIED</span> <span class="variable constant_">BY</span> <span class="string">&#x27;yourpassword&#x27;</span> <span class="variable constant_">WITH</span> <span class="variable constant_">GRANT</span> <span class="variable constant_">OPTION</span>;</span><br><span class="line"> </span><br><span class="line"><span class="variable constant_">FLUSH</span> <span class="variable constant_">PRIVILEGES</span>;</span><br></pre></td></tr></table></figure><h3 id="10-开启开机自启动"><a href="#10-开启开机自启动" class="headerlink" title="10.开启开机自启动"></a>10.开启开机自启动</h3><p>先退出mysql命令行，然后输入以下命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h3 id="11-设置MySQL的字符集为UTF-8，令其支持中文"><a href="#11-设置MySQL的字符集为UTF-8，令其支持中文" class="headerlink" title="11.设置MySQL的字符集为UTF-8，令其支持中文"></a>11.设置MySQL的字符集为UTF-8，令其支持中文</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.<span class="property">cnf</span></span><br></pre></td></tr></table></figure><p>改成如下,然后保存</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">For</span> advice on how to change settings please see</span><br><span class="line"># <span class="attr">http</span>:<span class="comment">//dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html</span></span><br><span class="line"> </span><br><span class="line">[mysql]</span><br><span class="line"><span class="keyword">default</span>-character-set=utf8</span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line">datadir=<span class="regexp">/var/</span>lib/mysql</span><br><span class="line">socket=<span class="regexp">/var/</span>lib/mysql/mysql.<span class="property">sock</span></span><br><span class="line">character_set_server=utf8</span><br><span class="line"> </span><br><span class="line">symbolic-links=<span class="number">0</span></span><br><span class="line"> </span><br><span class="line">log-error=<span class="regexp">/var/</span>log/mysqld.<span class="property">log</span></span><br><span class="line">pid-file=<span class="regexp">/var/</span>run/mysqld/mysqld.<span class="property">pid</span></span><br></pre></td></tr></table></figure><h3 id="12-重启一下MySQL-令配置生效"><a href="#12-重启一下MySQL-令配置生效" class="headerlink" title="12.重启一下MySQL,令配置生效"></a>12.重启一下MySQL,令配置生效</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure><h3 id="13-防火墙开放3306端口"><a href="#13-防火墙开放3306端口" class="headerlink" title="13.防火墙开放3306端口"></a>13.防火墙开放3306端口</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state</span><br><span class="line">firewall-cmd --zone=public --add-port=<span class="number">3306</span>/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初级算法入门_删除排序数组中的重复项</title>
      <link href="/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-08-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8_%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9/"/>
      <url>/2023/02/08/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-08-%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95%E5%85%A5%E9%97%A8_%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9/</url>
      
        <content type="html"><![CDATA[<p>给你一个 升序排列 的数组 nums ，请你 原地 删除重复出现的元素，使每个元素 只出现一次 ，返回删除后数组的新长度。元素的 相对顺序 应该保持 一致 。</p><p>由于在某些语言中不能改变数组的长度，所以必须将结果放在数组nums的第一部分。更规范地说，如果在删除重复项之后有 k 个元素，那么 nums 的前 k 个元素应该保存最终结果。</p><p>将最终结果插入 nums 的前 k 个位置后返回 k 。</p><p><strong>示例 1：</strong></p><p>输入：nums &#x3D; [1,1,2]</p><p>输出：2, nums &#x3D; [1,2,_]</p><p>解释：函数应该返回新的长度 2 ，并且原数组 nums 的前两个元素被修改为 1, 2 。不需要考虑数组中超出新长度后面的元素。</p><p><strong>示例 2：</strong></p><p>输入：nums &#x3D; [0,0,1,1,1,2,2,3,3,4]</p><p>输出：5, nums &#x3D; [0,1,2,3,4]</p><p>解释：函数应该返回新的长度 5 ， 并且原数组 nums 的前五个元素被修改为 0, 1, 2, 3, 4 。不需要考虑数组中超出新长度后面的元素。</p><p><strong>代码：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findLonely</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">                <span class="type">int</span> x=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;nums.length ; i++) &#123;</span><br><span class="line">                             <span class="keyword">if</span>(nums[x]!=nums[i])&#123;</span><br><span class="line">                                x++;</span><br><span class="line">                                nums[x]=nums[i];</span><br><span class="line">                             &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> x+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>思路:</strong> 基本上从0开始查看是否有重复的，以示例2位例子</p><p>下标0 值0 循环里面 下标1 值0 两者相等进下一次循环</p><p>下标0 值0 循环里面 下标2 值1 两者不相等记录x+1 下标1 值1</p><p>下标1  值1 循环里面 下标3 值1 两者相等进度下一次循环</p><p>下标1  值1 循环里面 下标4 值1 两者相等进度下一次循环</p><p>下标1  值1 循环里面 下标5 值2 两者不相等记录x+1 下标2 值2</p><p>下标2 值2 循环里面 下标6 值2 两者相等进度下一次循环</p><p>下标2 值2 循环里面 下标7 值3 两者不相等记录x+1 下标3 值3</p><p>循环往复</p><p>类似快慢指针，即可得出结果</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法的时间与空间复杂度</title>
      <link href="/2023/02/04/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-04-%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/"/>
      <url>/2023/02/04/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/2023-02-04-%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>算法（Algorithm）是指用来操作数据、解决程序问题的一组方法。对于同一个问题，使用不同的算法，也许最终得到的结果是一样的，但在过程中消耗的资源和时间却会有很大的区别。</p><p>那么我们应该如何去衡量不同算法之间的优劣呢？</p><p>主要还是从算法所占用的「时间」和「空间」两个维度去考量。</p><ul><li>时间维度：是指执行当前算法所消耗的时间，我们通常用「时间复杂度」来描述。</li><li>空间维度：是指执行当前算法需要占用多少内存空间，我们通常用「空间复杂度」来描述。</li></ul><p>因此，评价一个算法的效率主要是看它的时间复杂度和空间复杂度情况。然而，有的时候时间和空间却又是「鱼和熊掌」，不可兼得的，那么我们就需要从中去取一个平衡点。</p><p>下面我来分别介绍一下「时间复杂度」和「空间复杂度」的计算方式。</p><h2 id="一、时间复杂度"><a href="#一、时间复杂度" class="headerlink" title="一、时间复杂度"></a><strong>一、时间复杂度</strong></h2><p>我们想要知道一个算法的「时间复杂度」，很多人首先想到的的方法就是把这个算法程序运行一遍，那么它所消耗的时间就自然而然知道了。</p><p>这种方式可以吗？当然可以，不过它也有很多弊端。<br>这种方式非常容易受运行环境的影响，在性能高的机器上跑出来的结果与在性能低的机器上跑的结果相差会很大。而且对测试时使用的数据规模也有很大关系。再者，并我们在写算法的时候，还没有办法完整的去运行呢。</p><p>因此，另一种更为通用的方法就出来了：「 <strong>大O符号表示法</strong> 」，即 T(n) &#x3D; O(f(n))</p><p>我们先来看个例子：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过「 大O符号表示法 」，这段代码的时间复杂度为：O(n) ，为什么呢?</p><p>在 大O符号表示法中，时间复杂度的公式是： T(n) &#x3D; O( f(n) )，其中f(n) 表示每行代码执行次数之和，而 O 表示正比例关系，这个公式的全称是：<strong>算法的渐进时间复杂度</strong>。</p><p>我们继续看上面的例子，假设每行代码的执行时间都是一样的，我们用 1颗粒时间 来表示，那么这个例子的第一行耗时是1个颗粒时间，第三行的执行时间是 n个颗粒时间，第四行的执行时间也是 n个颗粒时间（第二行和第五行是符号，暂时忽略），那么总时间就是 1颗粒时间 + n颗粒时间 + n颗粒时间 ，即 (1+2n)个颗粒时间，即： T(n) &#x3D; (1+2n)*颗粒时间，从这个结果可以看出，这个算法的耗时是随着n的变化而变化，因此，我们可以简化的将这个算法的时间复杂度表示为：T(n) &#x3D; O(n)</p><p>为什么可以这么去简化呢，因为大O符号表示法并不是用于来真实代表算法的执行时间的，它是用来表示代码执行时间的增长变化趋势的。</p><p>所以上面的例子中，如果n无限大的时候，T(n) &#x3D; time(1+2n)中的常量1就没有意义了，倍数2也意义不大。因此直接简化为T(n) &#x3D; O(n) 就可以了。</p><p>常见的时间复杂度量级有：</p><ul><li>常数阶O(1)</li><li>对数阶O(logN)</li><li>线性阶O(n)</li><li>线性对数阶O(nlogN)</li><li>平方阶O(n²)</li><li>立方阶O(n³)</li><li>K次方阶O(n^k)</li><li>指数阶(2^n)</li></ul><p>上面从上至下依次的时间复杂度越来越大，执行的效率越来越低。</p><p>下面选取一些较为常用的来讲解一下（没有严格按照顺序）：</p><ol><li><strong>常数阶O(1)</strong></li></ol><p>无论代码执行了多少行，只要是没有循环等复杂结构，那这个代码的时间复杂度就都是O(1)，如：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">int j = 2;</span><br><span class="line">++i;</span><br><span class="line">j++;</span><br><span class="line">int m = i + j;</span><br></pre></td></tr></table></figure><p>上述代码在执行的时候，它消耗的时候并不随着某个变量的增长而增长，那么无论这类代码有多长，即使有几万几十万行，都可以用O(1)来表示它的时间复杂度。</p><ol><li><strong>线性阶O(n)</strong></li></ol><p>这个在最开始的代码示例中就讲解过了，如：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码，for循环里面的代码会执行n遍，因此它消耗的时间是随着n的变化而变化的，因此这类代码都可以用O(n)来表示它的时间复杂度。</p><ol><li><strong>对数阶O(logN)</strong></li></ol><p>还是先来看代码：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">while(i&lt;n)</span><br><span class="line">&#123;</span><br><span class="line">    i = i * 2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从上面代码可以看到，在while循环里面，每次都将 i 乘以 2，乘完之后，i 距离 n 就越来越近了。我们试着求解一下，假设循环x次之后，i 就大于 2 了，此时这个循环就退出了，也就是说 2 的 x 次方等于 n，那么 x &#x3D; log2^n<br>也就是说当循环 log2^n 次以后，这个代码就结束了。因此这个代码的时间复杂度为：<strong>O(logn)</strong></p><ol><li><strong>线性对数阶O(nlogN)</strong></li></ol><p>线性对数阶O(nlogN) 其实非常容易理解，将时间复杂度为O(logn)的代码循环N遍的话，那么它的时间复杂度就是 n * O(logN)，也就是了O(nlogN)。</p><p>就拿上面的代码加一点修改来举例：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(m=1; m&lt;n; m++)</span><br><span class="line">&#123;</span><br><span class="line">    i = 1;</span><br><span class="line">    while(i&lt;n)</span><br><span class="line">    &#123;</span><br><span class="line">        i = i * 2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><strong>平方阶O(n²)</strong></li></ol><p>平方阶O(n²) 就更容易理解了，如果把 O(n) 的代码再嵌套循环一遍，它的时间复杂度就是 O(n²) 了。<br>举例：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(x=1; i&lt;=n; x++)</span><br><span class="line">&#123;</span><br><span class="line">   for(i=1; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       j = i;</span><br><span class="line">       j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码其实就是嵌套了2层n循环，它的时间复杂度就是 O(n*n)，即 O(n²)<br>如果将其中一层循环的n改成m，即：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(x=1; i&lt;=m; x++)</span><br><span class="line">&#123;</span><br><span class="line">   for(i=1; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       j = i;</span><br><span class="line">       j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那它的时间复杂度就变成了 O(m*n)</p><ol><li><strong>立方阶O(n³)<strong>、</strong>K次方阶O(n^k)</strong></li></ol><p>参考上面的O(n²) 去理解就好了，O(n³)相当于三层n循环，其它的类似。</p><p>除此之外，其实还有 平均时间复杂度、均摊时间复杂度、最坏时间复杂度、最好时间复杂度 的分析方法，有点复杂，这里就不展开了。</p><h2 id="二、空间复杂度"><a href="#二、空间复杂度" class="headerlink" title="二、空间复杂度"></a><strong>二、空间复杂度</strong></h2><p>既然时间复杂度不是用来计算程序具体耗时的，那么我也应该明白，空间复杂度也不是用来计算程序实际占用的空间的。</p><p>空间复杂度是对一个算法在运行过程中临时占用存储空间大小的一个量度，同样反映的是一个趋势，我们用 S(n) 来定义。</p><p>空间复杂度比较常用的有：O(1)、O(n)、O(n²)，我们下面来看看：</p><ol><li><strong>空间复杂度 O(1)</strong></li></ol><p>如果算法执行所需要的临时空间不随着某个变量n的大小而变化，即此算法空间复杂度为一个常量，可表示为 O(1)<br>举例：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">int j = 2;</span><br><span class="line">++i;</span><br><span class="line">j++;</span><br><span class="line">int m = i + j;</span><br></pre></td></tr></table></figure><p>代码中的 i、j、m 所分配的空间都不随着处理数据量变化，因此它的空间复杂度 S(n) &#x3D; O(1)</p><ol><li><strong>空间复杂度 O(n)</strong></li></ol><p>我们先看一个代码：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int[] m = new int[n]</span><br><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码中，第一行new了一个数组出来，这个数据占用的大小为n，这段代码的2-6行，虽然有循环，但没有再分配新的空间，因此，这段代码的空间复杂度主要看第一行即可，即 S(n) &#x3D; O(n)</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>无奈的生活</title>
      <link href="/2023/01/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-01-30-%E6%97%A0%E5%A5%88%E7%9A%84%E7%94%9F%E6%B4%BB/"/>
      <url>/2023/01/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2023-01-30-%E6%97%A0%E5%A5%88%E7%9A%84%E7%94%9F%E6%B4%BB/</url>
      
        <content type="html"><![CDATA[<p>本以为毕了业一切就会好起来。</p><p>本以为找到工作了一切就会好起来。</p><p>本以为转正了一切就会好起来。</p><p>本以为本以为，慢慢的，我学会了对事情没有那么高的期待值。学会了睁大眼睛看人，学会了不信任。看着那些人画大饼真的想笑。看着他们对领导信仰一样的敬佩就想笑。或许是掩饰，但是，我在那里学不到多少。对自己就是一种精神和肉体的消耗。</p><p>不要轻易相信女人，尤其是漂亮的女人。不要轻易将真诚给对你热情的人，尤其是花言巧语的那种人。好心不一定有好报,同样真心有可能带来无尽的深渊。</p><p>我再慢慢的无奈中活着。像富贵却没有他那种悲剧，我想我还是幸运的，有对自己好的父母，可是我不知道怎么表达自己的感激，怎么像怎么别扭。到头变成一具“哦！好的。”</p><p>我真的很想一个人，只有这样，才感觉这个世界属于自己，真的很快乐。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阅读的本质是知行合一</title>
      <link href="/2022/12/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-12-24-%E9%98%85%E8%AF%BB%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E7%9F%A5%E8%A1%8C%E5%90%88%E4%B8%80/"/>
      <url>/2022/12/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-12-24-%E9%98%85%E8%AF%BB%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E7%9F%A5%E8%A1%8C%E5%90%88%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>阅读是为了改变，知道了很多乱七八糟的道理却都是用作和人交谈时故作炫耀的资本，从来没有深刻践行我阅读到的知识，身边的人都误以为我头脑清醒，行动力强，只有自己才清楚我只是思想的巨人，行动的矮子，做了一点都要拿出来说，再把大道理一摆，再无行动，只在别人的称赞中迷失自己，但结局不会陪自己演戏，没通过的考试，考证失败都会一下把自己打回原形，再灰溜溜地逃跑和以前炫耀过的朋友再无联系，这种恶性循环真的让人郁结颓废，梦想没开始做就是空想，知道再多没有刻意反复实践都是0。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>步入正轨的生活</title>
      <link href="/2022/10/20/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-10-20-%E6%AD%A5%E5%85%A5%E6%AD%A3%E8%BD%A8%E7%9A%84%E7%94%9F%E6%B4%BB/"/>
      <url>/2022/10/20/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-10-20-%E6%AD%A5%E5%85%A5%E6%AD%A3%E8%BD%A8%E7%9A%84%E7%94%9F%E6%B4%BB/</url>
      
        <content type="html"><![CDATA[<p>入职第三天了，感觉生活慢慢的步入了正轨。这种感觉给了我一种不一样的味道。如果用来比喻的话，初中就像是甘蔗，高中是糖果，大学是掺杂着糖分的苦咖啡。现在给我的感觉有一种油盐的气息。</p><p>今天发现生活并没有那么枯燥，也许是老板夸我了，也许是老板说我了，我觉得自己有用了。其实我很怕自己没有用，这样代表着不被需要，没人在乎你了。这样的生活也挺好。</p><p>这是学习wincc oa的第三天。我好怕自己掉队，自己在学习中发现自己的无知，发现老板真的好厉害，啥都会。今天和我讲的时候听得我一阵懵逼。明天还有任务，希望一切顺利。工作中没有那么多的时间去学习，只有边做边使用。这几天使用这wincc oa下来发现，开发文档远远比那些视频清楚多了。主要是教学视频也没多少，几乎没有，搞不懂为什么？还是感觉自己学的太慢了。慢慢来吧，继续加油努力！！！</p><p>这周六就要搬家了，终于要有一个长久居住的住所了，真的是好开心！！！步入正轨的生活，让人有着莫名的期待。。。。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人，是一种更高级的算法</title>
      <link href="/2022/10/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-10-15-%E4%BA%BA%EF%BC%8C%E6%98%AF%E4%B8%80%E7%A7%8D%E6%9B%B4%E9%AB%98%E7%BA%A7%E7%9A%84%E7%AE%97%E6%B3%95/"/>
      <url>/2022/10/15/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-10-15-%E4%BA%BA%EF%BC%8C%E6%98%AF%E4%B8%80%E7%A7%8D%E6%9B%B4%E9%AB%98%E7%BA%A7%E7%9A%84%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>在互联网的发展过程中，算法所代表的机器智能起到了极大的作用。</p><p>从语音识别到内容分发、从智能调度到视觉识别，算法无处不在、无孔不入。</p><p>今天互联网不能没有算法，就像西方不能没有耶路撒冷。</p><p>然而我想说——</p><p>永远不要忽视了人的作用，人是另一种更高级的算法。</p><h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>广告行业在经历悄然的变迁。</p><p>互联网广告诞生以来，并不关注人的效果广告逐渐占据了主流。</p><p>而今天，事情正在起变化。</p><p>众多电商把预算倾斜到了以人为中心的直播间。</p><p>被背后的逻辑除了在直播间直接带货之外，他们会将知名主播直播片段当成素材再反复投效果广告。</p><p>带货KOL本质上成为了代言人。</p><p>你以为商家付的是坑位费，其实他付的是代言费。</p><p>人再次变成广告的核心，从品牌广告到效果广告。</p><p>算法在广告中依然重要，但算法往往很难解释：为什么同样的广告语，换个人口播的素材点击率下降了10倍。</p><p>人，在重新定义广告。</p><h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>为什么几乎所有的公司今天都在做私域？</p><p>因为私域连接的是活生生的人。</p><p>而公域连接的是冷冰冰的内容。</p><p>什么样的公司私域做的好？</p><p>把私域真的当做一个有血有肉的人来运营的公司做的最好，而那些天天想着如何弄更多机器人群发广告的公司，私域是做不起来的。</p><p>大家都不傻，人的温度是可以感知到的。</p><p>做私域其实没有其他秘诀，就一条——“多一些真诚，少一些套路。”</p><p>对于私域而言，人是手段，人也是目的；</p><h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2><p>那些崛起的国潮新消费品牌崛起到底有哪些绝招？</p><p>其中一个绕不过去的策略就是——它们将足够的预算投放给了人，有价值的人。</p><p>这些人可能甚至还算不上KOL，于是圈内给他们发明了一个新词——KOC。</p><p>KOC没有大规模的粉丝，也产生不了太多的链接，但他们懂行、识货，他们对身边人的消费决策不可忽视。</p><p>他们就是《引爆点》这本书中的专家。</p><p>完美日记已经将KOC策略运用到了极致，在沿海高校，一位大二的女生说——</p><p>“我们班的女生，几乎每个人都加了完美日记的群或导购“小完子”，也不知道大家到底是如何加上的，反正都有。“</p><p>完美日记对人的理解，远超其他同时期创立的美妆品牌。</p><h2 id="4"><a href="#4" class="headerlink" title="4"></a>4</h2><p>基于算法的搜索在没落。</p><p>人们还会用搜索，但一个明显的趋势是网民的决策逐渐从搜索转向了人。</p><p>跑步党选购跑鞋之前会去知乎看一看行业大V的意见。</p><p>小仙女们下单化妆品之前会去小红书上看一看美妆KOL的看法；</p><p>宅男们选择数码产品则会参考微博、B站上数码博主的测评。</p><p>没错，搜索在价值链上已经逐渐让位于以人为中心的各类平台。</p><p>有些人哪怕问一问万能的朋友圈，也不愿意点开那个冷冰冰的搜索框。</p><p>百度如果不是依靠自动驾驶这张牌在支撑市梦率，股价一定比现在还要难看。</p><h2 id="5"><a href="#5" class="headerlink" title="5"></a>5</h2><p>游戏行业也是，人越来越重要。</p><p>过去了游戏界主流是主机游戏，今天的游戏主流变成了移动网络移动游戏。</p><p>前者主要和机器玩，后者主要和人玩。</p><p>2021年，全球移动游戏规模约为900亿美元，而主机游戏规模约600亿美元。</p><p>必须承认，对于更多人而言，和人玩，比和机器玩要有意思的多。</p><p>无论是王者荣耀中的激烈对战，还是挑一挑里简单的比拼分数，当游戏的对象变成人的时候，玩家的参与会有更丰富的层次。</p><p>与人玩，其乐无穷。</p><h2 id="6"><a href="#6" class="headerlink" title="6"></a>6</h2><p>互联网竞争的最末梢——社区团购，依靠的依然是人。</p><p>团长是社区团购最重要的资产。</p><p>作为用户与团购平台之间很重要的一个纽带，好的团长必须是一个复合型人才——他既要有调动成员下单的号召力，还得有值得成员信任的亲和力，同时得具备处理争议的协调力。</p><p>没有对人的透彻理解，做不好团长。</p><p>而不重视团长，做不好社区团购。</p><p>中国互联网最下沉的竞争最后还是回到了人的层面。</p><h2 id="7"><a href="#7" class="headerlink" title="7"></a>7</h2><p>新东方肯定有比董宇辉专业更强的老师，但为什么董宇辉火了？</p><p>是因为他的英语发音最标准吗？是因为他介绍商品最敬业吗？</p><p>当然不是。</p><p>是因为他展示了作为一个人“腹有诗书气自华”的部分。</p><p>董宇辉的火，是人的胜利，不是算法的胜利。</p><p>算法不是万能的，算法如果真的如此强悍，那么它一定会在6个月前董宇辉开始播的时候就将他挑选出来。</p><p>没错，是人选择了董宇辉，而不是算法。</p><h2 id="8"><a href="#8" class="headerlink" title="8"></a>8</h2><p>拼多多为什么崛起？</p><p>本质上在于它用“拼”这个动作将下沉市场的“人”连接到了一起。</p><p>在拼多多的早期，那种1块钱拼一个塑料盆的引流品在下沉人群众的潮水般传播是中国互联网的一大奇观。</p><p>彼时的淘宝重点在“货”，而拼多多看到了“人”。</p><p>拼多多看到了特定的人背后没有被满足的特定需求，而这些需求正是中国电商在漫长岁月中最被忽视的部分。</p><p>今天的拼多多，希望你不忘初心，人心如果伤了，就回不来了。</p><h2 id="9"><a href="#9" class="headerlink" title="9"></a>9</h2><p>Keep在健身领域深耕了多年，但最近运动的风头和人气却扑向了刘畊宏。</p><p>和Keep中标准的“您已跑步2公里，用时10分52秒，最近1公里用时5分37秒”语音播报相比。</p><p>还是刘畊宏“腰间的赘肉咔咔掉，人鱼线、马甲线我想要”和《本草纲目》更有意思一些。</p><p>为什么极其枯燥的刑法在罗翔老师的嘴里变得如此生动？</p><p>因为罗翔老师讲的并不是刑法，而是人性。</p><p>为什么简单的科技产品在何同学的视频里变得如此妙趣横生？</p><p>因为他关注人的关注，懂得人的兴趣点，没有在参数和跑分中迷失自己。</p><p>人，可以让枯燥变得生动。</p><h2 id="10"><a href="#10" class="headerlink" title="10"></a>10</h2><p>微信支付如何逆袭的？</p><p>支付宝专注在支付，微信支付却看到了人。</p><p>一个小小的红包创新成为了中国互联网商战史上永远的经典。</p><p>水滴保险如何做起来的？</p><p>它关注到了保险之外的人，创造性地解决了特定人群的刚需。</p><p>它没有先关注保险，而是先看到了人。</p><p>网易云音乐如何崛起的？</p><p>QQ音乐专注音乐，网易云音乐却看到了音乐背后的人。</p><p>一条条直击人心的评论让音乐产品超越音乐本身。</p><p>人，才是需求的出发点。</p><h2 id="11"><a href="#11" class="headerlink" title="11"></a>11</h2><p>徐志斌老师写过一本书叫《小群效应》</p><p>这本书中道出了一个重要的现象——“人人都想进大群，人人都活跃在小群”。</p><p>没错，社群本身就是一个链接人和人的工具。</p><p>为什么小群比大群反而表现出更高的效率呢？</p><p>这背后的逻辑在于在于——</p><p>相比小群，大群的媒体属性更强，大群的沟通更像是开大会，而小群更像是三五好友聚会。</p><p>本质上，小群更重视作为个体的人。</p><p>它能充分地调动人这个主体的积极性和参与度，也能给个体的人以更多的反馈。</p><p>小群能量大。</p><h2 id="12"><a href="#12" class="headerlink" title="12"></a>12</h2><p>和机器拼效率，人是拼不过的。</p><p>2017年10月，耐克投资了了一家名为Grabit的机器人初创公司，今天，该公司机器人制鞋效率比人高20倍，8小时可以制造600双鞋。</p><p>2020年，富士康在大陆工厂部署了4万台制造机器人，于是，富士康昆山工厂的6万名工人就此下岗。</p><p>ETC的大规模应用，让不少高速公路的收费员下岗；</p><p>摄像头的大规模应用，让不少保安走下了工作岗位；</p><p>语音识别的大规模应用，让不少速记员失去了工作；</p><p>在未来，自动驾驶会让司机失业，AI会让初级会计师失业，机器翻译会让人工翻译失业……</p><p>在未来，只要决策时间不超过1分钟的工作，基本上都可能被机器替代。</p><p>那么，人还剩下什么？</p><p>一位美女通过最现代的人工智能设备找男朋友，输入条件是：1、要帅；2、有车。</p><p>人工智能给出的结果是——象棋。</p><p>这个段子中机器的缺陷，恰好就是我们作为“人”的最后优势。</p><p>当算法不起作用的时候，心法可以。</p><h2 id="13"><a href="#13" class="headerlink" title="13"></a>13</h2><p>2016年3月，微软在Twitter上开发了一个名为Tay的AI 聊天机器人，该机器人通过挖掘网民对话而构建。</p><p>Tay的第一句话是“ hellooooooo world !!!”。</p><p>起初它善解人意、活泼可爱，和Twitter上的网民聊得非常开心。</p><p>然而，在短短的12小时之后，Tay从一位友好的机器人变成了一个满嘴脏话、充满种族主义的恶魔。</p><p>说出了“女权主义者都应该死在地狱里烧死”。</p><p>微软经历了一场公关噩梦，被迫迅速将Tay关闭，这离它上线还没有超过24小时。</p><p>算法再先进，算不出人性的弱点。</p><h2 id="14"><a href="#14" class="headerlink" title="14"></a>14</h2><p>当下的中国，人也在发生巨大的变化——</p><p>第一大确定趋势是老龄化，日本年龄结构的今天就是我们的明天，如何面对未富先老？</p><p>第二大确定趋势是家庭小型化，少子化即便在开放生育后依然很难扭转，如何面对普遍的孤独？</p><p>第三大确定趋势是代际差异大，在经济和技术的冲击下，转型中国的一代人和另一代人差异超过了历史上任何一个时期，如何面对代际冲突？</p><p>……</p><p>人的变化趋势还有很多，人是动态的，也是复杂的。</p><p>这些变化中，有挑战，也有机遇。</p><p>无论是企业和个人，如果能真正洞察这些关于“人”的变化，则可以收获未来中国的“人心红利”。</p><h2 id="15"><a href="#15" class="headerlink" title="15"></a>15</h2><p>为什么会有“困在系统里”？</p><p>因为只关注算法，不关注人。</p><p>为什么会有996、007？</p><p>因为只关注效率，不关注人。</p><p>为什么会出现”将黑人识别成黑猩猩“这样的Bug？</p><p>因为只算图形，不算“人”。</p><p>乔布斯说，要站在科技与人文的十字路口，今天的巨头们在科技这条单行线上一路狂奔，却逐渐与人文渐行渐远。</p><h2 id="16"><a href="#16" class="headerlink" title="16"></a>16</h2><p>明白人的重要性，对于我们在数字时代生存非常重要——</p><p>即便已经可以文字合成语音甚至视频了，但内容平台最受欢迎的依然还是人最生动、最性感、最沙雕的手机拍摄的短视频。</p><p>即便电影中CG动画已经出神入化，但人们记住的，还是荧幕上那个活生生的有血有肉的脸庞。</p><p>即便机器人可以运营微信群了，但你天天看的，依然是那些有情感、有脾气、有态度的人唠嗑的群。</p><p>机器关注的是效率，人关注的是温度、情绪价值、意义资产。</p><p>所以，无论是企业还是个人，不要忘了我们作为“人”的那一部分。</p><p>关注人，关注人的感情、关注人的孤独、关注人的欲望、关注人性中的优缺点，关注人最细微的变化。</p><p>人是一种更高级的“算法”。</p><p>这种算法，法力无边。</p>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>意义</title>
      <link href="/2022/10/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-10-14-%E6%84%8F%E4%B9%89/"/>
      <url>/2022/10/14/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-10-14-%E6%84%8F%E4%B9%89/</url>
      
        <content type="html"><![CDATA[<br><br><div style="text-align:center;"><iframe src="//player.bilibili.com/player.html?aid=552315351&bvid=BV1Ki4y1y7HC&cid=550103819&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"  height=398 width=610> </iframe></div><p>夜半回家，拖着疲惫的身体，在这2022年的末期，似乎一切都显得那么无奈。看着刚到的油盐酱醋，和同学出门买了三个土豆，一棵葱以及十个馒头。在微弱的交流中一锅炒土豆，草草的完成了。</p><p>十月一来到的济南，半个月了，从这锅炒土豆丝开始，生活渐渐的有了烟火的气息。找工作，面试的疲惫让身心劳累不堪。今天面试，一切都很好，看着面试官，看着外面高楼层起，车如流水，有那么一瞬间自己好像明白了什么。我好像知道了这次面试的结局，我开始了自由发挥，侃侃而谈着自己的一切。也许他们需要的不是我。</p><p>我自命清高，却难以摆脱世俗。父母一直告诉我诚以待人，可是我慢慢的发现，生活的回馈却不是真诚。我在水泥浇筑的世界里妄求人生的意义，到现在我才发现我找到的那些意义都是虚无。</p><p>我焦急的准备着另一场面试，脑中不断复现我之前和面试官的提问的所有问题。我很庆幸他们没有选择我，因为他们让我认识到我又太多的不足。我在这一次次的打击中变得愈加的强大，我给自己披上了一套盔甲，任凭风吹雨打，岿然不动。面试很愉快，出乎意料的没有问道技术的问题，原因是技术去忙碌了。他们也愿意接受我。我心存感激的同时，也有些怅然若失的落寞。我怕达不到他们真正的需求。一切随缘，但愿一切安好。</p><p>只有夜晚才是真正属于自己的。悲伤，喜悦在这时显得万分的珍贵。渴望夜晚的时间再长一些，渴望入眠的时间再快一些，渴望梦境再美一些。</p><p>我再大学花了很长一段时间寻求人生的意义。现如今的我回首望去，可怜而又可笑。难怪听到老师，学长说“大学是你人生中最美的一段时间了。”现在，我又操着这种口吻对我的学弟去说。真的是好有意思。买入社会的那一刻起，我的坚持像漫头飞舞的纸片，被雨水打落，支离破碎。所以说人生的意义到底是什么呢？我没有过答案。</p><p>我们常常否认很多人生的意义，但又不断追问它到底是什么。生活的本质是不甘心的，所以我们会虚构很多情调，让自己变得有趣开心。但是这样无非是让自己远离那个让你没人能够回答的问题。</p><p>人生的意义对于个人来说是什么我不知道，但至少不是让你无休止的去思考它。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为404界面加上一言api</title>
      <link href="/2022/10/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2022-10-12-%E4%B8%BA404%E7%95%8C%E9%9D%A2%E5%8A%A0%E4%B8%8A%E4%B8%80%E8%A8%80api/"/>
      <url>/2022/10/12/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/2022-10-12-%E4%B8%BA404%E7%95%8C%E9%9D%A2%E5%8A%A0%E4%B8%8A%E4%B8%80%E8%A8%80api/</url>
      
        <content type="html"><![CDATA[<p>忽然发现这个博客的404界面有些简单，但是很喜欢这种极简的风格但总感觉少了些什么，想了想之前搞得一言的api。索性加上他，锦上添花一点。</p><p>首先先选一言的api，因为之前这种东西挺火的，有很多大佬开发出来，了，放到服务器上面供咱这种菜鸡使用了。因为我喜欢古诗词，所以选的古诗词的api</p><p>这个是人家的官网  <a href="https://gushi.ci/">https://gushi.ci/</a></p><p>其实官网上有很多的教程，就是看自己会不会用了。但我是在基础上微调的，就没用。这个是json格式的api，这里用的浏览器json解析插件是<strong>json-viewer</strong></p><p><a href="https://v1.jinrishici.com/all">https://v1.jinrishici.com/all</a></p><p>首先先对这个简单分析一下</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;冲波突出人齐譀，跃浪争先鸟退飞。&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;origin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;竞渡诗 / 及第后江宁观竞渡寄袁州剌史成应元&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;卢肇&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;古诗文-节日-端午节&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>首先这里面有content、origin、author、category这几个数据，我们用到的就是前三个，很容易理解，这三个分别是诗句，来源以及作者。然后就开始着手写了。<br>先引入jquery</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入jQuery--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>再然后就开始对json文件进行解析，这里用的是ajax</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 异步ajax  古诗词</span></span></span><br><span class="line"><span class="language-javascript">    $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">&#x27;https://v1.jinrishici.com/all&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;.text&quot;</span>).<span class="title function_">text</span>(data.<span class="property">content</span>);  <span class="comment">// 获取古诗词内容</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (data.<span class="property">author</span> || data.<span class="property">origin</span>)&#123;  <span class="comment">// 如果来源不为空 随便一个有就就进行显示</span></span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;.author&quot;</span>).<span class="title function_">text</span>(data.<span class="property">author</span>);</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;.lai&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;《&quot;</span>+data.<span class="property">origin</span>+<span class="string">&quot;》&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;.author&quot;</span>).<span class="title function_">hide</span>();<span class="comment">// 隐藏来源</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 淡入显示</span></span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;.show-sentence&quot;</span>).<span class="title function_">fadeIn</span>(<span class="number">4000</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接下来是显示部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配合css设置淡入的显示和字体以及其他的属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;show-sentence&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这里接受显示的古诗词 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 这里若是判断作者名或者有的话就会显示 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span>&gt;</span></span><br><span class="line">          ———— <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;lai&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后的话，如果你想显示美观一下的话，采用哪个404的颜色，然后仿照一下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 一言 */</span></span><br><span class="line">    <span class="selector-class">.text</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>:<span class="number">#666</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">      <span class="attribute">font-weight</span>: bold;</span><br><span class="line">      <span class="attribute">font-family</span>: STHeiti;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.source</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>:<span class="number">#666</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">      <span class="attribute">font-weight</span>: bold;</span><br><span class="line">      <span class="attribute">padding-left</span>: <span class="number">40%</span>;</span><br><span class="line">      <span class="attribute">font-family</span>: STHeiti;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.show-sentence</span> &#123;</span><br><span class="line">      <span class="attribute">margin-top</span> : <span class="number">130px</span>;</span><br><span class="line">      <span class="attribute">display</span>: none;    <span class="comment">/* 开始隐藏div */</span></span><br><span class="line">      <span class="attribute">text-align</span>: center;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NGINX-应用-误删nginx.pid</title>
      <link href="/2022/07/05/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2022-07-05-NGINX-%E5%BA%94%E7%94%A8-%E8%AF%AF%E5%88%A0nginx.pid/"/>
      <url>/2022/07/05/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2022-07-05-NGINX-%E5%BA%94%E7%94%A8-%E8%AF%AF%E5%88%A0nginx.pid/</url>
      
        <content type="html"><![CDATA[<p>2022年7月5日</p><p>因为刚修改了nginx的配置文件,清理了一下logs的文件夹。一时手贱，使用了<br><code>rm -rf *</code><br>在重启nginx的时候直接报错了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">nginx: [error] open() <span class="string">&quot;/usr/local/nginx/logs/nginx.pid&quot;</span> failed (2: No such file or directory)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>提示打开失败，没有这个文件或者目录。简单分析来说就是没有nginx.pid这个文件。</p><h5 id="修复方法"><a href="#修复方法" class="headerlink" title="修复方法"></a>修复方法</h5><p>1.我们可以杀死所有nginx进程，运行命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall nginx </span><br></pre></td></tr></table></figure><p>2.如果报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-bash: killall: 未找到命令</span><br></pre></td></tr></table></figure><p>运行命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install psmisc          </span><br></pre></td></tr></table></figure><p>安装完毕后。然后重新运行命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall nginx </span><br></pre></td></tr></table></figure><p>3.这时在sbin目录下，重启nginx就可以正常运行了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人生没有一劳永逸</title>
      <link href="/2022/06/28/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-06-28-%E4%BA%BA%E7%94%9F%E6%B2%A1%E6%9C%89%E4%B8%80%E5%8A%B3%E6%B0%B8%E9%80%B8/"/>
      <url>/2022/06/28/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2022-06-28-%E4%BA%BA%E7%94%9F%E6%B2%A1%E6%9C%89%E4%B8%80%E5%8A%B3%E6%B0%B8%E9%80%B8/</url>
      
        <content type="html"><![CDATA[<p><strong>文&#x2F;雨令</strong></p><p>上海近3个月的隔离，过得比我想象中的快。</p><p>生活很忙，又好像什么也没有留下。</p><p>唯一想做的，就是去旁边的公园里散散步，然后坐在长椅上吹一吹久违的夏天的风……</p><p>然后，接着回归生活的忙碌，毕竟人生没有一劳永逸。</p><p>有时候你现在的艰难，也许是在为过去的安逸买单。</p><h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><p>看到朋友圈里一段有趣的对话。</p><p>同学A：早知道挂科这么麻烦，当初就该好好学习的！</p><p>同学B：这句话我也想说，早知道考研这么麻烦，当初就应该好好学习，不挂科我就能保研了！</p><p>同学A：哇，这么厉害，不挂科就能保研。</p><p>同学B：我们班保研的那个都直博了，当初就应该好好学习！那个同学说，不是我有多厉害，我只是保持了高中的状态，是你们堕落了而已。</p><p>同学A：哎，真是惭愧啊……</p><p>从大一大二的贪玩，到大三的懵懵懂懂，再到大四的心慌和焦虑，很多人一路走来，最后的艰辛，往往都源自过去的舒适和懒散。</p><p>我想起自己刚毕业的时候，进了一家外企，非常舒适，每天干的都是重复的事儿，日复一日，年复一年。</p><p>我一开始也是很喜欢这样的工作氛围，没有压力，非常惬意，身边的同事也都安于现状，平易近人。</p><p>直到过了两三年，公司开始裁人，我才听说公司在中国的发展并不顺利。</p><p>这时候，我终于意识到自己工作了几年，好像还没有能够拿得出手的专业技能，代码写得不怎么样，连系统的工作流程都没有掌握。</p><p>我有点慌了，开始反省自己过去的种种得过且过。</p><p>那是一段对我来说异常艰难的日子——</p><p>每天完成日常工作之后，我就开始加班加点地给自己补课，怎么编写测试用例，怎么搭建测试框架，怎么完善工作流程，过去两三年该做的事情，该积累的东西，我紧急慢赶地想要在半年内完成。</p><p>最后，在公司不再和我续约的时候，我拿到了一笔赔偿金，同时也跳到了一家更好的公司。</p><p>看似一次完美的自我救赎，却给了我一个很大的教训——</p><p><strong>所有你现在的艰辛，其实都是在为过去的安逸买单。</strong></p><p>如果我从一开始就认真工作，循序渐进地积累能力，而不是临时抱佛脚地走捷径，那我现在取得的成绩肯定可以更好。</p><p>所有当下的安逸和懒散，都潜伏着未来可能的艰难和痛苦。</p><p>你现在在学习上偷懒，肯定不曾料到以后得为补考付出更大的心力；你现在在职场上得过且过，肯定不曾想过五年十年之后自己得为找一份温饱的工作而四处奔波。</p><p>这就像你跟银行借了一大笔钱去逍遥自在，却要花很多很多年去把这笔债还清。</p><p><strong>在面临选择的时候，人们往往总会选择最容易的路，直到一步步把自己逼到无路可走。</strong></p><h1 id="2"><a href="#2" class="headerlink" title="2"></a>2</h1><p>为什么有的人可以在浮躁散漫的大学时光里保持高中努力拼搏的状态，而有的人却碌碌无为而不自知？</p><p>为什么有的人可以在职场上独当一面不断精进，而有的人却一年工作经验用了十年？</p><p>是什么在驱动着那些从容厉害的人不安于当前的享受，而愿意踏出舒适区，挑战自己的惰性呢？</p><p>在一次和朋友的聊天里，我找到了一些蛛丝马迹。</p><p>朋友最近回了一次老家，见了几个老同学，还特别去看望了高中时候的班主任。</p><p>那位班主任是一个很有修养的知识分子，跟朋友说起她的女儿在香港大学刚读完了博士后，现在正准备进入一家全球性科研机构做自己喜欢的课题研究。</p><p>朋友听到这个好消息之后很感慨，自己毕业之后就没有想过学习的事情了，而别人在二十来岁的年纪就已经读完了博士后，而现在依然热爱学习。</p><p>后来在跟老师的交流中，她发现，<strong>人与人之间生活状态的差别，其实来自于各自不同的生活目标。</strong></p><p>当一个小孩在中学努力奋斗的时候，他会问父母：“到底什么时候才能不那么努力了？”</p><p>很多父母的答案是——“等你考上大学就好了。”</p><p>我相信大部分人的父母给出的答案都是这种，所以我们从小就种下了一个简单而肤浅的目标——「考上大学」。</p><p>考上大学之后的目标呢？没有了。</p><p>这也是为什么我们考上大学之后就松懈了，整个人像是脱了缰的野马，逃出笼子放飞的小鸟，撒了欢地放纵，享受，因为大部分人已经没有了为之奋斗的目标。</p><p>而那位老师和其他父母很不一样，她给她女儿的答案是——「终身学习」，也就是说，<strong>你的努力你的奋斗应该成为一种生活的常态，一种人生的习惯，而不是达到了一个目标之后你就可以一劳永逸，停止不前。</strong></p><p>这就是朋友老师的女儿能够不断地取得优异成绩的秘密，她不仅仅拥有「考上大学」这一个目标，而是有着一个又一个新的目标，大学毕业之后去留学，留学之后读博，读博之后去做研究，这些目标为她持续的努力奋斗赋予了意义和理由，最终让她能够跨越很多人画地为牢的舒适区。</p><p>给自己的人生持续地设立新的目标，这其实并不是一件太难的事情，可我们很多人却做不到。</p><p>有的人太懒惰，不愿意思考自己的未来，有的人期待别人给自己目标，就像当年父母督促我们考上大学一样。</p><p><strong>没有目标的人生，就容易随波逐流，得过且过，也容易让我们在本该努力的年纪安于舒适，不思进取。</strong></p><p>而当你有了一个目标的时候，你就知道自己每天的生活到底是为了什么，你就有了去做一些有意义的事情的动力。</p><p>所以你要不断地为自己的人生设置新的目标，你可以看看周围优秀的人，他们在追求什么，同时，也要扪心自问，自己想要什么，尽可能想得长远一点，三年，五年，十年，二十年之后，你期望自己成为什么样子，做什么样的事情，过什么样的生活？</p><p>大多数人为了当下的舒适安逸逃避思考，却不料未来的艰辛总会给予他们沉重的回击。</p><p>很多时候，每个人心底都要有一束光，持续地照亮前行的路。</p><h1 id="3"><a href="#3" class="headerlink" title="3"></a>3</h1><p>有了目标，就是有了一个明确的方向，但这还不够，你还需要懂得延迟满足，抵制周围的各种诱惑，持续地去做那些契合你目标的小事。</p><p>很多人会因为一时冲动而努力折腾那么一下，可一旦三分钟热情过去，往往就原形毕露，该吃吃，该喝喝，该睡睡。</p><p>有同事一直跟我说，他不喜欢现在的工作，想要辞职去做独立设计师。</p><p>结果今年都快过完了，他那独立设计师的目标却还没有半点进展。</p><p>如果你细究下来，就会发现，他一直在做着和目标相反的选择。</p><p>当可以钻研设计软件也可以看看娱乐节目的时候，他选择了刷剧；当可以积累设计技能也可以跟朋友约饭嗨皮的时候，他选择了玩乐；当可以熬夜赶图稿也可以熬夜刷朋友圈的时候，他显然选择了后者。</p><p>生活中，我们总是在不断地做着选择，可大部分时候，我们的选择是及时行乐，舒适为要，也就是这些本能的选择，最后让我们的未来一事无成，艰难辛苦。</p><p>我们总是喜欢感叹这个时代越来越难了，阶层固化了，做不做一些事情都改变不了什么。</p><p>可是，现实并非如此，<strong>成功是越来越难了，但失败却越来越容易，你今天不尽力做好该做好的事情，那就等着明天心存悔意地收拾残局。</strong></p><p>听过一个别人的故事，她有着让人惊叹的人生。</p><p>刚到北京的时候，她不过是从外地辛苦考上来的万千学子中的一员。但大学四年下来，她考过了英语专八，兼修了国际关系专业，并利用所有的双休日，节假日走遍了北京，甚至全国有趣好玩的地儿。</p><p>而之后，等她在一次国际派对上认识了心仪的人，旧时学过的英语，走过的大街小巷，就都派上了用场。她跟外交官身份的他，相谈甚欢，毫无障碍，她还带着他游遍中国。</p><p>后来他被派去别的国家，因为尚未结婚，她并不能以伴侣身份同往，所以她立马申请了那个国家的大学研究生，并最终被成功录取，顺利解决了两人分开的问题。</p><p>如果你看过优秀的人怎么做事情，就会明白，美好的未来是一步一步脚踏实地走出来的。</p><p><strong>而一切你看得见的容易，都来自于一个人在背后持续地发力，把一件件并不容易的事情做好。</strong></p><p>当你在朝着目标一步步迈进的时候，请停下来想一想，你现在做的事情，是那些暂时让你感受到安逸舒适的事情，还是那些并不容易但却能够给你带来成长的事情？</p><h1 id="4"><a href="#4" class="headerlink" title="4"></a>4</h1><p>李诞曾在节目里说——“做废物是需要天赋的。”</p><p>想做废物，想要舒适，想要一路躺赢，如果你没有天赋，那你至少得要有积累。</p><p>就像李诞他自己，看起来无所事事，吊儿郎当，像是废物一个，可在成名之前他有多少积累，你去看看他的简历就知道了——南方人物周刊，奥美广告公司，今晚80后撰稿人，每天思考写作……任何一个拿出来看都不简单。</p><p><strong>普通人的崛起，没有什么窍门，就是你要持续地为自己设置好一个个目标，然后把握当下，坚定不移地靠近它们。</strong></p><p>如果你把时间放在吃饭，刷剧，逛淘宝，玩游戏这些事情上，也许你当时会很开心很满足，但它们却无法对你的人生产生更深远的影响，无法在未来生长出更多的成果，反而，它们会让你变得懒散，变得颓废，最终让你未来的生活变得艰辛而平庸。</p><p>而如果你把时间放在读书，学习，锻炼，专注兴趣，去做一些长线对未来有价值的事情，也许你当下会很烦躁，会很难受，但这类事情的影响和效用却会在长期的积累之下显现出来。</p><p>这些成长性的行动和思考会借由时间的加持，让你的目标和理想生根发芽，在某个时刻变幻成改变你人生走向的黑天鹅事件。</p><p>人生并没有一劳永逸，有的只是一个人日复一日地持续前行。</p><p>每个人最大的不一样也许只是习惯上的不同。</p><p>那些不同的习惯塑造了每个人不一样的生活状态，进而构建了每个人不一样的人生。</p><p>有时候，我们也会累，那就偶尔在公园的长椅上坐坐，小憩一会，然后继续前行。</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">指引你前行不是别人说什么，而是你想要到达的地方和你为它做了什么。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 文章收藏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>你是从什么时候开始放弃自由的呢?</title>
      <link href="/2021/08/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-08-03-%E4%BD%A0%E6%98%AF%E4%BB%8E%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%BC%80%E5%A7%8B%E6%94%BE%E5%BC%83%E8%87%AA%E7%94%B1%E7%9A%84%E5%91%A2_/"/>
      <url>/2021/08/03/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-08-03-%E4%BD%A0%E6%98%AF%E4%BB%8E%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%BC%80%E5%A7%8B%E6%94%BE%E5%BC%83%E8%87%AA%E7%94%B1%E7%9A%84%E5%91%A2_/</url>
      
        <content type="html"><![CDATA[<p>因为疫情缘故，层层的封锁下，也是封锁住了自己的内心，但是尽管把限制自己的全都封锁，唯一不能封锁住我们的只剩下思想了。一觉醒来，便对自己提出了这个问题。</p><p>如果针对这个问题非要较真的话，我们从来到这个世界上就已经放弃了自由。把自己困于自己的世界之中开始了牙牙学语。从这里便说明，这里的自由指的是意志自由而并非行动自由。</p><p>但是，为什么非要那么较真呢，我们的目的是在问题探索的过程中寻找真正的自己，在思考问题的过程中认识到自己。如果当真的浑浑噩噩的度过这一天，那完完全全是没有任何意义的。学会提出问题也是一个很重要的很重要的能力。</p><p>晚上洗脸的时候，我真真切切的感受到了一点。因为我有个习惯是洗完澡之后才洗脸，甚至，这都已经成为了一种习惯。我想了想，我完完全全可以不用洗脸的。同理，把这个问题换成与之相对的问题，答案或许显而易见“我们是从什么时候开始被束缚住呢？”</p><p>当我想到的时候，答案也随着问题在我的脑中浮现出来。</p><p>“在我们开始学会明辨是非的时候。”</p><p>因为学会了明辨是非，我们开始知道了事物的对错，知道了什么事情该做什么事情不该做。我们从那一刻起就开始了犹豫，开始了怯懦。做得好会被人夸家，但一旦选错了甚至不作为就被会厌恶，乃至恶语相向。从明辨是非开始，即使知道这个是错的，但奈何于对方的实力，我们还是选择了人多的那一边。那一刻起，自由，就已经离我们而去了。</p><p>如果我所有的意志是时间的积累，完全是由传统、文化、经验、限制、家庭背景、种族以及信仰所形成的，只能在已知领域中起作用，那又有什么自由可言呢？</p><p>在《自由论》中，弗里特约夫·博格曼概述了他所谓的我们“对自由的矛盾看法”。这种看法的一个方面是一种常见的观点，即自由是美好的。正是自由赋予了人类高贵的地位，并把我们从自然界中分离出来，并且，每一个社会中的每一个成员都把自由视作理所当然的目标，即便他们不理解这个词，或从未思考过自由的含义。追求自由的冲动是无可置疑的，自由的价值是绝对的，甚至比生命还重要。</p><p>但这种看法本身就已经导致了一种两难的处境：一方面，我们生来是自由的；另一方面，我们还渴望自由。因此，我们应当区分“内在自由”和“外在自由”。也就是说本身的自由和追求的自由，说到底还是意志的自由和行动的自由。</p><p>你见过大海吗？有时候，大海风平浪静，空气似乎屏住了呼吸，海面上倒映着满天的繁星，一切都显得那么静谧，世界一片太平。然而，平静的海面之下却是暗流涌动。实际上，海洋如此辽阔，永远都不可能平静的。</p><p>海水永远在涌动，从不停止，稍有动静就会打破海面的安宁、静谧。我们的心灵也是如此，永远不可能彻底平静。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>随笔记—被时间改变的我们</title>
      <link href="/2021/06/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-06-30-%E9%9A%8F%E7%AC%94%E8%AE%B0%E2%80%94%E8%A2%AB%E6%97%B6%E9%97%B4%E6%94%B9%E5%8F%98%E7%9A%84%E6%88%91%E4%BB%AC/"/>
      <url>/2021/06/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-06-30-%E9%9A%8F%E7%AC%94%E8%AE%B0%E2%80%94%E8%A2%AB%E6%97%B6%E9%97%B4%E6%94%B9%E5%8F%98%E7%9A%84%E6%88%91%E4%BB%AC/</url>
      
        <content type="html"><![CDATA[<p>只记得那是个传奇的年份，我的高中三年，多如牛毛的软件从我们的视野中升起，像一颗冉冉升起的太阳，虽然不耀眼，但已经出具锋芒。</p><p>这是2021年，大概在五年前，人们口中没有口口说的哔哩哔哩，也没有什么深夜网易云，那时候，知乎也是刚刚进入了我的视野。</p><p>想必他们为了公关也费了很大的力气吧，精选留言，报纸宣传，几乎随处可以见到它的身影。我拿起一本《读者》，上面那些美言杂句有着知乎的身影。我看视频，上面有着人们说着的网易云。</p><p>那些悲惋凄惨，烙印着许多文艺青年的过往。那些美妙绝伦的句子，也刺痛了许多人的内心。也罢，那个时候，多是高中的生活罢了，压力软绵而又无力，这些软件给了好多人一个心灵的寄托，也给了一个温柔的港湾。因为互不认识，可以吐露心声。因为互不认识，可以听歌掩面而泣他人不知。</p><p>渐渐的，所有的一切都变了味道。广告，硬性植入，等等，把用户挤得没有了喘息的余地。那些真正热爱这个平台的用户们还在坚持着固有的阵地。</p><p>人们肆意的谩骂，说什么变了味道，招了安。后来我渐渐的才发现，这几年来变得不止是那些所谓的软件，还有我们自己。我们变得越来越尖酸刻薄，眼里容不得别人的意思错误。我们变得越来越懒，懒到自己的失败堆积如山而不动。</p><p>我们是长大了，也渐渐地远离了当年的自己，随着这个社会的大齿轮渐渐的打磨自己的形状，软件也是，毕竟他们的背后也是人，为人父母，养一个家并不容易。不招商，他们很快就会消失在我们的视野。是非成败，总归是那无形齿轮的驱使。</p><p>毕竟，网络上人们的忘性大，可是，我仍旧记得那个庆阳市那个跳楼的女孩，我仍旧记得楼下人们说着“怎么还不跳啊”的无耻嘴脸，三观的扭曲把他们扭曲成一个个嗜血的野兽，在人类社会中放肆横行。</p><p>一切的悲哀，源于人们自己的不自知不自觉。更悲哀的是，人们对自己的自知自觉而骄傲。</p><p>无奈，可悲。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx 常用配置清单</title>
      <link href="/2021/05/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2021-05-30-Nginx_%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95/"/>
      <url>/2021/05/30/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2021-05-30-Nginx_%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<hr><p>title: Nginx 常用配置清单<br>updated: 2021-05-30 13:42:41Z<br>created: 2021-05-30 13:42:41Z</p><hr><p>Nginx 是一个高性能的 HTTP 和反向代理 web 服务器，同时也提供了 IMAP&#x2F;POP3&#x2F;SMTP 服务，其因丰富的功能集、稳定性、示例配置文件和低系统资源的消耗受到了开发者的欢迎。本文总结了一些常用的 Nginx 配置代码，希望对大家有所帮助。</p><h4 id="侦听端口"><a href="#侦听端口" class="headerlink" title="侦听端口"></a><strong>侦听端口</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  # Standard HTTP Protocol</span><br><span class="line">  listen 80;</span><br><span class="line">  # Standard HTTPS Protocol</span><br><span class="line">  listen 443 ssl;</span><br><span class="line">  # For http2</span><br><span class="line">  listen 443 ssl http2;</span><br><span class="line">  # Listen on 80 using IPv6</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  # Listen only on using IPv6</span><br><span class="line">  listen [::]:80 ipv6only=on;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="访问日志"><a href="#访问日志" class="headerlink" title="访问日志"></a><strong>访问日志</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  # Relative or full path to log file</span><br><span class="line">  access_log /path/to/file.log;</span><br><span class="line">  # Turn &#x27;on&#x27; or &#x27;off&#x27;</span><br><span class="line">  access_log on;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="域名"><a href="#域名" class="headerlink" title="域名"></a><strong>域名</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  # Listen to yourdomain.com</span><br><span class="line">  server_name yourdomain.com;</span><br><span class="line">  # Listen to multiple domains server_name yourdomain.com www.yourdomain.com;</span><br><span class="line">  # Listen to all domains</span><br><span class="line">  server_name *.yourdomain.com;</span><br><span class="line">  # Listen to all top-level domains</span><br><span class="line">  server_name yourdomain.*;</span><br><span class="line">  # Listen to unspecified Hostnames (Listens to IP address itself)</span><br><span class="line">  server_name &quot;&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="静态资源"><a href="#静态资源" class="headerlink" title="静态资源"></a><strong>静态资源</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name yourdomain.com;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /path/to/website;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a><strong>重定向</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name www.yourdomain.com;</span><br><span class="line">  return 301 http://yourdomain.com$request_uri;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name www.yourdomain.com;</span><br><span class="line">  location /redirect-url &#123;</span><br><span class="line">    return 301 http://otherdomain.com; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a><strong>反向代理</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name yourdomain.com;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://0.0.0.0:3000; </span><br><span class="line">    # where 0.0.0.0:3000 is your application server (Ex: node.js) bound on 0.0.0.0 listening on port 3000</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a><strong>负载均衡</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">upstream node_js &#123;</span><br><span class="line">  server 0.0.0.0:3000;</span><br><span class="line">  server 0.0.0.0:4000;</span><br><span class="line">  server 123.131.121.122;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name yourdomain.com;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://node_js; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="SSL-协议"><a href="#SSL-协议" class="headerlink" title="SSL 协议"></a><strong>SSL 协议</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 443 ssl;</span><br><span class="line">  server_name yourdomain.com;</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate /path/to/cert.pem;</span><br><span class="line">  ssl_certificate_key /path/to/privatekey.pem;</span><br><span class="line">  ssl_stapling on;</span><br><span class="line">  ssl_stapling_verify on;</span><br><span class="line">  ssl_trusted_certificate /path/to/fullchain.pem;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">  ssl_session_timeout 1h;</span><br><span class="line">  ssl_session_cache shared:SSL:50m;</span><br><span class="line">  add_header Strict-Transport-Security max-age=15768000;</span><br><span class="line">&#125;</span><br><span class="line"># Permanent Redirect for HTTP to HTTPS</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name yourdomain.com;</span><br><span class="line">  return 301 https://$host$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>说起放弃</title>
      <link href="/2021/01/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-01-26-%E8%AF%B4%E8%B5%B7%E6%94%BE%E5%BC%83/"/>
      <url>/2021/01/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-01-26-%E8%AF%B4%E8%B5%B7%E6%94%BE%E5%BC%83/</url>
      
        <content type="html"><![CDATA[<p>我们有时候把自己认知错了，很多当我们想放弃的时候，那只是种错觉。 你不是想放弃，你是只是想休息，而你总是想用放弃代替休息，动不动就放弃，是很吓人的。 所以你每次想放弃的时候就和自己说，我可能感觉错了，我只是想休息一下，休息一天到两天继续前进。</p><p>你可以发个朋友圈抱怨说自己难，但一定会记得删除。你把难处记在你的小日记中，毕竟说出来总比一昧的闷在自己的心里要好手很多。</p><p>也许生活很给我们很多的压力，可以上火，但一定要记得按时吃药。我总以为我的身边没有人会关心会体贴我。但当我真正随手发了一个抱怨的朋友圈的时候，还没到五分钟，就删除了，我的父母，老师，同学，都来问我是什么情况，虽然不能说出口，但心里难免会很感动。</p><p>你看吧，你所人认为的孤独，只是你自己的孤独。当你想放弃的时候想想吧，想想总有人在背后给您加油，期待着你的凯旋而归。千万不要放弃，放弃了一切都没有了。 休息吧，可以低迷，但不要沉沦。释放吧，可以大声喊叫，但不要把自己困住。</p><p>生活总是需要向前看的，不要低着头走路哇！</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>说起解压</title>
      <link href="/2021/01/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-01-26-%E8%AF%B4%E8%B5%B7%E8%A7%A3%E5%8E%8B/"/>
      <url>/2021/01/26/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-01-26-%E8%AF%B4%E8%B5%B7%E8%A7%A3%E5%8E%8B/</url>
      
        <content type="html"><![CDATA[<hr><div style="text-align:center;"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=530 height=90 src="//music.163.com/outchain/player?type=2&id=1851228571&auto=1&height=66"></iframe></div><hr><p>说起解压，成年人的世界永远离不开这些社交工具</p><p>而最常见的方式，也无过于发一条充满情绪的朋友圈，细数这个世界有多么地难为你：身边的人有多么闹心，堆积如山的工作有多么烦心，以及那个人突然不爱你……</p><p>不过，这样的朋友圈，往往发出后不到一分钟，又会被默默删除，仿佛什么事也不曾发生。</p><p>这大概是因为：现在的成年人不允许矫情了。</p><p>著名影星希斯莱杰说：“情绪这东西隐藏起来太憋屈，宣泄出来又太丢人。”</p><p>所以成年人的情绪控制，往往很自律，也很委屈。</p><p>自律在于，他们觉得自己应该无坚不摧，所以管理着情绪，不让家人、朋友、爱人看见一丝丝的负能量。而委屈就在于，即便心里再难过，也无处宣泄，只能一个人默默扛着。</p><p>就像一个Souler私聊，说：“平时在生活，遭遇一些难过的时候，翻翻手机的通讯录，突然发现竟然没有什么人可以聊天了。哪怕偶尔在朋友圈发了一条动态，很快又会有‘是不是太矫情了’，‘算了吧，好负能量’，‘爸妈不会看见吧’这样的情绪找上门来，很快，也就删除了。也许只有和你聊聊，才能说说心里话吧”</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>各退一步的爱</title>
      <link href="/2021/01/21/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-01-21-%E5%90%84%E9%80%80%E4%B8%80%E6%AD%A5%E7%9A%84%E7%88%B1/"/>
      <url>/2021/01/21/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2021-01-21-%E5%90%84%E9%80%80%E4%B8%80%E6%AD%A5%E7%9A%84%E7%88%B1/</url>
      
        <content type="html"><![CDATA[<p>有时候会发现，喜欢一个人会很累。</p><p>喜欢一个人却得不到回应时，更累。</p><p>那是因为，你的付出并不是对方真正需要的。</p><p>所以再多的付出也不会收获感恩和真心，只会让这段关系徒增沉重的压力。</p><p>有句话说：</p><p>“人与人之间想要保持长久舒适的关系，靠的是共性和吸引 ，而不是压迫、捆绑，奉承和一味的付出，以及道德式的自我感动。”</p><p>爱也要有度，不能以爱的名义把自己的想法强加于人。</p><p>所以还是坦诚一点好了，想要什么就直接说，付出的时候也看看对方是否真的需要。</p><p>如果可以，少一些无谓的奉献和牺牲。</p><p>让我们爱得舒服，且自在。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>感情伤时，忆流年</title>
      <link href="/2020/02/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2020-02-24-%E6%84%9F%E6%83%85%E4%BC%A4%E6%97%B6%EF%BC%8C%E5%BF%86%E6%B5%81%E5%B9%B4/"/>
      <url>/2020/02/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/2020-02-24-%E6%84%9F%E6%83%85%E4%BC%A4%E6%97%B6%EF%BC%8C%E5%BF%86%E6%B5%81%E5%B9%B4/</url>
      
        <content type="html"><![CDATA[<p>今天刷qq的时候，偶然看见好久不用的高中同学群发来了消息。男生回学校搬桌子，女生擦窗户，注意配合。</p><p>我慌慌张张的打开了这尘封不知道多久的群，打开看之后，一片空白，原来是我忘记删除消息记录了。不由得一阵失望。</p><p>谁能想到，我高中迫不及待地想离开的学校，在今天，回忆都是带着泪光。从未想到过有这样的一天。</p><p>我承认我的高中生活丰富多彩！以至于堕落至此，但是，那仍是我不可磨灭的回忆。我这个人是比较个人化的，大事面前，从来不会顾及别人的脸面和感受，说话咄咄逼人，从来不退让。似乎吧，我从来没又让人喜欢过。</p><p>渐渐的，我开始说话少了，开始闷着头也不学习，自己玩自己的，一个人去吃饭，一个人去厕所，一个人回宿舍，仿佛我与世隔绝了一般。知道有一天，有这么一个人出来了“他是我兄弟，我说不行就是不行”</p><p>我不知道他当初说这句话是如何心情，反正我是震惊到了。的确，我俩就像不是一个世界的，他朋友好多，开放，爽朗，阳光，有责任感，聊得来。在我眼里，他好像万丈光芒一般，照耀着我。渐渐的我开始像他学习，跟他熟识，没想到我俩家离得超极近。</p><p>很有幸认识他，时光也证明，他是个挚友。现在我俩还是一直讨论，每次和他聊天都很舒适，我俩聊过香港问题，微博热搜的人，对这次疫情的看法。</p><p>他总是和我说：我是艺术的脑袋，看花就想到了世界的美妙于人生的享受，你是理性的头脑，看车就想到了车的建模和代码。<br>事实证明他说的很对，不过有他在，我也渐渐地被他“同化”我跟他学到好多，不管是责任心，意志力还是别的，他就像一个老师，教会了我很多。</p><p>朋友嘛！多不多的不重要，真心就够了。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbix时区提示错误</title>
      <link href="/2020/02/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2020-02-24-zabbix%E6%97%B6%E5%8C%BA%E6%8F%90%E7%A4%BA%E9%94%99%E8%AF%AF/"/>
      <url>/2020/02/24/%E5%B7%B2%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/linux/2020-02-24-zabbix%E6%97%B6%E5%8C%BA%E6%8F%90%E7%A4%BA%E9%94%99%E8%AF%AF/</url>
      
        <content type="html"><![CDATA[<p>更改php.ini配置文件的设置，去掉date.timezone的注释，将时区改为Asia&#x2F;Shanghai</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/php.ini </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Date]</span><br><span class="line"></span><br><span class="line">; Defines the default timezone used by the datefunctions</span><br><span class="line"></span><br><span class="line">; http://php.net/date.timezone</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">date.timezone=Asia/Shanghai </span><br></pre></td></tr></table></figure><p>将最前面的分号去掉，上面时区改成亚洲上海。</p><p>查看并修改&#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;zabbix.conf配置文件的配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.d/zabbix.conf </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Options FollowSymLinksAllowOverride None</span><br><span class="line"></span><br><span class="line">Order allow,deny</span><br><span class="line"></span><br><span class="line">Allow from all</span><br><span class="line"></span><br><span class="line">php_value max_execution_time 300</span><br><span class="line"></span><br><span class="line">php_value memory_limit 128M</span><br><span class="line"></span><br><span class="line">php_value post_max_size 16M</span><br><span class="line"></span><br><span class="line">php_value upload_max_filesize 2M</span><br><span class="line"></span><br><span class="line">php_value max_input_time 300</span><br><span class="line"></span><br><span class="line">php_value date.timezone Asia/Shanghai </span><br></pre></td></tr></table></figure><p>重启httpd服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd </span><br></pre></td></tr></table></figure><p>重新刷新网页即可</p>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
